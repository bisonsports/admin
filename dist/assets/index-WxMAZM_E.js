(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var dv={exports:{}},oc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SA=Symbol.for("react.transitional.element"),AA=Symbol.for("react.fragment");function mv(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:SA,type:t,key:i,ref:e!==void 0?e:null,props:n}}oc.Fragment=AA;oc.jsx=mv;oc.jsxs=mv;dv.exports=oc;var g=dv.exports,gv={exports:{}},te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Id=Symbol.for("react.transitional.element"),wA=Symbol.for("react.portal"),RA=Symbol.for("react.fragment"),IA=Symbol.for("react.strict_mode"),CA=Symbol.for("react.profiler"),xA=Symbol.for("react.consumer"),NA=Symbol.for("react.context"),DA=Symbol.for("react.forward_ref"),OA=Symbol.for("react.suspense"),MA=Symbol.for("react.memo"),pv=Symbol.for("react.lazy"),yp=Symbol.iterator;function kA(t){return t===null||typeof t!="object"?null:(t=yp&&t[yp]||t["@@iterator"],typeof t=="function"?t:null)}var yv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_v=Object.assign,vv={};function Xr(t,e,n){this.props=t,this.context=e,this.refs=vv,this.updater=n||yv}Xr.prototype.isReactComponent={};Xr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ev(){}Ev.prototype=Xr.prototype;function Cd(t,e,n){this.props=t,this.context=e,this.refs=vv,this.updater=n||yv}var xd=Cd.prototype=new Ev;xd.constructor=Cd;_v(xd,Xr.prototype);xd.isPureReactComponent=!0;var _p=Array.isArray,xe={H:null,A:null,T:null,S:null},Tv=Object.prototype.hasOwnProperty;function Nd(t,e,n,i,s,r){return n=r.ref,{$$typeof:Id,type:t,key:e,ref:n!==void 0?n:null,props:r}}function VA(t,e){return Nd(t.type,e,void 0,void 0,void 0,t.props)}function Dd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Id}function PA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vp=/\/+/g;function gh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PA(""+t.key):e.toString(36)}function Ep(){}function LA(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Ep,Ep):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function er(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Id:case wA:a=!0;break;case pv:return a=t._init,er(a(t._payload),e,n,i,s)}}if(a)return s=s(t),a=i===""?"."+gh(t,0):i,_p(s)?(n="",a!=null&&(n=a.replace(vp,"$&/")+"/"),er(s,e,n,"",function(h){return h})):s!=null&&(Dd(s)&&(s=VA(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(vp,"$&/")+"/")+a)),e.push(s)),1;a=0;var l=i===""?".":i+":";if(_p(t))for(var u=0;u<t.length;u++)i=t[u],r=l+gh(i,u),a+=er(i,e,n,r,s);else if(u=kA(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,r=l+gh(i,u++),a+=er(i,e,n,r,s);else if(r==="object"){if(typeof t.then=="function")return er(LA(t),e,n,i,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Sl(t,e,n){if(t==null)return t;var i=[],s=0;return er(t,i,"","",function(r){return e.call(n,r,s++)}),i}function UA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tp=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function jA(){}te.Children={map:Sl,forEach:function(t,e,n){Sl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sl(t,function(){e++}),e},toArray:function(t){return Sl(t,function(e){return e})||[]},only:function(t){if(!Dd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Xr;te.Fragment=RA;te.Profiler=CA;te.PureComponent=Cd;te.StrictMode=IA;te.Suspense=OA;te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=xe;te.act=function(){throw Error("act(...) is not supported in production builds of React.")};te.cache=function(t){return function(){return t.apply(null,arguments)}};te.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=_v({},t.props),s=t.key,r=void 0;if(e!=null)for(a in e.ref!==void 0&&(r=void 0),e.key!==void 0&&(s=""+e.key),e)!Tv.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(i[a]=e[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Nd(t.type,s,void 0,void 0,r,i)};te.createContext=function(t){return t={$$typeof:NA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:xA,_context:t},t};te.createElement=function(t,e,n){var i,s={},r=null;if(e!=null)for(i in e.key!==void 0&&(r=""+e.key),e)Tv.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return Nd(t,r,void 0,void 0,null,s)};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:DA,render:t}};te.isValidElement=Dd;te.lazy=function(t){return{$$typeof:pv,_payload:{_status:-1,_result:t},_init:UA}};te.memo=function(t,e){return{$$typeof:MA,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=xe.T,n={};xe.T=n;try{var i=t(),s=xe.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(jA,Tp)}catch(r){Tp(r)}finally{xe.T=e}};te.unstable_useCacheRefresh=function(){return xe.H.useCacheRefresh()};te.use=function(t){return xe.H.use(t)};te.useActionState=function(t,e,n){return xe.H.useActionState(t,e,n)};te.useCallback=function(t,e){return xe.H.useCallback(t,e)};te.useContext=function(t){return xe.H.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t,e){return xe.H.useDeferredValue(t,e)};te.useEffect=function(t,e){return xe.H.useEffect(t,e)};te.useId=function(){return xe.H.useId()};te.useImperativeHandle=function(t,e,n){return xe.H.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return xe.H.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return xe.H.useLayoutEffect(t,e)};te.useMemo=function(t,e){return xe.H.useMemo(t,e)};te.useOptimistic=function(t,e){return xe.H.useOptimistic(t,e)};te.useReducer=function(t,e,n){return xe.H.useReducer(t,e,n)};te.useRef=function(t){return xe.H.useRef(t)};te.useState=function(t){return xe.H.useState(t)};te.useSyncExternalStore=function(t,e,n){return xe.H.useSyncExternalStore(t,e,n)};te.useTransition=function(){return xe.H.useTransition()};te.version="19.0.0";gv.exports=te;var B=gv.exports,bv={exports:{}},lc={},Sv={exports:{}},Av={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,W){var X=q.length;q.push(W);e:for(;0<X;){var ye=X-1>>>1,H=q[ye];if(0<s(H,W))q[ye]=W,q[X]=H,X=ye;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var W=q[0],X=q.pop();if(X!==W){q[0]=X;e:for(var ye=0,H=q.length,ie=H>>>1;ye<ie;){var oe=2*(ye+1)-1,Y=q[oe],_e=oe+1,Fe=q[_e];if(0>s(Y,X))_e<H&&0>s(Fe,Y)?(q[ye]=Fe,q[_e]=X,ye=_e):(q[ye]=Y,q[oe]=X,ye=oe);else if(_e<H&&0>s(Fe,X))q[ye]=Fe,q[_e]=X,ye=_e;else break e}}return W}function s(q,W){var X=q.sortIndex-W.sortIndex;return X!==0?X:q.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,p=null,m=3,v=!1,C=!1,O=!1,k=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function S(q){for(var W=n(h);W!==null;){if(W.callback===null)i(h);else if(W.startTime<=q)i(h),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(h)}}function x(q){if(O=!1,S(q),!C)if(n(u)!==null)C=!0,Ve();else{var W=n(h);W!==null&&ut(x,W.startTime-q)}}var V=!1,P=-1,T=5,_=-1;function b(){return!(t.unstable_now()-_<T)}function w(){if(V){var q=t.unstable_now();_=q;var W=!0;try{e:{C=!1,O&&(O=!1,A(P),P=-1),v=!0;var X=m;try{t:{for(S(q),p=n(u);p!==null&&!(p.expirationTime>q&&b());){var ye=p.callback;if(typeof ye=="function"){p.callback=null,m=p.priorityLevel;var H=ye(p.expirationTime<=q);if(q=t.unstable_now(),typeof H=="function"){p.callback=H,S(q),W=!0;break t}p===n(u)&&i(u),S(q)}else i(u);p=n(u)}if(p!==null)W=!0;else{var ie=n(h);ie!==null&&ut(x,ie.startTime-q),W=!1}}break e}finally{p=null,m=X,v=!1}W=void 0}}finally{W?I():V=!1}}}var I;if(typeof E=="function")I=function(){E(w)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,R=N.port2;N.port1.onmessage=w,I=function(){R.postMessage(null)}}else I=function(){k(w,0)};function Ve(){V||(V=!0,I())}function ut(q,W){P=k(function(){q(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){C||v||(C=!0,Ve())},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var X=m;m=W;try{return q()}finally{m=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,W){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var X=m;m=q;try{return W()}finally{m=X}},t.unstable_scheduleCallback=function(q,W,X){var ye=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ye+X:ye):X=ye,q){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=X+H,q={id:d++,callback:W,priorityLevel:q,startTime:X,expirationTime:H,sortIndex:-1},X>ye?(q.sortIndex=X,e(h,q),n(u)===null&&q===n(h)&&(O?(A(P),P=-1):O=!0,ut(x,X-ye))):(q.sortIndex=H,e(u,q),C||v||(C=!0,Ve())),q},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(q){var W=m;return function(){var X=m;m=W;try{return q.apply(this,arguments)}finally{m=X}}}})(Av);Sv.exports=Av;var zA=Sv.exports,wv={exports:{}},Rt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BA=B;function Rv(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function fi(){}var St={d:{f:fi,r:function(){throw Error(Rv(522))},D:fi,C:fi,L:fi,m:fi,X:fi,S:fi,M:fi},p:0,findDOMNode:null},qA=Symbol.for("react.portal");function HA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qA,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Fa=BA.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function uc(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Rt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=St;Rt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Rv(299));return HA(t,e,null,n)};Rt.flushSync=function(t){var e=Fa.T,n=St.p;try{if(Fa.T=null,St.p=2,t)return t()}finally{Fa.T=e,St.p=n,St.d.f()}};Rt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,St.d.C(t,e))};Rt.prefetchDNS=function(t){typeof t=="string"&&St.d.D(t)};Rt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=uc(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?St.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&St.d.X(t,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Rt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=uc(e.as,e.crossOrigin);St.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&St.d.M(t)};Rt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=uc(n,e.crossOrigin);St.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Rt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=uc(e.as,e.crossOrigin);St.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else St.d.m(t)};Rt.requestFormReset=function(t){St.d.r(t)};Rt.unstable_batchedUpdates=function(t,e){return t(e)};Rt.useFormState=function(t,e,n){return Fa.H.useFormState(t,e,n)};Rt.useFormStatus=function(){return Fa.H.useHostTransitionStatus()};Rt.version="19.0.0";function Iv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Iv)}catch(t){console.error(t)}}Iv(),wv.exports=Rt;var FA=wv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $e=zA,Cv=B,GA=FA;function j(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function xv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}var KA=Symbol.for("react.element"),Al=Symbol.for("react.transitional.element"),Ma=Symbol.for("react.portal"),lr=Symbol.for("react.fragment"),Nv=Symbol.for("react.strict_mode"),uf=Symbol.for("react.profiler"),QA=Symbol.for("react.provider"),Dv=Symbol.for("react.consumer"),Pn=Symbol.for("react.context"),Od=Symbol.for("react.forward_ref"),cf=Symbol.for("react.suspense"),hf=Symbol.for("react.suspense_list"),Md=Symbol.for("react.memo"),yi=Symbol.for("react.lazy"),Ov=Symbol.for("react.offscreen"),YA=Symbol.for("react.memo_cache_sentinel"),bp=Symbol.iterator;function Aa(t){return t===null||typeof t!="object"?null:(t=bp&&t[bp]||t["@@iterator"],typeof t=="function"?t:null)}var $A=Symbol.for("react.client.reference");function ff(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===$A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case lr:return"Fragment";case Ma:return"Portal";case uf:return"Profiler";case Nv:return"StrictMode";case cf:return"Suspense";case hf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pn:return(t.displayName||"Context")+".Provider";case Dv:return(t._context.displayName||"Context")+".Consumer";case Od:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Md:return e=t.displayName||null,e!==null?e:ff(t.type)||"Memo";case yi:e=t._payload,t=t._init;try{return ff(t(e))}catch{}}return null}var ee=Cv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re=Object.assign,ph,Sp;function ka(t){if(ph===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ph=e&&e[1]||"",Sp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ph+t+Sp}var yh=!1;function _h(t,e){if(!t||yh)return"";yh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(v){var m=v}Reflect.construct(t,[],p)}else{try{p.call()}catch(v){m=v}t.call(p.prototype)}}else{try{throw Error()}catch(v){m=v}(p=t())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(v){if(v&&m&&typeof v.stack=="string")return[v.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<h.length&&!h[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===h.length)for(i=u.length-1,s=h.length-1;1<=i&&0<=s&&u[i]!==h[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==h[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==h[s]){var d=`
`+u[i].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=i&&0<=s);break}}}finally{yh=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?ka(n):""}function XA(t){switch(t.tag){case 26:case 27:case 5:return ka(t.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 15:return t=_h(t.type,!1),t;case 11:return t=_h(t.type.render,!1),t;case 1:return t=_h(t.type,!0),t;default:return""}}function Ap(t){try{var e="";do e+=XA(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Wr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Mv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function wp(t){if(Wr(t)!==t)throw Error(j(188))}function WA(t){var e=t.alternate;if(!e){if(e=Wr(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return wp(s),t;if(r===i)return wp(s),e;r=r.sibling}throw Error(j(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(j(189))}}if(n.alternate!==i)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function kv(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=kv(t),e!==null)return e;t=t.sibling}return null}var Va=Array.isArray,we=GA.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vs={pending:!1,data:null,method:null,action:null},df=[],ur=-1;function Sn(t){return{current:t}}function et(t){0>ur||(t.current=df[ur],df[ur]=null,ur--)}function Ie(t,e){ur++,df[ur]=t.current,t.current=e}var mn=Sn(null),ho=Sn(null),xi=Sn(null),du=Sn(null);function mu(t,e){switch(Ie(xi,e),Ie(ho,t),Ie(mn,null),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)&&(e=e.namespaceURI)?Ry(e):0;break;default:if(t=t===8?e.parentNode:e,e=t.tagName,t=t.namespaceURI)t=Ry(t),e=KE(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}et(mn),Ie(mn,e)}function Dr(){et(mn),et(ho),et(xi)}function mf(t){t.memoizedState!==null&&Ie(du,t);var e=mn.current,n=KE(e,t.type);e!==n&&(Ie(ho,t),Ie(mn,n))}function gu(t){ho.current===t&&(et(mn),et(ho)),du.current===t&&(et(du),So._currentValue=vs)}var gf=Object.prototype.hasOwnProperty,kd=$e.unstable_scheduleCallback,vh=$e.unstable_cancelCallback,ZA=$e.unstable_shouldYield,JA=$e.unstable_requestPaint,gn=$e.unstable_now,ew=$e.unstable_getCurrentPriorityLevel,Vv=$e.unstable_ImmediatePriority,Pv=$e.unstable_UserBlockingPriority,pu=$e.unstable_NormalPriority,tw=$e.unstable_LowPriority,Lv=$e.unstable_IdlePriority,nw=$e.log,iw=$e.unstable_setDisableYieldValue,Po=null,zt=null;function sw(t){if(zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Po,t,void 0,(t.current.flags&128)===128)}catch{}}function Ri(t){if(typeof nw=="function"&&iw(t),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(Po,t)}catch{}}var Bt=Math.clz32?Math.clz32:ow,rw=Math.log,aw=Math.LN2;function ow(t){return t>>>=0,t===0?32:31-(rw(t)/aw|0)|0}var wl=128,Rl=4194304;function hs(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function cc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,a=t.warmLanes;t=t.finishedLanes!==0;var l=n&134217727;return l!==0?(n=l&~s,n!==0?i=hs(n):(r&=l,r!==0?i=hs(r):t||(a=l&~a,a!==0&&(i=hs(a))))):(l=n&~s,l!==0?i=hs(l):r!==0?i=hs(r):t||(a=n&~a,a!==0&&(i=hs(a)))),i===0?0:e!==0&&e!==i&&!(e&s)&&(s=i&-i,a=e&-e,s>=a||s===32&&(a&4194176)!==0)?e:i}function Lo(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function lw(t,e){switch(t){case 1:case 2:case 4:case 8:return e+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uv(){var t=wl;return wl<<=1,!(wl&4194176)&&(wl=128),t}function jv(){var t=Rl;return Rl<<=1,!(Rl&62914560)&&(Rl=4194304),t}function Eh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Uo(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function uw(t,e,n,i,s,r){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,h=t.hiddenUpdates;for(n=a&~n;0<n;){var d=31-Bt(n),p=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var v=m[d];v!==null&&(v.lane&=-536870913)}n&=~p}i!==0&&zv(t,i,0),r!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=r&~(a&~e))}function zv(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-Bt(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&4194218}function Bv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Bt(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}function qv(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function Hv(){var t=we.p;return t!==0?t:(t=window.event,t===void 0?32:nT(t.type))}function cw(t,e){var n=we.p;try{return we.p=t,e()}finally{we.p=n}}var Ji=Math.random().toString(36).slice(2),pt="__reactFiber$"+Ji,Ot="__reactProps$"+Ji,Zr="__reactContainer$"+Ji,pf="__reactEvents$"+Ji,hw="__reactListeners$"+Ji,fw="__reactHandles$"+Ji,Rp="__reactResources$"+Ji,fo="__reactMarker$"+Ji;function Vd(t){delete t[pt],delete t[Ot],delete t[pf],delete t[hw],delete t[fw]}function gs(t){var e=t[pt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zr]||n[pt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cy(t);t!==null;){if(n=t[pt])return n;t=Cy(t)}return e}t=n,n=t.parentNode}return null}function Jr(t){if(t=t[pt]||t[Zr]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function Pa(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(j(33))}function vr(t){var e=t[Rp];return e||(e=t[Rp]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Ze(t){t[fo]=!0}var Fv=new Set,Gv={};function Ls(t,e){Or(t,e),Or(t+"Capture",e)}function Or(t,e){for(Gv[t]=e,t=0;t<e.length;t++)Fv.add(e[t])}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ip={},Cp={};function mw(t){return gf.call(Cp,t)?!0:gf.call(Ip,t)?!1:dw.test(t)?Cp[t]=!0:(Ip[t]=!0,!1)}function Gl(t,e,n){if(mw(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Il(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Cn(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Qt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gw(t){var e=Kv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yu(t){t._valueTracker||(t._valueTracker=gw(t))}function Qv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Kv(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function _u(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var pw=/[\n"\\]/g;function Xt(t){return t.replace(pw,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function yf(t,e,n,i,s,r,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Qt(e)):t.value!==""+Qt(e)&&(t.value=""+Qt(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?_f(t,a,Qt(e)):n!=null?_f(t,a,Qt(n)):i!=null&&t.removeAttribute("value"),s==null&&r!=null&&(t.defaultChecked=!!r),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Qt(l):t.removeAttribute("name")}function Yv(t,e,n,i,s,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null))return;n=n!=null?""+Qt(n):"",e=e!=null?""+Qt(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function _f(t,e,n){e==="number"&&_u(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Er(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Qt(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function $v(t,e,n){if(e!=null&&(e=""+Qt(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Qt(n):""}function Xv(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(j(92));if(Va(i)){if(1<i.length)throw Error(j(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Qt(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i)}function Mr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xp(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||yw.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Wv(t,e,n){if(e!=null&&typeof e!="object")throw Error(j(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var s in e)i=e[s],e.hasOwnProperty(s)&&n[s]!==i&&xp(t,s,i)}else for(var r in e)e.hasOwnProperty(r)&&xp(t,r,e[r])}function Pd(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _w=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kl(t){return vw.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var vf=null;function Ld(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cr=null,Tr=null;function Np(t){var e=Jr(t);if(e&&(t=e.stateNode)){var n=t[Ot]||null;e:switch(t=e.stateNode,e.type){case"input":if(yf(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Xt(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=i[Ot]||null;if(!s)throw Error(j(90));yf(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&Qv(i)}break e;case"textarea":$v(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Er(t,!!n.multiple,e,!1)}}}var Th=!1;function Zv(t,e,n){if(Th)return t(e,n);Th=!0;try{var i=t(e);return i}finally{if(Th=!1,(cr!==null||Tr!==null)&&(Ec(),cr&&(e=cr,t=Tr,Tr=cr=null,Np(e),t)))for(e=0;e<t.length;e++)Np(t[e])}}function mo(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Ot]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var Ef=!1;if(Yn)try{var wa={};Object.defineProperty(wa,"passive",{get:function(){Ef=!0}}),window.addEventListener("test",wa,wa),window.removeEventListener("test",wa,wa)}catch{Ef=!1}var Ii=null,Ud=null,Ql=null;function Jv(){if(Ql)return Ql;var t,e=Ud,n=e.length,i,s="value"in Ii?Ii.value:Ii.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===s[r-i];i++);return Ql=s.slice(t,1<i?1-i:void 0)}function Yl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cl(){return!0}function Dp(){return!1}function Mt(t){function e(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Cl:Dp,this.isPropagationStopped=Dp,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),e}var Us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hc=Mt(Us),jo=Re({},Us,{view:0,detail:0}),Ew=Mt(jo),bh,Sh,Ra,fc=Re({},jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ra&&(Ra&&t.type==="mousemove"?(bh=t.screenX-Ra.screenX,Sh=t.screenY-Ra.screenY):Sh=bh=0,Ra=t),bh)},movementY:function(t){return"movementY"in t?t.movementY:Sh}}),Op=Mt(fc),Tw=Re({},fc,{dataTransfer:0}),bw=Mt(Tw),Sw=Re({},jo,{relatedTarget:0}),Ah=Mt(Sw),Aw=Re({},Us,{animationName:0,elapsedTime:0,pseudoElement:0}),ww=Mt(Aw),Rw=Re({},Us,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Iw=Mt(Rw),Cw=Re({},Us,{data:0}),Mp=Mt(Cw),xw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ow(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Dw[t])?!!e[t]:!1}function jd(){return Ow}var Mw=Re({},jo,{key:function(t){if(t.key){var e=xw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Nw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jd,charCode:function(t){return t.type==="keypress"?Yl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kw=Mt(Mw),Vw=Re({},fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kp=Mt(Vw),Pw=Re({},jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jd}),Lw=Mt(Pw),Uw=Re({},Us,{propertyName:0,elapsedTime:0,pseudoElement:0}),jw=Mt(Uw),zw=Re({},fc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Bw=Mt(zw),qw=Re({},Us,{newState:0,oldState:0}),Hw=Mt(qw),Fw=[9,13,27,32],zd=Yn&&"CompositionEvent"in window,Ga=null;Yn&&"documentMode"in document&&(Ga=document.documentMode);var Gw=Yn&&"TextEvent"in window&&!Ga,e0=Yn&&(!zd||Ga&&8<Ga&&11>=Ga),Vp=" ",Pp=!1;function t0(t,e){switch(t){case"keyup":return Fw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function n0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hr=!1;function Kw(t,e){switch(t){case"compositionend":return n0(e);case"keypress":return e.which!==32?null:(Pp=!0,Vp);case"textInput":return t=e.data,t===Vp&&Pp?null:t;default:return null}}function Qw(t,e){if(hr)return t==="compositionend"||!zd&&t0(t,e)?(t=Jv(),Ql=Ud=Ii=null,hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return e0&&e.locale!=="ko"?null:e.data;default:return null}}var Yw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Yw[t.type]:e==="textarea"}function i0(t,e,n,i){cr?Tr?Tr.push(i):Tr=[i]:cr=i,e=ku(e,"onChange"),0<e.length&&(n=new hc("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ka=null,go=null;function $w(t){HE(t,0)}function dc(t){var e=Pa(t);if(Qv(e))return t}function Up(t,e){if(t==="change")return e}var s0=!1;if(Yn){var wh;if(Yn){var Rh="oninput"in document;if(!Rh){var jp=document.createElement("div");jp.setAttribute("oninput","return;"),Rh=typeof jp.oninput=="function"}wh=Rh}else wh=!1;s0=wh&&(!document.documentMode||9<document.documentMode)}function zp(){Ka&&(Ka.detachEvent("onpropertychange",r0),go=Ka=null)}function r0(t){if(t.propertyName==="value"&&dc(go)){var e=[];i0(e,go,t,Ld(t)),Zv($w,e)}}function Xw(t,e,n){t==="focusin"?(zp(),Ka=e,go=n,Ka.attachEvent("onpropertychange",r0)):t==="focusout"&&zp()}function Ww(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dc(go)}function Zw(t,e){if(t==="click")return dc(e)}function Jw(t,e){if(t==="input"||t==="change")return dc(e)}function e1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:e1;function po(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!gf.call(e,s)||!Ht(t[s],e[s]))return!1}return!0}function Bp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qp(t,e){var n=Bp(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bp(n)}}function a0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?a0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function o0(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=_u(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_u(t.document)}return e}function Bd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function t1(t,e){var n=o0(e);e=t.focusedElem;var i=t.selectionRange;if(n!==e&&e&&e.ownerDocument&&a0(e.ownerDocument.documentElement,e)){if(i!==null&&Bd(e)){if(t=i.start,n=i.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var s=e.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=qp(e,r);var a=qp(e,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(t),n.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var n1=Yn&&"documentMode"in document&&11>=document.documentMode,fr=null,Tf=null,Qa=null,bf=!1;function Hp(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bf||fr==null||fr!==_u(i)||(i=fr,"selectionStart"in i&&Bd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Qa&&po(Qa,i)||(Qa=i,i=ku(Tf,"onSelect"),0<i.length&&(e=new hc("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=fr)))}function cs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var dr={animationend:cs("Animation","AnimationEnd"),animationiteration:cs("Animation","AnimationIteration"),animationstart:cs("Animation","AnimationStart"),transitionrun:cs("Transition","TransitionRun"),transitionstart:cs("Transition","TransitionStart"),transitioncancel:cs("Transition","TransitionCancel"),transitionend:cs("Transition","TransitionEnd")},Ih={},l0={};Yn&&(l0=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function js(t){if(Ih[t])return Ih[t];if(!dr[t])return t;var e=dr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in l0)return Ih[t]=e[n];return t}var u0=js("animationend"),c0=js("animationiteration"),h0=js("animationstart"),i1=js("transitionrun"),s1=js("transitionstart"),r1=js("transitioncancel"),f0=js("transitionend"),d0=new Map,Fp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function cn(t,e){d0.set(t,e),Ls(e,[t])}var Kt=[],mr=0,qd=0;function mc(){for(var t=mr,e=qd=mr=0;e<t;){var n=Kt[e];Kt[e++]=null;var i=Kt[e];Kt[e++]=null;var s=Kt[e];Kt[e++]=null;var r=Kt[e];if(Kt[e++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&m0(n,s,r)}}function gc(t,e,n,i){Kt[mr++]=t,Kt[mr++]=e,Kt[mr++]=n,Kt[mr++]=i,qd|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Hd(t,e,n,i){return gc(t,e,n,i),vu(t)}function Hi(t,e){return gc(t,null,null,e),vu(t)}function m0(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=t.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(s=!0)),t=r,r=r.return;s&&e!==null&&t.tag===3&&(r=t.stateNode,s=31-Bt(n),r=r.hiddenUpdates,t=r[s],t===null?r[s]=[e]:t.push(e),e.lane=n|536870912)}function vu(t){if(50<ro)throw ro=0,Ff=null,Error(j(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var gr={},Gp=new WeakMap;function Wt(t,e){if(typeof t=="object"&&t!==null){var n=Gp.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Ap(e)},Gp.set(t,e),e)}return{value:t,source:e,stack:Ap(e)}}var pr=[],yr=0,Eu=null,Tu=0,Yt=[],$t=0,Es=null,Ln=1,Un="";function fs(t,e){pr[yr++]=Tu,pr[yr++]=Eu,Eu=t,Tu=e}function g0(t,e,n){Yt[$t++]=Ln,Yt[$t++]=Un,Yt[$t++]=Es,Es=t;var i=Ln;t=Un;var s=32-Bt(i)-1;i&=~(1<<s),n+=1;var r=32-Bt(e)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Ln=1<<32-Bt(e)+s|n<<s|i,Un=r+t}else Ln=1<<r|n<<s|i,Un=t}function Fd(t){t.return!==null&&(fs(t,1),g0(t,1,0))}function Gd(t){for(;t===Eu;)Eu=pr[--yr],pr[yr]=null,Tu=pr[--yr],pr[yr]=null;for(;t===Es;)Es=Yt[--$t],Yt[$t]=null,Un=Yt[--$t],Yt[$t]=null,Ln=Yt[--$t],Yt[$t]=null}var bt=null,st=null,de=!1,an=null,fn=!1,Sf=Error(j(519));function ws(t){var e=Error(j(418,""));throw yo(Wt(e,t)),Sf}function Kp(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[pt]=t,e[Ot]=i,n){case"dialog":le("cancel",e),le("close",e);break;case"iframe":case"object":case"embed":le("load",e);break;case"video":case"audio":for(n=0;n<Eo.length;n++)le(Eo[n],e);break;case"source":le("error",e);break;case"img":case"image":case"link":le("error",e),le("load",e);break;case"details":le("toggle",e);break;case"input":le("invalid",e),Yv(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),yu(e);break;case"select":le("invalid",e);break;case"textarea":le("invalid",e),Xv(e,i.value,i.defaultValue,i.children),yu(e)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||GE(e.textContent,n)?(i.popover!=null&&(le("beforetoggle",e),le("toggle",e)),i.onScroll!=null&&le("scroll",e),i.onScrollEnd!=null&&le("scrollend",e),i.onClick!=null&&(e.onclick=bc),e=!0):e=!1,e||ws(t)}function Qp(t){for(bt=t.return;bt;)switch(bt.tag){case 3:case 27:fn=!0;return;case 5:case 13:fn=!1;return;default:bt=bt.return}}function Ia(t){if(t!==bt)return!1;if(!de)return Qp(t),de=!0,!1;var e=!1,n;if((n=t.tag!==3&&t.tag!==27)&&((n=t.tag===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Wf(t.type,t.memoizedProps)),n=!n),n&&(e=!0),e&&st&&ws(t),Qp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){st=on(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}st=null}}else st=bt?on(t.stateNode.nextSibling):null;return!0}function zo(){st=bt=null,de=!1}function yo(t){an===null?an=[t]:an.push(t)}var Ya=Error(j(460)),p0=Error(j(474)),Af={then:function(){}};function Yp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function xl(){}function y0(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(xl,xl),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,t===Ya?Error(j(483)):t;default:if(typeof e.status=="string")e.then(xl,xl);else{if(t=be,t!==null&&100<t.shellSuspendCounter)throw Error(j(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=i}},function(i){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,t===Ya?Error(j(483)):t}throw $a=e,Ya}}var $a=null;function $p(){if($a===null)throw Error(j(459));var t=$a;return $a=null,t}var br=null,_o=0;function Nl(t){var e=_o;return _o+=1,br===null&&(br=[]),y0(br,t,e)}function Ca(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Dl(t,e){throw e.$$typeof===KA?Error(j(525)):(t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Xp(t){var e=t._init;return e(t._payload)}function _0(t){function e(A,E){if(t){var S=A.deletions;S===null?(A.deletions=[E],A.flags|=16):S.push(E)}}function n(A,E){if(!t)return null;for(;E!==null;)e(A,E),E=E.sibling;return null}function i(A){for(var E=new Map;A!==null;)A.key!==null?E.set(A.key,A):E.set(A.index,A),A=A.sibling;return E}function s(A,E){return A=Oi(A,E),A.index=0,A.sibling=null,A}function r(A,E,S){return A.index=S,t?(S=A.alternate,S!==null?(S=S.index,S<E?(A.flags|=33554434,E):S):(A.flags|=33554434,E)):(A.flags|=1048576,E)}function a(A){return t&&A.alternate===null&&(A.flags|=33554434),A}function l(A,E,S,x){return E===null||E.tag!==6?(E=jh(S,A.mode,x),E.return=A,E):(E=s(E,S),E.return=A,E)}function u(A,E,S,x){var V=S.type;return V===lr?d(A,E,S.props.children,x,S.key):E!==null&&(E.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===yi&&Xp(V)===E.type)?(E=s(E,S.props),Ca(E,S),E.return=A,E):(E=Jl(S.type,S.key,S.props,null,A.mode,x),Ca(E,S),E.return=A,E)}function h(A,E,S,x){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=zh(S,A.mode,x),E.return=A,E):(E=s(E,S.children||[]),E.return=A,E)}function d(A,E,S,x,V){return E===null||E.tag!==7?(E=bs(S,A.mode,x,V),E.return=A,E):(E=s(E,S),E.return=A,E)}function p(A,E,S){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=jh(""+E,A.mode,S),E.return=A,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Al:return S=Jl(E.type,E.key,E.props,null,A.mode,S),Ca(S,E),S.return=A,S;case Ma:return E=zh(E,A.mode,S),E.return=A,E;case yi:var x=E._init;return E=x(E._payload),p(A,E,S)}if(Va(E)||Aa(E))return E=bs(E,A.mode,S,null),E.return=A,E;if(typeof E.then=="function")return p(A,Nl(E),S);if(E.$$typeof===Pn)return p(A,Ol(A,E),S);Dl(A,E)}return null}function m(A,E,S,x){var V=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return V!==null?null:l(A,E,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Al:return S.key===V?u(A,E,S,x):null;case Ma:return S.key===V?h(A,E,S,x):null;case yi:return V=S._init,S=V(S._payload),m(A,E,S,x)}if(Va(S)||Aa(S))return V!==null?null:d(A,E,S,x,null);if(typeof S.then=="function")return m(A,E,Nl(S),x);if(S.$$typeof===Pn)return m(A,E,Ol(A,S),x);Dl(A,S)}return null}function v(A,E,S,x,V){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return A=A.get(S)||null,l(E,A,""+x,V);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Al:return A=A.get(x.key===null?S:x.key)||null,u(E,A,x,V);case Ma:return A=A.get(x.key===null?S:x.key)||null,h(E,A,x,V);case yi:var P=x._init;return x=P(x._payload),v(A,E,S,x,V)}if(Va(x)||Aa(x))return A=A.get(S)||null,d(E,A,x,V,null);if(typeof x.then=="function")return v(A,E,S,Nl(x),V);if(x.$$typeof===Pn)return v(A,E,S,Ol(E,x),V);Dl(E,x)}return null}function C(A,E,S,x){for(var V=null,P=null,T=E,_=E=0,b=null;T!==null&&_<S.length;_++){T.index>_?(b=T,T=null):b=T.sibling;var w=m(A,T,S[_],x);if(w===null){T===null&&(T=b);break}t&&T&&w.alternate===null&&e(A,T),E=r(w,E,_),P===null?V=w:P.sibling=w,P=w,T=b}if(_===S.length)return n(A,T),de&&fs(A,_),V;if(T===null){for(;_<S.length;_++)T=p(A,S[_],x),T!==null&&(E=r(T,E,_),P===null?V=T:P.sibling=T,P=T);return de&&fs(A,_),V}for(T=i(T);_<S.length;_++)b=v(T,A,_,S[_],x),b!==null&&(t&&b.alternate!==null&&T.delete(b.key===null?_:b.key),E=r(b,E,_),P===null?V=b:P.sibling=b,P=b);return t&&T.forEach(function(I){return e(A,I)}),de&&fs(A,_),V}function O(A,E,S,x){if(S==null)throw Error(j(151));for(var V=null,P=null,T=E,_=E=0,b=null,w=S.next();T!==null&&!w.done;_++,w=S.next()){T.index>_?(b=T,T=null):b=T.sibling;var I=m(A,T,w.value,x);if(I===null){T===null&&(T=b);break}t&&T&&I.alternate===null&&e(A,T),E=r(I,E,_),P===null?V=I:P.sibling=I,P=I,T=b}if(w.done)return n(A,T),de&&fs(A,_),V;if(T===null){for(;!w.done;_++,w=S.next())w=p(A,w.value,x),w!==null&&(E=r(w,E,_),P===null?V=w:P.sibling=w,P=w);return de&&fs(A,_),V}for(T=i(T);!w.done;_++,w=S.next())w=v(T,A,_,w.value,x),w!==null&&(t&&w.alternate!==null&&T.delete(w.key===null?_:w.key),E=r(w,E,_),P===null?V=w:P.sibling=w,P=w);return t&&T.forEach(function(N){return e(A,N)}),de&&fs(A,_),V}function k(A,E,S,x){if(typeof S=="object"&&S!==null&&S.type===lr&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Al:e:{for(var V=S.key;E!==null;){if(E.key===V){if(V=S.type,V===lr){if(E.tag===7){n(A,E.sibling),x=s(E,S.props.children),x.return=A,A=x;break e}}else if(E.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===yi&&Xp(V)===E.type){n(A,E.sibling),x=s(E,S.props),Ca(x,S),x.return=A,A=x;break e}n(A,E);break}else e(A,E);E=E.sibling}S.type===lr?(x=bs(S.props.children,A.mode,x,S.key),x.return=A,A=x):(x=Jl(S.type,S.key,S.props,null,A.mode,x),Ca(x,S),x.return=A,A=x)}return a(A);case Ma:e:{for(V=S.key;E!==null;){if(E.key===V)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(A,E.sibling),x=s(E,S.children||[]),x.return=A,A=x;break e}else{n(A,E);break}else e(A,E);E=E.sibling}x=zh(S,A.mode,x),x.return=A,A=x}return a(A);case yi:return V=S._init,S=V(S._payload),k(A,E,S,x)}if(Va(S))return C(A,E,S,x);if(Aa(S)){if(V=Aa(S),typeof V!="function")throw Error(j(150));return S=V.call(S),O(A,E,S,x)}if(typeof S.then=="function")return k(A,E,Nl(S),x);if(S.$$typeof===Pn)return k(A,E,Ol(A,S),x);Dl(A,S)}return typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint"?(S=""+S,E!==null&&E.tag===6?(n(A,E.sibling),x=s(E,S),x.return=A,A=x):(n(A,E),x=jh(S,A.mode,x),x.return=A,A=x),a(A)):n(A,E)}return function(A,E,S,x){try{_o=0;var V=k(A,E,S,x);return br=null,V}catch(T){if(T===Ya)throw T;var P=Zt(29,T,null,A.mode);return P.lanes=x,P.return=A,P}finally{}}}var Rs=_0(!0),v0=_0(!1),kr=Sn(null),bu=Sn(0);function Wp(t,e){t=Wn,Ie(bu,t),Ie(kr,e),Wn=t|e.baseLanes}function wf(){Ie(bu,Wn),Ie(kr,kr.current)}function Kd(){Wn=bu.current,et(kr),et(bu)}var en=Sn(null),pn=null;function vi(t){var e=t.alternate;Ie(Ke,Ke.current&1),Ie(en,t),pn===null&&(e===null||kr.current!==null||e.memoizedState!==null)&&(pn=t)}function E0(t){if(t.tag===22){if(Ie(Ke,Ke.current),Ie(en,t),pn===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(pn=t)}}else Ei()}function Ei(){Ie(Ke,Ke.current),Ie(en,en.current)}function jn(t){et(en),pn===t&&(pn=null),et(Ke)}var Ke=Sn(0);function Su(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var a1=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},o1=$e.unstable_scheduleCallback,l1=$e.unstable_NormalPriority,Ge={$$typeof:Pn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qd(){return{controller:new a1,data:new Map,refCount:0}}function Bo(t){t.refCount--,t.refCount===0&&o1(l1,function(){t.controller.abort()})}var Xa=null,Rf=0,Vr=0,Sr=null;function u1(t,e){if(Xa===null){var n=Xa=[];Rf=0,Vr=pm(),Sr={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Rf++,e.then(Zp,Zp),e}function Zp(){if(--Rf===0&&Xa!==null){Sr!==null&&(Sr.status="fulfilled");var t=Xa;Xa=null,Vr=0,Sr=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function c1(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var Jp=ee.S;ee.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&u1(t,e),Jp!==null&&Jp(t,e)};var Ts=Sn(null);function Yd(){var t=Ts.current;return t!==null?t:be.pooledCache}function $l(t,e){e===null?Ie(Ts,Ts.current):Ie(Ts,e.pool)}function T0(){var t=Yd();return t===null?null:{parent:Ge._currentValue,pool:t}}var Fi=0,ne=null,pe=null,ze=null,Au=!1,Ar=!1,Is=!1,wu=0,vo=0,wr=null,h1=0;function Pe(){throw Error(j(321))}function $d(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function Xd(t,e,n,i,s,r){return Fi=r,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ee.H=t===null||t.memoizedState===null?zs:es,Is=!1,r=n(i,s),Is=!1,Ar&&(r=S0(e,n,i,s)),b0(t),r}function b0(t){ee.H=En;var e=pe!==null&&pe.next!==null;if(Fi=0,ze=pe=ne=null,Au=!1,vo=0,wr=null,e)throw Error(j(300));t===null||Je||(t=t.dependencies,t!==null&&Cu(t)&&(Je=!0))}function S0(t,e,n,i){ne=t;var s=0;do{if(Ar&&(wr=null),vo=0,Ar=!1,25<=s)throw Error(j(301));if(s+=1,ze=pe=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}ee.H=Bs,r=e(n,i)}while(Ar);return r}function f1(){var t=ee.H,e=t.useState()[0];return e=typeof e.then=="function"?qo(e):e,t=t.useState()[0],(pe!==null?pe.memoizedState:null)!==t&&(ne.flags|=1024),e}function Wd(){var t=wu!==0;return wu=0,t}function Zd(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Jd(t){if(Au){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Au=!1}Fi=0,ze=pe=ne=null,Ar=!1,vo=wu=0,wr=null}function It(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?ne.memoizedState=ze=t:ze=ze.next=t,ze}function qe(){if(pe===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=pe.next;var e=ze===null?ne.memoizedState:ze.next;if(e!==null)ze=e,pe=t;else{if(t===null)throw ne.alternate===null?Error(j(467)):Error(j(310));pe=t,t={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},ze===null?ne.memoizedState=ze=t:ze=ze.next=t}return ze}var pc;pc=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function qo(t){var e=vo;return vo+=1,wr===null&&(wr=[]),t=y0(wr,t,e),e=ne,(ze===null?e.memoizedState:ze.next)===null&&(e=e.alternate,ee.H=e===null||e.memoizedState===null?zs:es),t}function yc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return qo(t);if(t.$$typeof===Pn)return yt(t)}throw Error(j(438,String(t)))}function em(t){var e=null,n=ne.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=ne.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=pc(),ne.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=YA;return e.index++,n}function $n(t,e){return typeof e=="function"?e(t):e}function Xl(t){var e=qe();return tm(e,pe,t)}function tm(t,e,n){var i=t.queue;if(i===null)throw Error(j(311));i.lastRenderedReducer=n;var s=t.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}e.baseQueue=s=r,i.pending=null}if(r=t.baseState,s===null)t.memoizedState=r;else{e=s.next;var l=a=null,u=null,h=e,d=!1;do{var p=h.lane&-536870913;if(p!==h.lane?(he&p)===p:(Fi&p)===p){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),p===Vr&&(d=!0);else if((Fi&m)===m){h=h.next,m===Vr&&(d=!0);continue}else p={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=p,a=r):u=u.next=p,ne.lanes|=m,Ki|=m;p=h.action,Is&&n(r,p),r=h.hasEagerState?h.eagerState:n(r,p)}else m={lane:p,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=r):u=u.next=m,ne.lanes|=p,Ki|=p;h=h.next}while(h!==null&&h!==e);if(u===null?a=r:u.next=l,!Ht(r,t.memoizedState)&&(Je=!0,d&&(n=Sr,n!==null)))throw n;t.memoizedState=r,t.baseState=a,t.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Ch(t){var e=qe(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=t(r,a.action),a=a.next;while(a!==s);Ht(r,e.memoizedState)||(Je=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function A0(t,e,n){var i=ne,s=qe(),r=de;if(r){if(n===void 0)throw Error(j(407));n=n()}else n=e();var a=!Ht((pe||s).memoizedState,n);if(a&&(s.memoizedState=n,Je=!0),s=s.queue,nm(I0.bind(null,i,s,t),[t]),s.getSnapshot!==e||a||ze!==null&&ze.memoizedState.tag&1){if(i.flags|=2048,Pr(9,R0.bind(null,i,s,n,e),{destroy:void 0},null),be===null)throw Error(j(349));r||Fi&60||w0(i,e,n)}return n}function w0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e=pc(),ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function R0(t,e,n,i){e.value=n,e.getSnapshot=i,C0(e)&&x0(t)}function I0(t,e,n){return n(function(){C0(e)&&x0(t)})}function C0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function x0(t){var e=Hi(t,2);e!==null&&At(e,t,2)}function If(t){var e=It();if(typeof t=="function"){var n=t;if(t=n(),Is){Ri(!0);try{n()}finally{Ri(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:t},e}function N0(t,e,n,i){return t.baseState=n,tm(t,pe,typeof i=="function"?i:$n)}function d1(t,e,n,i,s){if(vc(t))throw Error(j(485));if(t=e.action,t!==null){var r={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};ee.T!==null?n(!0):r.isTransition=!1,i(r),n=e.pending,n===null?(r.next=e.pending=r,D0(e,r)):(r.next=n.next,e.pending=n.next=r)}}function D0(t,e){var n=e.action,i=e.payload,s=t.state;if(e.isTransition){var r=ee.T,a={};ee.T=a;try{var l=n(s,i),u=ee.S;u!==null&&u(a,l),ey(t,e,l)}catch(h){Cf(t,e,h)}finally{ee.T=r}}else try{r=n(s,i),ey(t,e,r)}catch(h){Cf(t,e,h)}}function ey(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){ty(t,e,i)},function(i){return Cf(t,e,i)}):ty(t,e,n)}function ty(t,e,n){e.status="fulfilled",e.value=n,O0(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,D0(t,n)))}function Cf(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,O0(e),e=e.next;while(e!==i)}t.action=null}function O0(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function M0(t,e){return e}function k0(t,e){if(de){var n=be.formState;if(n!==null){e:{var i=ne;if(de){if(st){t:{for(var s=st,r=fn;s.nodeType!==8;){if(!r){s=null;break t}if(s=on(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){st=on(s.nextSibling),i=s.data==="F!";break e}}ws(i)}i=!1}i&&(e=n[0])}}return n=It(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:M0,lastRenderedState:e},n.queue=i,n=W0.bind(null,ne,i),i.dispatch=n,i=If(!1),r=am.bind(null,ne,!1,i.queue),i=It(),s={state:e,dispatch:null,action:t,pending:null},i.queue=s,n=d1.bind(null,ne,s,r,n),s.dispatch=n,i.memoizedState=t,[e,n,!1]}function V0(t){var e=qe();return P0(e,pe,t)}function P0(t,e,n){e=tm(t,e,M0)[0],t=Xl($n)[0],e=typeof e=="object"&&e!==null&&typeof e.then=="function"?qo(e):e;var i=qe(),s=i.queue,r=s.dispatch;return n!==i.memoizedState&&(ne.flags|=2048,Pr(9,m1.bind(null,s,n),{destroy:void 0},null)),[e,r,t]}function m1(t,e){t.action=e}function L0(t){var e=qe(),n=pe;if(n!==null)return P0(e,n,t);qe(),e=e.memoizedState,n=qe();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Pr(t,e,n,i){return t={tag:t,create:e,inst:n,deps:i,next:null},e=ne.updateQueue,e===null&&(e=pc(),ne.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function U0(){return qe().memoizedState}function Wl(t,e,n,i){var s=It();ne.flags|=t,s.memoizedState=Pr(1|e,n,{destroy:void 0},i===void 0?null:i)}function _c(t,e,n,i){var s=qe();i=i===void 0?null:i;var r=s.memoizedState.inst;pe!==null&&i!==null&&$d(i,pe.memoizedState.deps)?s.memoizedState=Pr(e,n,r,i):(ne.flags|=t,s.memoizedState=Pr(1|e,n,r,i))}function ny(t,e){Wl(8390656,8,t,e)}function nm(t,e){_c(2048,8,t,e)}function j0(t,e){return _c(4,2,t,e)}function z0(t,e){return _c(4,4,t,e)}function B0(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function q0(t,e,n){n=n!=null?n.concat([t]):null,_c(4,4,B0.bind(null,e,t),n)}function im(){}function H0(t,e){var n=qe();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&$d(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function F0(t,e){var n=qe();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&$d(e,i[1]))return i[0];if(i=t(),Is){Ri(!0);try{t()}finally{Ri(!1)}}return n.memoizedState=[i,e],i}function sm(t,e,n){return n===void 0||Fi&1073741824?t.memoizedState=e:(t.memoizedState=n,t=OE(),ne.lanes|=t,Ki|=t,n)}function G0(t,e,n,i){return Ht(n,e)?n:kr.current!==null?(t=sm(t,n,i),Ht(t,e)||(Je=!0),t):Fi&42?(t=OE(),ne.lanes|=t,Ki|=t,e):(Je=!0,t.memoizedState=n)}function K0(t,e,n,i,s){var r=we.p;we.p=r!==0&&8>r?r:8;var a=ee.T,l={};ee.T=l,am(t,!1,e,n);try{var u=s(),h=ee.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=c1(u,i);Wa(t,e,d,qt(t))}else Wa(t,e,i,qt(t))}catch(p){Wa(t,e,{then:function(){},status:"rejected",reason:p},qt())}finally{we.p=r,ee.T=a}}function g1(){}function xf(t,e,n,i){if(t.tag!==5)throw Error(j(476));var s=Q0(t).queue;K0(t,s,e,vs,n===null?g1:function(){return Y0(t),n(i)})}function Q0(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:vs,baseState:vs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:vs},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$n,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Y0(t){var e=Q0(t).next.queue;Wa(t,e,{},qt())}function rm(){return yt(So)}function $0(){return qe().memoizedState}function X0(){return qe().memoizedState}function p1(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=qt();t=Ni(n);var i=Di(e,t,n);i!==null&&(At(i,e,n),Ja(i,e,n)),e={cache:Qd()},t.payload=e;return}e=e.return}}function y1(t,e,n){var i=qt();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},vc(t)?Z0(e,n):(n=Hd(t,e,n,i),n!==null&&(At(n,t,i),J0(n,e,i)))}function W0(t,e,n){var i=qt();Wa(t,e,n,i)}function Wa(t,e,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(vc(t))Z0(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,Ht(l,a))return gc(t,e,s,0),be===null&&mc(),!1}catch{}finally{}if(n=Hd(t,e,s,i),n!==null)return At(n,t,i),J0(n,e,i),!0}return!1}function am(t,e,n,i){if(i={lane:2,revertLane:pm(),action:i,hasEagerState:!1,eagerState:null,next:null},vc(t)){if(e)throw Error(j(479))}else e=Hd(t,n,i,2),e!==null&&At(e,t,2)}function vc(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function Z0(t,e){Ar=Au=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function J0(t,e,n){if(n&4194176){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Bv(t,n)}}var En={readContext:yt,use:yc,useCallback:Pe,useContext:Pe,useEffect:Pe,useImperativeHandle:Pe,useLayoutEffect:Pe,useInsertionEffect:Pe,useMemo:Pe,useReducer:Pe,useRef:Pe,useState:Pe,useDebugValue:Pe,useDeferredValue:Pe,useTransition:Pe,useSyncExternalStore:Pe,useId:Pe};En.useCacheRefresh=Pe;En.useMemoCache=Pe;En.useHostTransitionStatus=Pe;En.useFormState=Pe;En.useActionState=Pe;En.useOptimistic=Pe;var zs={readContext:yt,use:yc,useCallback:function(t,e){return It().memoizedState=[t,e===void 0?null:e],t},useContext:yt,useEffect:ny,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Wl(4194308,4,B0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wl(4194308,4,t,e)},useInsertionEffect:function(t,e){Wl(4,2,t,e)},useMemo:function(t,e){var n=It();e=e===void 0?null:e;var i=t();if(Is){Ri(!0);try{t()}finally{Ri(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=It();if(n!==void 0){var s=n(e);if(Is){Ri(!0);try{n(e)}finally{Ri(!1)}}}else s=e;return i.memoizedState=i.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=y1.bind(null,ne,t),[i.memoizedState,t]},useRef:function(t){var e=It();return t={current:t},e.memoizedState=t},useState:function(t){t=If(t);var e=t.queue,n=W0.bind(null,ne,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:im,useDeferredValue:function(t,e){var n=It();return sm(n,t,e)},useTransition:function(){var t=If(!1);return t=K0.bind(null,ne,t.queue,!0,!1),It().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=ne,s=It();if(de){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),be===null)throw Error(j(349));he&60||w0(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,ny(I0.bind(null,i,r,t),[t]),i.flags|=2048,Pr(9,R0.bind(null,i,r,n,e),{destroy:void 0},null),n},useId:function(){var t=It(),e=be.identifierPrefix;if(de){var n=Un,i=Ln;n=(i&~(1<<32-Bt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=wu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=h1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},useCacheRefresh:function(){return It().memoizedState=p1.bind(null,ne)}};zs.useMemoCache=em;zs.useHostTransitionStatus=rm;zs.useFormState=k0;zs.useActionState=k0;zs.useOptimistic=function(t){var e=It();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=am.bind(null,ne,!0,n),n.dispatch=e,[t,e]};var es={readContext:yt,use:yc,useCallback:H0,useContext:yt,useEffect:nm,useImperativeHandle:q0,useInsertionEffect:j0,useLayoutEffect:z0,useMemo:F0,useReducer:Xl,useRef:U0,useState:function(){return Xl($n)},useDebugValue:im,useDeferredValue:function(t,e){var n=qe();return G0(n,pe.memoizedState,t,e)},useTransition:function(){var t=Xl($n)[0],e=qe().memoizedState;return[typeof t=="boolean"?t:qo(t),e]},useSyncExternalStore:A0,useId:$0};es.useCacheRefresh=X0;es.useMemoCache=em;es.useHostTransitionStatus=rm;es.useFormState=V0;es.useActionState=V0;es.useOptimistic=function(t,e){var n=qe();return N0(n,pe,t,e)};var Bs={readContext:yt,use:yc,useCallback:H0,useContext:yt,useEffect:nm,useImperativeHandle:q0,useInsertionEffect:j0,useLayoutEffect:z0,useMemo:F0,useReducer:Ch,useRef:U0,useState:function(){return Ch($n)},useDebugValue:im,useDeferredValue:function(t,e){var n=qe();return pe===null?sm(n,t,e):G0(n,pe.memoizedState,t,e)},useTransition:function(){var t=Ch($n)[0],e=qe().memoizedState;return[typeof t=="boolean"?t:qo(t),e]},useSyncExternalStore:A0,useId:$0};Bs.useCacheRefresh=X0;Bs.useMemoCache=em;Bs.useHostTransitionStatus=rm;Bs.useFormState=L0;Bs.useActionState=L0;Bs.useOptimistic=function(t,e){var n=qe();return pe!==null?N0(n,pe,t,e):(n.baseState=t,[t,n.queue.dispatch])};function xh(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nf={isMounted:function(t){return(t=t._reactInternals)?Wr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=qt(),s=Ni(i);s.payload=e,n!=null&&(s.callback=n),e=Di(t,s,i),e!==null&&(At(e,t,i),Ja(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=qt(),s=Ni(i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Di(t,s,i),e!==null&&(At(e,t,i),Ja(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),i=Ni(n);i.tag=2,e!=null&&(i.callback=e),e=Di(t,i,n),e!==null&&(At(e,t,n),Ja(e,t,n))}};function iy(t,e,n,i,s,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,a):e.prototype&&e.prototype.isPureReactComponent?!po(n,i)||!po(s,r):!0}function sy(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Nf.enqueueReplaceState(e,e.state,null)}function Cs(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Re({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}var Ru=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function eE(t){Ru(t)}function tE(t){console.error(t)}function nE(t){Ru(t)}function Iu(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function ry(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Df(t,e,n){return n=Ni(n),n.tag=3,n.payload={element:null},n.callback=function(){Iu(t,e)},n}function iE(t){return t=Ni(t),t.tag=3,t}function sE(t,e,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;t.payload=function(){return s(r)},t.callback=function(){ry(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){ry(e,n,i),typeof s!="function"&&(Mi===null?Mi=new Set([this]):Mi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function _1(t,e,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Ho(e,n,s,!0),n=en.current,n!==null){switch(n.tag){case 13:return pn===null?Kf():n.alternate===null&&ke===0&&(ke=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===Af?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),qh(t,i,s)),!1;case 22:return n.flags|=65536,i===Af?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),qh(t,i,s)),!1}throw Error(j(435,n.tag))}return qh(t,i,s),Kf(),!1}if(de)return e=en.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,i!==Sf&&(t=Error(j(422),{cause:i}),yo(Wt(t,n)))):(i!==Sf&&(e=Error(j(423),{cause:i}),yo(Wt(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,i=Wt(i,n),s=Df(t.stateNode,i,s),Vh(t,s),ke!==4&&(ke=2)),!1;var r=Error(j(520),{cause:i});if(r=Wt(r,n),io===null?io=[r]:io.push(r),ke!==4&&(ke=2),e===null)return!0;i=Wt(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=Df(n.stateNode,i,t),Vh(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Mi===null||!Mi.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=iE(s),sE(s,t,n,i),Vh(n,s),!1}n=n.return}while(n!==null);return!1}var rE=Error(j(461)),Je=!1;function nt(t,e,n,i){e.child=t===null?v0(e,null,n,i):Rs(e,t.child,n,i)}function ay(t,e,n,i,s){n=n.render;var r=e.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return xs(e),i=Xd(t,e,n,a,r,s),l=Wd(),t!==null&&!Je?(Zd(t,e,s),Xn(t,e,s)):(de&&l&&Fd(e),e.flags|=1,nt(t,e,i,s),e.child)}function oy(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!hm(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,aE(t,e,r,i,s)):(t=Jl(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!om(t,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:po,n(a,i)&&t.ref===e.ref)return Xn(t,e,s)}return e.flags|=1,t=Oi(r,i),t.ref=e.ref,t.return=e,e.child=t}function aE(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(po(r,i)&&t.ref===e.ref)if(Je=!1,e.pendingProps=i=r,om(t,s))t.flags&131072&&(Je=!0);else return e.lanes=t.lanes,Xn(t,e,s)}return Of(t,e,n,i,s)}function oE(t,e,n){var i=e.pendingProps,s=i.children,r=(e.stateNode._pendingVisibility&2)!==0,a=t!==null?t.memoizedState:null;if(Za(t,e),i.mode==="hidden"||r){if(e.flags&128){if(i=a!==null?a.baseLanes|n:n,t!==null){for(s=e.child=t.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;e.childLanes=r&~i}else e.childLanes=0,e.child=null;return ly(t,e,i,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&$l(e,a!==null?a.cachePool:null),a!==null?Wp(e,a):wf(),E0(e);else return e.lanes=e.childLanes=536870912,ly(t,e,a!==null?a.baseLanes|n:n,n)}else a!==null?($l(e,a.cachePool),Wp(e,a),Ei(),e.memoizedState=null):(t!==null&&$l(e,null),wf(),Ei());return nt(t,e,s,n),e.child}function ly(t,e,n,i){var s=Yd();return s=s===null?null:{parent:Ge._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&$l(e,null),wf(),E0(e),t!==null&&Ho(t,e,i,!0),null}function Za(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(j(284));(t===null||t.ref!==n)&&(e.flags|=2097664)}}function Of(t,e,n,i,s){return xs(e),n=Xd(t,e,n,i,void 0,s),i=Wd(),t!==null&&!Je?(Zd(t,e,s),Xn(t,e,s)):(de&&i&&Fd(e),e.flags|=1,nt(t,e,n,s),e.child)}function uy(t,e,n,i,s,r){return xs(e),e.updateQueue=null,n=S0(e,i,n,s),b0(t),i=Wd(),t!==null&&!Je?(Zd(t,e,r),Xn(t,e,r)):(de&&i&&Fd(e),e.flags|=1,nt(t,e,n,r),e.child)}function cy(t,e,n,i,s){if(xs(e),e.stateNode===null){var r=gr,a=n.contextType;typeof a=="object"&&a!==null&&(r=yt(a)),r=new n(i,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Nf,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=i,r.state=e.memoizedState,r.refs={},lm(e),a=n.contextType,r.context=typeof a=="object"&&a!==null?yt(a):gr,r.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(xh(e,n,a,i),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&Nf.enqueueReplaceState(r,r.state,null),to(e,i,r,s),eo(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){r=e.stateNode;var l=e.memoizedProps,u=Cs(n,l);r.props=u;var h=r.context,d=n.contextType;a=gr,typeof d=="object"&&d!==null&&(a=yt(d));var p=n.getDerivedStateFromProps;d=typeof p=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,d||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||h!==a)&&sy(e,r,i,a),_i=!1;var m=e.memoizedState;r.state=m,to(e,i,r,s),eo(),h=e.memoizedState,l||m!==h||_i?(typeof p=="function"&&(xh(e,n,p,i),h=e.memoizedState),(u=_i||iy(e,n,u,i,m,h,a))?(d||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),r.props=i,r.state=h,r.context=a,i=u):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,Uf(t,e),a=e.memoizedProps,d=Cs(n,a),r.props=d,p=e.pendingProps,m=r.context,h=n.contextType,u=gr,typeof h=="object"&&h!==null&&(u=yt(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==p||m!==u)&&sy(e,r,i,u),_i=!1,m=e.memoizedState,r.state=m,to(e,i,r,s),eo();var v=e.memoizedState;a!==p||m!==v||_i||t!==null&&t.dependencies!==null&&Cu(t.dependencies)?(typeof l=="function"&&(xh(e,n,l,i),v=e.memoizedState),(d=_i||iy(e,n,d,i,m,v,u)||t!==null&&t.dependencies!==null&&Cu(t.dependencies))?(h||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,v,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,v,u)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),r.props=i,r.state=v,r.context=u,i=d):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),i=!1)}return r=i,Za(t,e),i=(e.flags&128)!==0,r||i?(r=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&i?(e.child=Rs(e,t.child,null,s),e.child=Rs(e,null,n,s)):nt(t,e,n,s),e.memoizedState=r.state,t=e.child):t=Xn(t,e,s),t}function hy(t,e,n,i){return zo(),e.flags|=256,nt(t,e,n,i),e.child}var Nh={dehydrated:null,treeContext:null,retryLane:0};function Dh(t){return{baseLanes:t,cachePool:T0()}}function Oh(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Jt),t}function lE(t,e,n){var i=e.pendingProps,s=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=t!==null&&t.memoizedState===null?!1:(Ke.current&2)!==0),a&&(s=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(de){if(s?vi(e):Ei(),de){var l=st,u;if(u=l){e:{for(u=l,l=fn;u.nodeType!==8;){if(!l){l=null;break e}if(u=on(u.nextSibling),u===null){l=null;break e}}l=u}l!==null?(e.memoizedState={dehydrated:l,treeContext:Es!==null?{id:Ln,overflow:Un}:null,retryLane:536870912},u=Zt(18,null,null,0),u.stateNode=l,u.return=e,e.child=u,bt=e,st=null,u=!0):u=!1}u||ws(e)}if(l=e.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return l.data==="$!"?e.lanes=16:e.lanes=536870912,null;jn(e)}return l=i.children,i=i.fallback,s?(Ei(),s=e.mode,l=kf({mode:"hidden",children:l},s),i=bs(i,s,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,s=e.child,s.memoizedState=Dh(n),s.childLanes=Oh(t,a,n),e.memoizedState=Nh,i):(vi(e),Mf(e,l))}if(u=t.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(r)e.flags&256?(vi(e),e.flags&=-257,e=Mh(t,e,n)):e.memoizedState!==null?(Ei(),e.child=t.child,e.flags|=128,e=null):(Ei(),s=i.fallback,l=e.mode,i=kf({mode:"visible",children:i.children},l),s=bs(s,l,n,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,Rs(e,t.child,null,n),i=e.child,i.memoizedState=Dh(n),i.childLanes=Oh(t,a,n),e.memoizedState=Nh,e=s);else if(vi(e),l.data==="$!"){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(j(419)),i.stack="",i.digest=a,yo({value:i,source:null,stack:null}),e=Mh(t,e,n)}else if(Je||Ho(t,e,n,!1),a=(n&t.childLanes)!==0,Je||a){if(a=be,a!==null){if(i=n&-n,i&42)i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane)throw u.retryLane=i,Hi(t,i),At(a,t,i),rE}l.data==="$?"||Kf(),e=Mh(t,e,n)}else l.data==="$?"?(e.flags|=128,e.child=t.child,e=M1.bind(null,t),l._reactRetry=e,e=null):(t=u.treeContext,st=on(l.nextSibling),bt=e,de=!0,an=null,fn=!1,t!==null&&(Yt[$t++]=Ln,Yt[$t++]=Un,Yt[$t++]=Es,Ln=t.id,Un=t.overflow,Es=e),e=Mf(e,i.children),e.flags|=4096);return e}return s?(Ei(),s=i.fallback,l=e.mode,u=t.child,h=u.sibling,i=Oi(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&31457280,h!==null?s=Oi(h,s):(s=bs(s,l,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=t.child.memoizedState,l===null?l=Dh(n):(u=l.cachePool,u!==null?(h=Ge._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=T0(),l={baseLanes:l.baseLanes|n,cachePool:u}),s.memoizedState=l,s.childLanes=Oh(t,a,n),e.memoizedState=Nh,i):(vi(e),n=t.child,t=n.sibling,n=Oi(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Mf(t,e){return e=kf({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function kf(t,e){return NE(t,e,0,null)}function Mh(t,e,n){return Rs(e,t.child,null,n),t=Mf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fy(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Pf(t.return,e,n)}function kh(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function uE(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(nt(t,e,i.children,n),i=Ke.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fy(t,n,e);else if(t.tag===19)fy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch(Ie(Ke,i),s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Su(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),kh(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Su(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}kh(e,!0,n,null,r);break;case"together":kh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ki|=e.lanes,!(n&e.childLanes))if(t!==null){if(Ho(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function om(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Cu(t)))}function v1(t,e,n){switch(e.tag){case 3:mu(e,e.stateNode.containerInfo),Ti(e,Ge,t.memoizedState.cache),zo();break;case 27:case 5:mf(e);break;case 4:mu(e,e.stateNode.containerInfo);break;case 10:Ti(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(vi(e),e.flags|=128,null):n&e.child.childLanes?lE(t,e,n):(vi(e),t=Xn(t,e,n),t!==null?t.sibling:null);vi(e);break;case 19:var s=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Ho(t,e,n,!1),i=(n&e.childLanes)!==0),s){if(i)return uE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Ke,Ke.current),i)break;return null;case 22:case 23:return e.lanes=0,oE(t,e,n);case 24:Ti(e,Ge,t.memoizedState.cache)}return Xn(t,e,n)}function cE(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Je=!0;else{if(!om(t,n)&&!(e.flags&128))return Je=!1,v1(t,e,n);Je=!!(t.flags&131072)}else Je=!1,de&&e.flags&1048576&&g0(e,Tu,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var i=e.elementType,s=i._init;if(i=s(i._payload),e.type=i,typeof i=="function")hm(i)?(t=Cs(i,t),e.tag=1,e=cy(null,e,i,t,n)):(e.tag=0,e=Of(null,e,i,t,n));else{if(i!=null){if(s=i.$$typeof,s===Od){e.tag=11,e=ay(null,e,i,t,n);break e}else if(s===Md){e.tag=14,e=oy(null,e,i,t,n);break e}}throw e=ff(i)||i,Error(j(306,e,""))}}return e;case 0:return Of(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,s=Cs(i,e.pendingProps),cy(t,e,i,s,n);case 3:e:{if(mu(e,e.stateNode.containerInfo),t===null)throw Error(j(387));var r=e.pendingProps;s=e.memoizedState,i=s.element,Uf(t,e),to(e,r,null,n);var a=e.memoizedState;if(r=a.cache,Ti(e,Ge,r),r!==s.cache&&Lf(e,[Ge],n,!0),eo(),r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=hy(t,e,r,n);break e}else if(r!==i){i=Wt(Error(j(424)),e),yo(i),e=hy(t,e,r,n);break e}else for(st=on(e.stateNode.containerInfo.firstChild),bt=e,de=!0,an=null,fn=!0,n=v0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zo(),r===i){e=Xn(t,e,n);break e}nt(t,e,r,n)}e=e.child}return e;case 26:return Za(t,e),t===null?(n=Ny(e.type,null,e.pendingProps,null))?e.memoizedState=n:de||(n=e.type,t=e.pendingProps,i=Vu(xi.current).createElement(n),i[pt]=e,i[Ot]=t,at(i,n,t),Ze(i),e.stateNode=i):e.memoizedState=Ny(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return mf(e),t===null&&de&&(i=e.stateNode=YE(e.type,e.pendingProps,xi.current),bt=e,fn=!0,st=on(i.firstChild)),i=e.pendingProps.children,t!==null||de?nt(t,e,i,n):e.child=Rs(e,null,i,n),Za(t,e),e.child;case 5:return t===null&&de&&((s=i=st)&&(i=$1(i,e.type,e.pendingProps,fn),i!==null?(e.stateNode=i,bt=e,st=on(i.firstChild),fn=!1,s=!0):s=!1),s||ws(e)),mf(e),s=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,i=r.children,Wf(s,r)?i=null:a!==null&&Wf(s,a)&&(e.flags|=32),e.memoizedState!==null&&(s=Xd(t,e,f1,null,null,n),So._currentValue=s),Za(t,e),nt(t,e,i,n),e.child;case 6:return t===null&&de&&((t=n=st)&&(n=X1(n,e.pendingProps,fn),n!==null?(e.stateNode=n,bt=e,st=null,t=!0):t=!1),t||ws(e)),null;case 13:return lE(t,e,n);case 4:return mu(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Rs(e,null,i,n):nt(t,e,i,n),e.child;case 11:return ay(t,e,e.type,e.pendingProps,n);case 7:return nt(t,e,e.pendingProps,n),e.child;case 8:return nt(t,e,e.pendingProps.children,n),e.child;case 12:return nt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Ti(e,e.type,i.value),nt(t,e,i.children,n),e.child;case 9:return s=e.type._context,i=e.pendingProps.children,xs(e),s=yt(s),i=i(s),e.flags|=1,nt(t,e,i,n),e.child;case 14:return oy(t,e,e.type,e.pendingProps,n);case 15:return aE(t,e,e.type,e.pendingProps,n);case 19:return uE(t,e,n);case 22:return oE(t,e,n);case 24:return xs(e),i=yt(Ge),t===null?(s=Yd(),s===null&&(s=be,r=Qd(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),e.memoizedState={parent:i,cache:s},lm(e),Ti(e,Ge,s)):(t.lanes&n&&(Uf(t,e),to(e,null,null,n),eo()),s=t.memoizedState,r=e.memoizedState,s.parent!==i?(s={parent:i,cache:i},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),Ti(e,Ge,i)):(i=r.cache,Ti(e,Ge,i),i!==s.cache&&Lf(e,[Ge],n,!0))),nt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(j(156,e.tag))}var Vf=Sn(null),qs=null,zn=null;function Ti(t,e,n){Ie(Vf,e._currentValue),e._currentValue=n}function Fn(t){t._currentValue=Vf.current,et(Vf)}function Pf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Lf(t,e,n,i){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;e:for(;r!==null;){var l=r;r=s;for(var u=0;u<e.length;u++)if(l.context===e[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),Pf(r.return,n,t),i||(a=null);break e}r=l.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(j(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),Pf(a,n,t),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function Ho(t,e,n,i){t=null;for(var s=e,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(j(387));if(a=a.memoizedProps,a!==null){var l=s.type;Ht(s.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(s===du.current){if(a=s.alternate,a===null)throw Error(j(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(So):t=[So])}s=s.return}t!==null&&Lf(e,t,n,i),e.flags|=262144}function Cu(t){for(t=t.firstContext;t!==null;){if(!Ht(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function xs(t){qs=t,zn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function yt(t){return hE(qs,t)}function Ol(t,e){return qs===null&&xs(t),hE(t,e)}function hE(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},zn===null){if(t===null)throw Error(j(308));zn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else zn=zn.next=e;return n}var _i=!1;function lm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Uf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ni(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Di(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ne&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,e=vu(t),m0(t,null,n),e}return gc(t,i,e,n),vu(t)}function Ja(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194176)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Bv(t,n)}}function Vh(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var jf=!1;function eo(){if(jf){var t=Sr;if(t!==null)throw t}}function to(t,e,n,i){jf=!1;var s=t.updateQueue;_i=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?r=h:a.next=h,a=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(r!==null){var p=s.baseState;a=0,d=h=u=null,l=r;do{var m=l.lane&-536870913,v=m!==l.lane;if(v?(he&m)===m:(i&m)===m){m!==0&&m===Vr&&(jf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var C=t,O=l;m=e;var k=n;switch(O.tag){case 1:if(C=O.payload,typeof C=="function"){p=C.call(k,p,m);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=O.payload,m=typeof C=="function"?C.call(k,p,m):C,m==null)break e;p=Re({},p,m);break e;case 2:_i=!0}}m=l.callback,m!==null&&(t.flags|=64,v&&(t.flags|=8192),v=s.callbacks,v===null?s.callbacks=[m]:v.push(m))}else v={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=v,u=p):d=d.next=v,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;v=l,l=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);d===null&&(u=p),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=d,r===null&&(s.shared.lanes=0),Ki|=a,t.lanes=a,t.memoizedState=p}}function fE(t,e){if(typeof t!="function")throw Error(j(191,t));t.call(e)}function dE(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)fE(n[t],e)}function Fo(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&t)===t){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(l){Ee(e,e.return,l)}}function Gi(t,e,n){try{var i=e.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&t)===t){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,s=e;var u=n;try{l()}catch(h){Ee(s,u,h)}}}i=i.next}while(i!==r)}}catch(h){Ee(e,e.return,h)}}function mE(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{dE(e,n)}catch(i){Ee(t,t.return,i)}}}function gE(t,e,n){n.props=Cs(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Ee(t,e,i)}}function ps(t,e){try{var n=t.ref;if(n!==null){var i=t.stateNode;switch(t.tag){case 26:case 27:case 5:var s=i;break;default:s=i}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(r){Ee(t,e,r)}}function Lt(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){Ee(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){Ee(t,e,s)}else n.current=null}function pE(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){Ee(t,t.return,s)}}function dy(t,e,n){try{var i=t.stateNode;F1(i,t.type,n,e),i[Ot]=e}catch(s){Ee(t,t.return,s)}}function yE(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27||t.tag===4}function Ph(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==27&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bc));else if(i!==4&&i!==27&&(t=t.child,t!==null))for(zf(t,e,n),t=t.sibling;t!==null;)zf(t,e,n),t=t.sibling}function xu(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&i!==27&&(t=t.child,t!==null))for(xu(t,e,n),t=t.sibling;t!==null;)xu(t,e,n),t=t.sibling}var On=!1,Me=!1,Lh=!1,my=typeof WeakSet=="function"?WeakSet:Set,We=null,gy=!1;function E1(t,e){if(t=t.containerInfo,$f=ju,t=o0(t),Bd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,d=0,p=t,m=null;t:for(;;){for(var v;p!==n||s!==0&&p.nodeType!==3||(l=a+s),p!==r||i!==0&&p.nodeType!==3||(u=a+i),p.nodeType===3&&(a+=p.nodeValue.length),(v=p.firstChild)!==null;)m=p,p=v;for(;;){if(p===t)break t;if(m===n&&++h===s&&(l=a),m===r&&++d===i&&(u=a),(v=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xf={focusedElem:t,selectionRange:n},ju=!1,We=e;We!==null;)if(e=We,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,We=t;else for(;We!==null;){switch(e=We,r=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var C=Cs(n.type,s,n.elementType===n.type);t=i.getSnapshotBeforeUpdate(C,r),i.__reactInternalSnapshotBeforeUpdate=t}catch(O){Ee(n,n.return,O)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Zf(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Zf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(j(163))}if(t=e.sibling,t!==null){t.return=e.return,We=t;break}We=e.return}return C=gy,gy=!1,C}function _E(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Nn(t,n),i&4&&Fo(5,n);break;case 1:if(Nn(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(l){Ee(n,n.return,l)}else{var s=Cs(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(l){Ee(n,n.return,l)}}i&64&&mE(n),i&512&&ps(n,n.return);break;case 3:if(Nn(t,n),i&64&&(i=n.updateQueue,i!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{dE(i,t)}catch(l){Ee(n,n.return,l)}}break;case 26:Nn(t,n),i&512&&ps(n,n.return);break;case 27:case 5:Nn(t,n),e===null&&i&4&&pE(n),i&512&&ps(n,n.return);break;case 12:Nn(t,n);break;case 13:Nn(t,n),i&4&&TE(t,n);break;case 22:if(s=n.memoizedState!==null||On,!s){e=e!==null&&e.memoizedState!==null||Me;var r=On,a=Me;On=s,(Me=e)&&!a?gi(t,n,(n.subtreeFlags&8772)!==0):Nn(t,n),On=r,Me=a}i&512&&(n.memoizedProps.mode==="manual"?ps(n,n.return):Lt(n,n.return));break;default:Nn(t,n)}}function vE(t){var e=t.alternate;e!==null&&(t.alternate=null,vE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Vd(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var je=null,Vt=!1;function xn(t,e,n){for(n=n.child;n!==null;)EE(t,e,n),n=n.sibling}function EE(t,e,n){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Po,n)}catch{}switch(n.tag){case 26:Me||Lt(n,e),xn(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Me||Lt(n,e);var i=je,s=Vt;for(je=n.stateNode,xn(t,e,n),n=n.stateNode,e=n.attributes;e.length;)n.removeAttributeNode(e[0]);Vd(n),je=i,Vt=s;break;case 5:Me||Lt(n,e);case 6:s=je;var r=Vt;if(je=null,xn(t,e,n),je=s,Vt=r,je!==null)if(Vt)try{t=je,i=n.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)}catch(a){Ee(n,e,a)}else try{je.removeChild(n.stateNode)}catch(a){Ee(n,e,a)}break;case 18:je!==null&&(Vt?(e=je,n=n.stateNode,e.nodeType===8?$h(e.parentNode,n):e.nodeType===1&&$h(e,n),Ro(e)):$h(je,n.stateNode));break;case 4:i=je,s=Vt,je=n.stateNode.containerInfo,Vt=!0,xn(t,e,n),je=i,Vt=s;break;case 0:case 11:case 14:case 15:Me||Gi(2,n,e),Me||Gi(4,n,e),xn(t,e,n);break;case 1:Me||(Lt(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&gE(n,e,i)),xn(t,e,n);break;case 21:xn(t,e,n);break;case 22:Me||Lt(n,e),Me=(i=Me)||n.memoizedState!==null,xn(t,e,n),Me=i;break;default:xn(t,e,n)}}function TE(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ro(t)}catch(n){Ee(e,e.return,n)}}function T1(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new my),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new my),e;default:throw Error(j(435,t.tag))}}function Uh(t,e){var n=T1(t);e.forEach(function(i){var s=k1.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}function Ft(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:case 5:je=l.stateNode,Vt=!1;break e;case 3:je=l.stateNode.containerInfo,Vt=!0;break e;case 4:je=l.stateNode.containerInfo,Vt=!0;break e}l=l.return}if(je===null)throw Error(j(160));EE(r,a,s),je=null,Vt=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)bE(e,t),e=e.sibling}var rn=null;function bE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ft(e,t),Gt(t),i&4&&(Gi(3,t,t.return),Fo(3,t),Gi(5,t,t.return));break;case 1:Ft(e,t),Gt(t),i&512&&(Me||n===null||Lt(n,n.return)),i&64&&On&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=rn;if(Ft(e,t),Gt(t),i&512&&(Me||n===null||Lt(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[fo]||r[pt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),at(r,i,n),r[pt]=t,Ze(r),i=r;break e;case"link":var a=Oy("link","href",s).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}r=s.createElement(i),at(r,i,n),s.head.appendChild(r);break;case"meta":if(a=Oy("meta","content",s).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}r=s.createElement(i),at(r,i,n),s.head.appendChild(r);break;default:throw Error(j(468,i))}r[pt]=t,Ze(r),i=r}t.stateNode=i}else My(s,t.type,t.stateNode);else t.stateNode=Dy(s,i,t.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?My(s,t.type,t.stateNode):Dy(s,i,t.memoizedProps)):i===null&&t.stateNode!==null&&dy(t,t.memoizedProps,n.memoizedProps)}break;case 27:if(i&4&&t.alternate===null){s=t.stateNode,r=t.memoizedProps;try{for(var u=s.firstChild;u;){var h=u.nextSibling,d=u.nodeName;u[fo]||d==="HEAD"||d==="BODY"||d==="SCRIPT"||d==="STYLE"||d==="LINK"&&u.rel.toLowerCase()==="stylesheet"||s.removeChild(u),u=h}for(var p=t.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);at(s,p,r),s[pt]=t,s[Ot]=r}catch(C){Ee(t,t.return,C)}}case 5:if(Ft(e,t),Gt(t),i&512&&(Me||n===null||Lt(n,n.return)),t.flags&32){s=t.stateNode;try{Mr(s,"")}catch(C){Ee(t,t.return,C)}}i&4&&t.stateNode!=null&&(s=t.memoizedProps,dy(t,s,n!==null?n.memoizedProps:s)),i&1024&&(Lh=!0);break;case 6:if(Ft(e,t),Gt(t),i&4){if(t.stateNode===null)throw Error(j(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(C){Ee(t,t.return,C)}}break;case 3:if(tu=null,s=rn,rn=Pu(e.containerInfo),Ft(e,t),rn=s,Gt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ro(e.containerInfo)}catch(C){Ee(t,t.return,C)}Lh&&(Lh=!1,SE(t));break;case 4:i=rn,rn=Pu(t.stateNode.containerInfo),Ft(e,t),Gt(t),rn=i;break;case 12:Ft(e,t),Gt(t);break;case 13:Ft(e,t),Gt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(mm=gn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Uh(t,i)));break;case 22:if(i&512&&(Me||n===null||Lt(n,n.return)),u=t.memoizedState!==null,h=n!==null&&n.memoizedState!==null,d=On,p=Me,On=d||u,Me=p||h,Ft(e,t),Me=p,On=d,Gt(t),e=t.stateNode,e._current=t,e._visibility&=-3,e._visibility|=e._pendingVisibility&2,i&8192&&(e._visibility=u?e._visibility&-2:e._visibility|1,u&&(e=On||Me,n===null||h||e||tr(t)),t.memoizedProps===null||t.memoizedProps.mode!=="manual"))e:for(n=null,e=t;;){if(e.tag===5||e.tag===26||e.tag===27){if(n===null){h=n=e;try{if(s=h.stateNode,u)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{a=h.stateNode,l=h.memoizedProps.style;var v=l!=null&&l.hasOwnProperty("display")?l.display:null;a.style.display=v==null||typeof v=="boolean"?"":(""+v).trim()}}catch(C){Ee(h,h.return,C)}}}else if(e.tag===6){if(n===null){h=e;try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(C){Ee(h,h.return,C)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,Uh(t,n))));break;case 19:Ft(e,t),Gt(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,Uh(t,i)));break;case 21:break;default:Ft(e,t),Gt(t)}}function Gt(t){var e=t.flags;if(e&2){try{if(t.tag!==27){e:{for(var n=t.return;n!==null;){if(yE(n)){var i=n;break e}n=n.return}throw Error(j(160))}switch(i.tag){case 27:var s=i.stateNode,r=Ph(t);xu(t,r,s);break;case 5:var a=i.stateNode;i.flags&32&&(Mr(a,""),i.flags&=-33);var l=Ph(t);xu(t,l,a);break;case 3:case 4:var u=i.stateNode.containerInfo,h=Ph(t);zf(t,h,u);break;default:throw Error(j(161))}}}catch(d){Ee(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function SE(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;SE(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Nn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)_E(t,e.alternate,e),e=e.sibling}function tr(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Gi(4,e,e.return),tr(e);break;case 1:Lt(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&gE(e,e.return,n),tr(e);break;case 26:case 27:case 5:Lt(e,e.return),tr(e);break;case 22:Lt(e,e.return),e.memoizedState===null&&tr(e);break;default:tr(e)}t=t.sibling}}function gi(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,s=t,r=e,a=r.flags;switch(r.tag){case 0:case 11:case 15:gi(s,r,n),Fo(4,r);break;case 1:if(gi(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(h){Ee(i,i.return,h)}if(i=r,s=i.updateQueue,s!==null){var l=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)fE(u[s],l)}catch(h){Ee(i,i.return,h)}}n&&a&64&&mE(r),ps(r,r.return);break;case 26:case 27:case 5:gi(s,r,n),n&&i===null&&a&4&&pE(r),ps(r,r.return);break;case 12:gi(s,r,n);break;case 13:gi(s,r,n),n&&a&4&&TE(s,r);break;case 22:r.memoizedState===null&&gi(s,r,n),ps(r,r.return);break;default:gi(s,r,n)}e=e.sibling}}function um(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Bo(n))}function cm(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Bo(t))}function di(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)AE(t,e,n,i),e=e.sibling}function AE(t,e,n,i){var s=e.flags;switch(e.tag){case 0:case 11:case 15:di(t,e,n,i),s&2048&&Fo(9,e);break;case 3:di(t,e,n,i),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Bo(t)));break;case 12:if(s&2048){di(t,e,n,i),t=e.stateNode;try{var r=e.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Ee(e,e.return,u)}}else di(t,e,n,i);break;case 23:break;case 22:r=e.stateNode,e.memoizedState!==null?r._visibility&4?di(t,e,n,i):no(t,e):r._visibility&4?di(t,e,n,i):(r._visibility|=4,nr(t,e,n,i,(e.subtreeFlags&10256)!==0)),s&2048&&um(e.alternate,e);break;case 24:di(t,e,n,i),s&2048&&cm(e.alternate,e);break;default:di(t,e,n,i)}}function nr(t,e,n,i,s){for(s=s&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var r=t,a=e,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:nr(r,a,l,u,s),Fo(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&4?nr(r,a,l,u,s):no(r,a):(d._visibility|=4,nr(r,a,l,u,s)),s&&h&2048&&um(a.alternate,a);break;case 24:nr(r,a,l,u,s),s&&h&2048&&cm(a.alternate,a);break;default:nr(r,a,l,u,s)}e=e.sibling}}function no(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,s=i.flags;switch(i.tag){case 22:no(n,i),s&2048&&um(i.alternate,i);break;case 24:no(n,i),s&2048&&cm(i.alternate,i);break;default:no(n,i)}e=e.sibling}}var La=8192;function Ws(t){if(t.subtreeFlags&La)for(t=t.child;t!==null;)wE(t),t=t.sibling}function wE(t){switch(t.tag){case 26:Ws(t),t.flags&La&&t.memoizedState!==null&&uR(rn,t.memoizedState,t.memoizedProps);break;case 5:Ws(t);break;case 3:case 4:var e=rn;rn=Pu(t.stateNode.containerInfo),Ws(t),rn=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=La,La=16777216,Ws(t),La=e):Ws(t));break;default:Ws(t)}}function RE(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function xa(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];We=i,CE(i,t)}RE(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)IE(t),t=t.sibling}function IE(t){switch(t.tag){case 0:case 11:case 15:xa(t),t.flags&2048&&Gi(9,t,t.return);break;case 3:xa(t);break;case 12:xa(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&4&&(t.return===null||t.return.tag!==13)?(e._visibility&=-5,Zl(t)):xa(t);break;default:xa(t)}}function Zl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];We=i,CE(i,t)}RE(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Gi(8,e,e.return),Zl(e);break;case 22:n=e.stateNode,n._visibility&4&&(n._visibility&=-5,Zl(e));break;default:Zl(e)}t=t.sibling}}function CE(t,e){for(;We!==null;){var n=We;switch(n.tag){case 0:case 11:case 15:Gi(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Bo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,We=i;else e:for(n=t;We!==null;){i=We;var s=i.sibling,r=i.return;if(vE(i),i===n){We=null;break e}if(s!==null){s.return=r,We=s;break e}We=r}}}function b1(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(t,e,n,i){return new b1(t,e,n,i)}function hm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Oi(t,e){var n=t.alternate;return n===null?(n=Zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&31457280,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function xE(t,e){t.flags&=31457282;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Jl(t,e,n,i,s,r){var a=0;if(i=t,typeof t=="function")hm(t)&&(a=1);else if(typeof t=="string")a=oR(t,n,mn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case lr:return bs(n.children,s,r,e);case Nv:a=8,s|=24;break;case uf:return t=Zt(12,n,e,s|2),t.elementType=uf,t.lanes=r,t;case cf:return t=Zt(13,n,e,s),t.elementType=cf,t.lanes=r,t;case hf:return t=Zt(19,n,e,s),t.elementType=hf,t.lanes=r,t;case Ov:return NE(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case QA:case Pn:a=10;break e;case Dv:a=9;break e;case Od:a=11;break e;case Md:a=14;break e;case yi:a=16,i=null;break e}a=29,n=Error(j(130,t===null?"null":typeof t,"")),i=null}return e=Zt(a,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function bs(t,e,n,i){return t=Zt(7,t,i,e),t.lanes=n,t}function NE(t,e,n,i){t=Zt(22,t,i,e),t.elementType=Ov,t.lanes=n;var s={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var r=s._current;if(r===null)throw Error(j(456));if(!(s._pendingVisibility&2)){var a=Hi(r,2);a!==null&&(s._pendingVisibility|=2,At(a,r,2))}},attach:function(){var r=s._current;if(r===null)throw Error(j(456));if(s._pendingVisibility&2){var a=Hi(r,2);a!==null&&(s._pendingVisibility&=-3,At(a,r,2))}}};return t.stateNode=s,t}function jh(t,e,n){return t=Zt(6,t,null,e),t.lanes=n,t}function zh(t,e,n){return e=Zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Dn(t){t.flags|=4}function py(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!WE(e)){if(e=en.current,e!==null&&((he&4194176)===he?pn!==null:(he&62914560)!==he&&!(he&536870912)||e!==pn))throw $a=Af,p0;t.flags|=8192}}function Ml(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?jv():536870912,t.lanes|=e,Lr|=e)}function Na(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ce(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&31457280,i|=s.flags&31457280,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function S1(t,e,n){var i=e.pendingProps;switch(Gd(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(e),null;case 1:return Ce(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Fn(Ge),Dr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ia(e)?Dn(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,an!==null&&(Gf(an),an=null))),Ce(e),null;case 26:return n=e.memoizedState,t===null?(Dn(e),n!==null?(Ce(e),py(e,n)):(Ce(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Dn(e),Ce(e),py(e,n)):(Ce(e),e.flags&=-16777217):(t.memoizedProps!==i&&Dn(e),Ce(e),e.flags&=-16777217),null;case 27:gu(e),n=xi.current;var s=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Dn(e);else{if(!i){if(e.stateNode===null)throw Error(j(166));return Ce(e),null}t=mn.current,Ia(e)?Kp(e):(t=YE(s,i,n),e.stateNode=t,Dn(e))}return Ce(e),null;case 5:if(gu(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Dn(e);else{if(!i){if(e.stateNode===null)throw Error(j(166));return Ce(e),null}if(t=mn.current,Ia(e))Kp(e);else{switch(s=Vu(xi.current),t){case 1:t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}t[pt]=e,t[Ot]=i;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=t;e:switch(at(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Dn(e)}}return Ce(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&Dn(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(j(166));if(t=xi.current,Ia(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,s=bt,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}t[pt]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||GE(t.nodeValue,n)),t||ws(e)}else t=Vu(t).createTextNode(i),t[pt]=e,e.stateNode=t}return Ce(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=Ia(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(j(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[pt]=e}else zo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ce(e),s=!1}else an!==null&&(Gf(an),an=null),s=!0;if(!s)return e.flags&256?(jn(e),e):(jn(e),null)}if(jn(e),e.flags&128)return e.lanes=n,e;if(n=i!==null,t=t!==null&&t.memoizedState!==null,n){i=e.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Ml(e,e.updateQueue),Ce(e),null;case 4:return Dr(),t===null&&ym(e.stateNode.containerInfo),Ce(e),null;case 10:return Fn(e.type),Ce(e),null;case 19:if(et(Ke),s=e.memoizedState,s===null)return Ce(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)Na(s,!1);else{if(ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=Su(t),r!==null){for(e.flags|=128,Na(s,!1),t=r.updateQueue,e.updateQueue=t,Ml(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)xE(n,t),n=n.sibling;return Ie(Ke,Ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&gn()>Nu&&(e.flags|=128,i=!0,Na(s,!1),e.lanes=4194304)}else{if(!i)if(t=Su(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Ml(e,t),Na(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!de)return Ce(e),null}else 2*gn()-s.renderingStartTime>Nu&&n!==536870912&&(e.flags|=128,i=!0,Na(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=gn(),e.sibling=null,t=Ke.current,Ie(Ke,i?t&1|2:t&1),e):(Ce(e),null);case 22:case 23:return jn(e),Kd(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Ce(e),e.subtreeFlags&6&&(e.flags|=8192)):Ce(e),n=e.updateQueue,n!==null&&Ml(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&et(Ts),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Fn(Ge),Ce(e),null;case 25:return null}throw Error(j(156,e.tag))}function A1(t,e){switch(Gd(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fn(Ge),Dr(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return gu(e),null;case 13:if(jn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));zo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return et(Ke),null;case 4:return Dr(),null;case 10:return Fn(e.type),null;case 22:case 23:return jn(e),Kd(),t!==null&&et(Ts),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Fn(Ge),null;case 25:return null;default:return null}}function DE(t,e){switch(Gd(e),e.tag){case 3:Fn(Ge),Dr();break;case 26:case 27:case 5:gu(e);break;case 4:Dr();break;case 13:jn(e);break;case 19:et(Ke);break;case 10:Fn(e.type);break;case 22:case 23:jn(e),Kd(),t!==null&&et(Ts);break;case 24:Fn(Ge)}}var w1={getCacheForType:function(t){var e=yt(Ge),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},R1=typeof WeakMap=="function"?WeakMap:Map,Ne=0,be=null,se=null,he=0,Te=0,Pt=null,Mn=!1,ea=!1,fm=!1,Wn=0,ke=0,Ki=0,Ss=0,dm=0,Jt=0,Lr=0,io=null,dn=null,Bf=!1,mm=0,Nu=1/0,Du=null,Mi=null,kl=!1,ms=null,so=0,qf=0,Hf=null,ro=0,Ff=null;function qt(){if(Ne&2&&he!==0)return he&-he;if(ee.T!==null){var t=Vr;return t!==0?t:pm()}return Hv()}function OE(){Jt===0&&(Jt=!(he&536870912)||de?Uv():536870912);var t=en.current;return t!==null&&(t.flags|=32),Jt}function At(t,e,n){(t===be&&Te===2||t.cancelPendingCommit!==null)&&(Ur(t,0),kn(t,he,Jt,!1)),Uo(t,n),(!(Ne&2)||t!==be)&&(t===be&&(!(Ne&2)&&(Ss|=n),ke===4&&kn(t,he,Jt,!1)),An(t))}function ME(t,e,n){if(Ne&6)throw Error(j(327));var i=!n&&(e&60)===0&&(e&t.expiredLanes)===0||Lo(t,e),s=i?x1(t,e):Bh(t,e,!0),r=i;do{if(s===0){ea&&!i&&kn(t,e,0,!1);break}else if(s===6)kn(t,e,0,!Mn);else{if(n=t.current.alternate,r&&!I1(n)){s=Bh(t,e,!1),r=!1;continue}if(s===2){if(r=e,t.errorRecoveryDisabledLanes&r)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;s=io;var u=l.current.memoizedState.isDehydrated;if(u&&(Ur(l,a).flags|=256),a=Bh(l,a,!1),a!==2){if(fm&&!u){l.errorRecoveryDisabledLanes|=r,Ss|=r,s=4;break e}r=dn,dn=s,r!==null&&Gf(r)}s=a}if(r=!1,s!==2)continue}}if(s===1){Ur(t,0),kn(t,e,0,!0);break}e:{switch(i=t,s){case 0:case 1:throw Error(j(345));case 4:if((e&4194176)===e){kn(i,e,Jt,!Mn);break e}break;case 2:dn=null;break;case 3:case 5:break;default:throw Error(j(329))}if(i.finishedWork=n,i.finishedLanes=e,(e&62914560)===e&&(r=mm+300-gn(),10<r)){if(kn(i,e,Jt,!Mn),cc(i,0)!==0)break e;i.timeoutHandle=QE(yy.bind(null,i,n,dn,Du,Bf,e,Jt,Ss,Lr,Mn,2,-0,0),r);break e}yy(i,n,dn,Du,Bf,e,Jt,Ss,Lr,Mn,0,-0,0)}}break}while(!0);An(t)}function Gf(t){dn===null?dn=t:dn.push.apply(dn,t)}function yy(t,e,n,i,s,r,a,l,u,h,d,p,m){var v=e.subtreeFlags;if((v&8192||(v&16785408)===16785408)&&(bo={stylesheets:null,count:0,unsuspend:lR},wE(e),e=cR(),e!==null)){t.cancelPendingCommit=e(vy.bind(null,t,n,i,s,a,l,u,1,p,m)),kn(t,r,a,!h);return}vy(t,n,i,s,a,l,u,d,p,m)}function I1(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!Ht(r(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kn(t,e,n,i){e&=~dm,e&=~Ss,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var s=e;0<s;){var r=31-Bt(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&zv(t,n,e)}function Ec(){return Ne&6?!0:(Go(0),!1)}function gm(){if(se!==null){if(Te===0)var t=se.return;else t=se,zn=qs=null,Jd(t),br=null,_o=0,t=se;for(;t!==null;)DE(t.alternate,t),t=t.return;se=null}}function Ur(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,K1(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),gm(),be=t,se=n=Oi(t.current,null),he=e,Te=0,Pt=null,Mn=!1,ea=Lo(t,e),fm=!1,Lr=Jt=dm=Ss=Ki=ke=0,dn=io=null,Bf=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var s=31-Bt(i),r=1<<s;e|=t[s],i&=~r}return Wn=e,mc(),n}function kE(t,e){ne=null,ee.H=En,e===Ya?(e=$p(),Te=3):e===p0?(e=$p(),Te=4):Te=e===rE?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Pt=e,se===null&&(ke=1,Iu(t,Wt(e,t.current)))}function VE(){var t=ee.H;return ee.H=En,t===null?En:t}function PE(){var t=ee.A;return ee.A=w1,t}function Kf(){ke=4,Mn||(he&4194176)!==he&&en.current!==null||(ea=!0),!(Ki&134217727)&&!(Ss&134217727)||be===null||kn(be,he,Jt,!1)}function Bh(t,e,n){var i=Ne;Ne|=2;var s=VE(),r=PE();(be!==t||he!==e)&&(Du=null,Ur(t,e)),e=!1;var a=ke;e:do try{if(Te!==0&&se!==null){var l=se,u=Pt;switch(Te){case 8:gm(),a=6;break e;case 3:case 2:case 6:en.current===null&&(e=!0);var h=Te;if(Te=0,Pt=null,_r(t,l,u,h),n&&ea){a=0;break e}break;default:h=Te,Te=0,Pt=null,_r(t,l,u,h)}}C1(),a=ke;break}catch(d){kE(t,d)}while(!0);return e&&t.shellSuspendCounter++,zn=qs=null,Ne=i,ee.H=s,ee.A=r,se===null&&(be=null,he=0,mc()),a}function C1(){for(;se!==null;)LE(se)}function x1(t,e){var n=Ne;Ne|=2;var i=VE(),s=PE();be!==t||he!==e?(Du=null,Nu=gn()+500,Ur(t,e)):ea=Lo(t,e);e:do try{if(Te!==0&&se!==null){e=se;var r=Pt;t:switch(Te){case 1:Te=0,Pt=null,_r(t,e,r,1);break;case 2:if(Yp(r)){Te=0,Pt=null,_y(e);break}e=function(){Te===2&&be===t&&(Te=7),An(t)},r.then(e,e);break e;case 3:Te=7;break e;case 4:Te=5;break e;case 7:Yp(r)?(Te=0,Pt=null,_y(e)):(Te=0,Pt=null,_r(t,e,r,7));break;case 5:var a=null;switch(se.tag){case 26:a=se.memoizedState;case 5:case 27:var l=se;if(!a||WE(a)){Te=0,Pt=null;var u=l.sibling;if(u!==null)se=u;else{var h=l.return;h!==null?(se=h,Tc(h)):se=null}break t}}Te=0,Pt=null,_r(t,e,r,5);break;case 6:Te=0,Pt=null,_r(t,e,r,6);break;case 8:gm(),ke=6;break e;default:throw Error(j(462))}}N1();break}catch(d){kE(t,d)}while(!0);return zn=qs=null,ee.H=i,ee.A=s,Ne=n,se!==null?0:(be=null,he=0,mc(),ke)}function N1(){for(;se!==null&&!ZA();)LE(se)}function LE(t){var e=cE(t.alternate,t,Wn);t.memoizedProps=t.pendingProps,e===null?Tc(t):se=e}function _y(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=uy(n,e,e.pendingProps,e.type,void 0,he);break;case 11:e=uy(n,e,e.pendingProps,e.type.render,e.ref,he);break;case 5:Jd(e);default:DE(n,e),e=se=xE(e,Wn),e=cE(n,e,Wn)}t.memoizedProps=t.pendingProps,e===null?Tc(t):se=e}function _r(t,e,n,i){zn=qs=null,Jd(e),br=null,_o=0;var s=e.return;try{if(_1(t,s,e,n,he)){ke=1,Iu(t,Wt(n,t.current)),se=null;return}}catch(r){if(s!==null)throw se=s,r;ke=1,Iu(t,Wt(n,t.current)),se=null;return}e.flags&32768?(de||i===1?t=!0:ea||he&536870912?t=!1:(Mn=t=!0,(i===2||i===3||i===6)&&(i=en.current,i!==null&&i.tag===13&&(i.flags|=16384))),UE(e,t)):Tc(e)}function Tc(t){var e=t;do{if(e.flags&32768){UE(e,Mn);return}t=e.return;var n=S1(e.alternate,e,Wn);if(n!==null){se=n;return}if(e=e.sibling,e!==null){se=e;return}se=e=t}while(e!==null);ke===0&&(ke=5)}function UE(t,e){do{var n=A1(t.alternate,t);if(n!==null){n.flags&=32767,se=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){se=t;return}se=t=n}while(t!==null);ke=6,se=null}function vy(t,e,n,i,s,r,a,l,u,h){var d=ee.T,p=we.p;try{we.p=2,ee.T=null,D1(t,e,n,i,p,s,r,a,l,u,h)}finally{ee.T=d,we.p=p}}function D1(t,e,n,i,s,r,a,l){do Rr();while(ms!==null);if(Ne&6)throw Error(j(327));var u=t.finishedWork;if(i=t.finishedLanes,u===null)return null;if(t.finishedWork=null,t.finishedLanes=0,u===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0,t.cancelPendingCommit=null;var h=u.lanes|u.childLanes;if(h|=qd,uw(t,i,h,r,a,l),t===be&&(se=be=null,he=0),!(u.subtreeFlags&10256)&&!(u.flags&10256)||kl||(kl=!0,qf=h,Hf=n,V1(pu,function(){return Rr(),null})),n=(u.flags&15990)!==0,u.subtreeFlags&15990||n?(n=ee.T,ee.T=null,r=we.p,we.p=2,a=Ne,Ne|=4,E1(t,u),bE(u,t),t1(Xf,t.containerInfo),ju=!!$f,Xf=$f=null,t.current=u,_E(t,u.alternate,u),JA(),Ne=a,we.p=r,ee.T=n):t.current=u,kl?(kl=!1,ms=t,so=i):jE(t,h),h=t.pendingLanes,h===0&&(Mi=null),sw(u.stateNode),An(t),e!==null)for(s=t.onRecoverableError,u=0;u<e.length;u++)h=e[u],s(h.value,{componentStack:h.stack});return so&3&&Rr(),h=t.pendingLanes,i&4194218&&h&42?t===Ff?ro++:(ro=0,Ff=t):ro=0,Go(0),null}function jE(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Bo(e)))}function Rr(){if(ms!==null){var t=ms,e=qf;qf=0;var n=qv(so),i=ee.T,s=we.p;try{if(we.p=32>n?32:n,ee.T=null,ms===null)var r=!1;else{n=Hf,Hf=null;var a=ms,l=so;if(ms=null,so=0,Ne&6)throw Error(j(331));var u=Ne;if(Ne|=4,IE(a.current),AE(a,a.current,l,n),Ne=u,Go(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Po,a)}catch{}r=!0}return r}finally{we.p=s,ee.T=i,jE(t,e)}}return!1}function Ey(t,e,n){e=Wt(n,e),e=Df(t.stateNode,e,2),t=Di(t,e,2),t!==null&&(Uo(t,2),An(t))}function Ee(t,e,n){if(t.tag===3)Ey(t,t,n);else for(;e!==null;){if(e.tag===3){Ey(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Mi===null||!Mi.has(i))){t=Wt(n,t),n=iE(2),i=Di(e,n,2),i!==null&&(sE(n,i,e,t),Uo(i,2),An(i));break}}e=e.return}}function qh(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new R1;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(fm=!0,s.add(n),t=O1.bind(null,t,e,n),e.then(t,t))}function O1(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,be===t&&(he&n)===n&&(ke===4||ke===3&&(he&62914560)===he&&300>gn()-mm?!(Ne&2)&&Ur(t,0):dm|=n,Lr===he&&(Lr=0)),An(t)}function zE(t,e){e===0&&(e=jv()),t=Hi(t,e),t!==null&&(Uo(t,e),An(t))}function M1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zE(t,n)}function k1(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(j(314))}i!==null&&i.delete(e),zE(t,n)}function V1(t,e){return kd(t,e)}var Ou=null,ir=null,Qf=!1,Mu=!1,Hh=!1,As=0;function An(t){t!==ir&&t.next===null&&(ir===null?Ou=ir=t:ir=ir.next=t),Mu=!0,Qf||(Qf=!0,L1(P1))}function Go(t,e){if(!Hh&&Mu){Hh=!0;do for(var n=!1,i=Ou;i!==null;){if(t!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,l=i.pingedLanes;r=(1<<31-Bt(42|t)+1)-1,r&=s&~(a&~l),r=r&201326677?r&201326677|1:r?r|2:0}r!==0&&(n=!0,Ty(i,r))}else r=he,r=cc(i,i===be?r:0),!(r&3)||Lo(i,r)||(n=!0,Ty(i,r));i=i.next}while(n);Hh=!1}}function P1(){Mu=Qf=!1;var t=0;As!==0&&(G1()&&(t=As),As=0);for(var e=gn(),n=null,i=Ou;i!==null;){var s=i.next,r=BE(i,e);r===0?(i.next=null,n===null?Ou=s:n.next=s,s===null&&(ir=n)):(n=i,(t!==0||r&3)&&(Mu=!0)),i=s}Go(t)}function BE(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var a=31-Bt(r),l=1<<a,u=s[a];u===-1?(!(l&n)||l&i)&&(s[a]=lw(l,e)):u<=e&&(t.expiredLanes|=l),r&=~l}if(e=be,n=he,n=cc(t,t===e?n:0),i=t.callbackNode,n===0||t===e&&Te===2||t.cancelPendingCommit!==null)return i!==null&&i!==null&&vh(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Lo(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&vh(i),qv(n)){case 2:case 8:n=Pv;break;case 32:n=pu;break;case 268435456:n=Lv;break;default:n=pu}return i=qE.bind(null,t),n=kd(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&vh(i),t.callbackPriority=2,t.callbackNode=null,2}function qE(t,e){var n=t.callbackNode;if(Rr()&&t.callbackNode!==n)return null;var i=he;return i=cc(t,t===be?i:0),i===0?null:(ME(t,i,e),BE(t,gn()),t.callbackNode!=null&&t.callbackNode===n?qE.bind(null,t):null)}function Ty(t,e){if(Rr())return null;ME(t,e,!0)}function L1(t){Q1(function(){Ne&6?kd(Vv,t):t()})}function pm(){return As===0&&(As=Uv()),As}function by(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Kl(""+t)}function Sy(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function U1(t,e,n,i,s){if(e==="submit"&&n&&n.stateNode===s){var r=by((s[Ot]||null).action),a=i.submitter;a&&(e=(e=a[Ot]||null)?by(e.formAction):a.getAttribute("formAction"),e!==null&&(r=e,a=null));var l=new hc("action","action",null,i,s);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(As!==0){var u=a?Sy(s,a):new FormData(s);xf(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?Sy(s,a):new FormData(s),xf(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var Fh=0;Fh<Fp.length;Fh++){var Gh=Fp[Fh],j1=Gh.toLowerCase(),z1=Gh[0].toUpperCase()+Gh.slice(1);cn(j1,"on"+z1)}cn(u0,"onAnimationEnd");cn(c0,"onAnimationIteration");cn(h0,"onAnimationStart");cn("dblclick","onDoubleClick");cn("focusin","onFocus");cn("focusout","onBlur");cn(i1,"onTransitionRun");cn(s1,"onTransitionStart");cn(r1,"onTransitionCancel");cn(f0,"onTransitionEnd");Or("onMouseEnter",["mouseout","mouseover"]);Or("onMouseLeave",["mouseout","mouseover"]);Or("onPointerEnter",["pointerout","pointerover"]);Or("onPointerLeave",["pointerout","pointerover"]);Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eo));function HE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=h;try{r(s)}catch(d){Ru(d)}s.currentTarget=null,r=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=h;try{r(s)}catch(d){Ru(d)}s.currentTarget=null,r=u}}}}function le(t,e){var n=e[pf];n===void 0&&(n=e[pf]=new Set);var i=t+"__bubble";n.has(i)||(FE(e,t,2,!1),n.add(i))}function Kh(t,e,n){var i=0;e&&(i|=4),FE(n,t,i,e)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function ym(t){if(!t[Vl]){t[Vl]=!0,Fv.forEach(function(n){n!=="selectionchange"&&(B1.has(n)||Kh(n,!1,t),Kh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vl]||(e[Vl]=!0,Kh("selectionchange",!1,e))}}function FE(t,e,n,i){switch(nT(e)){case 2:var s=dR;break;case 8:s=mR;break;default:s=Tm}n=s.bind(null,e,n,t),s=void 0,!Ef||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Qh(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=gs(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=r=a;continue e}l=l.parentNode}}i=i.return}Zv(function(){var h=r,d=Ld(n),p=[];e:{var m=d0.get(t);if(m!==void 0){var v=hc,C=t;switch(t){case"keypress":if(Yl(n)===0)break e;case"keydown":case"keyup":v=kw;break;case"focusin":C="focus",v=Ah;break;case"focusout":C="blur",v=Ah;break;case"beforeblur":case"afterblur":v=Ah;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Op;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=bw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Lw;break;case u0:case c0:case h0:v=ww;break;case f0:v=jw;break;case"scroll":case"scrollend":v=Ew;break;case"wheel":v=Bw;break;case"copy":case"cut":case"paste":v=Iw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=kp;break;case"toggle":case"beforetoggle":v=Hw}var O=(e&4)!==0,k=!O&&(t==="scroll"||t==="scrollend"),A=O?m!==null?m+"Capture":null:m;O=[];for(var E=h,S;E!==null;){var x=E;if(S=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||S===null||A===null||(x=mo(E,A),x!=null&&O.push(To(E,x,S))),k)break;E=E.return}0<O.length&&(m=new v(m,C,null,n,d),p.push({event:m,listeners:O}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==vf&&(C=n.relatedTarget||n.fromElement)&&(gs(C)||C[Zr]))break e;if((v||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,v?(C=n.relatedTarget||n.toElement,v=h,C=C?gs(C):null,C!==null&&(k=Wr(C),O=C.tag,C!==k||O!==5&&O!==27&&O!==6)&&(C=null)):(v=null,C=h),v!==C)){if(O=Op,x="onMouseLeave",A="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(O=kp,x="onPointerLeave",A="onPointerEnter",E="pointer"),k=v==null?m:Pa(v),S=C==null?m:Pa(C),m=new O(x,E+"leave",v,n,d),m.target=k,m.relatedTarget=S,x=null,gs(d)===h&&(O=new O(A,E+"enter",C,n,d),O.target=S,O.relatedTarget=k,x=O),k=x,v&&C)t:{for(O=v,A=C,E=0,S=O;S;S=Zs(S))E++;for(S=0,x=A;x;x=Zs(x))S++;for(;0<E-S;)O=Zs(O),E--;for(;0<S-E;)A=Zs(A),S--;for(;E--;){if(O===A||A!==null&&O===A.alternate)break t;O=Zs(O),A=Zs(A)}O=null}else O=null;v!==null&&Ay(p,m,v,O,!1),C!==null&&k!==null&&Ay(p,k,C,O,!0)}}e:{if(m=h?Pa(h):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var V=Up;else if(Lp(m))if(s0)V=Jw;else{V=Ww;var P=Xw}else v=m.nodeName,!v||v.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&Pd(h.elementType)&&(V=Up):V=Zw;if(V&&(V=V(t,h))){i0(p,V,n,d);break e}P&&P(t,m,h),t==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&_f(m,"number",m.value)}switch(P=h?Pa(h):window,t){case"focusin":(Lp(P)||P.contentEditable==="true")&&(fr=P,Tf=h,Qa=null);break;case"focusout":Qa=Tf=fr=null;break;case"mousedown":bf=!0;break;case"contextmenu":case"mouseup":case"dragend":bf=!1,Hp(p,n,d);break;case"selectionchange":if(n1)break;case"keydown":case"keyup":Hp(p,n,d)}var T;if(zd)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else hr?t0(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(e0&&n.locale!=="ko"&&(hr||_!=="onCompositionStart"?_==="onCompositionEnd"&&hr&&(T=Jv()):(Ii=d,Ud="value"in Ii?Ii.value:Ii.textContent,hr=!0)),P=ku(h,_),0<P.length&&(_=new Mp(_,t,null,n,d),p.push({event:_,listeners:P}),T?_.data=T:(T=n0(n),T!==null&&(_.data=T)))),(T=Gw?Kw(t,n):Qw(t,n))&&(_=ku(h,"onBeforeInput"),0<_.length&&(P=new Mp("onBeforeInput","beforeinput",null,n,d),p.push({event:P,listeners:_}),P.data=T)),U1(p,t,h,n,d)}HE(p,e)})}function To(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ku(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=mo(t,n),s!=null&&i.unshift(To(t,s,r)),s=mo(t,e),s!=null&&i.push(To(t,s,r))),t=t.return}return i}function Zs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ay(t,e,n,i,s){for(var r=e._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,s?(h=mo(n,r),h!=null&&a.unshift(To(n,h,u))):s||(h=mo(n,r),h!=null&&a.push(To(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var q1=/\r\n?/g,H1=/\u0000|\uFFFD/g;function wy(t){return(typeof t=="string"?t:""+t).replace(q1,`
`).replace(H1,"")}function GE(t,e){return e=wy(e),wy(t)===e}function bc(){}function ge(t,e,n,i,s,r){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Mr(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Mr(t,""+i);break;case"className":Il(t,"class",i);break;case"tabIndex":Il(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Il(t,n,i);break;case"style":Wv(t,i,r);break;case"data":if(e!=="object"){Il(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Kl(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&ge(t,e,"name",s.name,s,null),ge(t,e,"formEncType",s.formEncType,s,null),ge(t,e,"formMethod",s.formMethod,s,null),ge(t,e,"formTarget",s.formTarget,s,null)):(ge(t,e,"encType",s.encType,s,null),ge(t,e,"method",s.method,s,null),ge(t,e,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Kl(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=bc);break;case"onScroll":i!=null&&le("scroll",t);break;case"onScrollEnd":i!=null&&le("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(j(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(j(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Kl(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":le("beforetoggle",t),le("toggle",t),Gl(t,"popover",i);break;case"xlinkActuate":Cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Cn(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Cn(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Cn(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Cn(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Gl(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=_w.get(n)||n,Gl(t,n,i))}}function Yf(t,e,n,i,s,r){switch(n){case"style":Wv(t,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(j(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(j(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Mr(t,i):(typeof i=="number"||typeof i=="bigint")&&Mr(t,""+i);break;case"onScroll":i!=null&&le("scroll",t);break;case"onScrollEnd":i!=null&&le("scrollend",t);break;case"onClick":i!=null&&(t.onclick=bc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gv.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),r=t[Ot]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,s);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Gl(t,n,i)}}}function at(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":le("error",t),le("load",t);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(j(137,e));default:ge(t,e,r,a,n,null)}}s&&ge(t,e,"srcSet",n.srcSet,n,null),i&&ge(t,e,"src",n.src,n,null);return;case"input":le("invalid",t);var l=r=a=s=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(j(137,e));break;default:ge(t,e,i,d,n,null)}}Yv(t,r,l,u,h,a,s,!1),yu(t);return;case"select":le("invalid",t),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:ge(t,e,s,l,n,null)}e=r,n=a,t.multiple=!!i,e!=null?Er(t,!!i,e,!1):n!=null&&Er(t,!!i,n,!0);return;case"textarea":le("invalid",t),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(j(91));break;default:ge(t,e,a,l,n,null)}Xv(t,i,s,r),yu(t);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:ge(t,e,u,i,n,null)}return;case"dialog":le("cancel",t),le("close",t);break;case"iframe":case"object":le("load",t);break;case"video":case"audio":for(i=0;i<Eo.length;i++)le(Eo[i],t);break;case"image":le("error",t),le("load",t);break;case"details":le("toggle",t);break;case"embed":case"source":case"link":le("error",t),le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(j(137,e));default:ge(t,e,h,i,n,null)}return;default:if(Pd(e)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&Yf(t,e,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&ge(t,e,l,i,n,null))}function F1(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,u=null,h=null,d=null;for(v in n){var p=n[v];if(n.hasOwnProperty(v)&&p!=null)switch(v){case"checked":break;case"value":break;case"defaultValue":u=p;default:i.hasOwnProperty(v)||ge(t,e,v,null,i,p)}}for(var m in i){var v=i[m];if(p=n[m],i.hasOwnProperty(m)&&(v!=null||p!=null))switch(m){case"type":r=v;break;case"name":s=v;break;case"checked":h=v;break;case"defaultChecked":d=v;break;case"value":a=v;break;case"defaultValue":l=v;break;case"children":case"dangerouslySetInnerHTML":if(v!=null)throw Error(j(137,e));break;default:v!==p&&ge(t,e,m,v,i,p)}}yf(t,a,l,u,h,d,r,s);return;case"select":v=a=l=m=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":v=u;default:i.hasOwnProperty(r)||ge(t,e,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":m=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&ge(t,e,s,r,i,u)}e=l,n=a,i=v,m!=null?Er(t,!!n,m,!1):!!i!=!!n&&(e!=null?Er(t,!!n,e,!0):Er(t,!!n,n?[]:"",!1));return;case"textarea":v=m=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:ge(t,e,l,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":m=s;break;case"defaultValue":v=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(j(91));break;default:s!==r&&ge(t,e,a,s,i,r)}$v(t,m,v);return;case"option":for(var C in n)if(m=n[C],n.hasOwnProperty(C)&&m!=null&&!i.hasOwnProperty(C))switch(C){case"selected":t.selected=!1;break;default:ge(t,e,C,null,i,m)}for(u in i)if(m=i[u],v=n[u],i.hasOwnProperty(u)&&m!==v&&(m!=null||v!=null))switch(u){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ge(t,e,u,m,i,v)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)m=n[O],n.hasOwnProperty(O)&&m!=null&&!i.hasOwnProperty(O)&&ge(t,e,O,null,i,m);for(h in i)if(m=i[h],v=n[h],i.hasOwnProperty(h)&&m!==v&&(m!=null||v!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(j(137,e));break;default:ge(t,e,h,m,i,v)}return;default:if(Pd(e)){for(var k in n)m=n[k],n.hasOwnProperty(k)&&m!==void 0&&!i.hasOwnProperty(k)&&Yf(t,e,k,void 0,i,m);for(d in i)m=i[d],v=n[d],!i.hasOwnProperty(d)||m===v||m===void 0&&v===void 0||Yf(t,e,d,m,i,v);return}}for(var A in n)m=n[A],n.hasOwnProperty(A)&&m!=null&&!i.hasOwnProperty(A)&&ge(t,e,A,null,i,m);for(p in i)m=i[p],v=n[p],!i.hasOwnProperty(p)||m===v||m==null&&v==null||ge(t,e,p,m,i,v)}var $f=null,Xf=null;function Vu(t){return t.nodeType===9?t:t.ownerDocument}function Ry(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function KE(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Wf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yh=null;function G1(){var t=window.event;return t&&t.type==="popstate"?t===Yh?!1:(Yh=t,!0):(Yh=null,!1)}var QE=typeof setTimeout=="function"?setTimeout:void 0,K1=typeof clearTimeout=="function"?clearTimeout:void 0,Iy=typeof Promise=="function"?Promise:void 0,Q1=typeof queueMicrotask=="function"?queueMicrotask:typeof Iy<"u"?function(t){return Iy.resolve(null).then(t).catch(Y1)}:QE;function Y1(t){setTimeout(function(){throw t})}function $h(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Ro(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Ro(e)}function Zf(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Zf(n),Vd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function $1(t,e,n,i){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[fo])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==s.rel||t.getAttribute("href")!==(s.href==null?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=on(t.nextSibling),t===null)break}return null}function X1(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=on(t.nextSibling),t===null))return null;return t}function on(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}function Cy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function YE(t,e,n){switch(e=Vu(n),t){case"html":if(t=e.documentElement,!t)throw Error(j(452));return t;case"head":if(t=e.head,!t)throw Error(j(453));return t;case"body":if(t=e.body,!t)throw Error(j(454));return t;default:throw Error(j(451))}}var tn=new Map,xy=new Set;function Pu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.ownerDocument}var ni=we.d;we.d={f:W1,r:Z1,D:J1,C:eR,L:tR,m:nR,X:sR,S:iR,M:rR};function W1(){var t=ni.f(),e=Ec();return t||e}function Z1(t){var e=Jr(t);e!==null&&e.tag===5&&e.type==="form"?Y0(e):ni.r(t)}var ta=typeof document>"u"?null:document;function $E(t,e,n){var i=ta;if(i&&typeof e=="string"&&e){var s=Xt(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),xy.has(s)||(xy.add(s),t={rel:t,crossOrigin:n,href:e},i.querySelector(s)===null&&(e=i.createElement("link"),at(e,"link",t),Ze(e),i.head.appendChild(e)))}}function J1(t){ni.D(t),$E("dns-prefetch",t,null)}function eR(t,e){ni.C(t,e),$E("preconnect",t,e)}function tR(t,e,n){ni.L(t,e,n);var i=ta;if(i&&t&&e){var s='link[rel="preload"][as="'+Xt(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+Xt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+Xt(n.imageSizes)+'"]')):s+='[href="'+Xt(t)+'"]';var r=s;switch(e){case"style":r=jr(t);break;case"script":r=na(t)}tn.has(r)||(t=Re({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),tn.set(r,t),i.querySelector(s)!==null||e==="style"&&i.querySelector(Ko(r))||e==="script"&&i.querySelector(Qo(r))||(e=i.createElement("link"),at(e,"link",t),Ze(e),i.head.appendChild(e)))}}function nR(t,e){ni.m(t,e);var n=ta;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+Xt(i)+'"][href="'+Xt(t)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=na(t)}if(!tn.has(r)&&(t=Re({rel:"modulepreload",href:t},e),tn.set(r,t),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Qo(r)))return}i=n.createElement("link"),at(i,"link",t),Ze(i),n.head.appendChild(i)}}}function iR(t,e,n){ni.S(t,e,n);var i=ta;if(i&&t){var s=vr(i).hoistableStyles,r=jr(t);e=e||"default";var a=s.get(r);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Ko(r)))l.loading=5;else{t=Re({rel:"stylesheet",href:t,"data-precedence":e},n),(n=tn.get(r))&&_m(t,n);var u=a=i.createElement("link");Ze(u),at(u,"link",t),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,eu(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:l},s.set(r,a)}}}function sR(t,e){ni.X(t,e);var n=ta;if(n&&t){var i=vr(n).hoistableScripts,s=na(t),r=i.get(s);r||(r=n.querySelector(Qo(s)),r||(t=Re({src:t,async:!0},e),(e=tn.get(s))&&vm(t,e),r=n.createElement("script"),Ze(r),at(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function rR(t,e){ni.M(t,e);var n=ta;if(n&&t){var i=vr(n).hoistableScripts,s=na(t),r=i.get(s);r||(r=n.querySelector(Qo(s)),r||(t=Re({src:t,async:!0,type:"module"},e),(e=tn.get(s))&&vm(t,e),r=n.createElement("script"),Ze(r),at(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function Ny(t,e,n,i){var s=(s=xi.current)?Pu(s):null;if(!s)throw Error(j(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=jr(n.href),n=vr(s).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=jr(n.href);var r=vr(s).hoistableStyles,a=r.get(t);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,a),(r=s.querySelector(Ko(t)))&&!r._p&&(a.instance=r,a.state.loading=5),tn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},tn.set(t,n),r||aR(s,t,n,a.state))),e&&i===null)throw Error(j(528,""));return a}if(e&&i!==null)throw Error(j(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=na(n),n=vr(s).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(j(444,t))}}function jr(t){return'href="'+Xt(t)+'"'}function Ko(t){return'link[rel="stylesheet"]['+t+"]"}function XE(t){return Re({},t,{"data-precedence":t.precedence,precedence:null})}function aR(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),at(e,"link",n),Ze(e),t.head.appendChild(e))}function na(t){return'[src="'+Xt(t)+'"]'}function Qo(t){return"script[async]"+t}function Dy(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+Xt(n.href)+'"]');if(i)return e.instance=i,Ze(i),i;var s=Re({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Ze(i),at(i,"style",s),eu(i,n.precedence,t),e.instance=i;case"stylesheet":s=jr(n.href);var r=t.querySelector(Ko(s));if(r)return e.state.loading|=4,e.instance=r,Ze(r),r;i=XE(n),(s=tn.get(s))&&_m(i,s),r=(t.ownerDocument||t).createElement("link"),Ze(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),at(r,"link",i),e.state.loading|=4,eu(r,n.precedence,t),e.instance=r;case"script":return r=na(n.src),(s=t.querySelector(Qo(r)))?(e.instance=s,Ze(s),s):(i=n,(s=tn.get(r))&&(i=Re({},n),vm(i,s)),t=t.ownerDocument||t,s=t.createElement("script"),Ze(s),at(s,"link",i),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(j(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,eu(i,n.precedence,t));return e.instance}function eu(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===e)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function _m(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function vm(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var tu=null;function Oy(t,e,n){if(tu===null){var i=new Map,s=tu=new Map;s.set(n,i)}else s=tu,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var r=n[s];if(!(r[fo]||r[pt]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(e)||"";a=t+a;var l=i.get(a);l?l.push(r):i.set(a,[r])}}return i}function My(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function oR(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function WE(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var bo=null;function lR(){}function uR(t,e,n){if(bo===null)throw Error(j(475));var i=bo;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var s=jr(n.href),r=t.querySelector(Ko(s));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=Lu.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=r,Ze(r);return}r=t.ownerDocument||t,n=XE(n),(s=tn.get(s))&&_m(n,s),r=r.createElement("link"),Ze(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),at(r,"link",n),e.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(i.count++,e=Lu.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}function cR(){if(bo===null)throw Error(j(475));var t=bo;return t.stylesheets&&t.count===0&&Jf(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&Jf(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Lu(){if(this.count--,this.count===0){if(this.stylesheets)Jf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Uu=null;function Jf(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Uu=new Map,e.forEach(hR,t),Uu=null,Lu.call(t))}function hR(t,e){if(!(e.state.loading&4)){var n=Uu.get(t);if(n)var i=n.get(null);else{n=new Map,Uu.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=e.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=Lu.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var So={$$typeof:Pn,Provider:null,Consumer:null,_currentValue:vs,_currentValue2:vs,_threadCount:0};function fR(t,e,n,i,s,r,a,l){this.tag=1,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Eh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eh(0),this.hiddenUpdates=Eh(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function ZE(t,e,n,i,s,r,a,l,u,h,d,p){return t=new fR(t,e,n,a,l,u,h,p),e=1,r===!0&&(e|=24),r=Zt(3,null,null,e),t.current=r,r.stateNode=t,e=Qd(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:e},lm(r),t}function JE(t){return t?(t=gr,t):gr}function eT(t,e,n,i,s,r){s=JE(s),i.context===null?i.context=s:i.pendingContext=s,i=Ni(e),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=Di(t,i,e),n!==null&&(At(n,t,e),Ja(n,t,e))}function ky(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Em(t,e){ky(t,e),(t=t.alternate)&&ky(t,e)}function tT(t){if(t.tag===13){var e=Hi(t,67108864);e!==null&&At(e,t,67108864),Em(t,67108864)}}var ju=!0;function dR(t,e,n,i){var s=ee.T;ee.T=null;var r=we.p;try{we.p=2,Tm(t,e,n,i)}finally{we.p=r,ee.T=s}}function mR(t,e,n,i){var s=ee.T;ee.T=null;var r=we.p;try{we.p=8,Tm(t,e,n,i)}finally{we.p=r,ee.T=s}}function Tm(t,e,n,i){if(ju){var s=ed(i);if(s===null)Qh(t,e,i,zu,n),Vy(t,i);else if(pR(s,t,e,n,i))i.stopPropagation();else if(Vy(t,i),e&4&&-1<gR.indexOf(t)){for(;s!==null;){var r=Jr(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=hs(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-Bt(a);l.entanglements[1]|=u,a&=~u}An(r),!(Ne&6)&&(Nu=gn()+500,Go(0))}}break;case 13:l=Hi(r,2),l!==null&&At(l,r,2),Ec(),Em(r,2)}if(r=ed(i),r===null&&Qh(t,e,i,zu,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else Qh(t,e,i,null,n)}}function ed(t){return t=Ld(t),bm(t)}var zu=null;function bm(t){if(zu=null,t=gs(t),t!==null){var e=Wr(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Mv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return zu=t,null}function nT(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ew()){case Vv:return 2;case Pv:return 8;case pu:case tw:return 32;case Lv:return 268435456;default:return 32}default:return 32}}var td=!1,ki=null,Vi=null,Pi=null,Ao=new Map,wo=new Map,bi=[],gR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vy(t,e){switch(t){case"focusin":case"focusout":ki=null;break;case"dragenter":case"dragleave":Vi=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":Ao.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wo.delete(e.pointerId)}}function Da(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Jr(e),e!==null&&tT(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function pR(t,e,n,i,s){switch(e){case"focusin":return ki=Da(ki,t,e,n,i,s),!0;case"dragenter":return Vi=Da(Vi,t,e,n,i,s),!0;case"mouseover":return Pi=Da(Pi,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return Ao.set(r,Da(Ao.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,wo.set(r,Da(wo.get(r)||null,t,e,n,i,s)),!0}return!1}function iT(t){var e=gs(t.target);if(e!==null){var n=Wr(e);if(n!==null){if(e=n.tag,e===13){if(e=Mv(n),e!==null){t.blockedOn=e,cw(t.priority,function(){if(n.tag===13){var i=qt(),s=Hi(n,i);s!==null&&At(s,n,i),Em(n,i)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ed(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);vf=i,n.target.dispatchEvent(i),vf=null}else return e=Jr(n),e!==null&&tT(e),t.blockedOn=n,!1;e.shift()}return!0}function Py(t,e,n){nu(t)&&n.delete(e)}function yR(){td=!1,ki!==null&&nu(ki)&&(ki=null),Vi!==null&&nu(Vi)&&(Vi=null),Pi!==null&&nu(Pi)&&(Pi=null),Ao.forEach(Py),wo.forEach(Py)}function Pl(t,e){t.blockedOn===e&&(t.blockedOn=null,td||(td=!0,$e.unstable_scheduleCallback($e.unstable_NormalPriority,yR)))}var Ll=null;function Ly(t){Ll!==t&&(Ll=t,$e.unstable_scheduleCallback($e.unstable_NormalPriority,function(){Ll===t&&(Ll=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],s=t[e+2];if(typeof i!="function"){if(bm(i||n)===null)continue;break}var r=Jr(n);r!==null&&(t.splice(e,3),e-=3,xf(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function Ro(t){function e(u){return Pl(u,t)}ki!==null&&Pl(ki,t),Vi!==null&&Pl(Vi,t),Pi!==null&&Pl(Pi,t),Ao.forEach(e),wo.forEach(e);for(var n=0;n<bi.length;n++){var i=bi[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<bi.length&&(n=bi[0],n.blockedOn===null);)iT(n),n.blockedOn===null&&bi.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[Ot]||null;if(typeof r=="function")a||Ly(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[Ot]||null)l=a.formAction;else if(bm(s)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Ly(n)}}}function Sm(t){this._internalRoot=t}Sc.prototype.render=Sm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));var n=e.current,i=qt();eT(n,i,t,e,null,null)};Sc.prototype.unmount=Sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;t.tag===0&&Rr(),eT(t.current,2,null,t,null,null),Ec(),e[Zr]=null}};function Sc(t){this._internalRoot=t}Sc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<bi.length&&e!==0&&e<bi[n].priority;n++);bi.splice(n,0,t),n===0&&iT(t)}};var Uy=Cv.version;if(Uy!=="19.0.0")throw Error(j(527,Uy,"19.0.0"));we.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=WA(e),t=t!==null?kv(t):null,t=t===null?null:t.stateNode,t};var _R={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,findFiberByHostInstance:gs,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{Po=Ul.inject(_R),zt=Ul}catch{}}lc.createRoot=function(t,e){if(!xv(t))throw Error(j(299));var n=!1,i="",s=eE,r=tE,a=nE,l=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(l=e.unstable_transitionCallbacks)),e=ZE(t,1,!1,null,null,n,i,s,r,a,l,null),t[Zr]=e.current,ym(t.nodeType===8?t.parentNode:t),new Sm(e)};lc.hydrateRoot=function(t,e,n){if(!xv(t))throw Error(j(299));var i=!1,s="",r=eE,a=tE,l=nE,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),e=ZE(t,1,!0,e,n??null,i,s,r,a,l,u,h),e.context=JE(null),n=e.current,i=qt(),s=Ni(i),s.callback=null,Di(n,s,i),e.current.lanes=i,Uo(e,i),An(e),t[Zr]=e.current,ym(t),new Sc(e)};lc.version="19.0.0";function sT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sT)}catch(t){console.error(t)}}sT(),bv.exports=lc;var vR=bv.exports;/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rT=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=B.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:s="",children:r,iconNode:a,...l},u)=>B.createElement("svg",{ref:u,...TR,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:rT("lucide",s),...l},[...a.map(([h,d])=>B.createElement(h,d)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=(t,e)=>{const n=B.forwardRef(({className:i,...s},r)=>B.createElement(bR,{ref:r,iconNode:e,className:rT(`lucide-${ER(t)}`,i),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ac=lt("Calendar",SR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],aT=lt("ChartColumn",AR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],oT=lt("ChevronLeft",wR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],lT=lt("ChevronRight",RR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],uT=lt("Clock",IR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],cT=lt("CreditCard",CR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],NR=lt("Link",xR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],OR=lt("List",DR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],kR=lt("LogOut",MR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],PR=lt("MapPin",VR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],UR=lt("Menu",LR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],hT=lt("Pencil",jR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Am=lt("Plus",zR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],qR=lt("Trash2",BR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],fT=lt("UserCheck",HR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],GR=lt("User",FR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],dT=lt("Users",KR),QR=()=>{};var jy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},YR=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const r=t[n++],a=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return e.join("")},gT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,d=r>>2,p=(r&3)<<4|l>>4;let m=(l&15)<<2|h>>6,v=h&63;u||(v=64,a||(m=64)),i.push(n[d],n[p],n[m],n[v])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||l==null||h==null||p==null)throw new $R;const m=r<<2|l>>4;if(i.push(m),h!==64){const v=l<<4&240|h>>2;if(i.push(v),p!==64){const C=h<<6&192|p;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $R extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XR=function(t){const e=mT(t);return gT.encodeByteArray(e,!0)},Bu=function(t){return XR(t).replace(/\./g,"")},pT=function(t){try{return gT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=()=>WR().__FIREBASE_DEFAULTS__,JR=()=>{if(typeof process>"u"||typeof jy>"u")return;const t=jy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pT(t[1]);return e&&JSON.parse(e)},wc=()=>{try{return QR()||ZR()||JR()||eI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yT=t=>{var e,n;return(n=(e=wc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},tI=t=>{const e=yT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},_T=()=>{var t;return(t=wc())===null||t===void 0?void 0:t.config},vT=t=>{var e;return(e=wc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bu(JSON.stringify(n)),Bu(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function rI(){var t;const e=(t=wc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uI(){const t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cI(){return!rI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hI(){try{return typeof indexedDB=="object"}catch{return!1}}function fI(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="FirebaseError";class ii extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=dI,Object.setPrototypeOf(this,ii.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yo.prototype.create)}}class Yo{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],a=r?mI(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new ii(s,l,i)}}function mI(t,e){return t.replace(gI,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const gI=/\{\$([^}]+)}/g;function pI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ns(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],a=e[s];if(zy(r)&&zy(a)){if(!Ns(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function zy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ua(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function ja(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function yI(t,e){const n=new _I(t,e);return n.subscribe.bind(n)}class _I{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");vI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Xh),s.error===void 0&&(s.error=Xh),s.complete===void 0&&(s.complete=Xh);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t){return t&&t._delegate?t._delegate:t}class Ds{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new nI;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bI(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const a=this.instances.get(s);return a&&e(a,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:TI(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TI(t){return t===ds?void 0:t}function bI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new EI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const AI={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},wI=re.INFO,RI={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},II=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=RI[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wm{constructor(e){this.name=e,this._logLevel=wI,this._logHandler=II,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const CI=(t,e)=>e.some(n=>t instanceof n);let By,qy;function xI(){return By||(By=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NI(){return qy||(qy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ET=new WeakMap,nd=new WeakMap,TT=new WeakMap,Wh=new WeakMap,Rm=new WeakMap;function DI(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",a)},r=()=>{n(Li(t.result)),s()},a=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&ET.set(n,t)}).catch(()=>{}),Rm.set(e,t),e}function OI(t){if(nd.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",a),t.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",a),t.addEventListener("abort",a)});nd.set(t,e)}let id={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Li(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MI(t){id=t(id)}function kI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Zh(this),e,...n);return TT.set(i,e.sort?e.sort():[e]),Li(i)}:NI().includes(t)?function(...e){return t.apply(Zh(this),e),Li(ET.get(this))}:function(...e){return Li(t.apply(Zh(this),e))}}function VI(t){return typeof t=="function"?kI(t):(t instanceof IDBTransaction&&OI(t),CI(t,xI())?new Proxy(t,id):t)}function Li(t){if(t instanceof IDBRequest)return DI(t);if(Wh.has(t))return Wh.get(t);const e=VI(t);return e!==t&&(Wh.set(t,e),Rm.set(e,t)),e}const Zh=t=>Rm.get(t);function PI(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(t,e),l=Li(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Li(a.result),u.oldVersion,u.newVersion,Li(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const LI=["get","getKey","getAll","getAllKeys","count"],UI=["put","add","delete","clear"],Jh=new Map;function Hy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jh.get(e))return Jh.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=UI.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||LI.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return Jh.set(e,r),r}MI(t=>({...t,get:(e,n,i)=>Hy(e,n)||t.get(e,n,i),has:(e,n)=>!!Hy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zI(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function zI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sd="@firebase/app",Fy="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn=new wm("@firebase/app"),BI="@firebase/app-compat",qI="@firebase/analytics-compat",HI="@firebase/analytics",FI="@firebase/app-check-compat",GI="@firebase/app-check",KI="@firebase/auth",QI="@firebase/auth-compat",YI="@firebase/database",$I="@firebase/data-connect",XI="@firebase/database-compat",WI="@firebase/functions",ZI="@firebase/functions-compat",JI="@firebase/installations",eC="@firebase/installations-compat",tC="@firebase/messaging",nC="@firebase/messaging-compat",iC="@firebase/performance",sC="@firebase/performance-compat",rC="@firebase/remote-config",aC="@firebase/remote-config-compat",oC="@firebase/storage",lC="@firebase/storage-compat",uC="@firebase/firestore",cC="@firebase/vertexai",hC="@firebase/firestore-compat",fC="firebase",dC="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd="[DEFAULT]",mC={[sd]:"fire-core",[BI]:"fire-core-compat",[HI]:"fire-analytics",[qI]:"fire-analytics-compat",[GI]:"fire-app-check",[FI]:"fire-app-check-compat",[KI]:"fire-auth",[QI]:"fire-auth-compat",[YI]:"fire-rtdb",[$I]:"fire-data-connect",[XI]:"fire-rtdb-compat",[WI]:"fire-fn",[ZI]:"fire-fn-compat",[JI]:"fire-iid",[eC]:"fire-iid-compat",[tC]:"fire-fcm",[nC]:"fire-fcm-compat",[iC]:"fire-perf",[sC]:"fire-perf-compat",[rC]:"fire-rc",[aC]:"fire-rc-compat",[oC]:"fire-gcs",[lC]:"fire-gcs-compat",[uC]:"fire-fst",[hC]:"fire-fst-compat",[cC]:"fire-vertex","fire-js":"fire-js",[fC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=new Map,gC=new Map,ad=new Map;function Gy(t,e){try{t.container.addComponent(e)}catch(n){Zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zr(t){const e=t.name;if(ad.has(e))return Zn.debug(`There were multiple attempts to register component ${e}.`),!1;ad.set(e,t);for(const n of qu.values())Gy(n,t);for(const n of gC.values())Gy(n,t);return!0}function Im(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ut(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new Yo("app","Firebase",pC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=dC;function bT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:rd,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Ui.create("bad-app-name",{appName:String(s)});if(n||(n=_T()),!n)throw Ui.create("no-options");const r=qu.get(s);if(r){if(Ns(n,r.options)&&Ns(i,r.config))return r;throw Ui.create("duplicate-app",{appName:s})}const a=new SI(s);for(const u of ad.values())a.addComponent(u);const l=new yC(n,i,a);return qu.set(s,l),l}function ST(t=rd){const e=qu.get(t);if(!e&&t===rd&&_T())return bT();if(!e)throw Ui.create("no-app",{appName:t});return e}function ji(t,e,n){var i;let s=(i=mC[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const l=[`Unable to register library "${s}" with version "${e}":`];r&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zn.warn(l.join(" "));return}zr(new Ds(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="firebase-heartbeat-database",vC=1,Io="firebase-heartbeat-store";let ef=null;function AT(){return ef||(ef=PI(_C,vC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Io)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ui.create("idb-open",{originalErrorMessage:t.message})})),ef}async function EC(t){try{const n=(await AT()).transaction(Io),i=await n.objectStore(Io).get(wT(t));return await n.done,i}catch(e){if(e instanceof ii)Zn.warn(e.message);else{const n=Ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zn.warn(n.message)}}}async function Ky(t,e){try{const i=(await AT()).transaction(Io,"readwrite");await i.objectStore(Io).put(e,wT(t)),await i.done}catch(n){if(n instanceof ii)Zn.warn(n.message);else{const i=Ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zn.warn(i.message)}}}function wT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=1024,bC=30;class SC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wC(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Qy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>bC){const a=RC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Zn.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qy(),{heartbeatsToSend:i,unsentEntries:s}=AC(this._heartbeatsCache.heartbeats),r=Bu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Zn.warn(n),""}}}function Qy(){return new Date().toISOString().substring(0,10)}function AC(t,e=TC){const n=[];let i=t.slice();for(const s of t){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),Yy(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Yy(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class wC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hI()?fI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await EC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ky(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Yy(t){return Bu(JSON.stringify({version:2,heartbeats:t})).length}function RC(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(t){zr(new Ds("platform-logger",e=>new jI(e),"PRIVATE")),zr(new Ds("heartbeat",e=>new SC(e),"PRIVATE")),ji(sd,Fy,t),ji(sd,Fy,"esm2017"),ji("fire-js","")}IC("");var CC="firebase",xC="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ji(CC,xC,"app");var $y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zi,RT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function b(){}b.prototype=_.prototype,T.D=_.prototype,T.prototype=new b,T.prototype.constructor=T,T.C=function(w,I,N){for(var R=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)R[Ve-2]=arguments[Ve];return _.prototype[I].apply(w,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,_,b){b||(b=0);var w=Array(16);if(typeof _=="string")for(var I=0;16>I;++I)w[I]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(I=0;16>I;++I)w[I]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=T.g[0],b=T.g[1],I=T.g[2];var N=T.g[3],R=_+(N^b&(I^N))+w[0]+3614090360&4294967295;_=b+(R<<7&4294967295|R>>>25),R=N+(I^_&(b^I))+w[1]+3905402710&4294967295,N=_+(R<<12&4294967295|R>>>20),R=I+(b^N&(_^b))+w[2]+606105819&4294967295,I=N+(R<<17&4294967295|R>>>15),R=b+(_^I&(N^_))+w[3]+3250441966&4294967295,b=I+(R<<22&4294967295|R>>>10),R=_+(N^b&(I^N))+w[4]+4118548399&4294967295,_=b+(R<<7&4294967295|R>>>25),R=N+(I^_&(b^I))+w[5]+1200080426&4294967295,N=_+(R<<12&4294967295|R>>>20),R=I+(b^N&(_^b))+w[6]+2821735955&4294967295,I=N+(R<<17&4294967295|R>>>15),R=b+(_^I&(N^_))+w[7]+4249261313&4294967295,b=I+(R<<22&4294967295|R>>>10),R=_+(N^b&(I^N))+w[8]+1770035416&4294967295,_=b+(R<<7&4294967295|R>>>25),R=N+(I^_&(b^I))+w[9]+2336552879&4294967295,N=_+(R<<12&4294967295|R>>>20),R=I+(b^N&(_^b))+w[10]+4294925233&4294967295,I=N+(R<<17&4294967295|R>>>15),R=b+(_^I&(N^_))+w[11]+2304563134&4294967295,b=I+(R<<22&4294967295|R>>>10),R=_+(N^b&(I^N))+w[12]+1804603682&4294967295,_=b+(R<<7&4294967295|R>>>25),R=N+(I^_&(b^I))+w[13]+4254626195&4294967295,N=_+(R<<12&4294967295|R>>>20),R=I+(b^N&(_^b))+w[14]+2792965006&4294967295,I=N+(R<<17&4294967295|R>>>15),R=b+(_^I&(N^_))+w[15]+1236535329&4294967295,b=I+(R<<22&4294967295|R>>>10),R=_+(I^N&(b^I))+w[1]+4129170786&4294967295,_=b+(R<<5&4294967295|R>>>27),R=N+(b^I&(_^b))+w[6]+3225465664&4294967295,N=_+(R<<9&4294967295|R>>>23),R=I+(_^b&(N^_))+w[11]+643717713&4294967295,I=N+(R<<14&4294967295|R>>>18),R=b+(N^_&(I^N))+w[0]+3921069994&4294967295,b=I+(R<<20&4294967295|R>>>12),R=_+(I^N&(b^I))+w[5]+3593408605&4294967295,_=b+(R<<5&4294967295|R>>>27),R=N+(b^I&(_^b))+w[10]+38016083&4294967295,N=_+(R<<9&4294967295|R>>>23),R=I+(_^b&(N^_))+w[15]+3634488961&4294967295,I=N+(R<<14&4294967295|R>>>18),R=b+(N^_&(I^N))+w[4]+3889429448&4294967295,b=I+(R<<20&4294967295|R>>>12),R=_+(I^N&(b^I))+w[9]+568446438&4294967295,_=b+(R<<5&4294967295|R>>>27),R=N+(b^I&(_^b))+w[14]+3275163606&4294967295,N=_+(R<<9&4294967295|R>>>23),R=I+(_^b&(N^_))+w[3]+4107603335&4294967295,I=N+(R<<14&4294967295|R>>>18),R=b+(N^_&(I^N))+w[8]+1163531501&4294967295,b=I+(R<<20&4294967295|R>>>12),R=_+(I^N&(b^I))+w[13]+2850285829&4294967295,_=b+(R<<5&4294967295|R>>>27),R=N+(b^I&(_^b))+w[2]+4243563512&4294967295,N=_+(R<<9&4294967295|R>>>23),R=I+(_^b&(N^_))+w[7]+1735328473&4294967295,I=N+(R<<14&4294967295|R>>>18),R=b+(N^_&(I^N))+w[12]+2368359562&4294967295,b=I+(R<<20&4294967295|R>>>12),R=_+(b^I^N)+w[5]+4294588738&4294967295,_=b+(R<<4&4294967295|R>>>28),R=N+(_^b^I)+w[8]+2272392833&4294967295,N=_+(R<<11&4294967295|R>>>21),R=I+(N^_^b)+w[11]+1839030562&4294967295,I=N+(R<<16&4294967295|R>>>16),R=b+(I^N^_)+w[14]+4259657740&4294967295,b=I+(R<<23&4294967295|R>>>9),R=_+(b^I^N)+w[1]+2763975236&4294967295,_=b+(R<<4&4294967295|R>>>28),R=N+(_^b^I)+w[4]+1272893353&4294967295,N=_+(R<<11&4294967295|R>>>21),R=I+(N^_^b)+w[7]+4139469664&4294967295,I=N+(R<<16&4294967295|R>>>16),R=b+(I^N^_)+w[10]+3200236656&4294967295,b=I+(R<<23&4294967295|R>>>9),R=_+(b^I^N)+w[13]+681279174&4294967295,_=b+(R<<4&4294967295|R>>>28),R=N+(_^b^I)+w[0]+3936430074&4294967295,N=_+(R<<11&4294967295|R>>>21),R=I+(N^_^b)+w[3]+3572445317&4294967295,I=N+(R<<16&4294967295|R>>>16),R=b+(I^N^_)+w[6]+76029189&4294967295,b=I+(R<<23&4294967295|R>>>9),R=_+(b^I^N)+w[9]+3654602809&4294967295,_=b+(R<<4&4294967295|R>>>28),R=N+(_^b^I)+w[12]+3873151461&4294967295,N=_+(R<<11&4294967295|R>>>21),R=I+(N^_^b)+w[15]+530742520&4294967295,I=N+(R<<16&4294967295|R>>>16),R=b+(I^N^_)+w[2]+3299628645&4294967295,b=I+(R<<23&4294967295|R>>>9),R=_+(I^(b|~N))+w[0]+4096336452&4294967295,_=b+(R<<6&4294967295|R>>>26),R=N+(b^(_|~I))+w[7]+1126891415&4294967295,N=_+(R<<10&4294967295|R>>>22),R=I+(_^(N|~b))+w[14]+2878612391&4294967295,I=N+(R<<15&4294967295|R>>>17),R=b+(N^(I|~_))+w[5]+4237533241&4294967295,b=I+(R<<21&4294967295|R>>>11),R=_+(I^(b|~N))+w[12]+1700485571&4294967295,_=b+(R<<6&4294967295|R>>>26),R=N+(b^(_|~I))+w[3]+2399980690&4294967295,N=_+(R<<10&4294967295|R>>>22),R=I+(_^(N|~b))+w[10]+4293915773&4294967295,I=N+(R<<15&4294967295|R>>>17),R=b+(N^(I|~_))+w[1]+2240044497&4294967295,b=I+(R<<21&4294967295|R>>>11),R=_+(I^(b|~N))+w[8]+1873313359&4294967295,_=b+(R<<6&4294967295|R>>>26),R=N+(b^(_|~I))+w[15]+4264355552&4294967295,N=_+(R<<10&4294967295|R>>>22),R=I+(_^(N|~b))+w[6]+2734768916&4294967295,I=N+(R<<15&4294967295|R>>>17),R=b+(N^(I|~_))+w[13]+1309151649&4294967295,b=I+(R<<21&4294967295|R>>>11),R=_+(I^(b|~N))+w[4]+4149444226&4294967295,_=b+(R<<6&4294967295|R>>>26),R=N+(b^(_|~I))+w[11]+3174756917&4294967295,N=_+(R<<10&4294967295|R>>>22),R=I+(_^(N|~b))+w[2]+718787259&4294967295,I=N+(R<<15&4294967295|R>>>17),R=b+(N^(I|~_))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+I&4294967295,T.g[3]=T.g[3]+N&4294967295}i.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var b=_-this.blockSize,w=this.B,I=this.h,N=0;N<_;){if(I==0)for(;N<=b;)s(this,T,N),N+=this.blockSize;if(typeof T=="string"){for(;N<_;)if(w[I++]=T.charCodeAt(N++),I==this.blockSize){s(this,w),I=0;break}}else for(;N<_;)if(w[I++]=T[N++],I==this.blockSize){s(this,w),I=0;break}}this.h=I,this.o+=_},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var b=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=b&255,b/=256;for(this.u(T),T=Array(16),_=b=0;4>_;++_)for(var w=0;32>w;w+=8)T[b++]=this.g[_]>>>w&255;return T};function r(T,_){var b=l;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=_(T)}function a(T,_){this.h=_;for(var b=[],w=!0,I=T.length-1;0<=I;I--){var N=T[I]|0;w&&N==_||(b[I]=N,w=!1)}this.g=b}var l={};function u(T){return-128<=T&&128>T?r(T,function(_){return new a([_|0],0>_?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return k(h(-T));for(var _=[],b=1,w=0;T>=b;w++)_[w]=T/b|0,b*=4294967296;return new a(_,0)}function d(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return k(d(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=h(Math.pow(_,8)),w=p,I=0;I<T.length;I+=8){var N=Math.min(8,T.length-I),R=parseInt(T.substring(I,I+N),_);8>N?(N=h(Math.pow(_,N)),w=w.j(N).add(h(R))):(w=w.j(b),w=w.add(h(R)))}return w}var p=u(0),m=u(1),v=u(16777216);t=a.prototype,t.m=function(){if(O(this))return-k(this).m();for(var T=0,_=1,b=0;b<this.g.length;b++){var w=this.i(b);T+=(0<=w?w:4294967296+w)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(O(this))return"-"+k(this).toString(T);for(var _=h(Math.pow(T,6)),b=this,w="";;){var I=x(b,_).g;b=A(b,I.j(_));var N=((0<b.g.length?b.g[0]:b.h)>>>0).toString(T);if(b=I,C(b))return N+w;for(;6>N.length;)N="0"+N;w=N+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function O(T){return T.h==-1}t.l=function(T){return T=A(this,T),O(T)?-1:C(T)?0:1};function k(T){for(var _=T.g.length,b=[],w=0;w<_;w++)b[w]=~T.g[w];return new a(b,~T.h).add(m)}t.abs=function(){return O(this)?k(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],w=0,I=0;I<=_;I++){var N=w+(this.i(I)&65535)+(T.i(I)&65535),R=(N>>>16)+(this.i(I)>>>16)+(T.i(I)>>>16);w=R>>>16,N&=65535,R&=65535,b[I]=R<<16|N}return new a(b,b[b.length-1]&-2147483648?-1:0)};function A(T,_){return T.add(k(_))}t.j=function(T){if(C(this)||C(T))return p;if(O(this))return O(T)?k(this).j(k(T)):k(k(this).j(T));if(O(T))return k(this.j(k(T)));if(0>this.l(v)&&0>T.l(v))return h(this.m()*T.m());for(var _=this.g.length+T.g.length,b=[],w=0;w<2*_;w++)b[w]=0;for(w=0;w<this.g.length;w++)for(var I=0;I<T.g.length;I++){var N=this.i(w)>>>16,R=this.i(w)&65535,Ve=T.i(I)>>>16,ut=T.i(I)&65535;b[2*w+2*I]+=R*ut,E(b,2*w+2*I),b[2*w+2*I+1]+=N*ut,E(b,2*w+2*I+1),b[2*w+2*I+1]+=R*Ve,E(b,2*w+2*I+1),b[2*w+2*I+2]+=N*Ve,E(b,2*w+2*I+2)}for(w=0;w<_;w++)b[w]=b[2*w+1]<<16|b[2*w];for(w=_;w<2*_;w++)b[w]=0;return new a(b,0)};function E(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function S(T,_){this.g=T,this.h=_}function x(T,_){if(C(_))throw Error("division by zero");if(C(T))return new S(p,p);if(O(T))return _=x(k(T),_),new S(k(_.g),k(_.h));if(O(_))return _=x(T,k(_)),new S(k(_.g),_.h);if(30<T.g.length){if(O(T)||O(_))throw Error("slowDivide_ only works with positive integers.");for(var b=m,w=_;0>=w.l(T);)b=V(b),w=V(w);var I=P(b,1),N=P(w,1);for(w=P(w,2),b=P(b,2);!C(w);){var R=N.add(w);0>=R.l(T)&&(I=I.add(b),N=R),w=P(w,1),b=P(b,1)}return _=A(T,I.j(_)),new S(I,_)}for(I=p;0<=T.l(_);){for(b=Math.max(1,Math.floor(T.m()/_.m())),w=Math.ceil(Math.log(b)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),N=h(b),R=N.j(_);O(R)||0<R.l(T);)b-=w,N=h(b),R=N.j(_);C(N)&&(N=m),I=I.add(N),T=A(T,R)}return new S(I,T)}t.A=function(T){return x(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],w=0;w<_;w++)b[w]=this.i(w)&T.i(w);return new a(b,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],w=0;w<_;w++)b[w]=this.i(w)|T.i(w);return new a(b,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],w=0;w<_;w++)b[w]=this.i(w)^T.i(w);return new a(b,this.h^T.h)};function V(T){for(var _=T.g.length+1,b=[],w=0;w<_;w++)b[w]=T.i(w)<<1|T.i(w-1)>>>31;return new a(b,T.h)}function P(T,_){var b=_>>5;_%=32;for(var w=T.g.length-b,I=[],N=0;N<w;N++)I[N]=0<_?T.i(N+b)>>>_|T.i(N+b+1)<<32-_:T.i(N+b);return new a(I,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,RT=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,zi=a}).apply(typeof $y<"u"?$y:typeof self<"u"?self:typeof window<"u"?window:{});var jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IT,za,CT,iu,od,xT,NT,DT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof jl=="object"&&jl];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function s(o,c){if(c)e:{var f=i;o=o.split(".");for(var y=0;y<o.length-1;y++){var D=o[y];if(!(D in f))break e;f=f[D]}o=o[o.length-1],y=f[o],c=c(y),c!=y&&c!=null&&e(f,o,{configurable:!0,writable:!0,value:c})}}function r(o,c){o instanceof String&&(o+="");var f=0,y=!1,D={next:function(){if(!y&&f<o.length){var M=f++;return{value:c(M,o[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(o){return o||function(){return r(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function p(o,c,f){if(!o)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,y),o.apply(c,D)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function v(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),o.apply(this,y)}}function C(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(y,D,M){for(var z=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)z[ve-2]=arguments[ve];return c.prototype[D].apply(y,z)}}function O(o){const c=o.length;if(0<c){const f=Array(c);for(let y=0;y<c;y++)f[y]=o[y];return f}return[]}function k(o,c){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(u(y)){const D=o.length||0,M=y.length||0;o.length=D+M;for(let z=0;z<M;z++)o[D+z]=y[z]}else o.push(y)}}class A{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function S(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function x(o){return x[" "](o),o}x[" "]=function(){};var V=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function P(o,c,f){for(const y in o)c.call(f,o[y],y,o)}function T(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function _(o){const c={};for(const f in o)c[f]=o[f];return c}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,c){let f,y;for(let D=1;D<arguments.length;D++){y=arguments[D];for(f in y)o[f]=y[f];for(let M=0;M<b.length;M++)f=b[M],Object.prototype.hasOwnProperty.call(y,f)&&(o[f]=y[f])}}function I(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function N(o){l.setTimeout(()=>{throw o},0)}function R(){var o=ye;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class Ve{constructor(){this.h=this.g=null}add(c,f){const y=ut.get();y.set(c,f),this.h?this.h.next=y:this.g=y,this.h=y}}var ut=new A(()=>new q,o=>o.reset());class q{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let W,X=!1,ye=new Ve,H=()=>{const o=l.Promise.resolve(void 0);W=()=>{o.then(ie)}};var ie=()=>{for(var o;o=R();){try{o.h.call(o.g)}catch(f){N(f)}var c=ut;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}X=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function Fe(o,c){if(Y.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,y=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(V){e:{try{x(c.nodeName);var D=!0;break e}catch{}D=!1}D||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:ss[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Fe.aa.h.call(this)}}C(Fe,Y);var ss={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var vt="closure_listenable_"+(1e6*Math.random()|0),ca=0;function wn(o,c,f,y,D){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!y,this.ha=D,this.key=++ca,this.da=this.fa=!1}function oi(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function li(o){this.src=o,this.g={},this.h=0}li.prototype.add=function(o,c,f,y,D){var M=o.toString();o=this.g[M],o||(o=this.g[M]=[],this.h++);var z=Ks(o,c,y,D);return-1<z?(c=o[z],f||(c.fa=!1)):(c=new wn(c,this.src,M,!!y,D),c.fa=f,o.push(c)),c};function rs(o,c){var f=c.type;if(f in o.g){var y=o.g[f],D=Array.prototype.indexOf.call(y,c,void 0),M;(M=0<=D)&&Array.prototype.splice.call(y,D,1),M&&(oi(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Ks(o,c,f,y){for(var D=0;D<o.length;++D){var M=o[D];if(!M.da&&M.listener==c&&M.capture==!!f&&M.ha==y)return D}return-1}var Yc="closure_lm_"+(1e6*Math.random()|0),$c={};function _g(o,c,f,y,D){if(Array.isArray(c)){for(var M=0;M<c.length;M++)_g(o,c[M],f,y,D);return null}return f=Tg(f),o&&o[vt]?o.K(c,f,h(y)?!!y.capture:!1,D):YS(o,c,f,!1,y,D)}function YS(o,c,f,y,D,M){if(!c)throw Error("Invalid event type");var z=h(D)?!!D.capture:!!D,ve=Wc(o);if(ve||(o[Yc]=ve=new li(o)),f=ve.add(c,f,y,z,M),f.proxy)return f;if(y=$S(),f.proxy=y,y.src=o,y.listener=f,o.addEventListener)_e||(D=z),D===void 0&&(D=!1),o.addEventListener(c.toString(),y,D);else if(o.attachEvent)o.attachEvent(Eg(c.toString()),y);else if(o.addListener&&o.removeListener)o.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function $S(){function o(f){return c.call(o.src,o.listener,f)}const c=XS;return o}function vg(o,c,f,y,D){if(Array.isArray(c))for(var M=0;M<c.length;M++)vg(o,c[M],f,y,D);else y=h(y)?!!y.capture:!!y,f=Tg(f),o&&o[vt]?(o=o.i,c=String(c).toString(),c in o.g&&(M=o.g[c],f=Ks(M,f,y,D),-1<f&&(oi(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete o.g[c],o.h--)))):o&&(o=Wc(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Ks(c,f,y,D)),(f=-1<o?c[o]:null)&&Xc(f))}function Xc(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[vt])rs(c.i,o);else{var f=o.type,y=o.proxy;c.removeEventListener?c.removeEventListener(f,y,o.capture):c.detachEvent?c.detachEvent(Eg(f),y):c.addListener&&c.removeListener&&c.removeListener(y),(f=Wc(c))?(rs(f,o),f.h==0&&(f.src=null,c[Yc]=null)):oi(o)}}}function Eg(o){return o in $c?$c[o]:$c[o]="on"+o}function XS(o,c){if(o.da)o=!0;else{c=new Fe(c,this);var f=o.listener,y=o.ha||o.src;o.fa&&Xc(o),o=f.call(y,c)}return o}function Wc(o){return o=o[Yc],o instanceof li?o:null}var Zc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tg(o){return typeof o=="function"?o:(o[Zc]||(o[Zc]=function(c){return o.handleEvent(c)}),o[Zc])}function ct(){oe.call(this),this.i=new li(this),this.M=this,this.F=null}C(ct,oe),ct.prototype[vt]=!0,ct.prototype.removeEventListener=function(o,c,f,y){vg(this,o,c,f,y)};function Et(o,c){var f,y=o.F;if(y)for(f=[];y;y=y.F)f.push(y);if(o=o.M,y=c.type||c,typeof c=="string")c=new Y(c,o);else if(c instanceof Y)c.target=c.target||o;else{var D=c;c=new Y(y,o),w(c,D)}if(D=!0,f)for(var M=f.length-1;0<=M;M--){var z=c.g=f[M];D=ol(z,y,!0,c)&&D}if(z=c.g=o,D=ol(z,y,!0,c)&&D,D=ol(z,y,!1,c)&&D,f)for(M=0;M<f.length;M++)z=c.g=f[M],D=ol(z,y,!1,c)&&D}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],y=0;y<f.length;y++)oi(f[y]);delete o.g[c],o.h--}}this.F=null},ct.prototype.K=function(o,c,f,y){return this.i.add(String(o),c,!1,f,y)},ct.prototype.L=function(o,c,f,y){return this.i.add(String(o),c,!0,f,y)};function ol(o,c,f,y){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var D=!0,M=0;M<c.length;++M){var z=c[M];if(z&&!z.da&&z.capture==f){var ve=z.listener,tt=z.ha||z.src;z.fa&&rs(o.i,z),D=ve.call(tt,y)!==!1&&D}}return D&&!y.defaultPrevented}function bg(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Sg(o){o.g=bg(()=>{o.g=null,o.i&&(o.i=!1,Sg(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class WS extends oe{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Sg(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ha(o){oe.call(this),this.h=o,this.g={}}C(ha,oe);var Ag=[];function wg(o){P(o.g,function(c,f){this.g.hasOwnProperty(f)&&Xc(c)},o),o.g={}}ha.prototype.N=function(){ha.aa.N.call(this),wg(this)},ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jc=l.JSON.stringify,ZS=l.JSON.parse,JS=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function eh(){}eh.prototype.h=null;function Rg(o){return o.h||(o.h=o.i())}function Ig(){}var fa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function th(){Y.call(this,"d")}C(th,Y);function nh(){Y.call(this,"c")}C(nh,Y);var as={},Cg=null;function ll(){return Cg=Cg||new ct}as.La="serverreachability";function xg(o){Y.call(this,as.La,o)}C(xg,Y);function da(o){const c=ll();Et(c,new xg(c))}as.STAT_EVENT="statevent";function Ng(o,c){Y.call(this,as.STAT_EVENT,o),this.stat=c}C(Ng,Y);function Tt(o){const c=ll();Et(c,new Ng(c,o))}as.Ma="timingevent";function Dg(o,c){Y.call(this,as.Ma,o),this.size=c}C(Dg,Y);function ma(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function ga(){this.g=!0}ga.prototype.xa=function(){this.g=!1};function eA(o,c,f,y,D,M){o.info(function(){if(o.g)if(M)for(var z="",ve=M.split("&"),tt=0;tt<ve.length;tt++){var fe=ve[tt].split("=");if(1<fe.length){var ht=fe[0];fe=fe[1];var ft=ht.split("_");z=2<=ft.length&&ft[1]=="type"?z+(ht+"="+fe+"&"):z+(ht+"=redacted&")}}else z=null;else z=M;return"XMLHTTP REQ ("+y+") [attempt "+D+"]: "+c+`
`+f+`
`+z})}function tA(o,c,f,y,D,M,z){o.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+D+"]: "+c+`
`+f+`
`+M+" "+z})}function Qs(o,c,f,y){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+iA(o,f)+(y?" "+y:"")})}function nA(o,c){o.info(function(){return"TIMEOUT: "+c})}ga.prototype.info=function(){};function iA(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var y=f[o];if(!(2>y.length)){var D=y[1];if(Array.isArray(D)&&!(1>D.length)){var M=D[0];if(M!="noop"&&M!="stop"&&M!="close")for(var z=1;z<D.length;z++)D[z]=""}}}}return Jc(f)}catch{return c}}var ul={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Og={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ih;function cl(){}C(cl,eh),cl.prototype.g=function(){return new XMLHttpRequest},cl.prototype.i=function(){return{}},ih=new cl;function ui(o,c,f,y){this.j=o,this.i=c,this.l=f,this.R=y||1,this.U=new ha(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mg}function Mg(){this.i=null,this.g="",this.h=!1}var kg={},sh={};function rh(o,c,f){o.L=1,o.v=ml(Rn(c)),o.m=f,o.P=!0,Vg(o,null)}function Vg(o,c){o.F=Date.now(),hl(o),o.A=Rn(o.v);var f=o.A,y=o.R;Array.isArray(y)||(y=[String(y)]),$g(f.i,"t",y),o.C=0,f=o.j.J,o.h=new Mg,o.g=dp(o.j,f?c:null,!o.m),0<o.O&&(o.M=new WS(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,y=o.ca;var D="readystatechange";Array.isArray(D)||(D&&(Ag[0]=D.toString()),D=Ag);for(var M=0;M<D.length;M++){var z=_g(f,D[M],y||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?_(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),da(),eA(o.i,o.u,o.A,o.l,o.R,o.m)}ui.prototype.ca=function(o){o=o.target;const c=this.M;c&&In(o)==3?c.j():this.Y(o)},ui.prototype.Y=function(o){try{if(o==this.g)e:{const ft=In(this.g);var c=this.g.Ba();const Xs=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||np(this.g)))){this.J||ft!=4||c==7||(c==8||0>=Xs?da(3):da(2)),ah(this);var f=this.g.Z();this.X=f;t:if(Pg(this)){var y=np(this.g);o="";var D=y.length,M=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){os(this),pa(this);var z="";break t}this.h.i=new l.TextDecoder}for(c=0;c<D;c++)this.h.h=!0,o+=this.h.i.decode(y[c],{stream:!(M&&c==D-1)});y.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,tA(this.i,this.u,this.A,this.l,this.R,ft,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,tt=this.g;if((ve=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ve)){var fe=ve;break t}}fe=null}if(f=fe)Qs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oh(this,f);else{this.o=!1,this.s=3,Tt(12),os(this),pa(this);break e}}if(this.P){f=!0;let sn;for(;!this.J&&this.C<z.length;)if(sn=sA(this,z),sn==sh){ft==4&&(this.s=4,Tt(14),f=!1),Qs(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==kg){this.s=4,Tt(15),Qs(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else Qs(this.i,this.l,sn,null),oh(this,sn);if(Pg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||z.length!=0||this.h.h||(this.s=1,Tt(16),f=!1),this.o=this.o&&f,!f)Qs(this.i,this.l,z,"[Invalid Chunked Response]"),os(this),pa(this);else if(0<z.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),dh(ht),ht.M=!0,Tt(11))}}else Qs(this.i,this.l,z,null),oh(this,z);ft==4&&os(this),this.o&&!this.J&&(ft==4?up(this.j,this):(this.o=!1,hl(this)))}else TA(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),os(this),pa(this)}}}catch{}finally{}};function Pg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function sA(o,c){var f=o.C,y=c.indexOf(`
`,f);return y==-1?sh:(f=Number(c.substring(f,y)),isNaN(f)?kg:(y+=1,y+f>c.length?sh:(c=c.slice(y,y+f),o.C=y+f,c)))}ui.prototype.cancel=function(){this.J=!0,os(this)};function hl(o){o.S=Date.now()+o.I,Lg(o,o.I)}function Lg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ma(m(o.ba,o),c)}function ah(o){o.B&&(l.clearTimeout(o.B),o.B=null)}ui.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(nA(this.i,this.A),this.L!=2&&(da(),Tt(17)),os(this),this.s=2,pa(this)):Lg(this,this.S-o)};function pa(o){o.j.G==0||o.J||up(o.j,o)}function os(o){ah(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,wg(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function oh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||lh(f.h,o))){if(!o.K&&lh(f.h,o)&&f.G==3){try{var y=f.Da.g.parse(c)}catch{y=null}if(Array.isArray(y)&&y.length==3){var D=y;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)El(f),_l(f);else break e;fh(f),Tt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=ma(m(f.Za,f),6e3));if(1>=zg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else us(f,11)}else if((o.K||f.g==o)&&El(f),!E(c))for(D=f.Da.g.parse(c),c=0;c<D.length;c++){let fe=D[c];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];const ht=fe[3];ht!=null&&(f.la=ht,f.j.info("VER="+f.la));const ft=fe[4];ft!=null&&(f.Aa=ft,f.j.info("SVER="+f.Aa));const Xs=fe[5];Xs!=null&&typeof Xs=="number"&&0<Xs&&(y=1.5*Xs,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const sn=o.g;if(sn){const bl=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bl){var M=y.h;M.g||bl.indexOf("spdy")==-1&&bl.indexOf("quic")==-1&&bl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(uh(M,M.h),M.h=null))}if(y.D){const mh=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;mh&&(y.ya=mh,Se(y.I,y.D,mh))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var z=o;if(y.qa=fp(y,y.J?y.ia:null,y.W),z.K){Bg(y.h,z);var ve=z,tt=y.L;tt&&(ve.I=tt),ve.B&&(ah(ve),hl(ve)),y.g=z}else op(y);0<f.i.length&&vl(f)}else fe[0]!="stop"&&fe[0]!="close"||us(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?us(f,7):hh(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}da(4)}catch{}}var rA=class{constructor(o,c){this.g=o,this.map=c}};function Ug(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function zg(o){return o.h?1:o.g?o.g.size:0}function lh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function uh(o,c){o.g?o.g.add(c):o.h=c}function Bg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Ug.prototype.cancel=function(){if(this.i=qg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function qg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return O(o.i)}function aA(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,y=0;y<f;y++)c.push(o[y]);return c}c=[],f=0;for(y in o)c[f++]=o[y];return c}function oA(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const y in o)c[f++]=y;return c}}}function Hg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=oA(o),y=aA(o),D=y.length,M=0;M<D;M++)c.call(void 0,y[M],f&&f[M],o)}var Fg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lA(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var y=o[f].indexOf("="),D=null;if(0<=y){var M=o[f].substring(0,y);D=o[f].substring(y+1)}else M=o[f];c(M,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function ls(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof ls){this.h=o.h,fl(this,o.j),this.o=o.o,this.g=o.g,dl(this,o.s),this.l=o.l;var c=o.i,f=new va;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Gg(this,f),this.m=o.m}else o&&(c=String(o).match(Fg))?(this.h=!1,fl(this,c[1]||"",!0),this.o=ya(c[2]||""),this.g=ya(c[3]||"",!0),dl(this,c[4]),this.l=ya(c[5]||"",!0),Gg(this,c[6]||"",!0),this.m=ya(c[7]||"")):(this.h=!1,this.i=new va(null,this.h))}ls.prototype.toString=function(){var o=[],c=this.j;c&&o.push(_a(c,Kg,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(_a(c,Kg,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(_a(f,f.charAt(0)=="/"?hA:cA,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",_a(f,dA)),o.join("")};function Rn(o){return new ls(o)}function fl(o,c,f){o.j=f?ya(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function dl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Gg(o,c,f){c instanceof va?(o.i=c,mA(o.i,o.h)):(f||(c=_a(c,fA)),o.i=new va(c,o.h))}function Se(o,c,f){o.i.set(c,f)}function ml(o){return Se(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function ya(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function _a(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,uA),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function uA(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Kg=/[#\/\?@]/g,cA=/[#\?:]/g,hA=/[#\?]/g,fA=/[#\?@]/g,dA=/#/g;function va(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function ci(o){o.g||(o.g=new Map,o.h=0,o.i&&lA(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=va.prototype,t.add=function(o,c){ci(this),this.i=null,o=Ys(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function Qg(o,c){ci(o),c=Ys(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Yg(o,c){return ci(o),c=Ys(o,c),o.g.has(c)}t.forEach=function(o,c){ci(this),this.g.forEach(function(f,y){f.forEach(function(D){o.call(c,D,y,this)},this)},this)},t.na=function(){ci(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let y=0;y<c.length;y++){const D=o[y];for(let M=0;M<D.length;M++)f.push(c[y])}return f},t.V=function(o){ci(this);let c=[];if(typeof o=="string")Yg(this,o)&&(c=c.concat(this.g.get(Ys(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},t.set=function(o,c){return ci(this),this.i=null,o=Ys(this,o),Yg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function $g(o,c,f){Qg(o,c),0<f.length&&(o.i=null,o.g.set(Ys(o,c),O(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var y=c[f];const M=encodeURIComponent(String(y)),z=this.V(y);for(y=0;y<z.length;y++){var D=M;z[y]!==""&&(D+="="+encodeURIComponent(String(z[y]))),o.push(D)}}return this.i=o.join("&")};function Ys(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function mA(o,c){c&&!o.j&&(ci(o),o.i=null,o.g.forEach(function(f,y){var D=y.toLowerCase();y!=D&&(Qg(this,y),$g(this,D,f))},o)),o.j=c}function gA(o,c){const f=new ga;if(l.Image){const y=new Image;y.onload=v(hi,f,"TestLoadImage: loaded",!0,c,y),y.onerror=v(hi,f,"TestLoadImage: error",!1,c,y),y.onabort=v(hi,f,"TestLoadImage: abort",!1,c,y),y.ontimeout=v(hi,f,"TestLoadImage: timeout",!1,c,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=o}else c(!1)}function pA(o,c){const f=new ga,y=new AbortController,D=setTimeout(()=>{y.abort(),hi(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:y.signal}).then(M=>{clearTimeout(D),M.ok?hi(f,"TestPingServer: ok",!0,c):hi(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),hi(f,"TestPingServer: error",!1,c)})}function hi(o,c,f,y,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),y(f)}catch{}}function yA(){this.g=new JS}function _A(o,c,f){const y=f||"";try{Hg(o,function(D,M){let z=D;h(D)&&(z=Jc(D)),c.push(y+M+"="+encodeURIComponent(z))})}catch(D){throw c.push(y+"type="+encodeURIComponent("_badmap")),D}}function gl(o){this.l=o.Ub||null,this.j=o.eb||!1}C(gl,eh),gl.prototype.g=function(){return new pl(this.l,this.j)},gl.prototype.i=function(o){return function(){return o}}({});function pl(o,c){ct.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(pl,ct),t=pl.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Ta(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ta(this)),this.g&&(this.readyState=3,Ta(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xg(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xg(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Ea(this):Ta(this),this.readyState==3&&Xg(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Ea(this))},t.Qa=function(o){this.g&&(this.response=o,Ea(this))},t.ga=function(){this.g&&Ea(this)};function Ea(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ta(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Ta(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Wg(o){let c="";return P(o,function(f,y){c+=y,c+=":",c+=f,c+=`\r
`}),c}function ch(o,c,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=Wg(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Se(o,c,f))}function Oe(o){ct.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Oe,ct);var vA=/^https?$/i,EA=["POST","PUT"];t=Oe.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ih.g(),this.v=this.o?Rg(this.o):Rg(ih),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(M){Zg(this,M);return}if(o=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var D in y)f.set(D,y[D]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())f.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),D=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(EA,c,void 0))||y||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,z]of f)this.g.setRequestHeader(M,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tp(this),this.u=!0,this.g.send(o),this.u=!1}catch(M){Zg(this,M)}};function Zg(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Jg(o),yl(o)}function Jg(o){o.A||(o.A=!0,Et(o,"complete"),Et(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Et(this,"complete"),Et(this,"abort"),yl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yl(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ep(this):this.bb())},t.bb=function(){ep(this)};function ep(o){if(o.h&&typeof a<"u"&&(!o.v[1]||In(o)!=4||o.Z()!=2)){if(o.u&&In(o)==4)bg(o.Ea,0,o);else if(Et(o,"readystatechange"),In(o)==4){o.h=!1;try{const z=o.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var y;if(y=z===0){var D=String(o.D).match(Fg)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),y=!vA.test(D?D.toLowerCase():"")}f=y}if(f)Et(o,"complete"),Et(o,"success");else{o.m=6;try{var M=2<In(o)?o.g.statusText:""}catch{M=""}o.l=M+" ["+o.Z()+"]",Jg(o)}}finally{yl(o)}}}}function yl(o,c){if(o.g){tp(o);const f=o.g,y=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||Et(o,"ready");try{f.onreadystatechange=y}catch{}}}function tp(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function In(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),ZS(c)}};function np(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function TA(o){const c={};o=(o.g&&2<=In(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<o.length;y++){if(E(o[y]))continue;var f=I(o[y]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=c[D]||[];c[D]=M,M.push(f)}T(c,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ba(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function ip(o){this.Aa=0,this.i=[],this.j=new ga,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ba("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ba("baseRetryDelayMs",5e3,o),this.cb=ba("retryDelaySeedMs",1e4,o),this.Wa=ba("forwardChannelMaxRetries",2,o),this.wa=ba("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Ug(o&&o.concurrentRequestLimit),this.Da=new yA,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ip.prototype,t.la=8,t.G=1,t.connect=function(o,c,f,y){Tt(0),this.W=o,this.H=c||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=fp(this,null,this.W),vl(this)};function hh(o){if(sp(o),o.G==3){var c=o.U++,f=Rn(o.I);if(Se(f,"SID",o.K),Se(f,"RID",c),Se(f,"TYPE","terminate"),Sa(o,f),c=new ui(o,o.j,c),c.L=2,c.v=ml(Rn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=dp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),hl(c)}hp(o)}function _l(o){o.g&&(dh(o),o.g.cancel(),o.g=null)}function sp(o){_l(o),o.u&&(l.clearTimeout(o.u),o.u=null),El(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function vl(o){if(!jg(o.h)&&!o.s){o.s=!0;var c=o.Ga;W||H(),X||(W(),X=!0),ye.add(c,o),o.B=0}}function bA(o,c){return zg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ma(m(o.Ga,o,c),cp(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const D=new ui(this,this.j,o);let M=this.o;if(this.S&&(M?(M=_(M),w(M,this.S)):M=this.S),this.m!==null||this.O||(D.H=M,M=null),this.P)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(c+=y,4096<c){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=ap(this,D,c),f=Rn(this.I),Se(f,"RID",o),Se(f,"CVER",22),this.D&&Se(f,"X-HTTP-Session-Id",this.D),Sa(this,f),M&&(this.O?c="headers="+encodeURIComponent(String(Wg(M)))+"&"+c:this.m&&ch(f,this.m,M)),uh(this.h,D),this.Ua&&Se(f,"TYPE","init"),this.P?(Se(f,"$req",c),Se(f,"SID","null"),D.T=!0,rh(D,f,null)):rh(D,f,c),this.G=2}}else this.G==3&&(o?rp(this,o):this.i.length==0||jg(this.h)||rp(this))};function rp(o,c){var f;c?f=c.l:f=o.U++;const y=Rn(o.I);Se(y,"SID",o.K),Se(y,"RID",f),Se(y,"AID",o.T),Sa(o,y),o.m&&o.o&&ch(y,o.m,o.o),f=new ui(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=ap(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),uh(o.h,f),rh(f,y,c)}function Sa(o,c){o.H&&P(o.H,function(f,y){Se(c,y,f)}),o.l&&Hg({},function(f,y){Se(c,y,f)})}function ap(o,c,f){f=Math.min(o.i.length,f);var y=o.l?m(o.l.Na,o.l,o):null;e:{var D=o.i;let M=-1;for(;;){const z=["count="+f];M==-1?0<f?(M=D[0].g,z.push("ofs="+M)):M=0:z.push("ofs="+M);let ve=!0;for(let tt=0;tt<f;tt++){let fe=D[tt].g;const ht=D[tt].map;if(fe-=M,0>fe)M=Math.max(0,D[tt].g-100),ve=!1;else try{_A(ht,z,"req"+fe+"_")}catch{y&&y(ht)}}if(ve){y=z.join("&");break e}}}return o=o.i.splice(0,f),c.D=o,y}function op(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;W||H(),X||(W(),X=!0),ye.add(c,o),o.v=0}}function fh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ma(m(o.Fa,o),cp(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,lp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ma(m(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),_l(this),lp(this))};function dh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function lp(o){o.g=new ui(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=Rn(o.qa);Se(c,"RID","rpc"),Se(c,"SID",o.K),Se(c,"AID",o.T),Se(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Se(c,"TO",o.ja),Se(c,"TYPE","xmlhttp"),Sa(o,c),o.m&&o.o&&ch(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=ml(Rn(c)),f.m=null,f.P=!0,Vg(f,o)}t.Za=function(){this.C!=null&&(this.C=null,_l(this),fh(this),Tt(19))};function El(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function up(o,c){var f=null;if(o.g==c){El(o),dh(o),o.g=null;var y=2}else if(lh(o.h,c))f=c.D,Bg(o.h,c),y=1;else return;if(o.G!=0){if(c.o)if(y==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var D=o.B;y=ll(),Et(y,new Dg(y,f)),vl(o)}else op(o);else if(D=c.s,D==3||D==0&&0<c.X||!(y==1&&bA(o,c)||y==2&&fh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),D){case 1:us(o,5);break;case 4:us(o,10);break;case 3:us(o,6);break;default:us(o,2)}}}function cp(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function us(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),y=o.Xa;const D=!y;y=new ls(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||fl(y,"https"),ml(y),D?gA(y.toString(),f):pA(y.toString(),f)}else Tt(2);o.G=0,o.l&&o.l.sa(c),hp(o),sp(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function hp(o){if(o.G=0,o.ka=[],o.l){const c=qg(o.h);(c.length!=0||o.i.length!=0)&&(k(o.ka,c),k(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function fp(o,c,f){var y=f instanceof ls?Rn(f):new ls(f);if(y.g!="")c&&(y.g=c+"."+y.g),dl(y,y.s);else{var D=l.location;y=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;var M=new ls(null);y&&fl(M,y),c&&(M.g=c),D&&dl(M,D),f&&(M.l=f),y=M}return f=o.D,c=o.ya,f&&c&&Se(y,f,c),Se(y,"VER",o.la),Sa(o,y),y}function dp(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Oe(new gl({eb:f})):new Oe(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mp(){}t=mp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(o,c){return new kt(o,c)};function kt(o,c){ct.call(this),this.g=new ip(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new $s(this)}C(kt,ct),kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){hh(this.g)},kt.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Jc(o),o=f);c.i.push(new rA(c.Ya++,o)),c.G==3&&vl(c)},kt.prototype.N=function(){this.g.l=null,delete this.j,hh(this.g),delete this.g,kt.aa.N.call(this)};function gp(o){th.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const f in c){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}C(gp,th);function pp(){nh.call(this),this.status=1}C(pp,nh);function $s(o){this.g=o}C($s,mp),$s.prototype.ua=function(){Et(this.g,"a")},$s.prototype.ta=function(o){Et(this.g,new gp(o))},$s.prototype.sa=function(o){Et(this.g,new pp)},$s.prototype.ra=function(){Et(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,DT=function(){return new Tl},NT=function(){return ll()},xT=as,od={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ul.NO_ERROR=0,ul.TIMEOUT=8,ul.HTTP_ERROR=6,iu=ul,Og.COMPLETE="complete",CT=Og,Ig.EventType=fa,fa.OPEN="a",fa.CLOSE="b",fa.ERROR="c",fa.MESSAGE="d",ct.prototype.listen=ct.prototype.K,za=Ig,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,IT=Oe}).apply(typeof jl<"u"?jl:typeof self<"u"?self:typeof window<"u"?window:{});const Xy="@firebase/firestore",Wy="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new wm("@firebase/firestore");function sr(){return Os.logLevel}function F(t,...e){if(Os.logLevel<=re.DEBUG){const n=e.map(Cm);Os.debug(`Firestore (${sa}): ${t}`,...n)}}function Jn(t,...e){if(Os.logLevel<=re.ERROR){const n=e.map(Cm);Os.error(`Firestore (${sa}): ${t}`,...n)}}function Br(t,...e){if(Os.logLevel<=re.WARN){const n=e.map(Cm);Os.warn(`Firestore (${sa}): ${t}`,...n)}}function Cm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t="Unexpected state"){const e=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: `+t;throw Jn(e),new Error(e)}function me(t,e){t||$()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends ii{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class NC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mt.UNAUTHENTICATED))}shutdown(){}}class DC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class OC{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new Gn;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Gn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Gn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(me(typeof i.accessToken=="string"),new OT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new mt(e)}}class MC{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class kC{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new MC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VC{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Ut(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){me(this.o===void 0);const i=r=>{r.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.R;return this.R=r.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?s(r):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Zy(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new Zy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=PC(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%62))}return i}}function ue(t,e){return t<e?-1:t>e?1:0}function qr(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy=-62135596800,e_=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*e_);return new Qe(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Jy)throw new G(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/e_}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Jy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Qe(0,0))}static max(){return new Z(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="__name__";class hn{constructor(e,n,i){n===void 0?n=0:n>e.length&&$(),i===void 0?i=e.length-n:i>e.length-n&&$(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return hn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hn?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=hn.compareSegments(e.get(s),n.get(s));if(r!==0)return r}return Math.sign(e.length-n.length)}static compareSegments(e,n){const i=hn.isNumericId(e),s=hn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?hn.extractNumericId(e).compare(hn.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return zi.fromString(e.substring(4,e.length-2))}}class Ae extends hn{construct(e,n,i){return new Ae(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new G(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const LC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends hn{construct(e,n,i){return new rt(e,n,i)}static isValidIdentifier(e){return LC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===t_}static keyField(){return new rt([t_])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new G(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new G(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new G(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(Ae.fromString(e))}static fromName(e){return new K(Ae.fromString(e).popFirst(5))}static empty(){return new K(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new Ae(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=-1;function UC(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(i===1e9?new Qe(n+1,0):new Qe(n,i));return new Qi(s,K.empty(),e)}function jC(t){return new Qi(t.readTime,t.key,Co)}class Qi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Qi(Z.min(),K.empty(),Co)}static max(){return new Qi(Z.max(),K.empty(),Co)}}function zC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==BC)throw t;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,i)=>{n(e)})}static reject(e){return new U((n,i)=>{i(e)})}static waitFor(e){return new U((n,i)=>{let s=0,r=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(e){let n=U.resolve(!1);for(const i of e)n=n.next(s=>s?U.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new U((i,s)=>{const r=e.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const h=u;n(e[h]).next(d=>{a[h]=d,++l,l===r&&i(a)},d=>s(d))}})}static doWhile(e,n){return new U((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}function HC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function aa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.oe(i),this._e=i=>n.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Rc.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm=-1;function Ic(t){return t==null}function Hu(t){return t===0&&1/t==-1/0}function FC(t){return typeof t=="number"&&Number.isInteger(t)&&!Hu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="";function GC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=n_(e)),e=KC(t.get(n),e);return n_(e)}function KC(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const r=t.charAt(s);switch(r){case"\0":n+="";break;case kT:n+="";break;default:n+=r}}return n}function n_(t){return t+kT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ts(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function VT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zl(this.root,e,this.comparator,!1)}getReverseIterator(){return new zl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zl(this.root,e,this.comparator,!0)}}class zl{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??it.RED,this.left=s??it.EMPTY,this.right=r??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new it(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return it.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $();const e=this.left.check();if(e!==this.right.check())throw $();return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw $()}get value(){throw $()}get color(){throw $()}get left(){throw $()}get right(){throw $()}copy(e,n,i,s,r){return this}insert(e,n,i){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new s_(this.data.getIterator())}getIteratorFrom(e){return new s_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class s_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new jt([])}unionWith(e){let n=new Ye(rt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new jt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qr(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new PT("Invalid base64 string: "+r):r}}(e);return new ot(n)}static fromUint8Array(e){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const QC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(t){if(me(!!t),typeof t=="string"){let e=0;const n=QC.exec(t);if(me(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $i(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="server_timestamp",UT="__type__",jT="__previous_value__",zT="__local_write_time__";function Nm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[UT])===null||n===void 0?void 0:n.stringValue)===LT}function Cc(t){const e=t.mapValue.fields[jT];return Nm(e)?Cc(e):e}function xo(t){const e=Yi(t.mapValue.fields[zT].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,n,i,s,r,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}const Fu="(default)";class No{constructor(e,n){this.projectId=e,this.database=n||Fu}static empty(){return new No("","")}get isDefaultDatabase(){return this.database===Fu}isEqual(e){return e instanceof No&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT="__type__",$C="__max__",Bl={mapValue:{}},qT="__vector__",Gu="value";function Xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nm(t)?4:WC(t)?9007199254740991:XC(t)?10:11:$()}function Tn(t,e){if(t===e)return!0;const n=Xi(t);if(n!==Xi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xo(t).isEqual(xo(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=Yi(s.timestampValue),l=Yi(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return $i(s.bytesValue).isEqual($i(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return Le(s.geoPointValue.latitude)===Le(r.geoPointValue.latitude)&&Le(s.geoPointValue.longitude)===Le(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Le(s.integerValue)===Le(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=Le(s.doubleValue),l=Le(r.doubleValue);return a===l?Hu(a)===Hu(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return qr(t.arrayValue.values||[],e.arrayValue.values||[],Tn);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(i_(a)!==i_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Tn(a[u],l[u])))return!1;return!0}(t,e);default:return $()}}function Do(t,e){return(t.values||[]).find(n=>Tn(n,e))!==void 0}function Hr(t,e){if(t===e)return 0;const n=Xi(t),i=Xi(e);if(n!==i)return ue(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(r,a){const l=Le(r.integerValue||r.doubleValue),u=Le(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return r_(t.timestampValue,e.timestampValue);case 4:return r_(xo(t),xo(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(r,a){const l=$i(r),u=$i(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=ue(l[h],u[h]);if(d!==0)return d}return ue(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,a){const l=ue(Le(r.latitude),Le(a.latitude));return l!==0?l:ue(Le(r.longitude),Le(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return a_(t.arrayValue,e.arrayValue);case 10:return function(r,a){var l,u,h,d;const p=r.fields||{},m=a.fields||{},v=(l=p[Gu])===null||l===void 0?void 0:l.arrayValue,C=(u=m[Gu])===null||u===void 0?void 0:u.arrayValue,O=ue(((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0,((d=C==null?void 0:C.values)===null||d===void 0?void 0:d.length)||0);return O!==0?O:a_(v,C)}(t.mapValue,e.mapValue);case 11:return function(r,a){if(r===Bl.mapValue&&a===Bl.mapValue)return 0;if(r===Bl.mapValue)return 1;if(a===Bl.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const m=ue(u[p],d[p]);if(m!==0)return m;const v=Hr(l[u[p]],h[d[p]]);if(v!==0)return v}return ue(u.length,d.length)}(t.mapValue,e.mapValue);default:throw $()}}function r_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Yi(t),i=Yi(e),s=ue(n.seconds,i.seconds);return s!==0?s:ue(n.nanos,i.nanos)}function a_(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Hr(n[s],i[s]);if(r)return r}return ue(n.length,i.length)}function Fr(t){return ld(t)}function ld(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Yi(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $i(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=ld(r);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${ld(n.fields[a])}`;return s+"}"}(t.mapValue):$()}function su(t){switch(Xi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cc(t);return e?16+su(e):16;case 5:return 2*t.stringValue.length;case 6:return $i(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+su(r),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return ts(i.fields,(r,a)=>{s+=r.length+su(a)}),s}(t.mapValue);default:throw $()}}function o_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ud(t){return!!t&&"integerValue"in t}function Dm(t){return!!t&&"arrayValue"in t}function l_(t){return!!t&&"nullValue"in t}function u_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ru(t){return!!t&&"mapValue"in t}function XC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[BT])===null||n===void 0?void 0:n.stringValue)===qT}function ao(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ts(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ao(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ao(t.arrayValue.values[n]);return e}return Object.assign({},t)}function WC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===$C}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.value=e}static empty(){return new xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ru(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ao(n)}setAll(e){let n=rt.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=ao(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());ru(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];ru(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){ts(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new xt(ao(this.value))}}function HT(t){const e=[];return ts(t.fields,(n,i)=>{const s=new rt([n]);if(ru(i)){const r=HT(i.mapValue).fields;if(r.length===0)e.push(s);else for(const a of r)e.push(s.child(a))}else e.push(s)}),new jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n,i,s,r,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(e){return new gt(e,0,Z.min(),Z.min(),Z.min(),xt.empty(),0)}static newFoundDocument(e,n,i,s){return new gt(e,1,n,Z.min(),i,s,0)}static newNoDocument(e,n){return new gt(e,2,n,Z.min(),Z.min(),xt.empty(),0)}static newUnknownDocument(e,n){return new gt(e,3,n,Z.min(),Z.min(),xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.position=e,this.inclusive=n}}function c_(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],a=t.position[s];if(r.field.isKeyField()?i=K.comparator(K.fromName(a.referenceValue),n.key):i=Hr(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function h_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{}class Be extends FT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new e2(e,n,i):n==="array-contains"?new i2(e,i):n==="in"?new s2(e,i):n==="not-in"?new r2(e,i):n==="array-contains-any"?new a2(e,i):new Be(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new t2(e,i):new n2(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Hr(n,this.value)):n!==null&&Xi(this.value)===Xi(n)&&this.matchesComparison(Hr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends FT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new un(e,n)}matches(e){return GT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function GT(t){return t.op==="and"}function KT(t){return JC(t)&&GT(t)}function JC(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function cd(t){if(t instanceof Be)return t.field.canonicalString()+t.op.toString()+Fr(t.value);if(KT(t))return t.filters.map(e=>cd(e)).join(",");{const e=t.filters.map(n=>cd(n)).join(",");return`${t.op}(${e})`}}function QT(t,e){return t instanceof Be?function(i,s){return s instanceof Be&&i.op===s.op&&i.field.isEqual(s.field)&&Tn(i.value,s.value)}(t,e):t instanceof un?function(i,s){return s instanceof un&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&QT(a,s.filters[l]),!0):!1}(t,e):void $()}function YT(t){return t instanceof Be?function(n){return`${n.field.canonicalString()} ${n.op} ${Fr(n.value)}`}(t):t instanceof un?function(n){return n.op.toString()+" {"+n.getFilters().map(YT).join(" ,")+"}"}(t):"Filter"}class e2 extends Be{constructor(e,n,i){super(e,n,i),this.key=K.fromName(i.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class t2 extends Be{constructor(e,n){super(e,"in",n),this.keys=$T("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class n2 extends Be{constructor(e,n){super(e,"not-in",n),this.keys=$T("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $T(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>K.fromName(i.referenceValue))}class i2 extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dm(n)&&Do(n.arrayValue,this.value)}}class s2 extends Be{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Do(this.value.arrayValue,n)}}class r2 extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(Do(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Do(this.value.arrayValue,n)}}class a2 extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Do(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n=null,i=[],s=[],r=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.le=null}}function f_(t,e=null,n=[],i=[],s=null,r=null,a=null){return new o2(t,e,n,i,s,r,a)}function Om(t){const e=J(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>cd(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Ic(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Fr(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Fr(i)).join(",")),e.le=n}return e.le}function Mm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!h_(t.startAt,e.startAt)&&h_(t.endAt,e.endAt)}function hd(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n=null,i=[],s=[],r=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function l2(t,e,n,i,s,r,a,l){return new Xo(t,e,n,i,s,r,a,l)}function km(t){return new Xo(t)}function d_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function XT(t){return t.collectionGroup!==null}function oo(t){const e=J(t);if(e.he===null){e.he=[];const n=new Set;for(const r of e.explicitOrderBy)e.he.push(r),n.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ye(rt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.he.push(new Qu(r,i))}),n.has(rt.keyField().canonicalString())||e.he.push(new Qu(rt.keyField(),i))}return e.he}function yn(t){const e=J(t);return e.Pe||(e.Pe=u2(e,oo(t))),e.Pe}function u2(t,e){if(t.limitType==="F")return f_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Qu(s.field,r)});const n=t.endAt?new Ku(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ku(t.startAt.position,t.startAt.inclusive):null;return f_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function fd(t,e){const n=t.filters.concat([e]);return new Xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dd(t,e,n){return new Xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function xc(t,e){return Mm(yn(t),yn(e))&&t.limitType===e.limitType}function WT(t){return`${Om(yn(t))}|lt:${t.limitType}`}function rr(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>YT(s)).join(", ")}]`),Ic(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Fr(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Fr(s)).join(",")),`Target(${i})`}(yn(t))}; limitType=${t.limitType})`}function Nc(t,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):K.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(t,e)&&function(i,s){for(const r of oo(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(a,l,u){const h=c_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,oo(i),s)||i.endAt&&!function(a,l,u){const h=c_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,oo(i),s))}(t,e)}function c2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZT(t){return(e,n)=>{let i=!1;for(const s of oo(t)){const r=h2(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function h2(t,e,n){const i=t.field.isKeyField()?K.comparator(e.key,n.key):function(r,a,l){const u=a.data.field(r),h=l.data.field(r);return u!==null&&h!==null?Hr(u,h):$()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return $()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ts(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return VT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=new De(K.comparator);function ei(){return f2}const JT=new De(K.comparator);function Ba(...t){let e=JT;for(const n of t)e=e.insert(n.key,n);return e}function eb(t){let e=JT;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function ys(){return lo()}function tb(){return lo()}function lo(){return new Hs(t=>t.toString(),(t,e)=>t.isEqual(e))}const d2=new De(K.comparator),m2=new Ye(K.comparator);function ae(...t){let e=m2;for(const n of t)e=e.add(n);return e}const g2=new Ye(ue);function p2(){return g2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hu(e)?"-0":e}}function nb(t){return{integerValue:""+t}}function y2(t,e){return FC(e)?nb(e):Vm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this._=void 0}}function _2(t,e,n){return t instanceof Yu?function(s,r){const a={fields:{[UT]:{stringValue:LT},[zT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Nm(r)&&(r=Cc(r)),r&&(a.fields[jT]=r),{mapValue:a}}(n,e):t instanceof Oo?sb(t,e):t instanceof Mo?rb(t,e):function(s,r){const a=ib(s,r),l=m_(a)+m_(s.Ie);return ud(a)&&ud(s.Ie)?nb(l):Vm(s.serializer,l)}(t,e)}function v2(t,e,n){return t instanceof Oo?sb(t,e):t instanceof Mo?rb(t,e):n}function ib(t,e){return t instanceof $u?function(i){return ud(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class Yu extends Dc{}class Oo extends Dc{constructor(e){super(),this.elements=e}}function sb(t,e){const n=ab(e);for(const i of t.elements)n.some(s=>Tn(s,i))||n.push(i);return{arrayValue:{values:n}}}class Mo extends Dc{constructor(e){super(),this.elements=e}}function rb(t,e){let n=ab(e);for(const i of t.elements)n=n.filter(s=>!Tn(s,i));return{arrayValue:{values:n}}}class $u extends Dc{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function m_(t){return Le(t.integerValue||t.doubleValue)}function ab(t){return Dm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function E2(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Oo&&s instanceof Oo||i instanceof Mo&&s instanceof Mo?qr(i.elements,s.elements,Tn):i instanceof $u&&s instanceof $u?Tn(i.Ie,s.Ie):i instanceof Yu&&s instanceof Yu}(t.transform,e.transform)}class T2{constructor(e,n){this.version=e,this.transformResults=n}}class Nt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nt}static exists(e){return new Nt(void 0,e)}static updateTime(e){return new Nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function au(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Oc{}function ob(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mc(t.key,Nt.none()):new Wo(t.key,t.data,Nt.none());{const n=t.data,i=xt.empty();let s=new Ye(rt.comparator);for(let r of e.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new ns(t.key,i,new jt(s.toArray()),Nt.none())}}function b2(t,e,n){t instanceof Wo?function(s,r,a){const l=s.value.clone(),u=p_(s.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ns?function(s,r,a){if(!au(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=p_(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(lb(s)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function uo(t,e,n,i){return t instanceof Wo?function(r,a,l,u){if(!au(r.precondition,a))return l;const h=r.value.clone(),d=y_(r.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof ns?function(r,a,l,u){if(!au(r.precondition,a))return l;const h=y_(r.fieldTransforms,u,a),d=a.data;return d.setAll(lb(r)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(p=>p.field))}(t,e,n,i):function(r,a,l){return au(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function S2(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=ib(i.transform,s||null);r!=null&&(n===null&&(n=xt.empty()),n.set(i.field,r))}return n||null}function g_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&qr(i,s,(r,a)=>E2(r,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wo extends Oc{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ns extends Oc{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function lb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function p_(t,e,n){const i=new Map;me(t.length===n.length);for(let s=0;s<n.length;s++){const r=t[s],a=r.transform,l=e.data.field(r.field);i.set(r.field,v2(a,l,n[s]))}return i}function y_(t,e,n){const i=new Map;for(const s of t){const r=s.transform,a=n.data.field(s.field);i.set(s.field,_2(r,a,e))}return i}class Mc extends Oc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class A2 extends Oc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&b2(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=uo(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=uo(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=tb();return this.mutations.forEach(s=>{const r=e.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const u=ob(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&qr(this.mutations,e.mutations,(n,i)=>g_(n,i))&&qr(this.baseMutations,e.baseMutations,(n,i)=>g_(n,i))}}class Pm{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){me(e.mutations.length===i.length);let s=function(){return d2}();const r=e.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new Pm(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,ce;function C2(t){switch(t){case L.OK:return $();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return $()}}function ub(t){if(t===void 0)return Jn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Ue.OK:return L.OK;case Ue.CANCELLED:return L.CANCELLED;case Ue.UNKNOWN:return L.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return L.INTERNAL;case Ue.UNAVAILABLE:return L.UNAVAILABLE;case Ue.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ue.NOT_FOUND:return L.NOT_FOUND;case Ue.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ue.ABORTED:return L.ABORTED;case Ue.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ue.DATA_LOSS:return L.DATA_LOSS;default:return $()}}(ce=Ue||(Ue={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=new zi([4294967295,4294967295],0);function __(t){const e=x2().encode(t),n=new RT;return n.update(e),new Uint8Array(n.digest())}function v_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new zi([n,i],0),new zi([s,r],0)]}class Lm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new qa(`Invalid padding: ${n}`);if(i<0)throw new qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new qa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new qa(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=zi.fromNumber(this.Ee)}Ae(e,n,i){let s=e.add(n.multiply(zi.fromNumber(i)));return s.compare(N2)===1&&(s=new zi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=__(e),[i,s]=v_(n);for(let r=0;r<this.hashCount;r++){const a=this.Ae(i,s,r);if(!this.Re(a))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),a=new Lm(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.Ee===0)return;const n=__(e),[i,s]=v_(n);for(let r=0;r<this.hashCount;r++){const a=this.Ae(i,s,r);this.Ve(a)}}Ve(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Zo.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new kc(Z.min(),s,new De(ue),ei(),ae())}}class Zo{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Zo(i,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n,i,s){this.me=e,this.removedTargetIds=n,this.key=i,this.fe=s}}class cb{constructor(e,n){this.targetId=e,this.ge=n}}class hb{constructor(e,n,i=ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class E_{constructor(){this.pe=0,this.ye=T_(),this.we=ot.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=ae(),n=ae(),i=ae();return this.ye.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:$()}}),new Zo(this.we,this.be,e,n,i)}Me(){this.Se=!1,this.ye=T_()}xe(e,n){this.Se=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,me(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class D2{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ei(),this.$e=ql(),this.Ke=ql(),this.Ue=new De(ue)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const i=this.He(n);switch(e.state){case 0:this.Je(n)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(n);break;case 3:this.Je(n)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),i.Ce(e.resumeToken));break;default:$()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((i,s)=>{this.Je(s)&&n(s)})}Ze(e){const n=e.targetId,i=e.ge.count,s=this.Xe(n);if(s){const r=s.target;if(hd(r))if(i===0){const a=new K(r.path);this.ze(n,a,gt.newNoDocument(a,Z.min()))}else me(i===1);else{const a=this.et(n);if(a!==i){const l=this.tt(e),u=l?this.nt(l,e,a):1;if(u!==0){this.Ye(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,h)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=$i(i).toUint8Array()}catch(u){if(u instanceof PT)return Br("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Lm(a,s,r)}catch(u){return Br(u instanceof qa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(e,n,i){return n.ge.count===i-this.st(e,n.targetId)?0:2}st(e,n){const i=this.ke.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.ke.it(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(l)||(this.ze(n,r,null),s++)}),s}ot(e){const n=new Map;this.qe.forEach((r,a)=>{const l=this.Xe(a);if(l){if(r.current&&hd(l.target)){const u=new K(l.target.path);this._t(u).has(a)||this.ut(a,u)||this.ze(a,u,gt.newNoDocument(u,e))}r.ve&&(n.set(a,r.Fe()),r.Me())}});let i=ae();this.Ke.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Xe(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.Qe.forEach((r,a)=>a.setReadTime(e));const s=new kc(e,n,this.Ue,this.Qe,i);return this.Qe=ei(),this.$e=ql(),this.Ke=ql(),this.Ue=new De(ue),s}Ge(e,n){if(!this.Je(e))return;const i=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,i),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(e))}ze(e,n,i){if(!this.Je(e))return;const s=this.He(e);this.ut(e,n)?s.xe(n,1):s.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(e)),this.Ke=this.Ke.insert(n,this.ct(n).add(e)),i&&(this.Qe=this.Qe.insert(n,i))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new E_,this.qe.set(e,n)),n}ct(e){let n=this.Ke.get(e);return n||(n=new Ye(ue),this.Ke=this.Ke.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Ye(ue),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new E_),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function ql(){return new De(K.comparator)}function T_(){return new De(K.comparator)}const O2={asc:"ASCENDING",desc:"DESCENDING"},M2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},k2={and:"AND",or:"OR"};class V2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function md(t,e){return t.useProto3Json||Ic(e)?e:{value:e}}function Xu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function P2(t,e){return Xu(t,e.toTimestamp())}function _n(t){return me(!!t),Z.fromTimestamp(function(n){const i=Yi(n);return new Qe(i.seconds,i.nanos)}(t))}function Um(t,e){return gd(t,e).canonicalString()}function gd(t,e){const n=function(s){return new Ae(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function db(t){const e=Ae.fromString(t);return me(_b(e)),e}function pd(t,e){return Um(t.databaseId,e.path)}function tf(t,e){const n=db(e);if(n.get(1)!==t.databaseId.projectId)throw new G(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(gb(n))}function mb(t,e){return Um(t.databaseId,e)}function L2(t){const e=db(t);return e.length===4?Ae.emptyPath():gb(e)}function yd(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gb(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function b_(t,e,n){return{name:pd(t,e),fields:n.value.mapValue.fields}}function U2(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:$()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(h,d){return h.useProto3Json?(me(d===void 0||typeof d=="string"),ot.fromBase64String(d||"")):(me(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ot.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const d=h.code===void 0?L.UNKNOWN:ub(h.code);return new G(d,h.message||"")}(a);n=new hb(i,s,r,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=tf(t,i.document.name),r=_n(i.document.updateTime),a=i.document.createTime?_n(i.document.createTime):Z.min(),l=new xt({mapValue:{fields:i.document.fields}}),u=gt.newFoundDocument(s,r,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new ou(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=tf(t,i.document),r=i.readTime?_n(i.readTime):Z.min(),a=gt.newNoDocument(s,r),l=i.removedTargetIds||[];n=new ou([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=tf(t,i.document),r=i.removedTargetIds||[];n=new ou([],r,s,null)}else{if(!("filter"in e))return $();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new I2(s,r),l=i.targetId;n=new cb(l,a)}}return n}function j2(t,e){let n;if(e instanceof Wo)n={update:b_(t,e.key,e.value)};else if(e instanceof Mc)n={delete:pd(t,e.key)};else if(e instanceof ns)n={update:b_(t,e.key,e.data),updateMask:Y2(e.fieldMask)};else{if(!(e instanceof A2))return $();n={verify:pd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof Yu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Oo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Mo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof $u)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw $()}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:P2(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:$()}(t,e.precondition)),n}function z2(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(s,r){let a=s.updateTime?_n(s.updateTime):_n(r);return a.isEqual(Z.min())&&(a=_n(r)),new T2(a,s.transformResults||[])}(n,e))):[]}function B2(t,e){return{documents:[mb(t,e.path)]}}function q2(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=mb(t,s);const r=function(h){if(h.length!==0)return yb(un.create(h,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:ar(m.field),direction:G2(m.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=md(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:n,parent:s}}function H2(t){let e=L2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){me(i===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let r=[];n.where&&(r=function(p){const m=pb(p);return m instanceof un&&KT(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(C){return new Qu(or(C.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Ic(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,v=p.values||[];return new Ku(v,m)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const m=!p.before,v=p.values||[];return new Ku(v,m)}(n.endAt)),l2(e,s,a,r,l,"F",u,h)}function F2(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=or(n.unaryFilter.field);return Be.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=or(n.unaryFilter.field);return Be.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=or(n.unaryFilter.field);return Be.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=or(n.unaryFilter.field);return Be.create(a,"!=",{nullValue:"NULL_VALUE"});default:return $()}}(t):t.fieldFilter!==void 0?function(n){return Be.create(or(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return un.create(n.compositeFilter.filters.map(i=>pb(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return $()}}(n.compositeFilter.op))}(t):$()}function G2(t){return O2[t]}function K2(t){return M2[t]}function Q2(t){return k2[t]}function ar(t){return{fieldPath:t.canonicalString()}}function or(t){return rt.fromServerFormat(t.fieldPath)}function yb(t){return t instanceof Be?function(n){if(n.op==="=="){if(u_(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NAN"}};if(l_(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(u_(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NOT_NAN"}};if(l_(n.value))return{unaryFilter:{field:ar(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ar(n.field),op:K2(n.op),value:n.value}}}(t):t instanceof un?function(n){const i=n.getFilters().map(s=>yb(s));return i.length===1?i[0]:{compositeFilter:{op:Q2(n.op),filters:i}}}(t):$()}function Y2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _b(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n,i,s,r=Z.min(),a=Z.min(),l=ot.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.Tt=e}}function X2(t){const e=H2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(){this.Tn=new Z2}addToCollectionParentIndex(e,n){return this.Tn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Qi.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Qi.min())}updateCollectionGroup(e,n,i){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class Z2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new Ye(Ae.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ye(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vb=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(vb,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Gr(0)}static Un(){return new Gr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="LruGarbageCollector",J2=1048576;function w_([t,e],[n,i]){const s=ue(t,n);return s===0?ue(e,i):s}class ex{constructor(e){this.Hn=e,this.buffer=new Ye(w_),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();w_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class tx{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){F(A_,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){aa(n)?F(A_,"Ignoring IndexedDB error during garbage collection: ",n):await ra(n)}await this.er(3e5)})}}class nx{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Rc.ae);const i=new ex(n);return this.tr.forEachTarget(e,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.tr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(S_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),S_):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let i,s,r,a,l,u,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(i=p,l=Date.now(),this.removeTargets(e,i,n))).next(p=>(r=p,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(p=>(h=Date.now(),sr()<=re.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:p})))}}function ix(t,e){return new nx(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this.changes=new Hs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?U.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&uo(i.mutation,s,jt.empty(),Qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ae()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ae()){const s=ys();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let a=Ba();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=ys();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ae()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,s){let r=ei();const a=lo(),l=function(){return lo()}();return n.forEach((u,h)=>{const d=i.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof ns)?r=r.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),uo(d.mutation,h,d.mutation.getFieldMask(),Qe.now())):a.set(h.key,jt.empty())}),this.recalculateAndSaveOverlays(e,r).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>{var p;return l.set(h,new rx(d,(p=a.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const i=lo();let s=new De((a,l)=>a-l),r=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||jt.empty();d=l.applyToLocalView(h,d),i.set(u,d);const p=(s.get(l.batchId)||ae()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,p=tb();d.forEach(m=>{if(!r.has(m)){const v=ob(n.get(m),i.get(m));v!==null&&p.set(m,v),r=r.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,p))}return U.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(a){return K.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):XT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):U.resolve(ys());let l=Co,u=r;return a.next(h=>U.forEach(h,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),r.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,h,r)).next(()=>this.computeViews(e,u,h,ae())).next(d=>({batchId:l,changes:eb(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(i=>{let s=Ba();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const r=n.collectionGroup;let a=Ba();return this.indexManager.getCollectionParents(e,r).next(l=>U.forEach(l,u=>{const h=function(p,m){return new Xo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next(d=>{d.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r,s))).next(a=>{r.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,gt.newInvalidDocument(d)))});let l=Ba();return a.forEach((u,h)=>{const d=r.get(u);d!==void 0&&uo(d.mutation,h,jt.empty(),Qe.now()),Nc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return U.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_n(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:X2(s.bundledQuery),readTime:_n(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(){this.overlays=new De(K.comparator),this.Rr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ys();return U.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.Et(e,n,r)}),U.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Rr.delete(i)),U.resolve()}getOverlaysForCollection(e,n,i){const s=ys(),r=n.length+1,a=new K(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new De((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=r.get(h.largestBatchId);d===null&&(d=ys(),r=r.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=ys(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=s)););return U.resolve(l)}Et(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new R2(n,i));let r=this.Rr.get(n);r===void 0&&(r=ae(),this.Rr.set(n,r)),this.Rr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(){this.Vr=new Ye(Xe.mr),this.gr=new Ye(Xe.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const i=new Xe(e,n);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.wr(new Xe(e,n))}br(e,n){e.forEach(i=>this.removeReference(i,n))}Sr(e){const n=new K(new Ae([])),i=new Xe(n,e),s=new Xe(n,e+1),r=[];return this.gr.forEachInRange([i,s],a=>{this.wr(a),r.push(a.key)}),r}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new K(new Ae([])),i=new Xe(n,e),s=new Xe(n,e+1);let r=ae();return this.gr.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(e){const n=new Xe(e,0),i=this.Vr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Xe{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return K.comparator(e.key,n.key)||ue(e.Cr,n.Cr)}static pr(e,n){return ue(e.Cr,n.Cr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Ye(Xe.mr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new w2(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.Mr=this.Mr.add(new Xe(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,n){return U.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.Nr(i),r=s<0?0:s;return U.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?xm:this.Fr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Xe(n,0),s=new Xe(n,Number.POSITIVE_INFINITY),r=[];return this.Mr.forEachInRange([i,s],a=>{const l=this.Or(a.Cr);r.push(l)}),U.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ye(ue);return n.forEach(s=>{const r=new Xe(s,0),a=new Xe(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([r,a],l=>{i=i.add(l.Cr)})}),U.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;K.isDocumentKey(r)||(r=r.child(""));const a=new Xe(new K(r),0);let l=new Ye(ue);return this.Mr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Cr)),!0)},a),U.resolve(this.Br(l))}Br(e){const n=[];return e.forEach(i=>{const s=this.Or(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){me(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return U.forEach(n.mutations,s=>{const r=new Xe(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,n){const i=new Xe(n,0),s=this.Mr.firstAfterOrEqual(i);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.kr=e,this.docs=function(){return new De(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.kr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return U.resolve(i?i.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let i=ei();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():gt.newInvalidDocument(s))}),U.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=ei();const a=n.path,l=new K(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||zC(jC(d),i)<=0||(s.has(d.key)||Nc(n,d))&&(r=r.insert(d.key,d.mutableCopy()))}return U.resolve(r)}getAllFromCollectionGroup(e,n,i,s){$()}qr(e,n){return U.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new fx(this)}getSize(e){return U.resolve(this.size)}}class fx extends sx{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(i)}),U.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e){this.persistence=e,this.Qr=new Hs(n=>Om(n),Mm),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.$r=0,this.Kr=new jm,this.targetCount=0,this.Ur=Gr.Kn()}forEachTarget(e,n){return this.Qr.forEach((i,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$r&&(this.$r=n),U.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ur=new Gr(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.zn(n),U.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Kr.Sr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.Qr.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.Qr.delete(a),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(r).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const i=this.Qr.get(n)||null;return U.resolve(i)}addMatchingKeys(e,n,i){return this.Kr.yr(n,i),U.resolve()}removeMatchingKeys(e,n,i){this.Kr.br(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(e,a))}),U.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.Kr.Sr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Kr.vr(n);return U.resolve(i)}containsKey(e,n){return U.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Rc(0),this.zr=!1,this.zr=!0,this.jr=new ux,this.referenceDelegate=e(this),this.Hr=new dx(this),this.indexManager=new W2,this.remoteDocumentCache=function(s){return new hx(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new $2(n),this.Yr=new ox(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new lx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Wr[e.toKey()];return i||(i=new cx(n,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,i){F("MemoryPersistence","Starting transaction:",e);const s=new mx(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(r=>this.referenceDelegate.Xr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}ei(e,n){return U.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,n)))}}class mx extends qC{constructor(e){super(),this.currentSequenceNumber=e}}class zm{constructor(e){this.persistence=e,this.ti=new jm,this.ni=null}static ri(e){return new zm(e)}get ii(){if(this.ni)return this.ni;throw $()}addReference(e,n,i){return this.ti.addReference(i,n),this.ii.delete(i.toString()),U.resolve()}removeReference(e,n,i){return this.ti.removeReference(i,n),this.ii.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),U.resolve()}removeTarget(e,n){this.ti.Sr(n.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.ii.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.ii,i=>{const s=K.fromPath(i);return this.si(e,s).next(r=>{r||n.removeEntry(s,Z.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(i=>{i?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return U.or([()=>U.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Wu{constructor(e,n){this.persistence=e,this.oi=new Hs(i=>GC(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=ix(this,n)}static ri(e,n){return new Wu(e,n)}Zr(){}Xr(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}sr(e){let n=0;return this.rr(e,i=>{n++}).next(()=>n)}rr(e,n){return U.forEach(this.oi,(i,s)=>this.ar(e,i,s).next(r=>r?U.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.qr(e,a=>this.ar(e,a,n).next(l=>{l||(i++,r.removeEntry(a,Z.min()))})).next(()=>r.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.oi.set(i,e.currentSequenceNumber),U.resolve()}removeReference(e,n,i){return this.oi.set(i,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),U.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=su(e.data.value)),n}ar(e,n,i){return U.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.oi.get(n);return U.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Hi=i,this.Ji=s}static Yi(e,n){let i=ae(),s=ae();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Bm(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return cI()?8:HC(_t())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,i,s){const r={result:null};return this.rs(e,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ss(e,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new gx;return this._s(e,n,a).next(l=>{if(r.result=l,this.Xi)return this.us(e,n,a,l.size)})}).next(()=>r.result)}us(e,n,i,s){return i.documentReadCount<this.es?(sr()<=re.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",rr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),U.resolve()):(sr()<=re.DEBUG&&F("QueryEngine","Query:",rr(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(sr()<=re.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",rr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yn(n))):U.resolve())}rs(e,n){if(d_(n))return U.resolve(null);let i=yn(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=dd(n,null,"F"),i=yn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const a=ae(...r);return this.ns.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const h=this.cs(n,l);return this.ls(n,h,a,u.readTime)?this.rs(e,dd(n,null,"F")):this.hs(e,h,n,u)}))})))}ss(e,n,i,s){return d_(n)||s.isEqual(Z.min())?U.resolve(null):this.ns.getDocuments(e,i).next(r=>{const a=this.cs(n,r);return this.ls(n,a,i,s)?U.resolve(null):(sr()<=re.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rr(n)),this.hs(e,a,n,UC(s,Co)).next(l=>l))})}cs(e,n){let i=new Ye(ZT(e));return n.forEach((s,r)=>{Nc(e,r)&&(i=i.add(r))}),i}ls(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}_s(e,n,i){return sr()<=re.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",rr(n)),this.ns.getDocumentsMatchingQuery(e,n,Qi.min(),i)}hs(e,n,i,s){return this.ns.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="LocalStore",yx=3e8;class _x{constructor(e,n,i,s){this.persistence=e,this.Ps=n,this.serializer=s,this.Ts=new De(ue),this.Is=new Hs(r=>Om(r),Mm),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ax(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function vx(t,e,n,i){return new _x(t,e,n,i)}async function Tb(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.As(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let u=ae();for(const h of s){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of r){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Rs:h,removedBatchIds:a,addedBatchIds:l}))})})}function Ex(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=n.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const p=h.batch,m=p.keys();let v=U.resolve();return m.forEach(C=>{v=v.next(()=>d.getEntry(u,C)).next(O=>{const k=h.docVersions.get(C);me(k!==null),O.version.compareTo(k)<0&&(p.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),d.addEntry(O)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,i,e,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ae();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function bb(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function Tx(t,e){const n=J(t),i=e.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const l=[];e.targetChanges.forEach((d,p)=>{const m=s.get(p);if(!m)return;l.push(n.Hr.removeMatchingKeys(r,d.removedDocuments,p).next(()=>n.Hr.addMatchingKeys(r,d.addedDocuments,p)));let v=m.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(ot.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,i)),s=s.insert(p,v),function(O,k,A){return O.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=yx?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,v,d)&&l.push(n.Hr.updateTargetData(r,v))});let u=ei(),h=ae();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,d))}),l.push(bx(r,a,e.documentUpdates).next(d=>{u=d.Vs,h=d.fs})),!i.isEqual(Z.min())){const d=n.Hr.getLastRemoteSnapshotVersion(r).next(p=>n.Hr.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(d)}return U.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,h)).next(()=>u)}).then(r=>(n.Ts=s,r))}function bx(t,e,n){let i=ae(),s=ae();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let a=ei();return n.forEach((l,u)=>{const h=r.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):F(qm,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Vs:a,fs:s}})}function Sx(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=xm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ax(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Hr.getTargetData(i,e).next(r=>r?(s=r,U.resolve(s)):n.Hr.allocateTargetId(i).next(a=>(s=new Ci(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(i.targetId,i),n.Is.set(e,i.targetId)),i})}async function _d(t,e,n){const i=J(t),s=i.Ts.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!aa(a))throw a;F(qm,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ts=i.Ts.remove(e),i.Is.delete(s.target)}function R_(t,e,n){const i=J(t);let s=Z.min(),r=ae();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const p=J(u),m=p.Is.get(d);return m!==void 0?U.resolve(p.Ts.get(m)):p.Hr.getTargetData(h,d)}(i,a,yn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>i.Ps.getDocumentsMatchingQuery(a,e,n?s:Z.min(),n?r:ae())).next(l=>(wx(i,c2(e),l),{documents:l,gs:r})))}function wx(t,e,n){let i=t.Es.get(e)||Z.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.Es.set(e,i)}class I_{constructor(){this.activeTargetIds=p2()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rx{constructor(){this.ho=new I_,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,i){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new I_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="ConnectivityMonitor";class x_{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){F(C_,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){F(C_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl=null;function vd(){return Hl===null?Hl=function(){return 268435456+Math.round(2147483648*Math.random())}():Hl++,"0x"+Hl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="RestConnection",Cx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xx{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===Fu?`project_id=${i}`:`project_id=${i}&database_id=${s}`}bo(e,n,i,s,r){const a=vd(),l=this.So(e,n.toUriEncodedString());F(nf,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,r),this.vo(e,l,u,i).then(h=>(F(nf,`Received RPC '${e}' ${a}: `,h),h),h=>{throw Br(nf,`RPC '${e}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Co(e,n,i,s,r,a){return this.bo(e,n,i,s,r)}Do(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}So(e,n){const i=Cx[e];return`${this.po}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection";class Dx extends xx{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,i,s){const r=vd();return new Promise((a,l)=>{const u=new IT;u.setWithCredentials(!0),u.listenOnce(CT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case iu.NO_ERROR:const d=u.getResponseJson();F(dt,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(d)),a(d);break;case iu.TIMEOUT:F(dt,`RPC '${e}' ${r} timed out`),l(new G(L.DEADLINE_EXCEEDED,"Request time out"));break;case iu.HTTP_ERROR:const p=u.getStatus();if(F(dt,`RPC '${e}' ${r} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const C=function(k){const A=k.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(A)>=0?A:L.UNKNOWN}(v.status);l(new G(C,v.message))}else l(new G(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new G(L.UNAVAILABLE,"Connection failed."));break;default:$()}}finally{F(dt,`RPC '${e}' ${r} completed.`)}});const h=JSON.stringify(s);F(dt,`RPC '${e}' ${r} sending request:`,s),u.send(n,"POST",h,i,15)})}Wo(e,n,i){const s=vd(),r=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=DT(),l=NT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=r.join("");F(dt,`Creating RPC '${e}' stream ${s}: ${d}`,u);const p=a.createWebChannel(d,u);let m=!1,v=!1;const C=new Nx({Fo:k=>{v?F(dt,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(m||(F(dt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),F(dt,`RPC '${e}' stream ${s} sending:`,k),p.send(k))},Mo:()=>p.close()}),O=(k,A,E)=>{k.listen(A,S=>{try{E(S)}catch(x){setTimeout(()=>{throw x},0)}})};return O(p,za.EventType.OPEN,()=>{v||(F(dt,`RPC '${e}' stream ${s} transport opened.`),C.Qo())}),O(p,za.EventType.CLOSE,()=>{v||(v=!0,F(dt,`RPC '${e}' stream ${s} transport closed`),C.Ko())}),O(p,za.EventType.ERROR,k=>{v||(v=!0,Br(dt,`RPC '${e}' stream ${s} transport errored:`,k),C.Ko(new G(L.UNAVAILABLE,"The operation could not be completed")))}),O(p,za.EventType.MESSAGE,k=>{var A;if(!v){const E=k.data[0];me(!!E);const S=E,x=(S==null?void 0:S.error)||((A=S[0])===null||A===void 0?void 0:A.error);if(x){F(dt,`RPC '${e}' stream ${s} received error:`,x);const V=x.status;let P=function(b){const w=Ue[b];if(w!==void 0)return ub(w)}(V),T=x.message;P===void 0&&(P=L.INTERNAL,T="Unknown error status: "+V+" with message "+x.message),v=!0,C.Ko(new G(P,T)),p.close()}else F(dt,`RPC '${e}' stream ${s} received:`,E),C.Uo(E)}}),O(l,xT.STAT_EVENT,k=>{k.stat===od.PROXY?F(dt,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===od.NOPROXY&&F(dt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.$o()},0),C}}function sf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(t){return new V2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n,i=1e3,s=1.5,r=6e4){this.Ti=e,this.timerId=n,this.Go=i,this.zo=s,this.jo=r,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-i);s>0&&F("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="PersistentStream";class Ab{constructor(e,n,i,s,r,a,l,u){this.Ti=e,this.n_=i,this.r_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Sb(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Jn(n.toString()),Jn("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===n&&this.V_(i,s)},i=>{e(()=>{const s=new G(L.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(e,n){const i=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return F(N_,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(F(N_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ox extends Ab{constructor(e,n,i,s,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=U2(this.serializer,e),i=function(r){if(!("targetChange"in r))return Z.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?_n(a.readTime):Z.min()}(e);return this.listener.p_(n,i)}y_(e){const n={};n.database=yd(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=hd(u)?{documents:B2(r,u)}:{query:q2(r,u).ht},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=fb(r,a.resumeToken);const h=md(r,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Z.min())>0){l.readTime=Xu(r,a.snapshotVersion.toTimestamp());const h=md(r,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const i=F2(this.serializer,e);i&&(n.labels=i),this.I_(n)}w_(e){const n={};n.database=yd(this.serializer),n.removeTarget=e,this.I_(n)}}class Mx extends Ab{constructor(e,n,i,s,r,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=z2(e.writeResults,e.commitTime),i=_n(e.commitTime);return this.listener.v_(i,n)}C_(){const e={};e.database=yd(this.serializer),this.I_(e)}S_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>j2(this.serializer,i))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{}class Vx extends kx{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new G(L.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.bo(e,gd(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new G(L.UNKNOWN,r.toString())})}Co(e,n,i,s,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Co(e,gd(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(L.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Px{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Jn(n),this.N_=!1):F("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="RemoteStore";class Lx{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=r,this.z_.To(a=>{i.enqueueAndForget(async()=>{Fs(this)&&(F(Ms,"Restarting streams for network reachability change."),await async function(u){const h=J(u);h.W_.add(4),await Jo(h),h.j_.set("Unknown"),h.W_.delete(4),await Pc(h)}(this))})}),this.j_=new Px(i,s)}}async function Pc(t){if(Fs(t))for(const e of t.G_)await e(!0)}async function Jo(t){for(const e of t.G_)await e(!1)}function wb(t,e){const n=J(t);n.U_.has(e.targetId)||(n.U_.set(e.targetId,e),Km(n)?Gm(n):oa(n).c_()&&Fm(n,e))}function Hm(t,e){const n=J(t),i=oa(n);n.U_.delete(e),i.c_()&&Rb(n,e),n.U_.size===0&&(i.c_()?i.P_():Fs(n)&&n.j_.set("Unknown"))}function Fm(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oa(t).y_(e)}function Rb(t,e){t.H_.Ne(e),oa(t).w_(e)}function Gm(t){t.H_=new D2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),oa(t).start(),t.j_.B_()}function Km(t){return Fs(t)&&!oa(t).u_()&&t.U_.size>0}function Fs(t){return J(t).W_.size===0}function Ib(t){t.H_=void 0}async function Ux(t){t.j_.set("Online")}async function jx(t){t.U_.forEach((e,n)=>{Fm(t,e)})}async function zx(t,e){Ib(t),Km(t)?(t.j_.q_(e),Gm(t)):t.j_.set("Unknown")}async function Bx(t,e,n){if(t.j_.set("Online"),e instanceof hb&&e.state===2&&e.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.U_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.U_.delete(l),s.H_.removeTarget(l))}(t,e)}catch(i){F(Ms,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Zu(t,i)}else if(e instanceof ou?t.H_.We(e):e instanceof cb?t.H_.Ze(e):t.H_.je(e),!n.isEqual(Z.min()))try{const i=await bb(t.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.H_.ot(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=r.U_.get(h);d&&r.U_.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=r.U_.get(u);if(!d)return;r.U_.set(u,d.withResumeToken(ot.EMPTY_BYTE_STRING,d.snapshotVersion)),Rb(r,u);const p=new Ci(d.target,u,h,d.sequenceNumber);Fm(r,p)}),r.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){F(Ms,"Failed to raise snapshot:",i),await Zu(t,i)}}async function Zu(t,e,n){if(!aa(e))throw e;t.W_.add(1),await Jo(t),t.j_.set("Offline"),n||(n=()=>bb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F(Ms,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await Pc(t)})}function Cb(t,e){return e().catch(n=>Zu(t,n,e))}async function Lc(t){const e=J(t),n=Wi(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:xm;for(;qx(e);)try{const s=await Sx(e.localStore,i);if(s===null){e.K_.length===0&&n.P_();break}i=s.batchId,Hx(e,s)}catch(s){await Zu(e,s)}xb(e)&&Nb(e)}function qx(t){return Fs(t)&&t.K_.length<10}function Hx(t,e){t.K_.push(e);const n=Wi(t);n.c_()&&n.b_&&n.S_(e.mutations)}function xb(t){return Fs(t)&&!Wi(t).u_()&&t.K_.length>0}function Nb(t){Wi(t).start()}async function Fx(t){Wi(t).C_()}async function Gx(t){const e=Wi(t);for(const n of t.K_)e.S_(n.mutations)}async function Kx(t,e,n){const i=t.K_.shift(),s=Pm.from(i,e,n);await Cb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lc(t)}async function Qx(t,e){e&&Wi(t).b_&&await async function(i,s){if(function(a){return C2(a)&&a!==L.ABORTED}(s.code)){const r=i.K_.shift();Wi(i).h_(),await Cb(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Lc(i)}}(t,e),xb(t)&&Nb(t)}async function D_(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),F(Ms,"RemoteStore received new credentials");const i=Fs(n);n.W_.add(3),await Jo(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await Pc(n)}async function Yx(t,e){const n=J(t);e?(n.W_.delete(2),await Pc(n)):e||(n.W_.add(2),await Jo(n),n.j_.set("Unknown"))}function oa(t){return t.J_||(t.J_=function(n,i,s){const r=J(n);return r.M_(),new Ox(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{xo:Ux.bind(null,t),No:jx.bind(null,t),Lo:zx.bind(null,t),p_:Bx.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),Km(t)?Gm(t):t.j_.set("Unknown")):(await t.J_.stop(),Ib(t))})),t.J_}function Wi(t){return t.Y_||(t.Y_=function(n,i,s){const r=J(n);return r.M_(),new Mx(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:Fx.bind(null,t),Lo:Qx.bind(null,t),D_:Gx.bind(null,t),v_:Kx.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Lc(t)):(await t.Y_.stop(),t.K_.length>0&&(F(Ms,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,r){const a=Date.now()+i,l=new Qm(e,n,a,s,r);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ym(t,e){if(Jn("AsyncQueue",`${e}: ${t}`),aa(t))return new G(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{static emptySet(e){return new Ir(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||K.comparator(n.key,i.key):(n,i)=>K.comparator(n.key,i.key),this.keyedMap=Ba(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ir)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ir;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.Z_=new De(K.comparator)}track(e){const n=e.doc.key,i=this.Z_.get(n);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(n):e.type===1&&i.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):$():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Kr{constructor(e,n,i,s,r,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Kr(e,n,Ir.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class Xx{constructor(){this.queries=M_(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,i){const s=J(n),r=s.queries;s.queries=M_(),r.forEach((a,l)=>{for(const u of l.ta)u.onError(i)})})(this,new G(L.ABORTED,"Firestore shutting down"))}}function M_(){return new Hs(t=>WT(t),xc)}async function Db(t,e){const n=J(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.na()&&e.ra()&&(i=2):(r=new $x,i=e.ra()?0:1);try{switch(i){case 0:r.ea=await n.onListen(s,!0);break;case 1:r.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Ym(a,`Initialization of query '${rr(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,r),r.ta.push(e),e.sa(n.onlineState),r.ea&&e.oa(r.ea)&&$m(n)}async function Ob(t,e){const n=J(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const a=r.ta.indexOf(e);a>=0&&(r.ta.splice(a,1),r.ta.length===0?s=e.ra()?0:1:!r.na()&&e.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function Wx(t,e){const n=J(t);let i=!1;for(const s of e){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.ta)l.oa(s)&&(i=!0);a.ea=s}}i&&$m(n)}function Zx(t,e,n){const i=J(t),s=i.queries.get(e);if(s)for(const r of s.ta)r.onError(n);i.queries.delete(e)}function $m(t){t.ia.forEach(e=>{e.next()})}var Ed,k_;(k_=Ed||(Ed={}))._a="default",k_.Cache="cache";class Mb{constructor(e,n,i){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Kr(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const i=n!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Kr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Ed.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e){this.key=e}}class Vb{constructor(e){this.key=e}}class Jx{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ae(),this.mutatedKeys=ae(),this.ya=ZT(e),this.wa=new Ir(this.ya)}get ba(){return this.fa}Sa(e,n){const i=n?n.Da:new O_,s=n?n.wa:this.wa;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const m=s.get(d),v=Nc(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),O=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let k=!1;m&&v?m.data.isEqual(v.data)?C!==O&&(i.track({type:3,doc:v}),k=!0):this.va(m,v)||(i.track({type:2,doc:v}),k=!0,(u&&this.ya(v,u)>0||h&&this.ya(v,h)<0)&&(l=!0)):!m&&v?(i.track({type:0,doc:v}),k=!0):m&&!v&&(i.track({type:1,doc:m}),k=!0,(u||h)&&(l=!0)),k&&(v?(a=a.add(v),r=O?r.add(d):r.delete(d)):(a=a.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),r=r.delete(d.key),i.track({type:1,doc:d})}return{wa:a,Da:i,ls:l,mutatedKeys:r}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const r=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const a=e.Da.X_();a.sort((d,p)=>function(v,C){const O=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $()}};return O(v)-O(C)}(d.type,p.type)||this.ya(d.doc,p.doc)),this.Ca(i),s=s!=null&&s;const l=n&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,h=u!==this.ga;return this.ga=u,a.length!==0||h?{snapshot:new Kr(this.query,e.wa,r,a,e.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new O_,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ae(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const n=[];return e.forEach(i=>{this.pa.has(i)||n.push(new Vb(i))}),this.pa.forEach(i=>{e.has(i)||n.push(new kb(i))}),n}Oa(e){this.fa=e.gs,this.pa=ae();const n=this.Sa(e.documents);return this.applyChanges(n,!0)}Na(){return Kr.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Xm="SyncEngine";class eN{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class tN{constructor(e){this.key=e,this.Ba=!1}}class nN{constructor(e,n,i,s,r,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Hs(l=>WT(l),xc),this.qa=new Map,this.Qa=new Set,this.$a=new De(K.comparator),this.Ka=new Map,this.Ua=new jm,this.Wa={},this.Ga=new Map,this.za=Gr.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function iN(t,e,n=!0){const i=Bb(t);let s;const r=i.ka.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.Na()):s=await Pb(i,e,n,!0),s}async function sN(t,e){const n=Bb(t);await Pb(n,e,!0,!1)}async function Pb(t,e,n,i){const s=await Ax(t.localStore,yn(e)),r=s.targetId,a=t.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await rN(t,e,r,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&wb(t.remoteStore,s),l}async function rN(t,e,n,i,s){t.Ha=(p,m,v)=>async function(O,k,A,E){let S=k.view.Sa(A);S.ls&&(S=await R_(O.localStore,k.query,!1).then(({documents:T})=>k.view.Sa(T,S)));const x=E&&E.targetChanges.get(k.targetId),V=E&&E.targetMismatches.get(k.targetId)!=null,P=k.view.applyChanges(S,O.isPrimaryClient,x,V);return P_(O,k.targetId,P.Ma),P.snapshot}(t,p,m,v);const r=await R_(t.localStore,e,!0),a=new Jx(e,r.gs),l=a.Sa(r.documents),u=Zo.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),h=a.applyChanges(l,t.isPrimaryClient,u);P_(t,n,h.Ma);const d=new eN(e,n,a);return t.ka.set(e,d),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),h.snapshot}async function aN(t,e,n){const i=J(t),s=i.ka.get(e),r=i.qa.get(s.targetId);if(r.length>1)return i.qa.set(s.targetId,r.filter(a=>!xc(a,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await _d(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Hm(i.remoteStore,s.targetId),Td(i,s.targetId)}).catch(ra)):(Td(i,s.targetId),await _d(i.localStore,s.targetId,!0))}async function oN(t,e){const n=J(t),i=n.ka.get(e),s=n.qa.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Hm(n.remoteStore,i.targetId))}async function lN(t,e,n){const i=gN(t);try{const s=await function(a,l){const u=J(a),h=Qe.now(),d=l.reduce((v,C)=>v.add(C.key),ae());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let C=ei(),O=ae();return u.ds.getEntries(v,d).next(k=>{C=k,C.forEach((A,E)=>{E.isValidDocument()||(O=O.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,C)).next(k=>{p=k;const A=[];for(const E of l){const S=S2(E,p.get(E.key).overlayedDocument);S!=null&&A.push(new ns(E.key,S,HT(S.value.mapValue),Nt.exists(!0)))}return u.mutationQueue.addMutationBatch(v,h,A,l)}).next(k=>{m=k;const A=k.applyToLocalDocumentSet(p,O);return u.documentOverlayCache.saveOverlays(v,k.batchId,A)})}).then(()=>({batchId:m.batchId,changes:eb(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Wa[a.currentUser.toKey()];h||(h=new De(ue)),h=h.insert(l,u),a.Wa[a.currentUser.toKey()]=h}(i,s.batchId,n),await el(i,s.changes),await Lc(i.remoteStore)}catch(s){const r=Ym(s,"Failed to persist write");n.reject(r)}}async function Lb(t,e){const n=J(t);try{const i=await Tx(n.localStore,e);e.targetChanges.forEach((s,r)=>{const a=n.Ka.get(r);a&&(me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.Ba=!0:s.modifiedDocuments.size>0?me(a.Ba):s.removedDocuments.size>0&&(me(a.Ba),a.Ba=!1))}),await el(n,i,e)}catch(i){await ra(i)}}function V_(t,e,n){const i=J(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.ka.forEach((r,a)=>{const l=a.view.sa(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=J(a);u.onlineState=l;let h=!1;u.queries.forEach((d,p)=>{for(const m of p.ta)m.sa(l)&&(h=!0)}),h&&$m(u)}(i.eventManager,e),s.length&&i.La.p_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function uN(t,e,n){const i=J(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Ka.get(e),r=s&&s.key;if(r){let a=new De(K.comparator);a=a.insert(r,gt.newNoDocument(r,Z.min()));const l=ae().add(r),u=new kc(Z.min(),new Map,new De(ue),a,l);await Lb(i,u),i.$a=i.$a.remove(r),i.Ka.delete(e),Wm(i)}else await _d(i.localStore,e,!1).then(()=>Td(i,e,n)).catch(ra)}async function cN(t,e){const n=J(t),i=e.batch.batchId;try{const s=await Ex(n.localStore,e);jb(n,i,null),Ub(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await el(n,s)}catch(s){await ra(s)}}async function hN(t,e,n){const i=J(t);try{const s=await function(a,l){const u=J(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(p=>(me(p!==null),d=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,e);jb(i,e,n),Ub(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await el(i,s)}catch(s){await ra(s)}}function Ub(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function jb(t,e,n){const i=J(t);let s=i.Wa[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Wa[i.currentUser.toKey()]=s}}function Td(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.qa.get(e))t.ka.delete(i),n&&t.La.Ja(i,n);t.qa.delete(e),t.isPrimaryClient&&t.Ua.Sr(e).forEach(i=>{t.Ua.containsKey(i)||zb(t,i)})}function zb(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(Hm(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ka.delete(n),Wm(t))}function P_(t,e,n){for(const i of n)i instanceof kb?(t.Ua.addReference(i.key,e),fN(t,i)):i instanceof Vb?(F(Xm,"Document no longer in limbo: "+i.key),t.Ua.removeReference(i.key,e),t.Ua.containsKey(i.key)||zb(t,i.key)):$()}function fN(t,e){const n=e.key,i=n.path.canonicalString();t.$a.get(n)||t.Qa.has(i)||(F(Xm,"New document in limbo: "+n),t.Qa.add(i),Wm(t))}function Wm(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new K(Ae.fromString(e)),i=t.za.next();t.Ka.set(i,new tN(n)),t.$a=t.$a.insert(n,i),wb(t.remoteStore,new Ci(yn(km(n.path)),i,"TargetPurposeLimboResolution",Rc.ae))}}async function el(t,e,n){const i=J(t),s=[],r=[],a=[];i.ka.isEmpty()||(i.ka.forEach((l,u)=>{a.push(i.Ha(u,e,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(h){s.push(h);const p=Bm.Yi(u.targetId,h);r.push(p)}}))}),await Promise.all(a),i.La.p_(s),await async function(u,h){const d=J(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(h,m=>U.forEach(m.Hi,v=>d.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>U.forEach(m.Ji,v=>d.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!aa(p))throw p;F(qm,"Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const v=d.Ts.get(m),C=v.snapshotVersion,O=v.withLastLimboFreeSnapshotVersion(C);d.Ts=d.Ts.insert(m,O)}}}(i.localStore,r))}async function dN(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){F(Xm,"User change. New user:",e.toKey());const i=await Tb(n.localStore,e);n.currentUser=e,function(r,a){r.Ga.forEach(l=>{l.forEach(u=>{u.reject(new G(L.CANCELLED,a))})}),r.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await el(n,i.Rs)}}function mN(t,e){const n=J(t),i=n.Ka.get(e);if(i&&i.Ba)return ae().add(i.key);{let s=ae();const r=n.qa.get(e);if(!r)return s;for(const a of r){const l=n.ka.get(a);s=s.unionWith(l.view.ba)}return s}}function Bb(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uN.bind(null,e),e.La.p_=Wx.bind(null,e.eventManager),e.La.Ja=Zx.bind(null,e.eventManager),e}function gN(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hN.bind(null,e),e}class Ju{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vc(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return vx(this.persistence,new px,e.initialUser,this.serializer)}Xa(e){return new Eb(zm.ri,this.serializer)}Za(e){return new Rx}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ju.provider={build:()=>new Ju};class pN extends Ju{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){me(this.persistence.referenceDelegate instanceof Wu);const i=this.persistence.referenceDelegate.garbageCollector;return new tx(i,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new Eb(i=>Wu.ri(i,n),this.serializer)}}class bd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>V_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dN.bind(null,this.syncEngine),await Yx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Xx}()}createDatastore(e){const n=Vc(e.databaseInfo.databaseId),i=function(r){return new Dx(r)}(e.databaseInfo);return function(r,a,l,u){return new Vx(r,a,l,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,r,a,l){return new Lx(i,s,r,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>V_(this.syncEngine,n,0),function(){return x_.D()?new x_:new Ix}())}createSyncEngine(e,n){return function(s,r,a,l,u,h,d){const p=new nN(s,r,a,l,u,h);return d&&(p.ja=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const r=J(s);F(Ms,"RemoteStore shutting down."),r.W_.add(5),await Jo(r),r.z_.shutdown(),r.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bd.provider={build:()=>new bd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Jn("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi="FirestoreClient";class yN{constructor(e,n,i,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=mt.UNAUTHENTICATED,this.clientId=MT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{F(Zi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(F(Zi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Ym(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function rf(t,e){t.asyncQueue.verifyOperationInProgress(),F(Zi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await Tb(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function L_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _N(t);F(Zi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>D_(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>D_(e.remoteStore,s)),t._onlineComponents=e}async function _N(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(Zi,"Using user provided OfflineComponentProvider");try{await rf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Br("Error using user provided cache. Falling back to memory cache: "+n),await rf(t,new Ju)}}else F(Zi,"Using default OfflineComponentProvider"),await rf(t,new pN(void 0));return t._offlineComponents}async function Hb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(Zi,"Using user provided OnlineComponentProvider"),await L_(t,t._uninitializedComponentsProvider._online)):(F(Zi,"Using default OnlineComponentProvider"),await L_(t,new bd))),t._onlineComponents}function vN(t){return Hb(t).then(e=>e.syncEngine)}async function Fb(t){const e=await Hb(t),n=e.eventManager;return n.onListen=iN.bind(null,e.syncEngine),n.onUnlisten=aN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=sN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oN.bind(null,e.syncEngine),n}function EN(t,e,n={}){const i=new Gn;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,h){const d=new qb({next:m=>{d.su(),a.enqueueAndForget(()=>Ob(r,p));const v=m.docs.has(l);!v&&m.fromCache?h.reject(new G(L.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?h.reject(new G(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new Mb(km(l.path),d,{includeMetadataChanges:!0,Ta:!0});return Db(r,p)}(await Fb(t),t.asyncQueue,e,n,i)),i.promise}function TN(t,e,n={}){const i=new Gn;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,h){const d=new qb({next:m=>{d.su(),a.enqueueAndForget(()=>Ob(r,p)),m.fromCache&&u.source==="server"?h.reject(new G(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),p=new Mb(l,d,{includeMetadataChanges:!0,Ta:!0});return Db(r,p)}(await Fb(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(t,e,n){if(!n)throw new G(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bN(t,e,n,i){if(e===!0&&i===!0)throw new G(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function j_(t){if(!K.isDocumentKey(t))throw new G(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function z_(t){if(K.isDocumentKey(t))throw new G(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Uc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$()}function bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uc(t);throw new G(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="firestore.googleapis.com",B_=!0;class q_{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new G(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qb,this.ssl=B_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:B_;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<J2)throw new G(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Gb((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jc{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new NC;switch(i.type){case"firstParty":return new kC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new G(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=U_.get(n);i&&(F("ComponentProvider","Removing Datastore"),U_.delete(n),i.terminate())}(this),Promise.resolve()}}function SN(t,e,n,i={}){var s;const r=(t=bn(t,jc))._getSettings(),a=Object.assign(Object.assign({},r),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;r.host!==Qb&&r.host!==l&&Br("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},r),{host:l,ssl:!1,emulatorOptions:i});if(!Ns(u,a)&&(t._setSettings(u),i.mockUserToken)){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=mt.MOCK_USER;else{h=iI(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new G(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new mt(p)}t._authCredentials=new DC(new OT(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new la(this.firestore,e,this._query)}}class Dt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}}class Bi extends la{constructor(e,n,i){super(e,n,km(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new K(e))}withConverter(e){return new Bi(this.firestore,e,this._path)}}function Kn(t,e,...n){if(t=He(t),Kb("collection","path",e),t instanceof jc){const i=Ae.fromString(e,...n);return z_(i),new Bi(t,null,i)}{if(!(t instanceof Dt||t instanceof Bi))throw new G(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ae.fromString(e,...n));return z_(i),new Bi(t.firestore,null,i)}}function ks(t,e,...n){if(t=He(t),arguments.length===1&&(e=MT.newId()),Kb("doc","path",e),t instanceof jc){const i=Ae.fromString(e,...n);return j_(i),new Dt(t,null,new K(i))}{if(!(t instanceof Dt||t instanceof Bi))throw new G(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ae.fromString(e,...n));return j_(i),new Dt(t.firestore,t instanceof Bi?t.converter:null,new K(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="AsyncQueue";class F_{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Sb(this,"async_queue_retry"),this.bu=()=>{const i=sf();i&&F(H_,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.Su=e;const n=sf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=sf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Gn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!aa(e))throw e;F(H_,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.Su.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(i);throw Jn("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.Su=n,n}enqueueAfterDelay(e,n,i){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const s=Qm.createAndSchedule(this,e,n,i,r=>this.Fu(r));return this.fu.push(s),s}Du(){this.gu&&$()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class Gs extends jc{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new F_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new F_(e),this._firestoreClient=void 0,await e}}}function AN(t,e){const n=typeof t=="object"?t:ST(),i=typeof t=="string"?t:Fu,s=Im(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=tI("firestore");r&&SN(s,...r)}return s}function zc(t){if(t._terminated)throw new G(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wN(t),t._firestoreClient}function wN(t){var e,n,i;const s=t._freezeSettings(),r=function(l,u,h,d){return new YC(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Gb(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new yN(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qr(ot.fromBase64String(e))}catch(n){throw new G(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qr(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=/^__.*__$/;class IN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wo(e,this.data,n,this.fieldTransforms)}}class Yb{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $b(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $()}}class tg{constructor(e,n,i,s,r,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Bu(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new tg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:i,Qu:!1});return s.$u(e),s}Ku(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return ec(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if($b(this.Lu)&&RN.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class CN{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Vc(e)}ju(e,n,i,s=!1){return new tg({Lu:e,methodName:n,zu:i,path:rt.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bc(t){const e=t._freezeSettings(),n=Vc(t._databaseId);return new CN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xb(t,e,n,i,s,r={}){const a=t.ju(r.merge||r.mergeFields?2:0,e,n,s);ng("Data must be an object, but it was:",a,i);const l=Jb(i,a);let u,h;if(r.merge)u=new jt(a.fieldMask),h=a.fieldTransforms;else if(r.mergeFields){const d=[];for(const p of r.mergeFields){const m=Sd(e,p,n);if(!a.contains(m))throw new G(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);tS(d,m)||d.push(m)}u=new jt(d),h=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=a.fieldTransforms;return new IN(new xt(l),u,h)}class qc extends Zm{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qc}}function Wb(t,e,n,i){const s=t.ju(1,e,n);ng("Data must be an object, but it was:",s,i);const r=[],a=xt.empty();ts(i,(u,h)=>{const d=ig(e,u,n);h=He(h);const p=s.Ku(d);if(h instanceof qc)r.push(d);else{const m=nl(h,p);m!=null&&(r.push(d),a.set(d,m))}});const l=new jt(r);return new Yb(a,l,s.fieldTransforms)}function Zb(t,e,n,i,s,r){const a=t.ju(1,e,n),l=[Sd(e,i,n)],u=[s];if(r.length%2!=0)throw new G(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<r.length;m+=2)l.push(Sd(e,r[m])),u.push(r[m+1]);const h=[],d=xt.empty();for(let m=l.length-1;m>=0;--m)if(!tS(h,l[m])){const v=l[m];let C=u[m];C=He(C);const O=a.Ku(v);if(C instanceof qc)h.push(v);else{const k=nl(C,O);k!=null&&(h.push(v),d.set(v,k))}}const p=new jt(h);return new Yb(d,p,a.fieldTransforms)}function xN(t,e,n,i=!1){return nl(n,t.ju(i?4:3,e))}function nl(t,e){if(eS(t=He(t)))return ng("Unsupported field value:",e,t),Jb(t,e);if(t instanceof Zm)return function(i,s){if(!$b(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let u=nl(l,s.Uu(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(t,e)}return function(i,s){if((i=He(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return y2(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Qe.fromDate(i);return{timestampValue:Xu(s.serializer,r)}}if(i instanceof Qe){const r=new Qe(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Xu(s.serializer,r)}}if(i instanceof Jm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Qr)return{bytesValue:fb(s.serializer,i._byteString)};if(i instanceof Dt){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Um(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof eg)return function(a,l){return{mapValue:{fields:{[BT]:{stringValue:qT},[Gu]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Wu("VectorValues must only contain numeric values.");return Vm(l.serializer,h)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${Uc(i)}`)}(t,e)}function Jb(t,e){const n={};return VT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ts(t,(i,s)=>{const r=nl(s,e.qu(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function eS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof Jm||t instanceof Qr||t instanceof Dt||t instanceof Zm||t instanceof eg)}function ng(t,e,n){if(!eS(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=Uc(n);throw i==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}}function Sd(t,e,n){if((e=He(e))instanceof tl)return e._internalPath;if(typeof e=="string")return ig(t,e);throw ec("Field path arguments must be of type string or ",t,!1,void 0,n)}const NN=new RegExp("[~\\*/\\[\\]]");function ig(t,e,n){if(e.search(NN)>=0)throw ec(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new tl(...e.split("."))._internalPath}catch{throw ec(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ec(t,e,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new G(L.INVALID_ARGUMENT,l+t+u)}function tS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DN extends nS{data(){return super.data()}}function sg(t,e){return typeof e=="string"?ig(t,e):e instanceof tl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rg{}class MN extends rg{}function Yr(t,e,...n){let i=[];e instanceof rg&&i.push(e),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof ag).length,l=r.filter(u=>u instanceof Hc).length;if(a>1||a>0&&l>0)throw new G(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Hc extends MN{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Hc(e,n,i)}_apply(e){const n=this._parse(e);return iS(e._query,n),new la(e.firestore,e.converter,fd(e._query,n))}_parse(e){const n=Bc(e.firestore);return function(r,a,l,u,h,d,p){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){K_(p,d);const C=[];for(const O of p)C.push(G_(u,r,O));m={arrayValue:{values:C}}}else m=G_(u,r,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||K_(p,d),m=xN(l,a,p,d==="in"||d==="not-in");return Be.create(h,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qi(t,e,n){const i=e,s=sg("where",t);return Hc._create(s,i,n)}class ag extends rg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ag(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,r){let a=s;const l=r.getFlattenedFilters();for(const u of l)iS(a,u),a=fd(a,u)}(e._query,n),new la(e.firestore,e.converter,fd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function G_(t,e,n){if(typeof(n=He(n))=="string"){if(n==="")throw new G(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XT(e)&&n.indexOf("/")!==-1)throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ae.fromString(n));if(!K.isDocumentKey(i))throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return o_(t,new K(i))}if(n instanceof Dt)return o_(t,n._key);throw new G(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uc(n)}.`)}function K_(t,e){if(!Array.isArray(t)||t.length===0)throw new G(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iS(t,e){const n=function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kN{convertValue(e,n="none"){switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ts(e,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(e){var n,i,s;const r=(s=(i=(n=e.fields)===null||n===void 0?void 0:n[Gu].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(a=>Le(a.doubleValue));return new eg(r)}convertGeoPoint(e){return new Jm(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Cc(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(xo(e));default:return null}}convertTimestamp(e){const n=Yi(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ae.fromString(e);me(_b(i));const s=new No(i.get(1),i.get(3)),r=new K(i.popFirst(5));return s.isEqual(n)||Jn(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rS extends nS{constructor(e,n,i,s,r,a){super(e,n,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(sg("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class lu extends rS{data(e={}){return super.data(e)}}class VN{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ha(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new lu(this._firestore,this._userDataWriter,i.key,i,new Ha(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new lu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ha(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new lu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ha(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:PN(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function PN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t){t=bn(t,Dt);const e=bn(t.firestore,Gs);return EN(zc(e),t._key).then(n=>UN(e,t,n))}class aS extends kN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}}function $r(t){t=bn(t,la);const e=bn(t.firestore,Gs),n=zc(e),i=new aS(e);return ON(t._query),TN(n,t._query).then(s=>new VN(e,i,t,s))}function oS(t,e,n,...i){t=bn(t,Dt);const s=bn(t.firestore,Gs),r=Bc(s);let a;return a=typeof(e=He(e))=="string"||e instanceof tl?Zb(r,"updateDoc",t._key,e,n,i):Wb(r,"updateDoc",t._key,e),Fc(s,[a.toMutation(t._key,Nt.exists(!0))])}function LN(t){return Fc(bn(t.firestore,Gs),[new Mc(t._key,Nt.none())])}function lS(t,e){const n=bn(t.firestore,Gs),i=ks(t),s=sS(t.converter,e);return Fc(n,[Xb(Bc(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Nt.exists(!1))]).then(()=>i)}function Fc(t,e){return function(i,s){const r=new Gn;return i.asyncQueue.enqueueAndForget(async()=>lN(await vN(i),s,r)),r.promise}(zc(t),e)}function UN(t,e,n){const i=n.docs.get(e._key),s=new aS(t);return new rS(t,s,e._key,i,new Ha(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Bc(e)}set(e,n,i){this._verifyNotCommitted();const s=af(e,this._firestore),r=sS(s.converter,n,i),a=Xb(this._dataReader,"WriteBatch.set",s._key,r,s.converter!==null,i);return this._mutations.push(a.toMutation(s._key,Nt.none())),this}update(e,n,i,...s){this._verifyNotCommitted();const r=af(e,this._firestore);let a;return a=typeof(n=He(n))=="string"||n instanceof tl?Zb(this._dataReader,"WriteBatch.update",r._key,n,i,s):Wb(this._dataReader,"WriteBatch.update",r._key,n),this._mutations.push(a.toMutation(r._key,Nt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=af(e,this._firestore);return this._mutations=this._mutations.concat(new Mc(n._key,Nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function af(t,e){if((t=He(t)).firestore!==e)throw new G(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t){return zc(t=bn(t,Gs)),new jN(t,e=>Fc(t,e))}(function(e,n=!0){(function(s){sa=s})(ia),zr(new Ds("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new Gs(new OC(i.getProvider("auth-internal")),new VC(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new G(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new No(h.options.projectId,d)}(a,s),a);return r=Object.assign({useFetchStreams:n},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),ji(Xy,Wy,e),ji(Xy,Wy,"esm2017")})();function og(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function uS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BN=uS,cS=new Yo("auth","Firebase",uS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new wm("@firebase/auth");function qN(t,...e){tc.logLevel<=re.WARN&&tc.warn(`Auth (${ia}): ${t}`,...e)}function uu(t,...e){tc.logLevel<=re.ERROR&&tc.error(`Auth (${ia}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t,...e){throw ug(t,...e)}function ln(t,...e){return ug(t,...e)}function lg(t,e,n){const i=Object.assign(Object.assign({},BN()),{[e]:n});return new Yo("auth","Firebase",i).create(e,{appName:t.name})}function Qn(t){return lg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HN(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&nn(t,"argument-error"),lg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ug(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return cS.create(t,...e)}function Q(t,e,...n){if(!t)throw ug(e,...n)}function Bn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw uu(e),new Error(e)}function ti(t,e){t||Bn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function FN(){return Y_()==="http:"||Y_()==="https:"}function Y_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FN()||oI()||"connection"in navigator)?navigator.onLine:!0}function KN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,n){this.shortDelay=e,this.longDelay=n,ti(n>e,"Short delay should be less than long delay!"),this.isMobile=sI()||lI()}get(){return GN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(t,e){ti(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=new il(3e4,6e4);function si(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ri(t,e,n,i,s={}){return fS(t,s,async()=>{let r={},a={};i&&(e==="GET"?a=i:r={body:JSON.stringify(i)});const l=$o(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},r);return aI()||(h.referrerPolicy="no-referrer"),hS.fetch()(dS(t,t.config.apiHost,n,l),h)})}async function fS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},QN),e);try{const s=new XN(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Fl(t,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Fl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Fl(t,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw lg(t,d,h);nn(t,d)}}catch(s){if(s instanceof ii)throw s;nn(t,"network-request-failed",{message:String(s)})}}async function sl(t,e,n,i,s={}){const r=await ri(t,e,n,i,s);return"mfaPendingCredential"in r&&nn(t,"multi-factor-auth-required",{_serverResponse:r}),r}function dS(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?cg(t.config,s):`${t.config.apiScheme}://${s}`}function $N(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ln(this.auth,"network-request-failed")),YN.get())})}}function Fl(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=ln(t,e,i);return s.customData._tokenResponse=n,s}function $_(t){return t!==void 0&&t.enterprise!==void 0}class WN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $N(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ZN(t,e){return ri(t,"GET","/v2/recaptchaConfig",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(t,e){return ri(t,"POST","/v1/accounts:delete",e)}async function mS(t,e){return ri(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eD(t,e=!1){const n=He(t),i=await n.getIdToken(e),s=hg(i);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:co(of(s.auth_time)),issuedAtTime:co(of(s.iat)),expirationTime:co(of(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function of(t){return Number(t)*1e3}function hg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return uu("JWT malformed, contained fewer than 3 sections"),null;try{const s=pT(n);return s?JSON.parse(s):(uu("Failed to decode base64 JWT payload"),null)}catch(s){return uu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function X_(t){const e=hg(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ii&&tD(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function tD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=co(this.lastLoginAt),this.creationTime=co(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(t){var e;const n=t.auth,i=await t.getIdToken(),s=await ko(t,mS(n,{idToken:i}));Q(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const a=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?gS(r.providerUserInfo):[],l=sD(t.providerData,a),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(l!=null&&l.length),d=u?h:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new wd(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function iD(t){const e=He(t);await nc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sD(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function gS(t){return t.map(e=>{var{providerId:n}=e,i=og(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(t,e){const n=await fS(t,{},async()=>{const i=$o({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,a=dS(t,s,"/v1/token",`key=${r}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",hS.fetch()(a,{method:"POST",headers:l,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function aD(t,e){return ri(t,"POST","/v2/accounts:revokeToken",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=X_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await rD(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new Cr;return i&&(Q(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(Q(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),r&&(Q(typeof r=="number","internal-error",{appName:e}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cr,this.toJSON())}_performRefresh(){return Bn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qn{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,r=og(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new wd(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await ko(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eD(this,e)}reload(){return iD(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await nc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ut(this.auth.app))return Promise.reject(Qn(this.auth));const e=await this.getIdToken();return await ko(this,JN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,r,a,l,u,h,d;const p=(i=n.displayName)!==null&&i!==void 0?i:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,v=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,C=(a=n.photoURL)!==null&&a!==void 0?a:void 0,O=(l=n.tenantId)!==null&&l!==void 0?l:void 0,k=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,A=(h=n.createdAt)!==null&&h!==void 0?h:void 0,E=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:x,isAnonymous:V,providerData:P,stsTokenManager:T}=n;Q(S&&T,e,"internal-error");const _=Cr.fromJSON(this.name,T);Q(typeof S=="string",e,"internal-error"),mi(p,e.name),mi(m,e.name),Q(typeof x=="boolean",e,"internal-error"),Q(typeof V=="boolean",e,"internal-error"),mi(v,e.name),mi(C,e.name),mi(O,e.name),mi(k,e.name),mi(A,e.name),mi(E,e.name);const b=new qn({uid:S,auth:e,email:m,emailVerified:x,displayName:p,isAnonymous:V,photoURL:C,phoneNumber:v,tenantId:O,stsTokenManager:_,createdAt:A,lastLoginAt:E});return P&&Array.isArray(P)&&(b.providerData=P.map(w=>Object.assign({},w))),k&&(b._redirectEventId=k),b}static async _fromIdTokenResponse(e,n,i=!1){const s=new Cr;s.updateFromServerResponse(n);const r=new qn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await nc(r),r}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?gS(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new Cr;l.updateFromIdToken(i);const u=new qn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new wd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Map;function Hn(t){ti(t instanceof Function,"Expected a class definition");let e=W_.get(t);return e?(ti(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,W_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pS.type="NONE";const Z_=pS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t,e,n){return`firebase:${t}:${e}:${n}`}class xr{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=cu(this.userKey,s.apiKey,r),this.fullPersistenceKey=cu("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new xr(Hn(Z_),e,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=s[0]||Hn(Z_);const a=cu(i,e.config.apiKey,e.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){const p=qn._fromJSON(e,d);h!==r&&(l=p),r=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new xr(r,e,i):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==r)try{await h._remove(a)}catch{}})),new xr(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ES(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bS(e))return"Blackberry";if(SS(e))return"Webos";if(_S(e))return"Safari";if((e.includes("chrome/")||vS(e))&&!e.includes("edge/"))return"Chrome";if(TS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function yS(t=_t()){return/firefox\//i.test(t)}function _S(t=_t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vS(t=_t()){return/crios\//i.test(t)}function ES(t=_t()){return/iemobile/i.test(t)}function TS(t=_t()){return/android/i.test(t)}function bS(t=_t()){return/blackberry/i.test(t)}function SS(t=_t()){return/webos/i.test(t)}function fg(t=_t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oD(t=_t()){var e;return fg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lD(){return uI()&&document.documentMode===10}function AS(t=_t()){return fg(t)||TS(t)||SS(t)||bS(t)||/windows phone/i.test(t)||ES(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(t,e=[]){let n;switch(t){case"Browser":n=J_(_t());break;case"Worker":n=`${J_(_t())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ia}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((a,l)=>{try{const u=e(r);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(t,e={}){return ri(t,"GET","/v2/passwordPolicy",si(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=6;class fD{constructor(e){var n,i,s,r;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:hD,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,r,a,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.containsUppercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ev(this),this.idTokenSubscription=new ev(this),this.beforeStateQueue=new uD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hn(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await xr.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await mS(this,{idToken:e}),i=await qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ut(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(s=u.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ut(this.app))return Promise.reject(Qn(this));const n=e?He(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ut(this.app)?Promise.reject(Qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ut(this.app)?Promise.reject(Qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cD(this),n=new fD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yo("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await aD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await xr.create(this,[Hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Ut(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&qN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ai(t){return He(t)}class ev{constructor(e){this.auth=e,this.observer=null,this.addObserver=yI(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mD(t){Gc=t}function RS(t){return Gc.loadJS(t)}function gD(){return Gc.recaptchaEnterpriseScript}function pD(){return Gc.gapiScript}function yD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class _D{constructor(){this.enterprise=new vD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class vD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const ED="recaptcha-enterprise",IS="NO_RECAPTCHA";class TD{constructor(e){this.type=ED,this.auth=ai(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,l)=>{ZN(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new WN(u);return r.tenantId==null?r._agentRecaptchaConfig=h:r._tenantRecaptchaConfigs[r.tenantId]=h,a(h.siteKey)}}).catch(u=>{l(u)})})}function s(r,a,l){const u=window.grecaptcha;$_(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:e}).then(h=>{a(h)}).catch(()=>{a(IS)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _D().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{i(this.auth).then(l=>{if(!n&&$_(window.grecaptcha))s(l,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=gD();u.length!==0&&(u+=l),RS(u).then(()=>{s(l,r,a)}).catch(h=>{a(h)})}}).catch(l=>{a(l)})})}}async function tv(t,e,n,i=!1,s=!1){const r=new TD(t);let a;if(s)a=IS;else try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ic(t,e,n,i,s){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await tv(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await tv(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(t,e){const n=Im(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Ns(r,e??{}))return s;nn(s,"already-initialized")}return n.initialize({options:e})}function SD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Hn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function AD(t,e,n){const i=ai(t);Q(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=CS(e),{host:a,port:l}=wD(e),u=l===null?"":`:${l}`,h={url:`${r}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Q(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Q(Ns(h,i.config.emulator)&&Ns(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,RD()}function CS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function wD(t){const e=CS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:nv(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:nv(a)}}}function nv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function RD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bn("not implemented")}_getIdTokenResponse(e){return Bn("not implemented")}_linkToIdToken(e,n){return Bn("not implemented")}_getReauthenticationResolver(e){return Bn("not implemented")}}async function ID(t,e){return ri(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CD(t,e){return sl(t,"POST","/v1/accounts:signInWithPassword",si(t,e))}async function xD(t,e){return ri(t,"POST","/v1/accounts:sendOobCode",si(t,e))}async function ND(t,e){return xD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DD(t,e){return sl(t,"POST","/v1/accounts:signInWithEmailLink",si(t,e))}async function OD(t,e){return sl(t,"POST","/v1/accounts:signInWithEmailLink",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends dg{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Vo(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Vo(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ic(e,n,"signInWithPassword",CD);case"emailLink":return DD(e,{email:this._email,oobCode:this._password});default:nn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ic(e,i,"signUpPassword",ID);case"emailLink":return OD(e,{idToken:n,email:this._email,oobCode:this._password});default:nn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nr(t,e){return sl(t,"POST","/v1/accounts:signInWithIdp",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="http://localhost";class Vs extends dg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,r=og(n,["providerId","signInMethod"]);if(!i||!s)return null;const a=new Vs(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Nr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Nr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Nr(e,n)}buildRequest(){const e={requestUri:MD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$o(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VD(t){const e=Ua(ja(t)).link,n=e?Ua(ja(e)).deep_link_id:null,i=Ua(ja(t)).deep_link_id;return(i?Ua(ja(i)).link:null)||i||n||e||t}class mg{constructor(e){var n,i,s,r,a,l;const u=Ua(ja(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(i=u.oobCode)!==null&&i!==void 0?i:null,p=kD((s=u.mode)!==null&&s!==void 0?s:null);Q(h&&d&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=d,this.continueUrl=(r=u.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=VD(e);try{return new mg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.providerId=ua.PROVIDER_ID}static credential(e,n){return Vo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=mg.parseLink(n);return Q(i,"argument-error"),Vo._fromEmailAndCode(e,i.code,i.tenantId)}}ua.PROVIDER_ID="password";ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends gg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends rl{constructor(){super("facebook.com")}static credential(e){return Vs._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Si.credential(e.oauthAccessToken)}catch{return null}}}Si.FACEBOOK_SIGN_IN_METHOD="facebook.com";Si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn extends rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Vs._fromParams({providerId:Vn.PROVIDER_ID,signInMethod:Vn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vn.credentialFromTaggedObject(e)}static credentialFromError(e){return Vn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Vn.credential(n,i)}catch{return null}}}Vn.GOOGLE_SIGN_IN_METHOD="google.com";Vn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends rl{constructor(){super("github.com")}static credential(e){return Vs._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.GITHUB_SIGN_IN_METHOD="github.com";Ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends rl{constructor(){super("twitter.com")}static credential(e,n){return Vs._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return wi.credential(n,i)}catch{return null}}}wi.TWITTER_SIGN_IN_METHOD="twitter.com";wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(t,e){return sl(t,"POST","/v1/accounts:signUp",si(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await qn._fromIdTokenResponse(e,i,s),a=iv(i);return new Ps({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=iv(i);return new Ps({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function iv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends ii{constructor(e,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,sc.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new sc(e,n,i,s)}}function xS(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?sc._fromErrorAndOperation(t,r,e,i):r})}async function LD(t,e,n=!1){const i=await ko(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ps._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UD(t,e,n=!1){const{auth:i}=t;if(Ut(i.app))return Promise.reject(Qn(i));const s="reauthenticate";try{const r=await ko(t,xS(i,s,e,t),n);Q(r.idToken,i,"internal-error");const a=hg(r.idToken);Q(a,i,"internal-error");const{sub:l}=a;return Q(t.uid===l,i,"user-mismatch"),Ps._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&nn(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NS(t,e,n=!1){if(Ut(t.app))return Promise.reject(Qn(t));const i="signIn",s=await xS(t,i,e),r=await Ps._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function jD(t,e){return NS(ai(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(t){const e=ai(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zD(t,e,n){const i=ai(t);await ic(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ND)}async function BD(t,e,n){if(Ut(t.app))return Promise.reject(Qn(t));const i=ai(t),a=await ic(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PD).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&DS(t),u}),l=await Ps._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function qD(t,e,n){return Ut(t.app)?Promise.reject(Qn(t)):jD(He(t),ua.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&DS(t),i})}function HD(t,e,n,i){return He(t).onIdTokenChanged(e,n,i)}function FD(t,e,n){return He(t).beforeAuthStateChanged(e,n)}function GD(t,e,n,i){return He(t).onAuthStateChanged(e,n,i)}function KD(t){return He(t).signOut()}const rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rc,"1"),this.storage.removeItem(rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=1e3,YD=10;class MS extends OS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);lD()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,YD):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},QD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}MS.type="LOCAL";const $D=MS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS extends OS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kS.type="SESSION";const VS=kS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Kc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async h=>h(n.origin,r)),u=await XD(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const h=pg("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(m.data.response);break;default:clearTimeout(d),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return window}function ZD(t){vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function JD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function tO(){return PS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="firebaseLocalStorageDb",nO=1,ac="firebaseLocalStorage",US="fbase_key";class al{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qc(t,e){return t.transaction([ac],e?"readwrite":"readonly").objectStore(ac)}function iO(){const t=indexedDB.deleteDatabase(LS);return new al(t).toPromise()}function Rd(){const t=indexedDB.open(LS,nO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(ac,{keyPath:US})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(ac)?e(i):(i.close(),await iO(),e(await Rd()))})})}async function sv(t,e,n){const i=Qc(t,!0).put({[US]:e,value:n});return new al(i).toPromise()}async function sO(t,e){const n=Qc(t,!1).get(e),i=await new al(n).toPromise();return i===void 0?null:i.value}function rv(t,e){const n=Qc(t,!0).delete(e);return new al(n).toPromise()}const rO=800,aO=3;class jS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>aO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return PS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kc._getInstance(tO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await JD(),!this.activeServiceWorker)return;this.sender=new WD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rd();return await sv(e,rc,"1"),await rv(e,rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>sv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>sO(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Qc(s,!1).getAll();return new al(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jS.type="LOCAL";const oO=jS;new il(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e){return e?Hn(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg extends dg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Nr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Nr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Nr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lO(t){return NS(t.auth,new yg(t),t.bypassAuthState)}function uO(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),UD(n,new yg(t),t.bypassAuthState)}async function cO(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),LD(n,new yg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lO;case"linkViaPopup":case"linkViaRedirect":return cO;case"reauthViaPopup":case"reauthViaRedirect":return uO;default:nn(this.auth,"internal-error")}}resolve(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=new il(2e3,1e4);async function fO(t,e,n){if(Ut(t.app))return Promise.reject(ln(t,"operation-not-supported-in-this-environment"));const i=ai(t);HN(t,e,gg);const s=zS(i,n);return new _s(i,"signInViaPopup",e,s).executeNotNull()}class _s extends BS{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,_s.currentPopupAction&&_s.currentPopupAction.cancel(),_s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){ti(this.filter.length===1,"Popup operations only handle one event");const e=pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hO.get())};e()}}_s.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="pendingRedirect",hu=new Map;class mO extends BS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=hu.get(this.auth._key());if(!e){try{const i=await gO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}hu.set(this.auth._key(),e)}return this.bypassAuthState||hu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gO(t,e){const n=_O(e),i=yO(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function pO(t,e){hu.set(t._key(),e)}function yO(t){return Hn(t._redirectPersistence)}function _O(t){return cu(dO,t.config.apiKey,t.name)}async function vO(t,e,n=!1){if(Ut(t.app))return Promise.reject(Qn(t));const i=ai(t),s=zS(i,e),a=await new mO(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=10*60*1e3;class TO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!qS(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(ln(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EO&&this.cachedEventUids.clear(),this.cachedEventUids.has(av(e))}saveEventToCache(e){this.cachedEventUids.add(av(e)),this.lastProcessedEventTime=Date.now()}}function av(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SO(t,e={}){return ri(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wO=/^https?/;async function RO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SO(t);for(const n of e)try{if(IO(n))return}catch{}nn(t,"unauthorized-domain")}function IO(t){const e=Ad(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!wO.test(n))return!1;if(AO.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=new il(3e4,6e4);function ov(){const t=vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xO(t){return new Promise((e,n)=>{var i,s,r;function a(){ov(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ov(),n(ln(t,"network-request-failed"))},timeout:CO.get()})}if(!((s=(i=vn().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=vn().gapi)===null||r===void 0)&&r.load)a();else{const l=yD("iframefcb");return vn()[l]=()=>{gapi.load?a():n(ln(t,"network-request-failed"))},RS(`${pD()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw fu=null,e})}let fu=null;function NO(t){return fu=fu||xO(t),fu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=new il(5e3,15e3),OO="__/auth/iframe",MO="emulator/auth/iframe",kO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PO(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cg(e,MO):`https://${t.config.authDomain}/${OO}`,i={apiKey:e.apiKey,appName:t.name,v:ia},s=VO.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${$o(i).slice(1)}`}async function LO(t){const e=await NO(t),n=vn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:PO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kO,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=ln(t,"network-request-failed"),l=vn().setTimeout(()=>{r(a)},DO.get());function u(){vn().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jO=500,zO=600,BO="_blank",qO="http://localhost";class lv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HO(t,e,n,i=jO,s=zO){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},UO),{width:i.toString(),height:s.toString(),top:r,left:a}),h=_t().toLowerCase();n&&(l=vS(h)?BO:n),yS(h)&&(e=e||qO,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[v,C])=>`${m}${v}=${C},`,"");if(oD(h)&&l!=="_self")return FO(e||"",l),new lv(null);const p=window.open(e||"",l,d);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new lv(p)}function FO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="__/auth/handler",KO="emulator/auth/handler",QO=encodeURIComponent("fac");async function uv(t,e,n,i,s,r){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ia,eventId:s};if(e instanceof gg){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",pI(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(e instanceof rl){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await t._getAppCheckToken(),h=u?`#${QO}=${encodeURIComponent(u)}`:"";return`${YO(t)}?${$o(l).slice(1)}${h}`}function YO({config:t}){return t.emulator?cg(t,KO):`https://${t.authDomain}/${GO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="webStorageSupport";class $O{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VS,this._completeRedirectFn=vO,this._overrideRedirectResult=pO}async _openPopup(e,n,i,s){var r;ti((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const a=await uv(e,n,i,Ad(),s);return HO(e,a,pg())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await uv(e,n,i,Ad(),s);return ZD(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(ti(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await LO(e),i=new TO(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lf,{type:lf},s=>{var r;const a=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[lf];a!==void 0&&n(!!a),nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=RO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return AS()||_S()||fg()}}const XO=$O;var cv="@firebase/auth",hv="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JO(t){zr(new Ds("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;Q(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wS(t)},h=new dD(i,s,r,u);return SD(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),zr(new Ds("auth-internal",e=>{const n=ai(e.getProvider("auth").getImmediate());return(i=>new WO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ji(cv,hv,ZO(t)),ji(cv,hv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=5*60,tM=vT("authIdTokenMaxAge")||eM;let fv=null;const nM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>tM)return;const s=n==null?void 0:n.token;fv!==s&&(fv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function iM(t=ST()){const e=Im(t,"auth");if(e.isInitialized())return e.getImmediate();const n=bD(t,{popupRedirectResolver:XO,persistence:[oO,$D,VS]}),i=vT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=nM(r.toString());FD(n,a,()=>a(n.currentUser)),HD(n,l=>a(l))}}const s=yT("auth");return s&&AD(n,`http://${s}`),n}function sM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=ln("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",sM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JO("Browser");const pi={apiKey:"AIzaSyAWqY7GcAk8HrraCcz1K0X5BH2nF6J_Np0",authDomain:"bisonsports-3662c.firebaseapp.com",projectId:"bisonsports-3662c",storageBucket:"bisonsports-3662c.firebasestorage.app",messagingSenderId:"911932271804",appId:"1:911932271804:web:8c13b569ba42377828b4b9",measurementId:"G-1EB7YRKGYT"};console.log("Firebase Config:",{apiKey:pi.apiKey?"Present":"Missing",authDomain:pi.authDomain?"Present":"Missing",projectId:pi.projectId?"Present":"Missing",storageBucket:pi.storageBucket?"Present":"Missing",messagingSenderId:pi.messagingSenderId?"Present":"Missing",appId:pi.appId?"Present":"Missing",measurementId:pi.measurementId?"Present":"Missing"});const HS=bT(pi),wt=AN(HS),Js=iM(HS),rM=new Vn,FS=B.createContext(),Oa={data:{managers:new Map,stadiums:new Map},maxAge:5*60*1e3,set(t,e,n){this.data[t].set(e,{data:n,timestamp:Date.now()})},get(t,e){const n=this.data[t].get(e);return n?Date.now()-n.timestamp>this.maxAge?(this.data[t].delete(e),null):n.data:null},clear(){this.data.managers.clear(),this.data.stadiums.clear()}},is=()=>B.useContext(FS),aM=({children:t})=>{const[e,n]=B.useState(null),[i,s]=B.useState(!0),[r,a]=B.useState(""),[l,u]=B.useState(null),[h,d]=B.useState(null),p=async S=>{try{const x=Oa.get("stadiums",S);if(x){d(x);return}const V=ks(wt,"stadiums",S),P=await Q_(V);if(P.exists()){const T=P.data();Oa.set("stadiums",S,T),d(T)}else console.error("Stadium not found"),d(null)}catch(x){console.error("Error fetching stadium data:",x),d(null)}},m=async S=>{try{const x=Oa.get("managers",S);if(x){u({...x,id:S}),x.stadiumID&&await p(x.stadiumID);return}const V=ks(wt,"managers",S),P=await Q_(V);if(P.exists()){const T={...P.data(),id:S};Oa.set("managers",S,T),u(T),T.stadiumID?await p(T.stadiumID):d(null)}else a("Manager profile not found"),u(null),d(null)}catch(x){console.error("Error fetching manager data:",x),a("Failed to fetch manager data"),u(null),d(null)}},v=async()=>{try{const S=await fO(Js,rM);return await m(S.user.uid),S.user}catch(S){throw a(S.message),S}},C=async(S,x)=>{try{const V=await qD(Js,S,x);return await m(V.user.uid),V.user}catch(V){throw a(V.message),V}},O=async(S,x)=>{try{const V=await BD(Js,S,x);return await m(V.user.uid),V.user}catch(V){throw a(V.message),V}},k=async S=>{try{await zD(Js,S)}catch(x){throw a(x.message),x}},A=async()=>{try{await KD(Js),n(null),u(null),d(null),Oa.clear()}catch(S){throw a(S.message),S}};B.useEffect(()=>GD(Js,async x=>{n(x),x&&await m(x.uid),s(!1)}),[]);const E={user:e,error:r,managerData:l,stadiumData:h,setStadiumData:d,signInWithGoogle:v,signInWithEmail:C,signUpWithEmail:O,resetPassword:k,logOut:A,loading:i};return g.jsx(FS.Provider,{value:E,children:!i&&t})};function GS({isVisible:t,onAnimationComplete:e}){return t?g.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[g.jsxs("div",{className:"bg-white rounded-lg p-8 flex flex-col items-center",children:[g.jsxs("div",{className:"relative w-16 h-16",children:[g.jsx("svg",{className:"absolute inset-0 w-full h-full",children:g.jsx("circle",{className:"stroke-green-500",strokeWidth:"4",fill:"none",r:"30",cx:"32",cy:"32",style:{strokeDasharray:188.5,strokeDashoffset:188.5,animation:"drawCircle 1s ease-in-out forwards"}})}),g.jsx("svg",{className:"absolute inset-0 w-full h-full",style:{animation:"drawTick 0.5s ease-in-out 0.5s forwards",opacity:0},children:g.jsx("path",{className:"stroke-green-500",strokeWidth:"4",fill:"none",d:"M20 32 L28 40 L44 24",style:{strokeDasharray:50,strokeDashoffset:50}})})]}),g.jsx("p",{className:"mt-4 text-xl font-semibold text-green-600",children:"Booked !!!"})]}),g.jsx("style",{jsx:!0,children:`
        @keyframes drawCircle {
          to {
            stroke-dashoffset: 0;
          }
        }
        @keyframes drawTick {
          to {
            stroke-dashoffset: 0;
            opacity: 1;
          }
        }
      `})]}):null}function KS({isOpen:t,onClose:e,onSave:n,court:i}){const{managerData:s}=is(),[r,a]=B.useState({courtId:"",date:"",duration:0,coachId:"",status:"confirmed"}),[l,u]=B.useState(!1),[h,d]=B.useState(""),[p,m]=B.useState([]),[v,C]=B.useState(null),[O,k]=B.useState([]),[A,E]=B.useState([]),[S,x]=B.useState(null),[V,P]=B.useState(!1);B.useEffect(()=>{if(t){const H=new Date().toISOString().split("T")[0];a({courtId:"",date:H,duration:0,coachId:"",status:"confirmed"}),d(""),i?(C(i),a(ie=>({...ie,courtId:i.id,date:H,duration:i.minimumBookingDuration||60}))):T()}},[t,i]);const T=async()=>{try{const H=Kn(wt,"courts"),ie=Yr(H,qi("stadiumId","==",s.stadiumID)),Y=(await $r(ie)).docs.map(_e=>({id:_e.id,..._e.data()}));m(Y)}catch(H){console.error("Error fetching courts:",H),d("Failed to fetch courts. Please try again.")}},_=async()=>{if(!(!r.date||!r.courtId))try{const H=Kn(wt,"bookings"),ie=Yr(H,qi("courtId","==",r.courtId),qi("date","==",r.date)),Y=(await $r(ie)).docs.map(_e=>({..._e.data()}));k(Y)}catch(H){console.error("Error fetching booked slots:",H)}};B.useEffect(()=>{r.date&&r.courtId&&_()},[r.date,r.courtId]);const b=H=>{if(!H)return 0;const[ie,oe]=H.split(" ");let[Y,_e]=ie.split(":").map(Number);return Y=Y%12,oe==="PM"&&(Y+=12),Y*60+_e},w=(H,ie)=>{if(!H||!ie)return!1;const oe=b(H),Y=b(ie);return!O.some(_e=>{const Fe=b(_e.timeSlot.startTime),ss=b(_e.timeSlot.endTime);return oe<ss&&Y>Fe})},I=()=>{const H=new Date,ie={timeZone:"Asia/Kolkata",hour:"2-digit",minute:"2-digit",hour12:!0};return H.toLocaleTimeString("en-US",ie)},N=H=>{if(!H)return!0;const ie=new Date,oe=new Date(ie.toLocaleString("en-US",{timeZone:"Asia/Kolkata"})),[Y,_e]=H.split(" ");let[Fe,ss]=Y.split(":").map(Number);Fe=Fe%12,_e==="PM"&&(Fe+=12);const vt=new Date(r.date);if(vt.setHours(Fe,ss,0),vt.toDateString()===oe.toDateString()){const ca=new Date(oe.getTime()+18e5);return vt<oe&&vt<ca}return vt<oe},R=()=>{if(!(v!=null&&v.openingTime)||!(v!=null&&v.closingTime)||!r.date||!r.duration){E([]);return}try{const H=[],[ie,oe]=v.openingTime.split(" ");let[Y,_e]=ie.split(":").map(Number);Y=Y%12,oe==="PM"&&(Y+=12);const[Fe,ss]=v.closingTime.split(" ");let[vt,ca]=Fe.split(":").map(Number);vt=vt%12,ss==="PM"&&(vt+=12);let wn=new Date(r.date);wn.setHours(Y,_e,0);const oi=new Date(r.date);for(oi.setHours(vt,ca,0);wn<oi;){const li=wn.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Kolkata"}),rs=new Date(wn);if(rs.setMinutes(wn.getMinutes()+r.duration),rs<=oi){const Ks=rs.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Kolkata"});w(li,Ks)&&!N(li)&&H.push({startTime:li,endTime:Ks})}wn.setMinutes(wn.getMinutes()+30)}E(H)}catch{d("Error generating time slots. Please try again."),E([])}};B.useEffect(()=>{R()},[r.date,r.duration,v,O]);const Ve=()=>{if(!v||!r.duration)return 0;const H=r.duration/60;return Math.round(H*v.pricePerHour)},ut=H=>{const{name:ie,value:oe}=H.target;if(ie==="date"&&!oe){const Y=new Date().toISOString().split("T")[0];a(_e=>({..._e,[ie]:Y}))}else a(Y=>({...Y,[ie]:ie==="duration"?Number(oe):oe}))},q=H=>{const ie=H.target.value,oe=p.find(Y=>Y.id===ie);C(oe),a(Y=>({...Y,courtId:ie,duration:oe.minimumBookingDuration||60}))},W=()=>{a(H=>({...H,duration:H.duration+(v.minimumBookingDuration||60)}))},X=H=>{x(H)},ye=async H=>{H.preventDefault(),u(!0),d("");try{if(!(s!=null&&s.id))throw new Error("Manager data not available");if(!S)throw new Error("Please select a time slot");const ie=r.duration/60,oe=Math.round(ie*v.pricePerHour),Y={userId:s.id,stadiumId:s.stadiumID,courtId:r.courtId,coachId:r.coachId||null,date:r.date,timeSlot:{startTime:S.startTime,endTime:S.endTime},status:r.status,amount:oe},_e=Kn(wt,"bookings");await lS(_e,Y),P(!0),setTimeout(()=>{P(!1),n()},2e3)}catch(ie){console.error("Error creating booking:",ie),d(ie.message||"Failed to create booking. Please try again.")}finally{u(!1)}};return t?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[g.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add New Booking"}),h&&g.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:h}),g.jsxs("form",{onSubmit:ye,className:"space-y-6",children:[!i&&g.jsx("div",{children:g.jsxs("select",{name:"courtId",value:r.courtId,onChange:q,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[g.jsx("option",{value:"",children:"Select a court"}),p.map(H=>g.jsxs("option",{value:H.id,children:["Court ",H.courtNumber," - ",H.sport]},H.id))]})}),g.jsx("div",{children:g.jsx("input",{type:"date",name:"date",value:r.date,onChange:ut,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:new Date().toISOString().split("T")[0]})}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Duration (minutes)"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("input",{type:"number",name:"duration",value:r.duration,onChange:ut,className:"mt-1 block w-full px-2 py-1 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:(v==null?void 0:v.minimumBookingDuration)||60,step:(v==null?void 0:v.minimumBookingDuration)||60,disabled:!v}),g.jsxs("button",{type:"button",onClick:W,className:"mt-1 px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:!v,children:["Add ",(v==null?void 0:v.minimumBookingDuration)||60," min"]})]}),v&&g.jsxs("div",{className:"mt-1 text-sm text-gray-500",children:[g.jsxs("p",{children:["Minimum duration: ",v.minimumBookingDuration||60," minutes"]}),g.jsxs("p",{children:["Price: ",Ve()]})]})]}),A.length===0&&r.date&&r.duration&&g.jsxs("div",{className:"text-sm text-gray-500",children:[g.jsx("p",{children:"No available slots found for the selected duration."}),g.jsx("p",{children:"Please check:"}),g.jsxs("ul",{className:"list-disc pl-5",children:[g.jsx("li",{children:"Selected date is valid"}),g.jsx("li",{children:"Duration is within court hours"}),g.jsxs("li",{children:["Duration is a multiple of ",(v==null?void 0:v.minimumBookingDuration)||60," minutes"]}),g.jsx("li",{children:"No overlapping bookings exist"}),g.jsxs("li",{children:["Slots are not in the past (current time: ",I(),")"]})]})]}),A.length>0&&g.jsxs("div",{className:"relative",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Time Slots"}),g.jsx("div",{className:"h-10 overflow-x-auto border border-gray-300 rounded-md",children:g.jsx("div",{className:"flex flex-nowrap gap-2",children:A.map((H,ie)=>g.jsxs("button",{type:"button",onClick:()=>X(H),className:`p-1 border rounded-md text-xs whitespace-nowrap ${(S==null?void 0:S.startTime)===H.startTime?"bg-blue-100 border-blue-500":"border-gray-300 hover:bg-gray-50"}`,children:[H.startTime," - ",H.endTime]},ie))})}),g.jsxs("div",{className:"flex justify-center mt-2 space-x-2",children:[g.jsx("button",{type:"button",onClick:()=>document.querySelector(".overflow-x-auto").scrollBy({left:-100,behavior:"smooth"}),className:"px-3 py-1 bg-gray-300 rounded-md hover:bg-gray-400 text-xs transition duration-200 ease-in-out transform hover:scale-105",children:"<"}),g.jsx("button",{type:"button",onClick:()=>document.querySelector(".overflow-x-auto").scrollBy({left:100,behavior:"smooth"}),className:"px-3 py-1 bg-gray-300 rounded-md hover:bg-gray-400 text-xs transition duration-200 ease-in-out transform hover:scale-105",children:">"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Coach ID (Optional)"}),g.jsx("input",{type:"text",name:"coachId",value:r.coachId,onChange:ut,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter coach ID"})]}),g.jsxs("div",{className:"flex justify-end gap-4",children:[g.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Cancel"}),g.jsx("button",{type:"submit",disabled:l||!S,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ${l||!S?"opacity-50 cursor-not-allowed":""}`,children:l?"Creating...":"Create Booking"})]})]})]})}),g.jsx(GS,{isVisible:V,onAnimationComplete:()=>{P(!1),n()}})]}):null}function QS({isOpen:t,onClose:e,onSave:n,courts:i}){const{managerData:s}=is(),[r,a]=B.useState({courtId:"",date:"",startTime:"",endTime:""}),[l,u]=B.useState(!1),[h,d]=B.useState(""),[p,m]=B.useState(!1),[v,C]=B.useState(!1),[O,k]=B.useState(null);B.useEffect(()=>{if(t){const V=new Date().toISOString().split("T")[0];a({courtId:"",date:V,startTime:"",endTime:""}),d(""),C(!1),k(null)}},[t]);const A=()=>{if(!O)return[];const V=[],[P,T]=O.openingTime.split(" "),[_,b]=O.closingTime.split(" ");let[w,I]=P.split(":").map(Number),[N,R]=_.split(":").map(Number);w=w%12,T==="PM"&&(w+=12),N=N%12,b==="PM"&&(N+=12);const Ve=new Date;Ve.setHours(w,I,0);const ut=new Date;for(ut.setHours(N,R,0);Ve<=ut;){const q=Ve.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});V.push(q),Ve.setMinutes(Ve.getMinutes()+30)}return V},E=V=>{const{name:P,value:T}=V.target;if(P==="courtId"){const _=i.find(b=>b.id===T);k(_),a(b=>({...b,[P]:T,startTime:"",endTime:""}))}else a(_=>({..._,[P]:T}))},S=async V=>{V.preventDefault(),u(!0),d("");try{if(!(s!=null&&s.id))throw new Error("Manager data not available");const P=v?i:[i.find(b=>b.id===r.courtId)],T=zN(wt),_=Kn(wt,"bookings");P.forEach(b=>{const w=ks(_),I={amount:null,coachId:null,courtId:b.id,date:r.date,stadiumId:s.stadiumID,status:"inactive",timeSlot:{startTime:r.startTime,endTime:r.endTime},userId:s.id};T.set(w,I)}),await T.commit(),m(!0),setTimeout(()=>{m(!1),n()},2e3)}catch(P){console.error("Error setting inactive hours:",P),d(P.message||"Failed to set inactive hours. Please try again.")}finally{u(!1)}},x=A();return t?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[g.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Set Inactive Hours"}),h&&g.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:h}),g.jsxs("form",{onSubmit:S,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Court Selection"}),g.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g.jsx("input",{type:"checkbox",id:"selectAllCourts",checked:v,onChange:V=>{C(V.target.checked),V.target.checked?k(i[0]):k(null)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),g.jsx("label",{htmlFor:"selectAllCourts",className:"text-sm text-gray-700",children:"Select All Courts"})]}),!v&&g.jsxs("select",{name:"courtId",value:r.courtId,onChange:E,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!v,children:[g.jsx("option",{value:"",children:"Select a court"}),i.map(V=>g.jsxs("option",{value:V.id,children:["Court ",V.courtNumber," - ",V.sport]},V.id))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),g.jsx("input",{type:"date",name:"date",value:r.date,onChange:E,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:new Date().toISOString().split("T")[0]})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),g.jsxs("select",{name:"startTime",value:r.startTime,onChange:E,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:!O,children:[g.jsx("option",{value:"",children:"Select time"}),x.map((V,P)=>g.jsx("option",{value:V,disabled:V>=r.endTime&&r.endTime!=="",children:V},P))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),g.jsxs("select",{name:"endTime",value:r.endTime,onChange:E,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:!O,children:[g.jsx("option",{value:"",children:"Select time"}),x.map((V,P)=>g.jsx("option",{value:V,disabled:V<=r.startTime,children:V},P))]})]})]}),g.jsxs("div",{className:"flex justify-end gap-4",children:[g.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Cancel"}),g.jsx("button",{type:"submit",disabled:l||!v&&!r.courtId,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ${l||!v&&!r.courtId?"opacity-50 cursor-not-allowed":""}`,children:l?"Submitting...":"Submit Inactive Hours"})]})]})]})}),g.jsx(GS,{isVisible:p,onAnimationComplete:()=>{m(!1),n()}})]}):null}const oM=({isOpen:t,toggleSidebar:e})=>{const{managerData:n}=is(),[i,s]=B.useState(!1),[r,a]=B.useState(!1),[l,u]=B.useState([]),[h,d]=B.useState(!1),p=async()=>{try{d(!0);const v=Kn(wt,"courts"),C=Yr(v,qi("stadiumId","==",n.stadiumID)),k=(await $r(C)).docs.map(A=>({id:A.id,...A.data()}));u(k)}catch(v){console.error("Error fetching courts:",v)}finally{d(!1)}};B.useEffect(()=>{n!=null&&n.stadiumID&&p()},[n==null?void 0:n.stadiumID]);const m=[{title:"Users List",icon:dT},{title:"Payment History",icon:cT},{title:"Coaches",icon:fT},{title:"Court Details",icon:Ac},{title:"Add Booking",icon:Am,onClick:()=>s(!0)},{title:"Inactive Hours",icon:uT,onClick:()=>a(!0)},{title:"Revenue",icon:aT}];return g.jsxs("div",{className:`bg-white h-full shadow-lg transition-all duration-300 ${t?"w-64":"w-20"} relative`,children:[g.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[g.jsx("h1",{className:`font-bold text-xl ${!t&&"hidden"}`,children:"SportsDash"}),g.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-gray-200",children:t?g.jsx(oT,{size:20}):g.jsx(lT,{size:20})})]}),g.jsx("nav",{className:"mt-6",children:g.jsx("ul",{children:m.map((v,C)=>g.jsx("li",{children:g.jsxs("button",{onClick:v.onClick,className:"w-full flex items-center p-4 text-gray-700 hover:bg-gray-100 transition-colors",children:[g.jsx(v.icon,{size:20,className:"min-w-[20px]"}),g.jsx("span",{className:`ml-4 ${!t&&"hidden"}`,children:v.title})]})},C))})}),g.jsx(KS,{isOpen:i,onClose:()=>s(!1),onSave:()=>s(!1),court:null}),g.jsx(QS,{isOpen:r,onClose:()=>a(!1),onSave:()=>a(!1),courts:l})]})},lM=({toggleSidebar:t})=>{const{logOut:e,managerData:n,stadiumData:i}=is(),[s,r]=B.useState(!1),[a,l]=B.useState(""),u=async()=>{try{r(!0),l(""),await e()}catch(h){l("Failed to log out. Please try again."),console.error("Failed to log out:",h)}finally{r(!1)}};return g.jsxs("header",{className:"bg-white shadow-sm h-16 flex items-center justify-between px-4",children:[g.jsx("button",{onClick:t,className:"p-2 rounded-md hover:bg-gray-100 lg:hidden",children:g.jsx(UR,{size:20})}),g.jsx("div",{className:"flex-1 lg:ml-4",children:g.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:(i==null?void 0:i.name)||"Loading Stadium..."})}),g.jsxs("div",{className:"flex items-center gap-4",children:[a&&g.jsx("span",{className:"text-sm text-red-600",children:a}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(GR,{size:18,className:"text-gray-600"}),g.jsxs("span",{className:"text-gray-700 font-medium",children:["Welcome, ",(n==null?void 0:n.name)||"Loading..."]})]}),g.jsxs("button",{onClick:u,disabled:s,className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${s?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-red-50 text-red-600 hover:bg-red-100"}`,children:[g.jsx(kR,{size:18}),g.jsx("span",{children:s?"Logging out...":"Logout"})]})]})]})};function uM({isOpen:t,onClose:e}){const{stadiumData:n,managerData:i,setStadiumData:s}=is(),[r,a]=B.useState({name:"",address:"",addressLink:"",amenities:[]}),[l,u]=B.useState(""),[h,d]=B.useState(!1),[p,m]=B.useState("");B.useEffect(()=>{n&&a({name:n.name||"",address:n.address||"",addressLink:n.addressLink||"",amenities:n.amenities||[]})},[n]);const v=A=>{const{name:E,value:S}=A.target;a(x=>({...x,[E]:S}))},C=()=>{l.trim()&&(a(A=>({...A,amenities:[...A.amenities,l.trim()]})),u(""))},O=A=>{a(E=>({...E,amenities:E.amenities.filter((S,x)=>x!==A)}))},k=async A=>{A.preventDefault(),d(!0),m("");try{const E=ks(wt,"stadiums",i.stadiumID);await oS(E,r),s(r),e()}catch(E){console.error("Error updating stadium:",E),m("Failed to update stadium details. Please try again.")}finally{d(!1)}};return t?g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl w-full mx-4",children:[g.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Edit Stadium Details"}),p&&g.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:p}),g.jsxs("form",{onSubmit:k,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Stadium Name"}),g.jsx("input",{type:"text",name:"name",value:r.name,onChange:v,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),g.jsx("input",{type:"text",name:"address",value:r.address,onChange:v,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address Link"}),g.jsx("input",{type:"url",name:"addressLink",value:r.addressLink,onChange:v,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amenities"}),g.jsxs("div",{className:"mt-2 flex gap-2",children:[g.jsx("input",{type:"text",value:l,onChange:A=>u(A.target.value),placeholder:"Add new amenity",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),g.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add"})]}),g.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:r.amenities.map((A,E)=>g.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[A,g.jsx("button",{type:"button",onClick:()=>O(E),className:"ml-2 text-blue-600 hover:text-blue-800",children:""})]},E))})]}),g.jsxs("div",{className:"flex justify-end gap-4",children:[g.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Cancel"}),g.jsx("button",{type:"submit",disabled:h,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?"Saving...":"Save Changes"})]})]})]})}):null}function cM({isOpen:t,onClose:e,onSave:n,stadiumId:i,court:s}){const[r,a]=B.useState({courtNumber:"",courtType:"",pricePerHour:"",sport:"",openingTime:"",closingTime:"",minimumBookingDuration:60}),[l,u]=B.useState(!1),[h,d]=B.useState("");B.useEffect(()=>{a(s?{courtNumber:s.courtNumber||"",courtType:s.courtType||"",pricePerHour:s.pricePerHour||"",sport:s.sport||"",openingTime:s.openingTime||"",closingTime:s.closingTime||"",minimumBookingDuration:s.minimumBookingDuration||60}:{courtNumber:"",courtType:"",pricePerHour:"",sport:"",openingTime:"",closingTime:"",minimumBookingDuration:60})},[s]);const p=C=>{const{name:O,value:k}=C.target;a(A=>({...A,[O]:O==="minimumBookingDuration"?Number(k):k}))},m=async C=>{C.preventDefault(),u(!0),d("");try{if(s){const O=ks(wt,"courts",s.id);await oS(O,{...r,stadiumId:i})}else{const O=Kn(wt,"courts");await lS(O,{...r,stadiumId:i})}n()}catch(O){console.error("Error saving court:",O),d("Failed to save court. Please try again.")}finally{u(!1)}},v=()=>{const C=[];for(let O=0;O<24;O++)for(let k=0;k<60;k+=30){const A=new Date;A.setHours(O,k,0);const E=A.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});C.push(E)}return C};return t?g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[g.jsx("h2",{className:"text-2xl font-bold mb-6",children:s?"Edit Court":"Add New Court"}),h&&g.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:h}),g.jsxs("form",{onSubmit:m,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Court Number"}),g.jsx("input",{type:"text",name:"courtNumber",value:r.courtNumber,onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sport"}),g.jsxs("select",{name:"sport",value:r.sport,onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[g.jsx("option",{value:"",children:"Select sport"}),g.jsx("option",{value:"Badminton",children:"Badminton"}),g.jsx("option",{value:"Cricket",children:"Cricket"}),g.jsx("option",{value:"Basketball",children:"Basketball"}),g.jsx("option",{value:"Tennis",children:"Tennis"}),g.jsx("option",{value:"Football",children:"Football"}),g.jsx("option",{value:"Volleyball",children:"Volleyball"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Court Type"}),g.jsxs("select",{name:"courtType",value:r.courtType,onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[g.jsx("option",{value:"",children:"Select court type"}),g.jsx("option",{value:"Turf",children:"Turf"}),g.jsx("option",{value:"Clay",children:"Clay"}),g.jsx("option",{value:"Grass",children:"Grass"}),g.jsx("option",{value:"Hard",children:"Hard"}),g.jsx("option",{value:"Synthetic",children:"Synthetic"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price per Hour ()"}),g.jsx("input",{type:"number",name:"pricePerHour",value:r.pricePerHour,onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0"})]}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Opening Time"}),g.jsxs("select",{name:"openingTime",value:r.openingTime,onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[g.jsx("option",{value:"",children:"Select opening time"}),v().map((C,O)=>g.jsx("option",{value:C,children:C},O))]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Closing Time"}),g.jsxs("select",{name:"closingTime",value:r.closingTime,onChange:p,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[g.jsx("option",{value:"",children:"Select closing time"}),v().map((C,O)=>g.jsx("option",{value:C,children:C},O))]})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Booking Duration"}),g.jsxs("div",{className:"space-y-2",children:[g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"radio",name:"minimumBookingDuration",value:"30",checked:r.minimumBookingDuration===30,onChange:p,className:"mr-2"}),"30 minutes"]}),g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"radio",name:"minimumBookingDuration",value:"60",checked:r.minimumBookingDuration===60,onChange:p,className:"mr-2"}),"1 hour"]})]})]}),g.jsxs("div",{className:"flex justify-end gap-4",children:[g.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Cancel"}),g.jsx("button",{type:"submit",disabled:l,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ${l?"opacity-50 cursor-not-allowed":""}`,children:l?"Saving...":"Save"})]})]})]})}):null}function hM({isOpen:t,onClose:e,court:n}){const[i,s]=B.useState(new Date),[r,a]=B.useState([]),[l,u]=B.useState(!0),[h,d]=B.useState(""),[p,m]=B.useState(!1),[v,C]=B.useState(!1);B.useEffect(()=>{t&&n&&O()},[t,n,i]);const O=async()=>{try{u(!0);const E=i.toLocaleDateString("en-CA"),S=Kn(wt,"bookings"),x=Yr(S,qi("courtId","==",n.id),qi("date","==",E)),P=(await $r(x)).docs.map(T=>({id:T.id,...T.data()}));a(P),d("")}catch(E){console.error("Error fetching bookings:",E),d("Failed to fetch bookings. Please try again.")}finally{u(!1)}},k=E=>{const S=new Date(i);S.setDate(S.getDate()+E),S.setHours(0,0,0,0),s(S)},A=E=>E;return t?g.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[g.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("h2",{className:"text-2xl font-bold",children:"Court Bookings"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>k(-1),className:"p-1 hover:bg-gray-100 rounded-full",children:g.jsx(oT,{size:24})}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(Ac,{size:20}),g.jsx("span",{className:"font-medium",children:i.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),g.jsx("button",{onClick:()=>k(1),className:"p-1 hover:bg-gray-100 rounded-full",children:g.jsx(lT,{size:24})})]})]}),g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 px-4 py-2 text-yellow-700 bg-yellow-100 hover:bg-yellow-200 rounded-md transition-colors duration-200",children:[g.jsx(uT,{size:18}),"Inactive Hours"]}),g.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Close"})]})]}),h&&g.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:h}),l?g.jsx("div",{className:"text-center py-8",children:"Loading bookings..."}):r.length===0?g.jsx("div",{className:"text-center py-8 text-gray-500",children:"No bookings for this date"}):g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[g.jsx("thead",{className:"bg-gray-50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Slot"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coach"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(E=>g.jsxs("tr",{children:[g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[A(E.timeSlot.startTime)," - ",A(E.timeSlot.endTime)]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:E.coachId||"No coach assigned"}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",E.amount]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:g.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${E.status==="confirmed"?"bg-green-100 text-green-800":E.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:E.status.charAt(0).toUpperCase()+E.status.slice(1)})})]},E.id))})]})})]}),g.jsx("div",{className:"fixed bottom-8 right-8",children:g.jsx("button",{onClick:()=>m(!0),className:"flex items-center justify-center w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-colors duration-200",title:"Add Booking",children:g.jsx(Am,{size:24})})}),g.jsx(KS,{isOpen:p,onClose:()=>m(!1),onSave:()=>{m(!1),O()},court:n}),g.jsx(QS,{isOpen:v,onClose:()=>C(!1),onSave:()=>{C(!1),O()},courts:[n]})]}):null}function fM({isOpen:t,onClose:e,stadiumId:n}){const[i,s]=B.useState([]),[r,a]=B.useState(!0),[l,u]=B.useState(""),[h,d]=B.useState(!1),[p,m]=B.useState(!1),[v,C]=B.useState(null),[O,k]=B.useState(null);B.useEffect(()=>{t&&n&&A()},[t,n]);const A=async()=>{try{a(!0);const P=Kn(wt,"courts"),T=Yr(P,qi("stadiumId","==",n)),b=(await $r(T)).docs.map(w=>({id:w.id,...w.data()}));s(b),u("")}catch(P){console.error("Error fetching courts:",P),u("Failed to fetch courts. Please try again.")}finally{a(!1)}},E=P=>{C(P),d(!0)},S=P=>{C(P),m(!0)},x=()=>{C(null),d(!0)},V=async P=>{try{a(!0);const T=ks(wt,"courts",P.id);await LN(T),s(_=>_.filter(b=>b.id!==P.id)),k(null),u("")}catch(T){console.error("Error deleting court:",T),u("Failed to delete court. Please try again.")}finally{a(!1)}};return t?g.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[g.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h2",{className:"text-2xl font-bold",children:"Court Management"}),g.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[g.jsx(Am,{size:20}),"Add New Court"]})]}),l&&g.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:l}),r?g.jsx("div",{className:"text-center py-8",children:"Loading courts..."}):i.length===0?g.jsx("div",{className:"text-center py-8 text-gray-500",children:"No courts found"}):g.jsx("div",{className:"overflow-x-auto",children:g.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[g.jsx("thead",{className:"bg-gray-50",children:g.jsxs("tr",{children:[g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Court Number"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sport"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Court Type"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price/Hour"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timing"}),g.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(P=>g.jsxs("tr",{children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.courtNumber}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.sport}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.courtType}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["",P.pricePerHour]}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[P.openingTime," - ",P.closingTime]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:()=>S(P),className:"text-blue-600 hover:text-blue-900",title:"View Bookings",children:g.jsx(Ac,{size:18})}),g.jsx("button",{onClick:()=>E(P),className:"text-blue-600 hover:text-blue-900",title:"Edit Court",children:g.jsx(hT,{size:18})}),g.jsx("button",{onClick:()=>k(P),className:"text-red-600 hover:text-red-900",title:"Delete Court",children:g.jsx(qR,{size:18})})]})})]},P.id))})]})}),g.jsx("div",{className:"mt-6 flex justify-end",children:g.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Close"})})]}),O&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[g.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Delete Court"}),g.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete Court ",O.courtNumber,"? This action cannot be undone."]}),g.jsxs("div",{className:"flex justify-end gap-4",children:[g.jsx("button",{onClick:()=>k(null),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Cancel"}),g.jsx("button",{onClick:()=>V(O),disabled:r,className:`px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Deleting...":"Delete"})]})]})}),g.jsx(cM,{isOpen:h,onClose:()=>{d(!1),C(null)},onSave:()=>{d(!1),C(null),A()},stadiumId:n,court:v}),g.jsx(hM,{isOpen:p,onClose:()=>{m(!1),C(null)},court:v})]}):null}const dM=()=>{const{stadiumData:t,managerData:e}=is(),[n,i]=B.useState(!1),[s,r]=B.useState(!1),[a,l]=B.useState(0);B.useEffect(()=>{e!=null&&e.stadiumID&&u()},[e==null?void 0:e.stadiumID]);const u=async()=>{try{const d=Kn(wt,"courts"),p=Yr(d,qi("stadiumId","==",e.stadiumID)),m=await $r(p);l(m.size)}catch(d){console.error("Error fetching court count:",d)}},h=[{title:"Profile",icon:hT,color:"bg-blue-500",customContent:g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(PR,{className:"text-gray-600",size:18}),g.jsx("span",{className:"text-sm text-gray-600",children:(t==null?void 0:t.address)||"No address"})]}),(t==null?void 0:t.addressLink)&&g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx(NR,{className:"text-gray-600",size:18}),g.jsx("a",{href:t.addressLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"View on Map"})]}),(t==null?void 0:t.amenities)&&t.amenities.length>0&&g.jsxs("div",{className:"flex items-start gap-2",children:[g.jsx(OR,{className:"text-gray-600 mt-1",size:18}),g.jsx("div",{className:"flex flex-wrap gap-2",children:t.amenities.map((d,p)=>g.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-800",children:d},p))})]})]})},{title:"Users List",icon:dT,count:"1,234",description:"Total registered users",color:"bg-blue-500"},{title:"Payment History",icon:cT,count:"$12,345",description:"Total transactions",color:"bg-green-500"},{title:"Coaches",icon:fT,count:"42",description:"Active coaches",color:"bg-purple-500"},{title:"Court Details",icon:Ac,count:a.toString(),description:"Available courts",color:"bg-yellow-500",onClick:()=>r(!0)},{title:"Revenue",icon:aT,count:"$45,678",description:"Total revenue",color:"bg-red-500"}];return g.jsxs("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:[g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((d,p)=>g.jsxs("div",{className:`bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow ${d.onClick?"cursor-pointer":""}`,onClick:d.onClick,children:[g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:d.title}),g.jsx("div",{className:`p-3 rounded-full ${d.color} text-white ${d.onClick?"cursor-pointer hover:opacity-90 transition-opacity":""}`,onClick:m=>{m.stopPropagation(),d.title==="Profile"&&i(!0)},children:g.jsx(d.icon,{size:24})})]}),d.customContent?d.customContent:g.jsxs("div",{children:[g.jsx("p",{className:"text-2xl font-bold",children:d.count}),g.jsx("p",{className:"text-gray-500 text-sm",children:d.description})]})]}),g.jsx("div",{className:`h-1 ${d.color}`})]},p))}),g.jsx(uM,{isOpen:n,onClose:()=>i(!1)}),g.jsx(fM,{isOpen:s,onClose:()=>r(!1),stadiumId:e==null?void 0:e.stadiumID})]})};function mM(){const{signInWithGoogle:t,signInWithEmail:e,signUpWithEmail:n,resetPassword:i,error:s}=is(),[r,a]=B.useState(""),[l,u]=B.useState(""),[h,d]=B.useState(!1),[p,m]=B.useState(!1),[v,C]=B.useState(""),O=async()=>{try{await t()}catch(E){C(E.message)}},k=async E=>{E.preventDefault();try{h?await n(r,l):await e(r,l)}catch(S){C(S.message)}},A=async E=>{E.preventDefault();try{await i(r),C("Password reset email sent! Check your inbox."),m(!1)}catch(S){C(S.message)}};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[g.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:p?"Reset Password":h?"Create Account":"Welcome Back"}),v&&g.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:v}),p?g.jsxs("form",{onSubmit:A,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),g.jsx("input",{type:"email",value:r,onChange:E=>a(E.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),g.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200",children:"Send Reset Link"}),g.jsx("button",{type:"button",onClick:()=>m(!1),className:"w-full text-gray-600 py-2 px-4 rounded-lg hover:bg-gray-100 transition duration-200",children:"Back to Login"})]}):g.jsxs(g.Fragment,{children:[g.jsxs("form",{onSubmit:k,className:"space-y-4 mb-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),g.jsx("input",{type:"email",value:r,onChange:E=>a(E.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),g.jsx("input",{type:"password",value:l,onChange:E=>u(E.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),!h&&g.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-sm text-blue-600 hover:text-blue-800",children:"Forgot Password?"}),g.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200",children:h?"Sign Up":"Sign In"})]}),g.jsxs("div",{className:"relative my-6",children:[g.jsx("div",{className:"absolute inset-0 flex items-center",children:g.jsx("div",{className:"w-full border-t border-gray-300"})}),g.jsx("div",{className:"relative flex justify-center text-sm",children:g.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),g.jsxs("button",{onClick:O,className:"w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 transition duration-200 flex items-center justify-center gap-2",children:[g.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:g.jsx("path",{fill:"currentColor",d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1Z"})}),"Continue with Google"]}),g.jsxs("p",{className:"mt-4 text-center text-sm text-gray-600",children:[h?"Already have an account?":"Don't have an account?"," ",g.jsx("button",{onClick:()=>d(!h),className:"text-blue-600 hover:text-blue-800 font-medium",children:h?"Sign In":"Sign Up"})]})]})]})})}function gM(){const[t,e]=B.useState(!0),{user:n}=is(),i=()=>{e(!t)};return n?g.jsxs("div",{className:"flex h-screen bg-gray-100",children:[g.jsx(oM,{isOpen:t,toggleSidebar:i}),g.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[g.jsx(lM,{toggleSidebar:i}),g.jsx(dM,{})]})]}):g.jsx(mM,{})}function pM(){return g.jsx(aM,{children:g.jsx(gM,{})})}vR.createRoot(document.getElementById("root")).render(g.jsx(B.StrictMode,{children:g.jsx(pM,{})}));
