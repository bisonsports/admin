(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var fv={exports:{}},ac={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gS=Symbol.for("react.transitional.element"),pS=Symbol.for("react.fragment");function dv(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var r in e)r!=="key"&&(n[r]=e[r])}else n=e;return e=n.ref,{$$typeof:gS,type:t,key:i,ref:e!==void 0?e:null,props:n}}ac.Fragment=pS;ac.jsx=dv;ac.jsxs=dv;fv.exports=ac;var y=fv.exports,mv={exports:{}},te={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bd=Symbol.for("react.transitional.element"),yS=Symbol.for("react.portal"),_S=Symbol.for("react.fragment"),vS=Symbol.for("react.strict_mode"),ES=Symbol.for("react.profiler"),TS=Symbol.for("react.consumer"),bS=Symbol.for("react.context"),AS=Symbol.for("react.forward_ref"),SS=Symbol.for("react.suspense"),wS=Symbol.for("react.memo"),gv=Symbol.for("react.lazy"),pp=Symbol.iterator;function RS(t){return t===null||typeof t!="object"?null:(t=pp&&t[pp]||t["@@iterator"],typeof t=="function"?t:null)}var pv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yv=Object.assign,_v={};function Qs(t,e,n){this.props=t,this.context=e,this.refs=_v,this.updater=n||pv}Qs.prototype.isReactComponent={};Qs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vv(){}vv.prototype=Qs.prototype;function Ad(t,e,n){this.props=t,this.context=e,this.refs=_v,this.updater=n||pv}var Sd=Ad.prototype=new vv;Sd.constructor=Ad;yv(Sd,Qs.prototype);Sd.isPureReactComponent=!0;var yp=Array.isArray,xe={H:null,A:null,T:null,S:null},Ev=Object.prototype.hasOwnProperty;function wd(t,e,n,i,r,s){return n=s.ref,{$$typeof:bd,type:t,key:e,ref:n!==void 0?n:null,props:s}}function IS(t,e){return wd(t.type,e,void 0,void 0,void 0,t.props)}function Rd(t){return typeof t=="object"&&t!==null&&t.$$typeof===bd}function CS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _p=/\/+/g;function hh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CS(""+t.key):e.toString(36)}function vp(){}function xS(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(vp,vp):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Zr(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case bd:case yS:a=!0;break;case gv:return a=t._init,Zr(a(t._payload),e,n,i,r)}}if(a)return r=r(t),a=i===""?"."+hh(t,0):i,yp(r)?(n="",a!=null&&(n=a.replace(_p,"$&/")+"/"),Zr(r,e,n,"",function(h){return h})):r!=null&&(Rd(r)&&(r=IS(r,n+(r.key==null||t&&t.key===r.key?"":(""+r.key).replace(_p,"$&/")+"/")+a)),e.push(r)),1;a=0;var l=i===""?".":i+":";if(yp(t))for(var u=0;u<t.length;u++)i=t[u],s=l+hh(i,u),a+=Zr(i,e,n,s,r);else if(u=RS(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,s=l+hh(i,u++),a+=Zr(i,e,n,s,r);else if(s==="object"){if(typeof t.then=="function")return Zr(xS(t),e,n,i,r);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function bl(t,e,n){if(t==null)return t;var i=[],r=0;return Zr(t,i,"","",function(s){return e.call(n,s,r++)}),i}function NS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ep=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function DS(){}te.Children={map:bl,forEach:function(t,e,n){bl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bl(t,function(){e++}),e},toArray:function(t){return bl(t,function(e){return e})||[]},only:function(t){if(!Rd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Qs;te.Fragment=_S;te.Profiler=ES;te.PureComponent=Ad;te.StrictMode=vS;te.Suspense=SS;te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=xe;te.act=function(){throw Error("act(...) is not supported in production builds of React.")};te.cache=function(t){return function(){return t.apply(null,arguments)}};te.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=yv({},t.props),r=t.key,s=void 0;if(e!=null)for(a in e.ref!==void 0&&(s=void 0),e.key!==void 0&&(r=""+e.key),e)!Ev.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(i[a]=e[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return wd(t.type,r,void 0,void 0,s,i)};te.createContext=function(t){return t={$$typeof:bS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:TS,_context:t},t};te.createElement=function(t,e,n){var i,r={},s=null;if(e!=null)for(i in e.key!==void 0&&(s=""+e.key),e)Ev.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return wd(t,s,void 0,void 0,null,r)};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:AS,render:t}};te.isValidElement=Rd;te.lazy=function(t){return{$$typeof:gv,_payload:{_status:-1,_result:t},_init:NS}};te.memo=function(t,e){return{$$typeof:wS,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=xe.T,n={};xe.T=n;try{var i=t(),r=xe.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(DS,Ep)}catch(s){Ep(s)}finally{xe.T=e}};te.unstable_useCacheRefresh=function(){return xe.H.useCacheRefresh()};te.use=function(t){return xe.H.use(t)};te.useActionState=function(t,e,n){return xe.H.useActionState(t,e,n)};te.useCallback=function(t,e){return xe.H.useCallback(t,e)};te.useContext=function(t){return xe.H.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t,e){return xe.H.useDeferredValue(t,e)};te.useEffect=function(t,e){return xe.H.useEffect(t,e)};te.useId=function(){return xe.H.useId()};te.useImperativeHandle=function(t,e,n){return xe.H.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return xe.H.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return xe.H.useLayoutEffect(t,e)};te.useMemo=function(t,e){return xe.H.useMemo(t,e)};te.useOptimistic=function(t,e){return xe.H.useOptimistic(t,e)};te.useReducer=function(t,e,n){return xe.H.useReducer(t,e,n)};te.useRef=function(t){return xe.H.useRef(t)};te.useState=function(t){return xe.H.useState(t)};te.useSyncExternalStore=function(t,e,n){return xe.H.useSyncExternalStore(t,e,n)};te.useTransition=function(){return xe.H.useTransition()};te.version="19.0.0";mv.exports=te;var G=mv.exports,Tv={exports:{}},oc={},bv={exports:{}},Av={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,W){var X=B.length;B.push(W);e:for(;0<X;){var ye=X-1>>>1,q=B[ye];if(0<r(q,W))B[ye]=W,B[X]=q,X=ye;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var W=B[0],X=B.pop();if(X!==W){B[0]=X;e:for(var ye=0,q=B.length,ie=q>>>1;ye<ie;){var oe=2*(ye+1)-1,Y=B[oe],_e=oe+1,qe=B[_e];if(0>r(Y,X))_e<q&&0>r(qe,Y)?(B[ye]=qe,B[_e]=X,ye=_e):(B[ye]=Y,B[oe]=X,ye=oe);else if(_e<q&&0>r(qe,X))B[ye]=qe,B[_e]=X,ye=_e;else break e}}return W}function r(B,W){var X=B.sortIndex-W.sortIndex;return X!==0?X:B.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],d=1,g=null,m=3,v=!1,C=!1,O=!1,M=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function S(B){for(var W=n(h);W!==null;){if(W.callback===null)i(h);else if(W.startTime<=B)i(h),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(h)}}function x(B){if(O=!1,S(B),!C)if(n(u)!==null)C=!0,yt();else{var W=n(h);W!==null&&Dt(x,W.startTime-B)}}var L=!1,j=-1,T=5,_=-1;function b(){return!(t.unstable_now()-_<T)}function w(){if(L){var B=t.unstable_now();_=B;var W=!0;try{e:{C=!1,O&&(O=!1,A(j),j=-1),v=!0;var X=m;try{t:{for(S(B),g=n(u);g!==null&&!(g.expirationTime>B&&b());){var ye=g.callback;if(typeof ye=="function"){g.callback=null,m=g.priorityLevel;var q=ye(g.expirationTime<=B);if(B=t.unstable_now(),typeof q=="function"){g.callback=q,S(B),W=!0;break t}g===n(u)&&i(u),S(B)}else i(u);g=n(u)}if(g!==null)W=!0;else{var ie=n(h);ie!==null&&Dt(x,ie.startTime-B),W=!1}}break e}finally{g=null,m=X,v=!1}W=void 0}}finally{W?I():L=!1}}}var I;if(typeof E=="function")I=function(){E(w)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,R=D.port2;D.port1.onmessage=w,I=function(){R.postMessage(null)}}else I=function(){M(w,0)};function yt(){L||(L=!0,I())}function Dt(B,W){j=M(function(){B(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){C||v||(C=!0,yt())},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var W=3;break;default:W=m}var X=m;m=W;try{return B()}finally{m=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=m;m=B;try{return W()}finally{m=X}},t.unstable_scheduleCallback=function(B,W,X){var ye=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ye+X:ye):X=ye,B){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=X+q,B={id:d++,callback:W,priorityLevel:B,startTime:X,expirationTime:q,sortIndex:-1},X>ye?(B.sortIndex=X,e(h,B),n(u)===null&&B===n(h)&&(O?(A(j),j=-1):O=!0,Dt(x,X-ye))):(B.sortIndex=q,e(u,B),C||v||(C=!0,yt())),B},t.unstable_shouldYield=b,t.unstable_wrapCallback=function(B){var W=m;return function(){var X=m;m=W;try{return B.apply(this,arguments)}finally{m=X}}}})(Av);bv.exports=Av;var OS=bv.exports,Sv={exports:{}},St={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS=G;function wv(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function hi(){}var bt={d:{f:hi,r:function(){throw Error(wv(522))},D:hi,C:hi,L:hi,m:hi,X:hi,S:hi,M:hi},p:0,findDOMNode:null},kS=Symbol.for("react.portal");function VS(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kS,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var qa=MS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function lc(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}St.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=bt;St.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(wv(299));return VS(t,e,null,n)};St.flushSync=function(t){var e=qa.T,n=bt.p;try{if(qa.T=null,bt.p=2,t)return t()}finally{qa.T=e,bt.p=n,bt.d.f()}};St.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,bt.d.C(t,e))};St.prefetchDNS=function(t){typeof t=="string"&&bt.d.D(t)};St.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=lc(n,e.crossOrigin),r=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?bt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:s}):n==="script"&&bt.d.X(t,{crossOrigin:i,integrity:r,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};St.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=lc(e.as,e.crossOrigin);bt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&bt.d.M(t)};St.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=lc(n,e.crossOrigin);bt.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};St.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=lc(e.as,e.crossOrigin);bt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else bt.d.m(t)};St.requestFormReset=function(t){bt.d.r(t)};St.unstable_batchedUpdates=function(t,e){return t(e)};St.useFormState=function(t,e,n){return qa.H.useFormState(t,e,n)};St.useFormStatus=function(){return qa.H.useHostTransitionStatus()};St.version="19.0.0";function Rv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rv)}catch(t){console.error(t)}}Rv(),Sv.exports=St;var PS=Sv.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qe=OS,Iv=G,US=PS;function P(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Cv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}var LS=Symbol.for("react.element"),Al=Symbol.for("react.transitional.element"),Da=Symbol.for("react.portal"),as=Symbol.for("react.fragment"),xv=Symbol.for("react.strict_mode"),rf=Symbol.for("react.profiler"),jS=Symbol.for("react.provider"),Nv=Symbol.for("react.consumer"),Vn=Symbol.for("react.context"),Id=Symbol.for("react.forward_ref"),sf=Symbol.for("react.suspense"),af=Symbol.for("react.suspense_list"),Cd=Symbol.for("react.memo"),pi=Symbol.for("react.lazy"),Dv=Symbol.for("react.offscreen"),zS=Symbol.for("react.memo_cache_sentinel"),Tp=Symbol.iterator;function ba(t){return t===null||typeof t!="object"?null:(t=Tp&&t[Tp]||t["@@iterator"],typeof t=="function"?t:null)}var BS=Symbol.for("react.client.reference");function of(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===BS?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case as:return"Fragment";case Da:return"Portal";case rf:return"Profiler";case xv:return"StrictMode";case sf:return"Suspense";case af:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Vn:return(t.displayName||"Context")+".Provider";case Nv:return(t._context.displayName||"Context")+".Consumer";case Id:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cd:return e=t.displayName||null,e!==null?e:of(t.type)||"Memo";case pi:e=t._payload,t=t._init;try{return of(t(e))}catch{}}return null}var ee=Iv.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re=Object.assign,fh,bp;function Oa(t){if(fh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fh=e&&e[1]||"",bp=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fh+t+bp}var dh=!1;function mh(t,e){if(!t||dh)return"";dh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(v){var m=v}Reflect.construct(t,[],g)}else{try{g.call()}catch(v){m=v}t.call(g.prototype)}}else{try{throw Error()}catch(v){m=v}(g=t())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(v){if(v&&m&&typeof v.stack=="string")return[v.stack,m.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=i.DetermineComponentFrameRoot(),a=s[0],l=s[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(r=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;r<h.length&&!h[r].includes("DetermineComponentFrameRoot");)r++;if(i===u.length||r===h.length)for(i=u.length-1,r=h.length-1;1<=i&&0<=r&&u[i]!==h[r];)r--;for(;1<=i&&0<=r;i--,r--)if(u[i]!==h[r]){if(i!==1||r!==1)do if(i--,r--,0>r||u[i]!==h[r]){var d=`
`+u[i].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=i&&0<=r);break}}}finally{dh=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Oa(n):""}function qS(t){switch(t.tag){case 26:case 27:case 5:return Oa(t.type);case 16:return Oa("Lazy");case 13:return Oa("Suspense");case 19:return Oa("SuspenseList");case 0:case 15:return t=mh(t.type,!1),t;case 11:return t=mh(t.type.render,!1),t;case 1:return t=mh(t.type,!0),t;default:return""}}function Ap(t){try{var e="";do e+=qS(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Ys(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ov(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sp(t){if(Ys(t)!==t)throw Error(P(188))}function HS(t){var e=t.alternate;if(!e){if(e=Ys(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Sp(r),t;if(s===i)return Sp(r),e;s=s.sibling}throw Error(P(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(P(189))}}if(n.alternate!==i)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function Mv(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Mv(t),e!==null)return e;t=t.sibling}return null}var Ma=Array.isArray,we=US.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pr={pending:!1,data:null,method:null,action:null},lf=[],os=-1;function bn(t){return{current:t}}function Ze(t){0>os||(t.current=lf[os],lf[os]=null,os--)}function Ie(t,e){os++,lf[os]=t.current,t.current=e}var mn=bn(null),uo=bn(null),Ci=bn(null),fu=bn(null);function du(t,e){switch(Ie(Ci,e),Ie(uo,t),Ie(mn,null),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)&&(e=e.namespaceURI)?wy(e):0;break;default:if(t=t===8?e.parentNode:e,e=t.tagName,t=t.namespaceURI)t=wy(t),e=GE(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ze(mn),Ie(mn,e)}function xs(){Ze(mn),Ze(uo),Ze(Ci)}function uf(t){t.memoizedState!==null&&Ie(fu,t);var e=mn.current,n=GE(e,t.type);e!==n&&(Ie(uo,t),Ie(mn,n))}function mu(t){uo.current===t&&(Ze(mn),Ze(uo)),fu.current===t&&(Ze(fu),To._currentValue=pr)}var cf=Object.prototype.hasOwnProperty,xd=Qe.unstable_scheduleCallback,gh=Qe.unstable_cancelCallback,FS=Qe.unstable_shouldYield,GS=Qe.unstable_requestPaint,gn=Qe.unstable_now,KS=Qe.unstable_getCurrentPriorityLevel,kv=Qe.unstable_ImmediatePriority,Vv=Qe.unstable_UserBlockingPriority,gu=Qe.unstable_NormalPriority,QS=Qe.unstable_LowPriority,Pv=Qe.unstable_IdlePriority,YS=Qe.log,$S=Qe.unstable_setDisableYieldValue,Po=null,Lt=null;function XS(t){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(Po,t,void 0,(t.current.flags&128)===128)}catch{}}function wi(t){if(typeof YS=="function"&&$S(t),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(Po,t)}catch{}}var jt=Math.clz32?Math.clz32:JS,WS=Math.log,ZS=Math.LN2;function JS(t){return t>>>=0,t===0?32:31-(WS(t)/ZS|0)|0}var Sl=128,wl=4194304;function lr(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function uc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,a=t.warmLanes;t=t.finishedLanes!==0;var l=n&134217727;return l!==0?(n=l&~r,n!==0?i=lr(n):(s&=l,s!==0?i=lr(s):t||(a=l&~a,a!==0&&(i=lr(a))))):(l=n&~r,l!==0?i=lr(l):s!==0?i=lr(s):t||(a=n&~a,a!==0&&(i=lr(a)))),i===0?0:e!==0&&e!==i&&!(e&r)&&(r=i&-i,a=e&-e,r>=a||r===32&&(a&4194176)!==0)?e:i}function Uo(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function ew(t,e){switch(t){case 1:case 2:case 4:case 8:return e+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uv(){var t=Sl;return Sl<<=1,!(Sl&4194176)&&(Sl=128),t}function Lv(){var t=wl;return wl<<=1,!(wl&62914560)&&(wl=4194304),t}function ph(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Lo(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function tw(t,e,n,i,r,s){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,h=t.hiddenUpdates;for(n=a&~n;0<n;){var d=31-jt(n),g=1<<d;l[d]=0,u[d]=-1;var m=h[d];if(m!==null)for(h[d]=null,d=0;d<m.length;d++){var v=m[d];v!==null&&(v.lane&=-536870913)}n&=~g}i!==0&&jv(t,i,0),s!==0&&r===0&&t.tag!==0&&(t.suspendedLanes|=s&~(a&~e))}function jv(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-jt(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&4194218}function zv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-jt(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}function Bv(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function qv(){var t=we.p;return t!==0?t:(t=window.event,t===void 0?32:tT(t.type))}function nw(t,e){var n=we.p;try{return we.p=t,e()}finally{we.p=n}}var Wi=Math.random().toString(36).slice(2),dt="__reactFiber$"+Wi,xt="__reactProps$"+Wi,$s="__reactContainer$"+Wi,hf="__reactEvents$"+Wi,iw="__reactListeners$"+Wi,rw="__reactHandles$"+Wi,wp="__reactResources$"+Wi,co="__reactMarker$"+Wi;function Nd(t){delete t[dt],delete t[xt],delete t[hf],delete t[iw],delete t[rw]}function fr(t){var e=t[dt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$s]||n[dt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Iy(t);t!==null;){if(n=t[dt])return n;t=Iy(t)}return e}t=n,n=t.parentNode}return null}function Xs(t){if(t=t[dt]||t[$s]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function ka(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(P(33))}function ys(t){var e=t[wp];return e||(e=t[wp]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Xe(t){t[co]=!0}var Hv=new Set,Fv={};function Vr(t,e){Ns(t,e),Ns(t+"Capture",e)}function Ns(t,e){for(Fv[t]=e,t=0;t<e.length;t++)Hv.add(e[t])}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Rp={},Ip={};function aw(t){return cf.call(Ip,t)?!0:cf.call(Rp,t)?!1:sw.test(t)?Ip[t]=!0:(Rp[t]=!0,!1)}function Fl(t,e,n){if(aw(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Rl(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function In(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Gt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ow(t){var e=Gv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pu(t){t._valueTracker||(t._valueTracker=ow(t))}function Kv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Gv(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function yu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var lw=/[\n"\\]/g;function Yt(t){return t.replace(lw,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function ff(t,e,n,i,r,s,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Gt(e)):t.value!==""+Gt(e)&&(t.value=""+Gt(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?df(t,a,Gt(e)):n!=null?df(t,a,Gt(n)):i!=null&&t.removeAttribute("value"),r==null&&s!=null&&(t.defaultChecked=!!s),r!=null&&(t.checked=r&&typeof r!="function"&&typeof r!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Gt(l):t.removeAttribute("name")}function Qv(t,e,n,i,r,s,a,l){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null))return;n=n!=null?""+Gt(n):"",e=e!=null?""+Gt(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function df(t,e,n){e==="number"&&yu(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function _s(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Gt(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Yv(t,e,n){if(e!=null&&(e=""+Gt(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Gt(n):""}function $v(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(P(92));if(Ma(i)){if(1<i.length)throw Error(P(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Gt(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i)}function Ds(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var uw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cp(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||uw.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Xv(t,e,n){if(e!=null&&typeof e!="object")throw Error(P(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var r in e)i=e[r],e.hasOwnProperty(r)&&n[r]!==i&&Cp(t,r,i)}else for(var s in e)e.hasOwnProperty(s)&&Cp(t,s,e[s])}function Dd(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gl(t){return hw.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var mf=null;function Od(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ls=null,vs=null;function xp(t){var e=Xs(t);if(e&&(t=e.stateNode)){var n=t[xt]||null;e:switch(t=e.stateNode,e.type){case"input":if(ff(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Yt(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=i[xt]||null;if(!r)throw Error(P(90));ff(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&Kv(i)}break e;case"textarea":Yv(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&_s(t,!!n.multiple,e,!1)}}}var yh=!1;function Wv(t,e,n){if(yh)return t(e,n);yh=!0;try{var i=t(e);return i}finally{if(yh=!1,(ls!==null||vs!==null)&&(vc(),ls&&(e=ls,t=vs,vs=ls=null,xp(e),t)))for(e=0;e<t.length;e++)xp(t[e])}}function ho(t,e){var n=t.stateNode;if(n===null)return null;var i=n[xt]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var gf=!1;if(Kn)try{var Aa={};Object.defineProperty(Aa,"passive",{get:function(){gf=!0}}),window.addEventListener("test",Aa,Aa),window.removeEventListener("test",Aa,Aa)}catch{gf=!1}var Ri=null,Md=null,Kl=null;function Zv(){if(Kl)return Kl;var t,e=Md,n=e.length,i,r="value"in Ri?Ri.value:Ri.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[s-i];i++);return Kl=r.slice(t,1<i?1-i:void 0)}function Ql(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Il(){return!0}function Np(){return!1}function Nt(t){function e(n,i,r,s,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Il:Np,this.isPropagationStopped=Np,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),e}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cc=Nt(Pr),jo=Re({},Pr,{view:0,detail:0}),fw=Nt(jo),_h,vh,Sa,hc=Re({},jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Sa&&(Sa&&t.type==="mousemove"?(_h=t.screenX-Sa.screenX,vh=t.screenY-Sa.screenY):vh=_h=0,Sa=t),_h)},movementY:function(t){return"movementY"in t?t.movementY:vh}}),Dp=Nt(hc),dw=Re({},hc,{dataTransfer:0}),mw=Nt(dw),gw=Re({},jo,{relatedTarget:0}),Eh=Nt(gw),pw=Re({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),yw=Nt(pw),_w=Re({},Pr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vw=Nt(_w),Ew=Re({},Pr,{data:0}),Op=Nt(Ew),Tw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Aw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Aw[t])?!!e[t]:!1}function kd(){return Sw}var ww=Re({},jo,{key:function(t){if(t.key){var e=Tw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ql(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kd,charCode:function(t){return t.type==="keypress"?Ql(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ql(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Rw=Nt(ww),Iw=Re({},hc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mp=Nt(Iw),Cw=Re({},jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kd}),xw=Nt(Cw),Nw=Re({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dw=Nt(Nw),Ow=Re({},hc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mw=Nt(Ow),kw=Re({},Pr,{newState:0,oldState:0}),Vw=Nt(kw),Pw=[9,13,27,32],Vd=Kn&&"CompositionEvent"in window,Ha=null;Kn&&"documentMode"in document&&(Ha=document.documentMode);var Uw=Kn&&"TextEvent"in window&&!Ha,Jv=Kn&&(!Vd||Ha&&8<Ha&&11>=Ha),kp=" ",Vp=!1;function e0(t,e){switch(t){case"keyup":return Pw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var us=!1;function Lw(t,e){switch(t){case"compositionend":return t0(e);case"keypress":return e.which!==32?null:(Vp=!0,kp);case"textInput":return t=e.data,t===kp&&Vp?null:t;default:return null}}function jw(t,e){if(us)return t==="compositionend"||!Vd&&e0(t,e)?(t=Zv(),Kl=Md=Ri=null,us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Jv&&e.locale!=="ko"?null:e.data;default:return null}}var zw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zw[t.type]:e==="textarea"}function n0(t,e,n,i){ls?vs?vs.push(i):vs=[i]:ls=i,e=Mu(e,"onChange"),0<e.length&&(n=new cc("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Fa=null,fo=null;function Bw(t){qE(t,0)}function fc(t){var e=ka(t);if(Kv(e))return t}function Up(t,e){if(t==="change")return e}var i0=!1;if(Kn){var Th;if(Kn){var bh="oninput"in document;if(!bh){var Lp=document.createElement("div");Lp.setAttribute("oninput","return;"),bh=typeof Lp.oninput=="function"}Th=bh}else Th=!1;i0=Th&&(!document.documentMode||9<document.documentMode)}function jp(){Fa&&(Fa.detachEvent("onpropertychange",r0),fo=Fa=null)}function r0(t){if(t.propertyName==="value"&&fc(fo)){var e=[];n0(e,fo,t,Od(t)),Wv(Bw,e)}}function qw(t,e,n){t==="focusin"?(jp(),Fa=e,fo=n,Fa.attachEvent("onpropertychange",r0)):t==="focusout"&&jp()}function Hw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fc(fo)}function Fw(t,e){if(t==="click")return fc(e)}function Gw(t,e){if(t==="input"||t==="change")return fc(e)}function Kw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bt=typeof Object.is=="function"?Object.is:Kw;function mo(t,e){if(Bt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!cf.call(e,r)||!Bt(t[r],e[r]))return!1}return!0}function zp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bp(t,e){var n=zp(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zp(n)}}function s0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?s0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function a0(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=yu(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yu(t.document)}return e}function Pd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Qw(t,e){var n=a0(e);e=t.focusedElem;var i=t.selectionRange;if(n!==e&&e&&e.ownerDocument&&s0(e.ownerDocument.documentElement,e)){if(i!==null&&Pd(e)){if(t=i.start,n=i.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var r=e.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=Bp(e,s);var a=Bp(e,i);r&&a&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(t),n.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Yw=Kn&&"documentMode"in document&&11>=document.documentMode,cs=null,pf=null,Ga=null,yf=!1;function qp(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yf||cs==null||cs!==yu(i)||(i=cs,"selectionStart"in i&&Pd(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ga&&mo(Ga,i)||(Ga=i,i=Mu(pf,"onSelect"),0<i.length&&(e=new cc("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=cs)))}function or(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hs={animationend:or("Animation","AnimationEnd"),animationiteration:or("Animation","AnimationIteration"),animationstart:or("Animation","AnimationStart"),transitionrun:or("Transition","TransitionRun"),transitionstart:or("Transition","TransitionStart"),transitioncancel:or("Transition","TransitionCancel"),transitionend:or("Transition","TransitionEnd")},Ah={},o0={};Kn&&(o0=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function Ur(t){if(Ah[t])return Ah[t];if(!hs[t])return t;var e=hs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in o0)return Ah[t]=e[n];return t}var l0=Ur("animationend"),u0=Ur("animationiteration"),c0=Ur("animationstart"),$w=Ur("transitionrun"),Xw=Ur("transitionstart"),Ww=Ur("transitioncancel"),h0=Ur("transitionend"),f0=new Map,Hp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function cn(t,e){f0.set(t,e),Vr(e,[t])}var Ft=[],fs=0,Ud=0;function dc(){for(var t=fs,e=Ud=fs=0;e<t;){var n=Ft[e];Ft[e++]=null;var i=Ft[e];Ft[e++]=null;var r=Ft[e];Ft[e++]=null;var s=Ft[e];if(Ft[e++]=null,i!==null&&r!==null){var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}s!==0&&d0(n,r,s)}}function mc(t,e,n,i){Ft[fs++]=t,Ft[fs++]=e,Ft[fs++]=n,Ft[fs++]=i,Ud|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Ld(t,e,n,i){return mc(t,e,n,i),_u(t)}function Bi(t,e){return mc(t,null,null,e),_u(t)}function d0(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var r=!1,s=t.return;s!==null;)s.childLanes|=n,i=s.alternate,i!==null&&(i.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(r=!0)),t=s,s=s.return;r&&e!==null&&t.tag===3&&(s=t.stateNode,r=31-jt(n),s=s.hiddenUpdates,t=s[r],t===null?s[r]=[e]:t.push(e),e.lane=n|536870912)}function _u(t){if(50<io)throw io=0,jf=null,Error(P(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var ds={},Fp=new WeakMap;function $t(t,e){if(typeof t=="object"&&t!==null){var n=Fp.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Ap(e)},Fp.set(t,e),e)}return{value:t,source:e,stack:Ap(e)}}var ms=[],gs=0,vu=null,Eu=0,Kt=[],Qt=0,yr=null,Pn=1,Un="";function ur(t,e){ms[gs++]=Eu,ms[gs++]=vu,vu=t,Eu=e}function m0(t,e,n){Kt[Qt++]=Pn,Kt[Qt++]=Un,Kt[Qt++]=yr,yr=t;var i=Pn;t=Un;var r=32-jt(i)-1;i&=~(1<<r),n+=1;var s=32-jt(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Pn=1<<32-jt(e)+r|n<<r|i,Un=s+t}else Pn=1<<s|n<<r|i,Un=t}function jd(t){t.return!==null&&(ur(t,1),m0(t,1,0))}function zd(t){for(;t===vu;)vu=ms[--gs],ms[gs]=null,Eu=ms[--gs],ms[gs]=null;for(;t===yr;)yr=Kt[--Qt],Kt[Qt]=null,Un=Kt[--Qt],Kt[Qt]=null,Pn=Kt[--Qt],Kt[Qt]=null}var Tt=null,it=null,de=!1,sn=null,fn=!1,_f=Error(P(519));function Sr(t){var e=Error(P(418,""));throw go($t(e,t)),_f}function Gp(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[dt]=t,e[xt]=i,n){case"dialog":le("cancel",e),le("close",e);break;case"iframe":case"object":case"embed":le("load",e);break;case"video":case"audio":for(n=0;n<_o.length;n++)le(_o[n],e);break;case"source":le("error",e);break;case"img":case"image":case"link":le("error",e),le("load",e);break;case"details":le("toggle",e);break;case"input":le("invalid",e),Qv(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),pu(e);break;case"select":le("invalid",e);break;case"textarea":le("invalid",e),$v(e,i.value,i.defaultValue,i.children),pu(e)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||FE(e.textContent,n)?(i.popover!=null&&(le("beforetoggle",e),le("toggle",e)),i.onScroll!=null&&le("scroll",e),i.onScrollEnd!=null&&le("scrollend",e),i.onClick!=null&&(e.onclick=Tc),e=!0):e=!1,e||Sr(t)}function Kp(t){for(Tt=t.return;Tt;)switch(Tt.tag){case 3:case 27:fn=!0;return;case 5:case 13:fn=!1;return;default:Tt=Tt.return}}function wa(t){if(t!==Tt)return!1;if(!de)return Kp(t),de=!0,!1;var e=!1,n;if((n=t.tag!==3&&t.tag!==27)&&((n=t.tag===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Kf(t.type,t.memoizedProps)),n=!n),n&&(e=!0),e&&it&&Sr(t),Kp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){it=an(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}it=null}}else it=Tt?an(t.stateNode.nextSibling):null;return!0}function zo(){it=Tt=null,de=!1}function go(t){sn===null?sn=[t]:sn.push(t)}var Ka=Error(P(460)),g0=Error(P(474)),vf={then:function(){}};function Qp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Cl(){}function p0(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Cl,Cl),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,t===Ka?Error(P(483)):t;default:if(typeof e.status=="string")e.then(Cl,Cl);else{if(t=be,t!==null&&100<t.shellSuspendCounter)throw Error(P(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var r=e;r.status="fulfilled",r.value=i}},function(i){if(e.status==="pending"){var r=e;r.status="rejected",r.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,t===Ka?Error(P(483)):t}throw Qa=e,Ka}}var Qa=null;function Yp(){if(Qa===null)throw Error(P(459));var t=Qa;return Qa=null,t}var Es=null,po=0;function xl(t){var e=po;return po+=1,Es===null&&(Es=[]),p0(Es,t,e)}function Ra(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Nl(t,e){throw e.$$typeof===LS?Error(P(525)):(t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function $p(t){var e=t._init;return e(t._payload)}function y0(t){function e(A,E){if(t){var S=A.deletions;S===null?(A.deletions=[E],A.flags|=16):S.push(E)}}function n(A,E){if(!t)return null;for(;E!==null;)e(A,E),E=E.sibling;return null}function i(A){for(var E=new Map;A!==null;)A.key!==null?E.set(A.key,A):E.set(A.index,A),A=A.sibling;return E}function r(A,E){return A=Di(A,E),A.index=0,A.sibling=null,A}function s(A,E,S){return A.index=S,t?(S=A.alternate,S!==null?(S=S.index,S<E?(A.flags|=33554434,E):S):(A.flags|=33554434,E)):(A.flags|=1048576,E)}function a(A){return t&&A.alternate===null&&(A.flags|=33554434),A}function l(A,E,S,x){return E===null||E.tag!==6?(E=Vh(S,A.mode,x),E.return=A,E):(E=r(E,S),E.return=A,E)}function u(A,E,S,x){var L=S.type;return L===as?d(A,E,S.props.children,x,S.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===pi&&$p(L)===E.type)?(E=r(E,S.props),Ra(E,S),E.return=A,E):(E=Zl(S.type,S.key,S.props,null,A.mode,x),Ra(E,S),E.return=A,E)}function h(A,E,S,x){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=Ph(S,A.mode,x),E.return=A,E):(E=r(E,S.children||[]),E.return=A,E)}function d(A,E,S,x,L){return E===null||E.tag!==7?(E=vr(S,A.mode,x,L),E.return=A,E):(E=r(E,S),E.return=A,E)}function g(A,E,S){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=Vh(""+E,A.mode,S),E.return=A,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Al:return S=Zl(E.type,E.key,E.props,null,A.mode,S),Ra(S,E),S.return=A,S;case Da:return E=Ph(E,A.mode,S),E.return=A,E;case pi:var x=E._init;return E=x(E._payload),g(A,E,S)}if(Ma(E)||ba(E))return E=vr(E,A.mode,S,null),E.return=A,E;if(typeof E.then=="function")return g(A,xl(E),S);if(E.$$typeof===Vn)return g(A,Dl(A,E),S);Nl(A,E)}return null}function m(A,E,S,x){var L=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return L!==null?null:l(A,E,""+S,x);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Al:return S.key===L?u(A,E,S,x):null;case Da:return S.key===L?h(A,E,S,x):null;case pi:return L=S._init,S=L(S._payload),m(A,E,S,x)}if(Ma(S)||ba(S))return L!==null?null:d(A,E,S,x,null);if(typeof S.then=="function")return m(A,E,xl(S),x);if(S.$$typeof===Vn)return m(A,E,Dl(A,S),x);Nl(A,S)}return null}function v(A,E,S,x,L){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return A=A.get(S)||null,l(E,A,""+x,L);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Al:return A=A.get(x.key===null?S:x.key)||null,u(E,A,x,L);case Da:return A=A.get(x.key===null?S:x.key)||null,h(E,A,x,L);case pi:var j=x._init;return x=j(x._payload),v(A,E,S,x,L)}if(Ma(x)||ba(x))return A=A.get(S)||null,d(E,A,x,L,null);if(typeof x.then=="function")return v(A,E,S,xl(x),L);if(x.$$typeof===Vn)return v(A,E,S,Dl(E,x),L);Nl(E,x)}return null}function C(A,E,S,x){for(var L=null,j=null,T=E,_=E=0,b=null;T!==null&&_<S.length;_++){T.index>_?(b=T,T=null):b=T.sibling;var w=m(A,T,S[_],x);if(w===null){T===null&&(T=b);break}t&&T&&w.alternate===null&&e(A,T),E=s(w,E,_),j===null?L=w:j.sibling=w,j=w,T=b}if(_===S.length)return n(A,T),de&&ur(A,_),L;if(T===null){for(;_<S.length;_++)T=g(A,S[_],x),T!==null&&(E=s(T,E,_),j===null?L=T:j.sibling=T,j=T);return de&&ur(A,_),L}for(T=i(T);_<S.length;_++)b=v(T,A,_,S[_],x),b!==null&&(t&&b.alternate!==null&&T.delete(b.key===null?_:b.key),E=s(b,E,_),j===null?L=b:j.sibling=b,j=b);return t&&T.forEach(function(I){return e(A,I)}),de&&ur(A,_),L}function O(A,E,S,x){if(S==null)throw Error(P(151));for(var L=null,j=null,T=E,_=E=0,b=null,w=S.next();T!==null&&!w.done;_++,w=S.next()){T.index>_?(b=T,T=null):b=T.sibling;var I=m(A,T,w.value,x);if(I===null){T===null&&(T=b);break}t&&T&&I.alternate===null&&e(A,T),E=s(I,E,_),j===null?L=I:j.sibling=I,j=I,T=b}if(w.done)return n(A,T),de&&ur(A,_),L;if(T===null){for(;!w.done;_++,w=S.next())w=g(A,w.value,x),w!==null&&(E=s(w,E,_),j===null?L=w:j.sibling=w,j=w);return de&&ur(A,_),L}for(T=i(T);!w.done;_++,w=S.next())w=v(T,A,_,w.value,x),w!==null&&(t&&w.alternate!==null&&T.delete(w.key===null?_:w.key),E=s(w,E,_),j===null?L=w:j.sibling=w,j=w);return t&&T.forEach(function(D){return e(A,D)}),de&&ur(A,_),L}function M(A,E,S,x){if(typeof S=="object"&&S!==null&&S.type===as&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Al:e:{for(var L=S.key;E!==null;){if(E.key===L){if(L=S.type,L===as){if(E.tag===7){n(A,E.sibling),x=r(E,S.props.children),x.return=A,A=x;break e}}else if(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===pi&&$p(L)===E.type){n(A,E.sibling),x=r(E,S.props),Ra(x,S),x.return=A,A=x;break e}n(A,E);break}else e(A,E);E=E.sibling}S.type===as?(x=vr(S.props.children,A.mode,x,S.key),x.return=A,A=x):(x=Zl(S.type,S.key,S.props,null,A.mode,x),Ra(x,S),x.return=A,A=x)}return a(A);case Da:e:{for(L=S.key;E!==null;){if(E.key===L)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(A,E.sibling),x=r(E,S.children||[]),x.return=A,A=x;break e}else{n(A,E);break}else e(A,E);E=E.sibling}x=Ph(S,A.mode,x),x.return=A,A=x}return a(A);case pi:return L=S._init,S=L(S._payload),M(A,E,S,x)}if(Ma(S))return C(A,E,S,x);if(ba(S)){if(L=ba(S),typeof L!="function")throw Error(P(150));return S=L.call(S),O(A,E,S,x)}if(typeof S.then=="function")return M(A,E,xl(S),x);if(S.$$typeof===Vn)return M(A,E,Dl(A,S),x);Nl(A,S)}return typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint"?(S=""+S,E!==null&&E.tag===6?(n(A,E.sibling),x=r(E,S),x.return=A,A=x):(n(A,E),x=Vh(S,A.mode,x),x.return=A,A=x),a(A)):n(A,E)}return function(A,E,S,x){try{po=0;var L=M(A,E,S,x);return Es=null,L}catch(T){if(T===Ka)throw T;var j=Xt(29,T,null,A.mode);return j.lanes=x,j.return=A,j}finally{}}}var wr=y0(!0),_0=y0(!1),Os=bn(null),Tu=bn(0);function Xp(t,e){t=$n,Ie(Tu,t),Ie(Os,e),$n=t|e.baseLanes}function Ef(){Ie(Tu,$n),Ie(Os,Os.current)}function Bd(){$n=Tu.current,Ze(Os),Ze(Tu)}var Jt=bn(null),pn=null;function _i(t){var e=t.alternate;Ie(Fe,Fe.current&1),Ie(Jt,t),pn===null&&(e===null||Os.current!==null||e.memoizedState!==null)&&(pn=t)}function v0(t){if(t.tag===22){if(Ie(Fe,Fe.current),Ie(Jt,t),pn===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(pn=t)}}else vi()}function vi(){Ie(Fe,Fe.current),Ie(Jt,Jt.current)}function Ln(t){Ze(Jt),pn===t&&(pn=null),Ze(Fe)}var Fe=bn(0);function bu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zw=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Jw=Qe.unstable_scheduleCallback,e1=Qe.unstable_NormalPriority,He={$$typeof:Vn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qd(){return{controller:new Zw,data:new Map,refCount:0}}function Bo(t){t.refCount--,t.refCount===0&&Jw(e1,function(){t.controller.abort()})}var Ya=null,Tf=0,Ms=0,Ts=null;function t1(t,e){if(Ya===null){var n=Ya=[];Tf=0,Ms=hm(),Ts={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Tf++,e.then(Wp,Wp),e}function Wp(){if(--Tf===0&&Ya!==null){Ts!==null&&(Ts.status="fulfilled");var t=Ya;Ya=null,Ms=0,Ts=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function n1(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var r=0;r<n.length;r++)(0,n[r])(e)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var Zp=ee.S;ee.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&t1(t,e),Zp!==null&&Zp(t,e)};var _r=bn(null);function Hd(){var t=_r.current;return t!==null?t:be.pooledCache}function Yl(t,e){e===null?Ie(_r,_r.current):Ie(_r,e.pool)}function E0(){var t=Hd();return t===null?null:{parent:He._currentValue,pool:t}}var qi=0,ne=null,pe=null,je=null,Au=!1,bs=!1,Rr=!1,Su=0,yo=0,As=null,i1=0;function Ve(){throw Error(P(321))}function Fd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Bt(t[n],e[n]))return!1;return!0}function Gd(t,e,n,i,r,s){return qi=s,ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ee.H=t===null||t.memoizedState===null?Lr:Zi,Rr=!1,s=n(i,r),Rr=!1,bs&&(s=b0(e,n,i,r)),T0(t),s}function T0(t){ee.H=En;var e=pe!==null&&pe.next!==null;if(qi=0,je=pe=ne=null,Au=!1,yo=0,As=null,e)throw Error(P(300));t===null||We||(t=t.dependencies,t!==null&&Iu(t)&&(We=!0))}function b0(t,e,n,i){ne=t;var r=0;do{if(bs&&(As=null),yo=0,bs=!1,25<=r)throw Error(P(301));if(r+=1,je=pe=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}ee.H=jr,s=e(n,i)}while(bs);return s}function r1(){var t=ee.H,e=t.useState()[0];return e=typeof e.then=="function"?qo(e):e,t=t.useState()[0],(pe!==null?pe.memoizedState:null)!==t&&(ne.flags|=1024),e}function Kd(){var t=Su!==0;return Su=0,t}function Qd(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Yd(t){if(Au){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Au=!1}qi=0,je=pe=ne=null,bs=!1,yo=Su=0,As=null}function wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?ne.memoizedState=je=t:je=je.next=t,je}function Be(){if(pe===null){var t=ne.alternate;t=t!==null?t.memoizedState:null}else t=pe.next;var e=je===null?ne.memoizedState:je.next;if(e!==null)je=e,pe=t;else{if(t===null)throw ne.alternate===null?Error(P(467)):Error(P(310));pe=t,t={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},je===null?ne.memoizedState=je=t:je=je.next=t}return je}var gc;gc=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function qo(t){var e=yo;return yo+=1,As===null&&(As=[]),t=p0(As,t,e),e=ne,(je===null?e.memoizedState:je.next)===null&&(e=e.alternate,ee.H=e===null||e.memoizedState===null?Lr:Zi),t}function pc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return qo(t);if(t.$$typeof===Vn)return mt(t)}throw Error(P(438,String(t)))}function $d(t){var e=null,n=ne.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=ne.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(r){return r.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=gc(),ne.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=zS;return e.index++,n}function Qn(t,e){return typeof e=="function"?e(t):e}function $l(t){var e=Be();return Xd(e,pe,t)}function Xd(t,e,n){var i=t.queue;if(i===null)throw Error(P(311));i.lastRenderedReducer=n;var r=t.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}e.baseQueue=r=s,i.pending=null}if(s=t.baseState,r===null)t.memoizedState=s;else{e=r.next;var l=a=null,u=null,h=e,d=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(he&g)===g:(qi&g)===g){var m=h.revertLane;if(m===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Ms&&(d=!0);else if((qi&m)===m){h=h.next,m===Ms&&(d=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=s):u=u.next=g,ne.lanes|=m,Fi|=m;g=h.action,Rr&&n(s,g),s=h.hasEagerState?h.eagerState:n(s,g)}else m={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=m,a=s):u=u.next=m,ne.lanes|=g,Fi|=g;h=h.next}while(h!==null&&h!==e);if(u===null?a=s:u.next=l,!Bt(s,t.memoizedState)&&(We=!0,d&&(n=Ts,n!==null)))throw n;t.memoizedState=s,t.baseState=a,t.baseQueue=u,i.lastRenderedState=s}return r===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Sh(t){var e=Be(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);Bt(s,e.memoizedState)||(We=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function A0(t,e,n){var i=ne,r=Be(),s=de;if(s){if(n===void 0)throw Error(P(407));n=n()}else n=e();var a=!Bt((pe||r).memoizedState,n);if(a&&(r.memoizedState=n,We=!0),r=r.queue,Wd(R0.bind(null,i,r,t),[t]),r.getSnapshot!==e||a||je!==null&&je.memoizedState.tag&1){if(i.flags|=2048,ks(9,w0.bind(null,i,r,n,e),{destroy:void 0},null),be===null)throw Error(P(349));s||qi&60||S0(i,e,n)}return n}function S0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ne.updateQueue,e===null?(e=gc(),ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function w0(t,e,n,i){e.value=n,e.getSnapshot=i,I0(e)&&C0(t)}function R0(t,e,n){return n(function(){I0(e)&&C0(t)})}function I0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bt(t,n)}catch{return!0}}function C0(t){var e=Bi(t,2);e!==null&&At(e,t,2)}function bf(t){var e=wt();if(typeof t=="function"){var n=t;if(t=n(),Rr){wi(!0);try{n()}finally{wi(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:t},e}function x0(t,e,n,i){return t.baseState=n,Xd(t,pe,typeof i=="function"?i:Qn)}function s1(t,e,n,i,r){if(_c(t))throw Error(P(485));if(t=e.action,t!==null){var s={payload:r,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){s.listeners.push(a)}};ee.T!==null?n(!0):s.isTransition=!1,i(s),n=e.pending,n===null?(s.next=e.pending=s,N0(e,s)):(s.next=n.next,e.pending=n.next=s)}}function N0(t,e){var n=e.action,i=e.payload,r=t.state;if(e.isTransition){var s=ee.T,a={};ee.T=a;try{var l=n(r,i),u=ee.S;u!==null&&u(a,l),Jp(t,e,l)}catch(h){Af(t,e,h)}finally{ee.T=s}}else try{s=n(r,i),Jp(t,e,s)}catch(h){Af(t,e,h)}}function Jp(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){ey(t,e,i)},function(i){return Af(t,e,i)}):ey(t,e,n)}function ey(t,e,n){e.status="fulfilled",e.value=n,D0(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,N0(t,n)))}function Af(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,D0(e),e=e.next;while(e!==i)}t.action=null}function D0(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function O0(t,e){return e}function M0(t,e){if(de){var n=be.formState;if(n!==null){e:{var i=ne;if(de){if(it){t:{for(var r=it,s=fn;r.nodeType!==8;){if(!s){r=null;break t}if(r=an(r.nextSibling),r===null){r=null;break t}}s=r.data,r=s==="F!"||s==="F"?r:null}if(r){it=an(r.nextSibling),i=r.data==="F!";break e}}Sr(i)}i=!1}i&&(e=n[0])}}return n=wt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:O0,lastRenderedState:e},n.queue=i,n=X0.bind(null,ne,i),i.dispatch=n,i=bf(!1),s=tm.bind(null,ne,!1,i.queue),i=wt(),r={state:e,dispatch:null,action:t,pending:null},i.queue=r,n=s1.bind(null,ne,r,s,n),r.dispatch=n,i.memoizedState=t,[e,n,!1]}function k0(t){var e=Be();return V0(e,pe,t)}function V0(t,e,n){e=Xd(t,e,O0)[0],t=$l(Qn)[0],e=typeof e=="object"&&e!==null&&typeof e.then=="function"?qo(e):e;var i=Be(),r=i.queue,s=r.dispatch;return n!==i.memoizedState&&(ne.flags|=2048,ks(9,a1.bind(null,r,n),{destroy:void 0},null)),[e,s,t]}function a1(t,e){t.action=e}function P0(t){var e=Be(),n=pe;if(n!==null)return V0(e,n,t);Be(),e=e.memoizedState,n=Be();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function ks(t,e,n,i){return t={tag:t,create:e,inst:n,deps:i,next:null},e=ne.updateQueue,e===null&&(e=gc(),ne.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function U0(){return Be().memoizedState}function Xl(t,e,n,i){var r=wt();ne.flags|=t,r.memoizedState=ks(1|e,n,{destroy:void 0},i===void 0?null:i)}function yc(t,e,n,i){var r=Be();i=i===void 0?null:i;var s=r.memoizedState.inst;pe!==null&&i!==null&&Fd(i,pe.memoizedState.deps)?r.memoizedState=ks(e,n,s,i):(ne.flags|=t,r.memoizedState=ks(1|e,n,s,i))}function ty(t,e){Xl(8390656,8,t,e)}function Wd(t,e){yc(2048,8,t,e)}function L0(t,e){return yc(4,2,t,e)}function j0(t,e){return yc(4,4,t,e)}function z0(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function B0(t,e,n){n=n!=null?n.concat([t]):null,yc(4,4,z0.bind(null,e,t),n)}function Zd(){}function q0(t,e){var n=Be();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Fd(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function H0(t,e){var n=Be();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Fd(e,i[1]))return i[0];if(i=t(),Rr){wi(!0);try{t()}finally{wi(!1)}}return n.memoizedState=[i,e],i}function Jd(t,e,n){return n===void 0||qi&1073741824?t.memoizedState=e:(t.memoizedState=n,t=DE(),ne.lanes|=t,Fi|=t,n)}function F0(t,e,n,i){return Bt(n,e)?n:Os.current!==null?(t=Jd(t,n,i),Bt(t,e)||(We=!0),t):qi&42?(t=DE(),ne.lanes|=t,Fi|=t,e):(We=!0,t.memoizedState=n)}function G0(t,e,n,i,r){var s=we.p;we.p=s!==0&&8>s?s:8;var a=ee.T,l={};ee.T=l,tm(t,!1,e,n);try{var u=r(),h=ee.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=n1(u,i);$a(t,e,d,zt(t))}else $a(t,e,i,zt(t))}catch(g){$a(t,e,{then:function(){},status:"rejected",reason:g},zt())}finally{we.p=s,ee.T=a}}function o1(){}function Sf(t,e,n,i){if(t.tag!==5)throw Error(P(476));var r=K0(t).queue;G0(t,r,e,pr,n===null?o1:function(){return Q0(t),n(i)})}function K0(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:pr,baseState:pr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:pr},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Q0(t){var e=K0(t).next.queue;$a(t,e,{},zt())}function em(){return mt(To)}function Y0(){return Be().memoizedState}function $0(){return Be().memoizedState}function l1(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=zt();t=xi(n);var i=Ni(e,t,n);i!==null&&(At(i,e,n),Wa(i,e,n)),e={cache:qd()},t.payload=e;return}e=e.return}}function u1(t,e,n){var i=zt();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},_c(t)?W0(e,n):(n=Ld(t,e,n,i),n!==null&&(At(n,t,i),Z0(n,e,i)))}function X0(t,e,n){var i=zt();$a(t,e,n,i)}function $a(t,e,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(_c(t))W0(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(r.hasEagerState=!0,r.eagerState=l,Bt(l,a))return mc(t,e,r,0),be===null&&dc(),!1}catch{}finally{}if(n=Ld(t,e,r,i),n!==null)return At(n,t,i),Z0(n,e,i),!0}return!1}function tm(t,e,n,i){if(i={lane:2,revertLane:hm(),action:i,hasEagerState:!1,eagerState:null,next:null},_c(t)){if(e)throw Error(P(479))}else e=Ld(t,n,i,2),e!==null&&At(e,t,2)}function _c(t){var e=t.alternate;return t===ne||e!==null&&e===ne}function W0(t,e){bs=Au=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Z0(t,e,n){if(n&4194176){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,zv(t,n)}}var En={readContext:mt,use:pc,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useLayoutEffect:Ve,useInsertionEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useSyncExternalStore:Ve,useId:Ve};En.useCacheRefresh=Ve;En.useMemoCache=Ve;En.useHostTransitionStatus=Ve;En.useFormState=Ve;En.useActionState=Ve;En.useOptimistic=Ve;var Lr={readContext:mt,use:pc,useCallback:function(t,e){return wt().memoizedState=[t,e===void 0?null:e],t},useContext:mt,useEffect:ty,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Xl(4194308,4,z0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xl(4194308,4,t,e)},useInsertionEffect:function(t,e){Xl(4,2,t,e)},useMemo:function(t,e){var n=wt();e=e===void 0?null:e;var i=t();if(Rr){wi(!0);try{t()}finally{wi(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=wt();if(n!==void 0){var r=n(e);if(Rr){wi(!0);try{n(e)}finally{wi(!1)}}}else r=e;return i.memoizedState=i.baseState=r,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},i.queue=t,t=t.dispatch=u1.bind(null,ne,t),[i.memoizedState,t]},useRef:function(t){var e=wt();return t={current:t},e.memoizedState=t},useState:function(t){t=bf(t);var e=t.queue,n=X0.bind(null,ne,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Zd,useDeferredValue:function(t,e){var n=wt();return Jd(n,t,e)},useTransition:function(){var t=bf(!1);return t=G0.bind(null,ne,t.queue,!0,!1),wt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=ne,r=wt();if(de){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),be===null)throw Error(P(349));he&60||S0(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,ty(R0.bind(null,i,s,t),[t]),i.flags|=2048,ks(9,w0.bind(null,i,s,n,e),{destroy:void 0},null),n},useId:function(){var t=wt(),e=be.identifierPrefix;if(de){var n=Un,i=Pn;n=(i&~(1<<32-jt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Su++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=i1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},useCacheRefresh:function(){return wt().memoizedState=l1.bind(null,ne)}};Lr.useMemoCache=$d;Lr.useHostTransitionStatus=em;Lr.useFormState=M0;Lr.useActionState=M0;Lr.useOptimistic=function(t){var e=wt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=tm.bind(null,ne,!0,n),n.dispatch=e,[t,e]};var Zi={readContext:mt,use:pc,useCallback:q0,useContext:mt,useEffect:Wd,useImperativeHandle:B0,useInsertionEffect:L0,useLayoutEffect:j0,useMemo:H0,useReducer:$l,useRef:U0,useState:function(){return $l(Qn)},useDebugValue:Zd,useDeferredValue:function(t,e){var n=Be();return F0(n,pe.memoizedState,t,e)},useTransition:function(){var t=$l(Qn)[0],e=Be().memoizedState;return[typeof t=="boolean"?t:qo(t),e]},useSyncExternalStore:A0,useId:Y0};Zi.useCacheRefresh=$0;Zi.useMemoCache=$d;Zi.useHostTransitionStatus=em;Zi.useFormState=k0;Zi.useActionState=k0;Zi.useOptimistic=function(t,e){var n=Be();return x0(n,pe,t,e)};var jr={readContext:mt,use:pc,useCallback:q0,useContext:mt,useEffect:Wd,useImperativeHandle:B0,useInsertionEffect:L0,useLayoutEffect:j0,useMemo:H0,useReducer:Sh,useRef:U0,useState:function(){return Sh(Qn)},useDebugValue:Zd,useDeferredValue:function(t,e){var n=Be();return pe===null?Jd(n,t,e):F0(n,pe.memoizedState,t,e)},useTransition:function(){var t=Sh(Qn)[0],e=Be().memoizedState;return[typeof t=="boolean"?t:qo(t),e]},useSyncExternalStore:A0,useId:Y0};jr.useCacheRefresh=$0;jr.useMemoCache=$d;jr.useHostTransitionStatus=em;jr.useFormState=P0;jr.useActionState=P0;jr.useOptimistic=function(t,e){var n=Be();return pe!==null?x0(n,pe,t,e):(n.baseState=t,[t,n.queue.dispatch])};function wh(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wf={isMounted:function(t){return(t=t._reactInternals)?Ys(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=zt(),r=xi(i);r.payload=e,n!=null&&(r.callback=n),e=Ni(t,r,i),e!==null&&(At(e,t,i),Wa(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=zt(),r=xi(i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Ni(t,r,i),e!==null&&(At(e,t,i),Wa(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zt(),i=xi(n);i.tag=2,e!=null&&(i.callback=e),e=Ni(t,i,n),e!==null&&(At(e,t,n),Wa(e,t,n))}};function ny(t,e,n,i,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!mo(n,i)||!mo(r,s):!0}function iy(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&wf.enqueueReplaceState(e,e.state,null)}function Ir(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Re({},n));for(var r in t)n[r]===void 0&&(n[r]=t[r])}return n}var wu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function J0(t){wu(t)}function eE(t){console.error(t)}function tE(t){wu(t)}function Ru(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function ry(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Rf(t,e,n){return n=xi(n),n.tag=3,n.payload={element:null},n.callback=function(){Ru(t,e)},n}function nE(t){return t=xi(t),t.tag=3,t}function iE(t,e,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=i.value;t.payload=function(){return r(s)},t.callback=function(){ry(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){ry(e,n,i),typeof r!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function c1(t,e,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Ho(e,n,r,!0),n=Jt.current,n!==null){switch(n.tag){case 13:return pn===null?Bf():n.alternate===null&&ke===0&&(ke=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===vf?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Lh(t,i,r)),!1;case 22:return n.flags|=65536,i===vf?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Lh(t,i,r)),!1}throw Error(P(435,n.tag))}return Lh(t,i,r),Bf(),!1}if(de)return e=Jt.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=r,i!==_f&&(t=Error(P(422),{cause:i}),go($t(t,n)))):(i!==_f&&(e=Error(P(423),{cause:i}),go($t(e,n))),t=t.current.alternate,t.flags|=65536,r&=-r,t.lanes|=r,i=$t(i,n),r=Rf(t.stateNode,i,r),Dh(t,r),ke!==4&&(ke=2)),!1;var s=Error(P(520),{cause:i});if(s=$t(s,n),to===null?to=[s]:to.push(s),ke!==4&&(ke=2),e===null)return!0;i=$t(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=r&-r,n.lanes|=t,t=Rf(n.stateNode,i,t),Dh(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Oi===null||!Oi.has(s))))return n.flags|=65536,r&=-r,n.lanes|=r,r=nE(r),iE(r,t,n,i),Dh(n,r),!1}n=n.return}while(n!==null);return!1}var rE=Error(P(461)),We=!1;function tt(t,e,n,i){e.child=t===null?_0(e,null,n,i):wr(e,t.child,n,i)}function sy(t,e,n,i,r){n=n.render;var s=e.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Cr(e),i=Gd(t,e,n,a,s,r),l=Kd(),t!==null&&!We?(Qd(t,e,r),Yn(t,e,r)):(de&&l&&jd(e),e.flags|=1,tt(t,e,i,r),e.child)}function ay(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!am(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,sE(t,e,s,i,r)):(t=Zl(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!nm(t,r)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:mo,n(a,i)&&t.ref===e.ref)return Yn(t,e,r)}return e.flags|=1,t=Di(s,i),t.ref=e.ref,t.return=e,e.child=t}function sE(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(mo(s,i)&&t.ref===e.ref)if(We=!1,e.pendingProps=i=s,nm(t,r))t.flags&131072&&(We=!0);else return e.lanes=t.lanes,Yn(t,e,r)}return If(t,e,n,i,r)}function aE(t,e,n){var i=e.pendingProps,r=i.children,s=(e.stateNode._pendingVisibility&2)!==0,a=t!==null?t.memoizedState:null;if(Xa(t,e),i.mode==="hidden"||s){if(e.flags&128){if(i=a!==null?a.baseLanes|n:n,t!==null){for(r=e.child=t.child,s=0;r!==null;)s=s|r.lanes|r.childLanes,r=r.sibling;e.childLanes=s&~i}else e.childLanes=0,e.child=null;return oy(t,e,i,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Yl(e,a!==null?a.cachePool:null),a!==null?Xp(e,a):Ef(),v0(e);else return e.lanes=e.childLanes=536870912,oy(t,e,a!==null?a.baseLanes|n:n,n)}else a!==null?(Yl(e,a.cachePool),Xp(e,a),vi(),e.memoizedState=null):(t!==null&&Yl(e,null),Ef(),vi());return tt(t,e,r,n),e.child}function oy(t,e,n,i){var r=Hd();return r=r===null?null:{parent:He._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&Yl(e,null),Ef(),v0(e),t!==null&&Ho(t,e,i,!0),null}function Xa(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(P(284));(t===null||t.ref!==n)&&(e.flags|=2097664)}}function If(t,e,n,i,r){return Cr(e),n=Gd(t,e,n,i,void 0,r),i=Kd(),t!==null&&!We?(Qd(t,e,r),Yn(t,e,r)):(de&&i&&jd(e),e.flags|=1,tt(t,e,n,r),e.child)}function ly(t,e,n,i,r,s){return Cr(e),e.updateQueue=null,n=b0(e,i,n,r),T0(t),i=Kd(),t!==null&&!We?(Qd(t,e,s),Yn(t,e,s)):(de&&i&&jd(e),e.flags|=1,tt(t,e,n,s),e.child)}function uy(t,e,n,i,r){if(Cr(e),e.stateNode===null){var s=ds,a=n.contextType;typeof a=="object"&&a!==null&&(s=mt(a)),s=new n(i,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=wf,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=i,s.state=e.memoizedState,s.refs={},im(e),a=n.contextType,s.context=typeof a=="object"&&a!==null?mt(a):ds,s.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(wh(e,n,a,i),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(a=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),a!==s.state&&wf.enqueueReplaceState(s,s.state,null),Ja(e,i,s,r),Za(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){s=e.stateNode;var l=e.memoizedProps,u=Ir(n,l);s.props=u;var h=s.context,d=n.contextType;a=ds,typeof d=="object"&&d!==null&&(a=mt(d));var g=n.getDerivedStateFromProps;d=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l||h!==a)&&iy(e,s,i,a),yi=!1;var m=e.memoizedState;s.state=m,Ja(e,i,s,r),Za(),h=e.memoizedState,l||m!==h||yi?(typeof g=="function"&&(wh(e,n,g,i),h=e.memoizedState),(u=yi||ny(e,n,u,i,m,h,a))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),s.props=i,s.state=h,s.context=a,i=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{s=e.stateNode,Mf(t,e),a=e.memoizedProps,d=Ir(n,a),s.props=d,g=e.pendingProps,m=s.context,h=n.contextType,u=ds,typeof h=="object"&&h!==null&&(u=mt(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==g||m!==u)&&iy(e,s,i,u),yi=!1,m=e.memoizedState,s.state=m,Ja(e,i,s,r),Za();var v=e.memoizedState;a!==g||m!==v||yi||t!==null&&t.dependencies!==null&&Iu(t.dependencies)?(typeof l=="function"&&(wh(e,n,l,i),v=e.memoizedState),(d=yi||ny(e,n,d,i,m,v,u)||t!==null&&t.dependencies!==null&&Iu(t.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,v,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,v,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),s.props=i,s.state=v,s.context=u,i=d):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),i=!1)}return s=i,Xa(t,e),i=(e.flags&128)!==0,s||i?(s=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&i?(e.child=wr(e,t.child,null,r),e.child=wr(e,null,n,r)):tt(t,e,n,r),e.memoizedState=s.state,t=e.child):t=Yn(t,e,r),t}function cy(t,e,n,i){return zo(),e.flags|=256,tt(t,e,n,i),e.child}var Rh={dehydrated:null,treeContext:null,retryLane:0};function Ih(t){return{baseLanes:t,cachePool:E0()}}function Ch(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Wt),t}function oE(t,e,n){var i=e.pendingProps,r=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(Fe.current&2)!==0),a&&(r=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(de){if(r?_i(e):vi(),de){var l=it,u;if(u=l){e:{for(u=l,l=fn;u.nodeType!==8;){if(!l){l=null;break e}if(u=an(u.nextSibling),u===null){l=null;break e}}l=u}l!==null?(e.memoizedState={dehydrated:l,treeContext:yr!==null?{id:Pn,overflow:Un}:null,retryLane:536870912},u=Xt(18,null,null,0),u.stateNode=l,u.return=e,e.child=u,Tt=e,it=null,u=!0):u=!1}u||Sr(e)}if(l=e.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return l.data==="$!"?e.lanes=16:e.lanes=536870912,null;Ln(e)}return l=i.children,i=i.fallback,r?(vi(),r=e.mode,l=xf({mode:"hidden",children:l},r),i=vr(i,r,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,r=e.child,r.memoizedState=Ih(n),r.childLanes=Ch(t,a,n),e.memoizedState=Rh,i):(_i(e),Cf(e,l))}if(u=t.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(s)e.flags&256?(_i(e),e.flags&=-257,e=xh(t,e,n)):e.memoizedState!==null?(vi(),e.child=t.child,e.flags|=128,e=null):(vi(),r=i.fallback,l=e.mode,i=xf({mode:"visible",children:i.children},l),r=vr(r,l,n,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,wr(e,t.child,null,n),i=e.child,i.memoizedState=Ih(n),i.childLanes=Ch(t,a,n),e.memoizedState=Rh,e=r);else if(_i(e),l.data==="$!"){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(P(419)),i.stack="",i.digest=a,go({value:i,source:null,stack:null}),e=xh(t,e,n)}else if(We||Ho(t,e,n,!1),a=(n&t.childLanes)!==0,We||a){if(a=be,a!==null){if(i=n&-n,i&42)i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane)throw u.retryLane=i,Bi(t,i),At(a,t,i),rE}l.data==="$?"||Bf(),e=xh(t,e,n)}else l.data==="$?"?(e.flags|=128,e.child=t.child,e=w1.bind(null,t),l._reactRetry=e,e=null):(t=u.treeContext,it=an(l.nextSibling),Tt=e,de=!0,sn=null,fn=!1,t!==null&&(Kt[Qt++]=Pn,Kt[Qt++]=Un,Kt[Qt++]=yr,Pn=t.id,Un=t.overflow,yr=e),e=Cf(e,i.children),e.flags|=4096);return e}return r?(vi(),r=i.fallback,l=e.mode,u=t.child,h=u.sibling,i=Di(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&31457280,h!==null?r=Di(h,r):(r=vr(r,l,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,l=t.child.memoizedState,l===null?l=Ih(n):(u=l.cachePool,u!==null?(h=He._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=E0(),l={baseLanes:l.baseLanes|n,cachePool:u}),r.memoizedState=l,r.childLanes=Ch(t,a,n),e.memoizedState=Rh,i):(_i(e),n=t.child,t=n.sibling,n=Di(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Cf(t,e){return e=xf({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function xf(t,e){return xE(t,e,0,null)}function xh(t,e,n){return wr(e,t.child,null,n),t=Cf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hy(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Df(t.return,e,n)}function Nh(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function lE(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(tt(t,e,i.children,n),i=Fe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hy(t,n,e);else if(t.tag===19)hy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch(Ie(Fe,i),r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&bu(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Nh(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&bu(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Nh(e,!0,n,null,s);break;case"together":Nh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fi|=e.lanes,!(n&e.childLanes))if(t!==null){if(Ho(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=Di(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Di(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function nm(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Iu(t)))}function h1(t,e,n){switch(e.tag){case 3:du(e,e.stateNode.containerInfo),Ei(e,He,t.memoizedState.cache),zo();break;case 27:case 5:uf(e);break;case 4:du(e,e.stateNode.containerInfo);break;case 10:Ei(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(_i(e),e.flags|=128,null):n&e.child.childLanes?oE(t,e,n):(_i(e),t=Yn(t,e,n),t!==null?t.sibling:null);_i(e);break;case 19:var r=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Ho(t,e,n,!1),i=(n&e.childLanes)!==0),r){if(i)return lE(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ie(Fe,Fe.current),i)break;return null;case 22:case 23:return e.lanes=0,aE(t,e,n);case 24:Ei(e,He,t.memoizedState.cache)}return Yn(t,e,n)}function uE(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)We=!0;else{if(!nm(t,n)&&!(e.flags&128))return We=!1,h1(t,e,n);We=!!(t.flags&131072)}else We=!1,de&&e.flags&1048576&&m0(e,Eu,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var i=e.elementType,r=i._init;if(i=r(i._payload),e.type=i,typeof i=="function")am(i)?(t=Ir(i,t),e.tag=1,e=uy(null,e,i,t,n)):(e.tag=0,e=If(null,e,i,t,n));else{if(i!=null){if(r=i.$$typeof,r===Id){e.tag=11,e=sy(null,e,i,t,n);break e}else if(r===Cd){e.tag=14,e=ay(null,e,i,t,n);break e}}throw e=of(i)||i,Error(P(306,e,""))}}return e;case 0:return If(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,r=Ir(i,e.pendingProps),uy(t,e,i,r,n);case 3:e:{if(du(e,e.stateNode.containerInfo),t===null)throw Error(P(387));var s=e.pendingProps;r=e.memoizedState,i=r.element,Mf(t,e),Ja(e,s,null,n);var a=e.memoizedState;if(s=a.cache,Ei(e,He,s),s!==r.cache&&Of(e,[He],n,!0),Za(),s=a.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=cy(t,e,s,n);break e}else if(s!==i){i=$t(Error(P(424)),e),go(i),e=cy(t,e,s,n);break e}else for(it=an(e.stateNode.containerInfo.firstChild),Tt=e,de=!0,sn=null,fn=!0,n=_0(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zo(),s===i){e=Yn(t,e,n);break e}tt(t,e,s,n)}e=e.child}return e;case 26:return Xa(t,e),t===null?(n=xy(e.type,null,e.pendingProps,null))?e.memoizedState=n:de||(n=e.type,t=e.pendingProps,i=ku(Ci.current).createElement(n),i[dt]=e,i[xt]=t,st(i,n,t),Xe(i),e.stateNode=i):e.memoizedState=xy(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return uf(e),t===null&&de&&(i=e.stateNode=QE(e.type,e.pendingProps,Ci.current),Tt=e,fn=!0,it=an(i.firstChild)),i=e.pendingProps.children,t!==null||de?tt(t,e,i,n):e.child=wr(e,null,i,n),Xa(t,e),e.child;case 5:return t===null&&de&&((r=i=it)&&(i=B1(i,e.type,e.pendingProps,fn),i!==null?(e.stateNode=i,Tt=e,it=an(i.firstChild),fn=!1,r=!0):r=!1),r||Sr(e)),uf(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,i=s.children,Kf(r,s)?i=null:a!==null&&Kf(r,a)&&(e.flags|=32),e.memoizedState!==null&&(r=Gd(t,e,r1,null,null,n),To._currentValue=r),Xa(t,e),tt(t,e,i,n),e.child;case 6:return t===null&&de&&((t=n=it)&&(n=q1(n,e.pendingProps,fn),n!==null?(e.stateNode=n,Tt=e,it=null,t=!0):t=!1),t||Sr(e)),null;case 13:return oE(t,e,n);case 4:return du(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=wr(e,null,i,n):tt(t,e,i,n),e.child;case 11:return sy(t,e,e.type,e.pendingProps,n);case 7:return tt(t,e,e.pendingProps,n),e.child;case 8:return tt(t,e,e.pendingProps.children,n),e.child;case 12:return tt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Ei(e,e.type,i.value),tt(t,e,i.children,n),e.child;case 9:return r=e.type._context,i=e.pendingProps.children,Cr(e),r=mt(r),i=i(r),e.flags|=1,tt(t,e,i,n),e.child;case 14:return ay(t,e,e.type,e.pendingProps,n);case 15:return sE(t,e,e.type,e.pendingProps,n);case 19:return lE(t,e,n);case 22:return aE(t,e,n);case 24:return Cr(e),i=mt(He),t===null?(r=Hd(),r===null&&(r=be,s=qd(),r.pooledCache=s,s.refCount++,s!==null&&(r.pooledCacheLanes|=n),r=s),e.memoizedState={parent:i,cache:r},im(e),Ei(e,He,r)):(t.lanes&n&&(Mf(t,e),Ja(e,null,null,n),Za()),r=t.memoizedState,s=e.memoizedState,r.parent!==i?(r={parent:i,cache:i},e.memoizedState=r,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=r),Ei(e,He,i)):(i=s.cache,Ei(e,He,i),i!==r.cache&&Of(e,[He],n,!0))),tt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(P(156,e.tag))}var Nf=bn(null),zr=null,jn=null;function Ei(t,e,n){Ie(Nf,e._currentValue),e._currentValue=n}function Hn(t){t._currentValue=Nf.current,Ze(Nf)}function Df(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Of(t,e,n,i){var r=t.child;for(r!==null&&(r.return=t);r!==null;){var s=r.dependencies;if(s!==null){var a=r.child;s=s.firstContext;e:for(;s!==null;){var l=s;s=r;for(var u=0;u<e.length;u++)if(l.context===e[u]){s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Df(s.return,n,t),i||(a=null);break e}s=l.next}}else if(r.tag===18){if(a=r.return,a===null)throw Error(P(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Df(a,n,t),a=null}else a=r.child;if(a!==null)a.return=r;else for(a=r;a!==null;){if(a===t){a=null;break}if(r=a.sibling,r!==null){r.return=a.return,a=r;break}a=a.return}r=a}}function Ho(t,e,n,i){t=null;for(var r=e,s=!1;r!==null;){if(!s){if(r.flags&524288)s=!0;else if(r.flags&262144)break}if(r.tag===10){var a=r.alternate;if(a===null)throw Error(P(387));if(a=a.memoizedProps,a!==null){var l=r.type;Bt(r.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(r===fu.current){if(a=r.alternate,a===null)throw Error(P(387));a.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(t!==null?t.push(To):t=[To])}r=r.return}t!==null&&Of(e,t,n,i),e.flags|=262144}function Iu(t){for(t=t.firstContext;t!==null;){if(!Bt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Cr(t){zr=t,jn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function mt(t){return cE(zr,t)}function Dl(t,e){return zr===null&&Cr(t),cE(t,e)}function cE(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},jn===null){if(t===null)throw Error(P(308));jn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else jn=jn.next=e;return n}var yi=!1;function im(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Mf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function xi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ni(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ne&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,e=_u(t),d0(t,null,n),e}return mc(t,i,e,n),_u(t)}function Wa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194176)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,zv(t,n)}}function Dh(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?r=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var kf=!1;function Za(){if(kf){var t=Ts;if(t!==null)throw t}}function Ja(t,e,n,i){kf=!1;var r=t.updateQueue;yi=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?s=h:a.next=h,a=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var g=r.baseState;a=0,d=h=u=null,l=s;do{var m=l.lane&-536870913,v=m!==l.lane;if(v?(he&m)===m:(i&m)===m){m!==0&&m===Ms&&(kf=!0),d!==null&&(d=d.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var C=t,O=l;m=e;var M=n;switch(O.tag){case 1:if(C=O.payload,typeof C=="function"){g=C.call(M,g,m);break e}g=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=O.payload,m=typeof C=="function"?C.call(M,g,m):C,m==null)break e;g=Re({},g,m);break e;case 2:yi=!0}}m=l.callback,m!==null&&(t.flags|=64,v&&(t.flags|=8192),v=r.callbacks,v===null?r.callbacks=[m]:v.push(m))}else v={lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=v,u=g):d=d.next=v,a|=m;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;v=l,l=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);d===null&&(u=g),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,s===null&&(r.shared.lanes=0),Fi|=a,t.lanes=a,t.memoizedState=g}}function hE(t,e){if(typeof t!="function")throw Error(P(191,t));t.call(e)}function fE(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)hE(n[t],e)}function Fo(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&t)===t){i=void 0;var s=n.create,a=n.inst;i=s(),a.destroy=i}n=n.next}while(n!==r)}}catch(l){Ee(e,e.return,l)}}function Hi(t,e,n){try{var i=e.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var s=r.next;i=s;do{if((i.tag&t)===t){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,r=e;var u=n;try{l()}catch(h){Ee(r,u,h)}}}i=i.next}while(i!==s)}}catch(h){Ee(e,e.return,h)}}function dE(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{fE(e,n)}catch(i){Ee(t,t.return,i)}}}function mE(t,e,n){n.props=Ir(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Ee(t,e,i)}}function dr(t,e){try{var n=t.ref;if(n!==null){var i=t.stateNode;switch(t.tag){case 26:case 27:case 5:var r=i;break;default:r=i}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(s){Ee(t,e,s)}}function Vt(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){Ee(t,e,r)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){Ee(t,e,r)}else n.current=null}function gE(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){Ee(t,t.return,r)}}function fy(t,e,n){try{var i=t.stateNode;P1(i,t.type,n,e),i[xt]=e}catch(r){Ee(t,t.return,r)}}function pE(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27||t.tag===4}function Oh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==27&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Tc));else if(i!==4&&i!==27&&(t=t.child,t!==null))for(Vf(t,e,n),t=t.sibling;t!==null;)Vf(t,e,n),t=t.sibling}function Cu(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&i!==27&&(t=t.child,t!==null))for(Cu(t,e,n),t=t.sibling;t!==null;)Cu(t,e,n),t=t.sibling}var Dn=!1,Me=!1,Mh=!1,dy=typeof WeakSet=="function"?WeakSet:Set,$e=null,my=!1;function f1(t,e){if(t=t.containerInfo,Ff=Lu,t=a0(t),Pd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,d=0,g=t,m=null;t:for(;;){for(var v;g!==n||r!==0&&g.nodeType!==3||(l=a+r),g!==s||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(v=g.firstChild)!==null;)m=g,g=v;for(;;){if(g===t)break t;if(m===n&&++h===r&&(l=a),m===s&&++d===i&&(u=a),(v=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gf={focusedElem:t,selectionRange:n},Lu=!1,$e=e;$e!==null;)if(e=$e,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$e=t;else for(;$e!==null;){switch(e=$e,s=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&s!==null){t=void 0,n=e,r=s.memoizedProps,s=s.memoizedState,i=n.stateNode;try{var C=Ir(n.type,r,n.elementType===n.type);t=i.getSnapshotBeforeUpdate(C,s),i.__reactInternalSnapshotBeforeUpdate=t}catch(O){Ee(n,n.return,O)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Qf(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Qf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(P(163))}if(t=e.sibling,t!==null){t.return=e.return,$e=t;break}$e=e.return}return C=my,my=!1,C}function yE(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:xn(t,n),i&4&&Fo(5,n);break;case 1:if(xn(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(l){Ee(n,n.return,l)}else{var r=Ir(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(r,e,t.__reactInternalSnapshotBeforeUpdate)}catch(l){Ee(n,n.return,l)}}i&64&&dE(n),i&512&&dr(n,n.return);break;case 3:if(xn(t,n),i&64&&(i=n.updateQueue,i!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{fE(i,t)}catch(l){Ee(n,n.return,l)}}break;case 26:xn(t,n),i&512&&dr(n,n.return);break;case 27:case 5:xn(t,n),e===null&&i&4&&gE(n),i&512&&dr(n,n.return);break;case 12:xn(t,n);break;case 13:xn(t,n),i&4&&EE(t,n);break;case 22:if(r=n.memoizedState!==null||Dn,!r){e=e!==null&&e.memoizedState!==null||Me;var s=Dn,a=Me;Dn=r,(Me=e)&&!a?mi(t,n,(n.subtreeFlags&8772)!==0):xn(t,n),Dn=s,Me=a}i&512&&(n.memoizedProps.mode==="manual"?dr(n,n.return):Vt(n,n.return));break;default:xn(t,n)}}function _E(t){var e=t.alternate;e!==null&&(t.alternate=null,_E(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Nd(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Le=null,Mt=!1;function Cn(t,e,n){for(n=n.child;n!==null;)vE(t,e,n),n=n.sibling}function vE(t,e,n){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(Po,n)}catch{}switch(n.tag){case 26:Me||Vt(n,e),Cn(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Me||Vt(n,e);var i=Le,r=Mt;for(Le=n.stateNode,Cn(t,e,n),n=n.stateNode,e=n.attributes;e.length;)n.removeAttributeNode(e[0]);Nd(n),Le=i,Mt=r;break;case 5:Me||Vt(n,e);case 6:r=Le;var s=Mt;if(Le=null,Cn(t,e,n),Le=r,Mt=s,Le!==null)if(Mt)try{t=Le,i=n.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)}catch(a){Ee(n,e,a)}else try{Le.removeChild(n.stateNode)}catch(a){Ee(n,e,a)}break;case 18:Le!==null&&(Mt?(e=Le,n=n.stateNode,e.nodeType===8?Gh(e.parentNode,n):e.nodeType===1&&Gh(e,n),So(e)):Gh(Le,n.stateNode));break;case 4:i=Le,r=Mt,Le=n.stateNode.containerInfo,Mt=!0,Cn(t,e,n),Le=i,Mt=r;break;case 0:case 11:case 14:case 15:Me||Hi(2,n,e),Me||Hi(4,n,e),Cn(t,e,n);break;case 1:Me||(Vt(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&mE(n,e,i)),Cn(t,e,n);break;case 21:Cn(t,e,n);break;case 22:Me||Vt(n,e),Me=(i=Me)||n.memoizedState!==null,Cn(t,e,n),Me=i;break;default:Cn(t,e,n)}}function EE(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{So(t)}catch(n){Ee(e,e.return,n)}}function d1(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new dy),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new dy),e;default:throw Error(P(435,t.tag))}}function kh(t,e){var n=d1(t);e.forEach(function(i){var r=R1.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}function qt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:case 5:Le=l.stateNode,Mt=!1;break e;case 3:Le=l.stateNode.containerInfo,Mt=!0;break e;case 4:Le=l.stateNode.containerInfo,Mt=!0;break e}l=l.return}if(Le===null)throw Error(P(160));vE(s,a,r),Le=null,Mt=!1,s=r.alternate,s!==null&&(s.return=null),r.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)TE(e,t),e=e.sibling}var rn=null;function TE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:qt(e,t),Ht(t),i&4&&(Hi(3,t,t.return),Fo(3,t),Hi(5,t,t.return));break;case 1:qt(e,t),Ht(t),i&512&&(Me||n===null||Vt(n,n.return)),i&64&&Dn&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=rn;if(qt(e,t),Ht(t),i&512&&(Me||n===null||Vt(n,n.return)),i&4){var s=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":s=r.getElementsByTagName("title")[0],(!s||s[co]||s[dt]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=r.createElement(i),r.head.insertBefore(s,r.querySelector("head > title"))),st(s,i,n),s[dt]=t,Xe(s),i=s;break e;case"link":var a=Dy("link","href",r).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(s=a[l],s.getAttribute("href")===(n.href==null?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}s=r.createElement(i),st(s,i,n),r.head.appendChild(s);break;case"meta":if(a=Dy("meta","content",r).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(s=a[l],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}s=r.createElement(i),st(s,i,n),r.head.appendChild(s);break;default:throw Error(P(468,i))}s[dt]=t,Xe(s),i=s}t.stateNode=i}else Oy(r,t.type,t.stateNode);else t.stateNode=Ny(r,i,t.memoizedProps);else s!==i?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,i===null?Oy(r,t.type,t.stateNode):Ny(r,i,t.memoizedProps)):i===null&&t.stateNode!==null&&fy(t,t.memoizedProps,n.memoizedProps)}break;case 27:if(i&4&&t.alternate===null){r=t.stateNode,s=t.memoizedProps;try{for(var u=r.firstChild;u;){var h=u.nextSibling,d=u.nodeName;u[co]||d==="HEAD"||d==="BODY"||d==="SCRIPT"||d==="STYLE"||d==="LINK"&&u.rel.toLowerCase()==="stylesheet"||r.removeChild(u),u=h}for(var g=t.type,m=r.attributes;m.length;)r.removeAttributeNode(m[0]);st(r,g,s),r[dt]=t,r[xt]=s}catch(C){Ee(t,t.return,C)}}case 5:if(qt(e,t),Ht(t),i&512&&(Me||n===null||Vt(n,n.return)),t.flags&32){r=t.stateNode;try{Ds(r,"")}catch(C){Ee(t,t.return,C)}}i&4&&t.stateNode!=null&&(r=t.memoizedProps,fy(t,r,n!==null?n.memoizedProps:r)),i&1024&&(Mh=!0);break;case 6:if(qt(e,t),Ht(t),i&4){if(t.stateNode===null)throw Error(P(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(C){Ee(t,t.return,C)}}break;case 3:if(eu=null,r=rn,rn=Vu(e.containerInfo),qt(e,t),rn=r,Ht(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{So(e.containerInfo)}catch(C){Ee(t,t.return,C)}Mh&&(Mh=!1,bE(t));break;case 4:i=rn,rn=Vu(t.stateNode.containerInfo),qt(e,t),Ht(t),rn=i;break;case 12:qt(e,t),Ht(t);break;case 13:qt(e,t),Ht(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(um=gn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,kh(t,i)));break;case 22:if(i&512&&(Me||n===null||Vt(n,n.return)),u=t.memoizedState!==null,h=n!==null&&n.memoizedState!==null,d=Dn,g=Me,Dn=d||u,Me=g||h,qt(e,t),Me=g,Dn=d,Ht(t),e=t.stateNode,e._current=t,e._visibility&=-3,e._visibility|=e._pendingVisibility&2,i&8192&&(e._visibility=u?e._visibility&-2:e._visibility|1,u&&(e=Dn||Me,n===null||h||e||Jr(t)),t.memoizedProps===null||t.memoizedProps.mode!=="manual"))e:for(n=null,e=t;;){if(e.tag===5||e.tag===26||e.tag===27){if(n===null){h=n=e;try{if(r=h.stateNode,u)s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none";else{a=h.stateNode,l=h.memoizedProps.style;var v=l!=null&&l.hasOwnProperty("display")?l.display:null;a.style.display=v==null||typeof v=="boolean"?"":(""+v).trim()}}catch(C){Ee(h,h.return,C)}}}else if(e.tag===6){if(n===null){h=e;try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(C){Ee(h,h.return,C)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,kh(t,n))));break;case 19:qt(e,t),Ht(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,kh(t,i)));break;case 21:break;default:qt(e,t),Ht(t)}}function Ht(t){var e=t.flags;if(e&2){try{if(t.tag!==27){e:{for(var n=t.return;n!==null;){if(pE(n)){var i=n;break e}n=n.return}throw Error(P(160))}switch(i.tag){case 27:var r=i.stateNode,s=Oh(t);Cu(t,s,r);break;case 5:var a=i.stateNode;i.flags&32&&(Ds(a,""),i.flags&=-33);var l=Oh(t);Cu(t,l,a);break;case 3:case 4:var u=i.stateNode.containerInfo,h=Oh(t);Vf(t,h,u);break;default:throw Error(P(161))}}}catch(d){Ee(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bE(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;bE(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function xn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)yE(t,e.alternate,e),e=e.sibling}function Jr(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Hi(4,e,e.return),Jr(e);break;case 1:Vt(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&mE(e,e.return,n),Jr(e);break;case 26:case 27:case 5:Vt(e,e.return),Jr(e);break;case 22:Vt(e,e.return),e.memoizedState===null&&Jr(e);break;default:Jr(e)}t=t.sibling}}function mi(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,r=t,s=e,a=s.flags;switch(s.tag){case 0:case 11:case 15:mi(r,s,n),Fo(4,s);break;case 1:if(mi(r,s,n),i=s,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(h){Ee(i,i.return,h)}if(i=s,r=i.updateQueue,r!==null){var l=i.stateNode;try{var u=r.shared.hiddenCallbacks;if(u!==null)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)hE(u[r],l)}catch(h){Ee(i,i.return,h)}}n&&a&64&&dE(s),dr(s,s.return);break;case 26:case 27:case 5:mi(r,s,n),n&&i===null&&a&4&&gE(s),dr(s,s.return);break;case 12:mi(r,s,n);break;case 13:mi(r,s,n),n&&a&4&&EE(r,s);break;case 22:s.memoizedState===null&&mi(r,s,n),dr(s,s.return);break;default:mi(r,s,n)}e=e.sibling}}function rm(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Bo(n))}function sm(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Bo(t))}function fi(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)AE(t,e,n,i),e=e.sibling}function AE(t,e,n,i){var r=e.flags;switch(e.tag){case 0:case 11:case 15:fi(t,e,n,i),r&2048&&Fo(9,e);break;case 3:fi(t,e,n,i),r&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Bo(t)));break;case 12:if(r&2048){fi(t,e,n,i),t=e.stateNode;try{var s=e.memoizedProps,a=s.id,l=s.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Ee(e,e.return,u)}}else fi(t,e,n,i);break;case 23:break;case 22:s=e.stateNode,e.memoizedState!==null?s._visibility&4?fi(t,e,n,i):eo(t,e):s._visibility&4?fi(t,e,n,i):(s._visibility|=4,es(t,e,n,i,(e.subtreeFlags&10256)!==0)),r&2048&&rm(e.alternate,e);break;case 24:fi(t,e,n,i),r&2048&&sm(e.alternate,e);break;default:fi(t,e,n,i)}}function es(t,e,n,i,r){for(r=r&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var s=t,a=e,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:es(s,a,l,u,r),Fo(8,a);break;case 23:break;case 22:var d=a.stateNode;a.memoizedState!==null?d._visibility&4?es(s,a,l,u,r):eo(s,a):(d._visibility|=4,es(s,a,l,u,r)),r&&h&2048&&rm(a.alternate,a);break;case 24:es(s,a,l,u,r),r&&h&2048&&sm(a.alternate,a);break;default:es(s,a,l,u,r)}e=e.sibling}}function eo(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,r=i.flags;switch(i.tag){case 22:eo(n,i),r&2048&&rm(i.alternate,i);break;case 24:eo(n,i),r&2048&&sm(i.alternate,i);break;default:eo(n,i)}e=e.sibling}}var Va=8192;function $r(t){if(t.subtreeFlags&Va)for(t=t.child;t!==null;)SE(t),t=t.sibling}function SE(t){switch(t.tag){case 26:$r(t),t.flags&Va&&t.memoizedState!==null&&tR(rn,t.memoizedState,t.memoizedProps);break;case 5:$r(t);break;case 3:case 4:var e=rn;rn=Vu(t.stateNode.containerInfo),$r(t),rn=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=Va,Va=16777216,$r(t),Va=e):$r(t));break;default:$r(t)}}function wE(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Ia(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];$e=i,IE(i,t)}wE(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)RE(t),t=t.sibling}function RE(t){switch(t.tag){case 0:case 11:case 15:Ia(t),t.flags&2048&&Hi(9,t,t.return);break;case 3:Ia(t);break;case 12:Ia(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&4&&(t.return===null||t.return.tag!==13)?(e._visibility&=-5,Wl(t)):Ia(t);break;default:Ia(t)}}function Wl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];$e=i,IE(i,t)}wE(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Hi(8,e,e.return),Wl(e);break;case 22:n=e.stateNode,n._visibility&4&&(n._visibility&=-5,Wl(e));break;default:Wl(e)}t=t.sibling}}function IE(t,e){for(;$e!==null;){var n=$e;switch(n.tag){case 0:case 11:case 15:Hi(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Bo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,$e=i;else e:for(n=t;$e!==null;){i=$e;var r=i.sibling,s=i.return;if(_E(i),i===n){$e=null;break e}if(r!==null){r.return=s,$e=r;break e}$e=s}}}function m1(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,i){return new m1(t,e,n,i)}function am(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Di(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&31457280,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function CE(t,e){t.flags&=31457282;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Zl(t,e,n,i,r,s){var a=0;if(i=t,typeof t=="function")am(t)&&(a=1);else if(typeof t=="string")a=J1(t,n,mn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case as:return vr(n.children,r,s,e);case xv:a=8,r|=24;break;case rf:return t=Xt(12,n,e,r|2),t.elementType=rf,t.lanes=s,t;case sf:return t=Xt(13,n,e,r),t.elementType=sf,t.lanes=s,t;case af:return t=Xt(19,n,e,r),t.elementType=af,t.lanes=s,t;case Dv:return xE(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jS:case Vn:a=10;break e;case Nv:a=9;break e;case Id:a=11;break e;case Cd:a=14;break e;case pi:a=16,i=null;break e}a=29,n=Error(P(130,t===null?"null":typeof t,"")),i=null}return e=Xt(a,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function vr(t,e,n,i){return t=Xt(7,t,i,e),t.lanes=n,t}function xE(t,e,n,i){t=Xt(22,t,i,e),t.elementType=Dv,t.lanes=n;var r={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var s=r._current;if(s===null)throw Error(P(456));if(!(r._pendingVisibility&2)){var a=Bi(s,2);a!==null&&(r._pendingVisibility|=2,At(a,s,2))}},attach:function(){var s=r._current;if(s===null)throw Error(P(456));if(r._pendingVisibility&2){var a=Bi(s,2);a!==null&&(r._pendingVisibility&=-3,At(a,s,2))}}};return t.stateNode=r,t}function Vh(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function Ph(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Nn(t){t.flags|=4}function gy(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!XE(e)){if(e=Jt.current,e!==null&&((he&4194176)===he?pn!==null:(he&62914560)!==he&&!(he&536870912)||e!==pn))throw Qa=vf,g0;t.flags|=8192}}function Ol(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?Lv():536870912,t.lanes|=e,Vs|=e)}function Ca(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ce(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&31457280,i|=r.flags&31457280,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function g1(t,e,n){var i=e.pendingProps;switch(zd(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ce(e),null;case 1:return Ce(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Hn(He),xs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(wa(e)?Nn(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(zf(sn),sn=null))),Ce(e),null;case 26:return n=e.memoizedState,t===null?(Nn(e),n!==null?(Ce(e),gy(e,n)):(Ce(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Nn(e),Ce(e),gy(e,n)):(Ce(e),e.flags&=-16777217):(t.memoizedProps!==i&&Nn(e),Ce(e),e.flags&=-16777217),null;case 27:mu(e),n=Ci.current;var r=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Nn(e);else{if(!i){if(e.stateNode===null)throw Error(P(166));return Ce(e),null}t=mn.current,wa(e)?Gp(e):(t=QE(r,i,n),e.stateNode=t,Nn(e))}return Ce(e),null;case 5:if(mu(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Nn(e);else{if(!i){if(e.stateNode===null)throw Error(P(166));return Ce(e),null}if(t=mn.current,wa(e))Gp(e);else{switch(r=ku(Ci.current),t){case 1:t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=r.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}t[dt]=e,t[xt]=i;e:for(r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}e.stateNode=t;e:switch(st(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Nn(e)}}return Ce(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&Nn(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(P(166));if(t=Ci.current,wa(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,r=Tt,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}t[dt]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||FE(t.nodeValue,n)),t||Sr(e)}else t=ku(t).createTextNode(i),t[dt]=e,e.stateNode=t}return Ce(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(r=wa(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(P(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(P(317));r[dt]=e}else zo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ce(e),r=!1}else sn!==null&&(zf(sn),sn=null),r=!0;if(!r)return e.flags&256?(Ln(e),e):(Ln(e),null)}if(Ln(e),e.flags&128)return e.lanes=n,e;if(n=i!==null,t=t!==null&&t.memoizedState!==null,n){i=e.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==r&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Ol(e,e.updateQueue),Ce(e),null;case 4:return xs(),t===null&&fm(e.stateNode.containerInfo),Ce(e),null;case 10:return Hn(e.type),Ce(e),null;case 19:if(Ze(Fe),r=e.memoizedState,r===null)return Ce(e),null;if(i=(e.flags&128)!==0,s=r.rendering,s===null)if(i)Ca(r,!1);else{if(ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=bu(t),s!==null){for(e.flags|=128,Ca(r,!1),t=s.updateQueue,e.updateQueue=t,Ol(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)CE(n,t),n=n.sibling;return Ie(Fe,Fe.current&1|2),e.child}t=t.sibling}r.tail!==null&&gn()>xu&&(e.flags|=128,i=!0,Ca(r,!1),e.lanes=4194304)}else{if(!i)if(t=bu(s),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Ol(e,t),Ca(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!de)return Ce(e),null}else 2*gn()-r.renderingStartTime>xu&&n!==536870912&&(e.flags|=128,i=!0,Ca(r,!1),e.lanes=4194304);r.isBackwards?(s.sibling=e.child,e.child=s):(t=r.last,t!==null?t.sibling=s:e.child=s,r.last=s)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=gn(),e.sibling=null,t=Fe.current,Ie(Fe,i?t&1|2:t&1),e):(Ce(e),null);case 22:case 23:return Ln(e),Bd(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Ce(e),e.subtreeFlags&6&&(e.flags|=8192)):Ce(e),n=e.updateQueue,n!==null&&Ol(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&Ze(_r),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Hn(He),Ce(e),null;case 25:return null}throw Error(P(156,e.tag))}function p1(t,e){switch(zd(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hn(He),xs(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return mu(e),null;case 13:if(Ln(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));zo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(Fe),null;case 4:return xs(),null;case 10:return Hn(e.type),null;case 22:case 23:return Ln(e),Bd(),t!==null&&Ze(_r),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Hn(He),null;case 25:return null;default:return null}}function NE(t,e){switch(zd(e),e.tag){case 3:Hn(He),xs();break;case 26:case 27:case 5:mu(e);break;case 4:xs();break;case 13:Ln(e);break;case 19:Ze(Fe);break;case 10:Hn(e.type);break;case 22:case 23:Ln(e),Bd(),t!==null&&Ze(_r);break;case 24:Hn(He)}}var y1={getCacheForType:function(t){var e=mt(He),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},_1=typeof WeakMap=="function"?WeakMap:Map,Ne=0,be=null,re=null,he=0,Te=0,kt=null,On=!1,Ws=!1,om=!1,$n=0,ke=0,Fi=0,Er=0,lm=0,Wt=0,Vs=0,to=null,dn=null,Pf=!1,um=0,xu=1/0,Nu=null,Oi=null,Ml=!1,hr=null,no=0,Uf=0,Lf=null,io=0,jf=null;function zt(){if(Ne&2&&he!==0)return he&-he;if(ee.T!==null){var t=Ms;return t!==0?t:hm()}return qv()}function DE(){Wt===0&&(Wt=!(he&536870912)||de?Uv():536870912);var t=Jt.current;return t!==null&&(t.flags|=32),Wt}function At(t,e,n){(t===be&&Te===2||t.cancelPendingCommit!==null)&&(Ps(t,0),Mn(t,he,Wt,!1)),Lo(t,n),(!(Ne&2)||t!==be)&&(t===be&&(!(Ne&2)&&(Er|=n),ke===4&&Mn(t,he,Wt,!1)),An(t))}function OE(t,e,n){if(Ne&6)throw Error(P(327));var i=!n&&(e&60)===0&&(e&t.expiredLanes)===0||Uo(t,e),r=i?T1(t,e):Uh(t,e,!0),s=i;do{if(r===0){Ws&&!i&&Mn(t,e,0,!1);break}else if(r===6)Mn(t,e,0,!On);else{if(n=t.current.alternate,s&&!v1(n)){r=Uh(t,e,!1),s=!1;continue}if(r===2){if(s=e,t.errorRecoveryDisabledLanes&s)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;r=to;var u=l.current.memoizedState.isDehydrated;if(u&&(Ps(l,a).flags|=256),a=Uh(l,a,!1),a!==2){if(om&&!u){l.errorRecoveryDisabledLanes|=s,Er|=s,r=4;break e}s=dn,dn=r,s!==null&&zf(s)}r=a}if(s=!1,r!==2)continue}}if(r===1){Ps(t,0),Mn(t,e,0,!0);break}e:{switch(i=t,r){case 0:case 1:throw Error(P(345));case 4:if((e&4194176)===e){Mn(i,e,Wt,!On);break e}break;case 2:dn=null;break;case 3:case 5:break;default:throw Error(P(329))}if(i.finishedWork=n,i.finishedLanes=e,(e&62914560)===e&&(s=um+300-gn(),10<s)){if(Mn(i,e,Wt,!On),uc(i,0)!==0)break e;i.timeoutHandle=KE(py.bind(null,i,n,dn,Nu,Pf,e,Wt,Er,Vs,On,2,-0,0),s);break e}py(i,n,dn,Nu,Pf,e,Wt,Er,Vs,On,0,-0,0)}}break}while(!0);An(t)}function zf(t){dn===null?dn=t:dn.push.apply(dn,t)}function py(t,e,n,i,r,s,a,l,u,h,d,g,m){var v=e.subtreeFlags;if((v&8192||(v&16785408)===16785408)&&(Eo={stylesheets:null,count:0,unsuspend:eR},SE(e),e=nR(),e!==null)){t.cancelPendingCommit=e(_y.bind(null,t,n,i,r,a,l,u,1,g,m)),Mn(t,s,a,!h);return}_y(t,n,i,r,a,l,u,d,g,m)}function v1(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Bt(s(),r))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mn(t,e,n,i){e&=~lm,e&=~Er,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var r=e;0<r;){var s=31-jt(r),a=1<<s;i[s]=-1,r&=~a}n!==0&&jv(t,n,e)}function vc(){return Ne&6?!0:(Go(0),!1)}function cm(){if(re!==null){if(Te===0)var t=re.return;else t=re,jn=zr=null,Yd(t),Es=null,po=0,t=re;for(;t!==null;)NE(t.alternate,t),t=t.return;re=null}}function Ps(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,L1(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),cm(),be=t,re=n=Di(t.current,null),he=e,Te=0,kt=null,On=!1,Ws=Uo(t,e),om=!1,Vs=Wt=lm=Er=Fi=ke=0,dn=to=null,Pf=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var r=31-jt(i),s=1<<r;e|=t[r],i&=~s}return $n=e,dc(),n}function ME(t,e){ne=null,ee.H=En,e===Ka?(e=Yp(),Te=3):e===g0?(e=Yp(),Te=4):Te=e===rE?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,kt=e,re===null&&(ke=1,Ru(t,$t(e,t.current)))}function kE(){var t=ee.H;return ee.H=En,t===null?En:t}function VE(){var t=ee.A;return ee.A=y1,t}function Bf(){ke=4,On||(he&4194176)!==he&&Jt.current!==null||(Ws=!0),!(Fi&134217727)&&!(Er&134217727)||be===null||Mn(be,he,Wt,!1)}function Uh(t,e,n){var i=Ne;Ne|=2;var r=kE(),s=VE();(be!==t||he!==e)&&(Nu=null,Ps(t,e)),e=!1;var a=ke;e:do try{if(Te!==0&&re!==null){var l=re,u=kt;switch(Te){case 8:cm(),a=6;break e;case 3:case 2:case 6:Jt.current===null&&(e=!0);var h=Te;if(Te=0,kt=null,ps(t,l,u,h),n&&Ws){a=0;break e}break;default:h=Te,Te=0,kt=null,ps(t,l,u,h)}}E1(),a=ke;break}catch(d){ME(t,d)}while(!0);return e&&t.shellSuspendCounter++,jn=zr=null,Ne=i,ee.H=r,ee.A=s,re===null&&(be=null,he=0,dc()),a}function E1(){for(;re!==null;)PE(re)}function T1(t,e){var n=Ne;Ne|=2;var i=kE(),r=VE();be!==t||he!==e?(Nu=null,xu=gn()+500,Ps(t,e)):Ws=Uo(t,e);e:do try{if(Te!==0&&re!==null){e=re;var s=kt;t:switch(Te){case 1:Te=0,kt=null,ps(t,e,s,1);break;case 2:if(Qp(s)){Te=0,kt=null,yy(e);break}e=function(){Te===2&&be===t&&(Te=7),An(t)},s.then(e,e);break e;case 3:Te=7;break e;case 4:Te=5;break e;case 7:Qp(s)?(Te=0,kt=null,yy(e)):(Te=0,kt=null,ps(t,e,s,7));break;case 5:var a=null;switch(re.tag){case 26:a=re.memoizedState;case 5:case 27:var l=re;if(!a||XE(a)){Te=0,kt=null;var u=l.sibling;if(u!==null)re=u;else{var h=l.return;h!==null?(re=h,Ec(h)):re=null}break t}}Te=0,kt=null,ps(t,e,s,5);break;case 6:Te=0,kt=null,ps(t,e,s,6);break;case 8:cm(),ke=6;break e;default:throw Error(P(462))}}b1();break}catch(d){ME(t,d)}while(!0);return jn=zr=null,ee.H=i,ee.A=r,Ne=n,re!==null?0:(be=null,he=0,dc(),ke)}function b1(){for(;re!==null&&!FS();)PE(re)}function PE(t){var e=uE(t.alternate,t,$n);t.memoizedProps=t.pendingProps,e===null?Ec(t):re=e}function yy(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=ly(n,e,e.pendingProps,e.type,void 0,he);break;case 11:e=ly(n,e,e.pendingProps,e.type.render,e.ref,he);break;case 5:Yd(e);default:NE(n,e),e=re=CE(e,$n),e=uE(n,e,$n)}t.memoizedProps=t.pendingProps,e===null?Ec(t):re=e}function ps(t,e,n,i){jn=zr=null,Yd(e),Es=null,po=0;var r=e.return;try{if(c1(t,r,e,n,he)){ke=1,Ru(t,$t(n,t.current)),re=null;return}}catch(s){if(r!==null)throw re=r,s;ke=1,Ru(t,$t(n,t.current)),re=null;return}e.flags&32768?(de||i===1?t=!0:Ws||he&536870912?t=!1:(On=t=!0,(i===2||i===3||i===6)&&(i=Jt.current,i!==null&&i.tag===13&&(i.flags|=16384))),UE(e,t)):Ec(e)}function Ec(t){var e=t;do{if(e.flags&32768){UE(e,On);return}t=e.return;var n=g1(e.alternate,e,$n);if(n!==null){re=n;return}if(e=e.sibling,e!==null){re=e;return}re=e=t}while(e!==null);ke===0&&(ke=5)}function UE(t,e){do{var n=p1(t.alternate,t);if(n!==null){n.flags&=32767,re=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){re=t;return}re=t=n}while(t!==null);ke=6,re=null}function _y(t,e,n,i,r,s,a,l,u,h){var d=ee.T,g=we.p;try{we.p=2,ee.T=null,A1(t,e,n,i,g,r,s,a,l,u,h)}finally{ee.T=d,we.p=g}}function A1(t,e,n,i,r,s,a,l){do Ss();while(hr!==null);if(Ne&6)throw Error(P(327));var u=t.finishedWork;if(i=t.finishedLanes,u===null)return null;if(t.finishedWork=null,t.finishedLanes=0,u===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0,t.cancelPendingCommit=null;var h=u.lanes|u.childLanes;if(h|=Ud,tw(t,i,h,s,a,l),t===be&&(re=be=null,he=0),!(u.subtreeFlags&10256)&&!(u.flags&10256)||Ml||(Ml=!0,Uf=h,Lf=n,I1(gu,function(){return Ss(),null})),n=(u.flags&15990)!==0,u.subtreeFlags&15990||n?(n=ee.T,ee.T=null,s=we.p,we.p=2,a=Ne,Ne|=4,f1(t,u),TE(u,t),Qw(Gf,t.containerInfo),Lu=!!Ff,Gf=Ff=null,t.current=u,yE(t,u.alternate,u),GS(),Ne=a,we.p=s,ee.T=n):t.current=u,Ml?(Ml=!1,hr=t,no=i):LE(t,h),h=t.pendingLanes,h===0&&(Oi=null),XS(u.stateNode),An(t),e!==null)for(r=t.onRecoverableError,u=0;u<e.length;u++)h=e[u],r(h.value,{componentStack:h.stack});return no&3&&Ss(),h=t.pendingLanes,i&4194218&&h&42?t===jf?io++:(io=0,jf=t):io=0,Go(0),null}function LE(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Bo(e)))}function Ss(){if(hr!==null){var t=hr,e=Uf;Uf=0;var n=Bv(no),i=ee.T,r=we.p;try{if(we.p=32>n?32:n,ee.T=null,hr===null)var s=!1;else{n=Lf,Lf=null;var a=hr,l=no;if(hr=null,no=0,Ne&6)throw Error(P(331));var u=Ne;if(Ne|=4,RE(a.current),AE(a,a.current,l,n),Ne=u,Go(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(Po,a)}catch{}s=!0}return s}finally{we.p=r,ee.T=i,LE(t,e)}}return!1}function vy(t,e,n){e=$t(n,e),e=Rf(t.stateNode,e,2),t=Ni(t,e,2),t!==null&&(Lo(t,2),An(t))}function Ee(t,e,n){if(t.tag===3)vy(t,t,n);else for(;e!==null;){if(e.tag===3){vy(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Oi===null||!Oi.has(i))){t=$t(n,t),n=nE(2),i=Ni(e,n,2),i!==null&&(iE(n,i,e,t),Lo(i,2),An(i));break}}e=e.return}}function Lh(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new _1;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(om=!0,r.add(n),t=S1.bind(null,t,e,n),e.then(t,t))}function S1(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,be===t&&(he&n)===n&&(ke===4||ke===3&&(he&62914560)===he&&300>gn()-um?!(Ne&2)&&Ps(t,0):lm|=n,Vs===he&&(Vs=0)),An(t)}function jE(t,e){e===0&&(e=Lv()),t=Bi(t,e),t!==null&&(Lo(t,e),An(t))}function w1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jE(t,n)}function R1(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(P(314))}i!==null&&i.delete(e),jE(t,n)}function I1(t,e){return xd(t,e)}var Du=null,ts=null,qf=!1,Ou=!1,jh=!1,Tr=0;function An(t){t!==ts&&t.next===null&&(ts===null?Du=ts=t:ts=ts.next=t),Ou=!0,qf||(qf=!0,x1(C1))}function Go(t,e){if(!jh&&Ou){jh=!0;do for(var n=!1,i=Du;i!==null;){if(t!==0){var r=i.pendingLanes;if(r===0)var s=0;else{var a=i.suspendedLanes,l=i.pingedLanes;s=(1<<31-jt(42|t)+1)-1,s&=r&~(a&~l),s=s&201326677?s&201326677|1:s?s|2:0}s!==0&&(n=!0,Ey(i,s))}else s=he,s=uc(i,i===be?s:0),!(s&3)||Uo(i,s)||(n=!0,Ey(i,s));i=i.next}while(n);jh=!1}}function C1(){Ou=qf=!1;var t=0;Tr!==0&&(U1()&&(t=Tr),Tr=0);for(var e=gn(),n=null,i=Du;i!==null;){var r=i.next,s=zE(i,e);s===0?(i.next=null,n===null?Du=r:n.next=r,r===null&&(ts=n)):(n=i,(t!==0||s&3)&&(Ou=!0)),i=r}Go(t)}function zE(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var a=31-jt(s),l=1<<a,u=r[a];u===-1?(!(l&n)||l&i)&&(r[a]=ew(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}if(e=be,n=he,n=uc(t,t===e?n:0),i=t.callbackNode,n===0||t===e&&Te===2||t.cancelPendingCommit!==null)return i!==null&&i!==null&&gh(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Uo(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&gh(i),Bv(n)){case 2:case 8:n=Vv;break;case 32:n=gu;break;case 268435456:n=Pv;break;default:n=gu}return i=BE.bind(null,t),n=xd(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&gh(i),t.callbackPriority=2,t.callbackNode=null,2}function BE(t,e){var n=t.callbackNode;if(Ss()&&t.callbackNode!==n)return null;var i=he;return i=uc(t,t===be?i:0),i===0?null:(OE(t,i,e),zE(t,gn()),t.callbackNode!=null&&t.callbackNode===n?BE.bind(null,t):null)}function Ey(t,e){if(Ss())return null;OE(t,e,!0)}function x1(t){j1(function(){Ne&6?xd(kv,t):t()})}function hm(){return Tr===0&&(Tr=Uv()),Tr}function Ty(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Gl(""+t)}function by(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function N1(t,e,n,i,r){if(e==="submit"&&n&&n.stateNode===r){var s=Ty((r[xt]||null).action),a=i.submitter;a&&(e=(e=a[xt]||null)?Ty(e.formAction):a.getAttribute("formAction"),e!==null&&(s=e,a=null));var l=new cc("action","action",null,i,r);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Tr!==0){var u=a?by(r,a):new FormData(r);Sf(n,{pending:!0,data:u,method:r.method,action:s},null,u)}}else typeof s=="function"&&(l.preventDefault(),u=a?by(r,a):new FormData(r),Sf(n,{pending:!0,data:u,method:r.method,action:s},s,u))},currentTarget:r}]})}}for(var zh=0;zh<Hp.length;zh++){var Bh=Hp[zh],D1=Bh.toLowerCase(),O1=Bh[0].toUpperCase()+Bh.slice(1);cn(D1,"on"+O1)}cn(l0,"onAnimationEnd");cn(u0,"onAnimationIteration");cn(c0,"onAnimationStart");cn("dblclick","onDoubleClick");cn("focusin","onFocus");cn("focusout","onBlur");cn($w,"onTransitionRun");cn(Xw,"onTransitionStart");cn(Ww,"onTransitionCancel");cn(h0,"onTransitionEnd");Ns("onMouseEnter",["mouseout","mouseover"]);Ns("onMouseLeave",["mouseout","mouseover"]);Ns("onPointerEnter",["pointerout","pointerover"]);Ns("onPointerLeave",["pointerout","pointerover"]);Vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_o));function qE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break e;s=l,r.currentTarget=h;try{s(r)}catch(d){wu(d)}r.currentTarget=null,s=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break e;s=l,r.currentTarget=h;try{s(r)}catch(d){wu(d)}r.currentTarget=null,s=u}}}}function le(t,e){var n=e[hf];n===void 0&&(n=e[hf]=new Set);var i=t+"__bubble";n.has(i)||(HE(e,t,2,!1),n.add(i))}function qh(t,e,n){var i=0;e&&(i|=4),HE(n,t,i,e)}var kl="_reactListening"+Math.random().toString(36).slice(2);function fm(t){if(!t[kl]){t[kl]=!0,Hv.forEach(function(n){n!=="selectionchange"&&(M1.has(n)||qh(n,!1,t),qh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kl]||(e[kl]=!0,qh("selectionchange",!1,e))}}function HE(t,e,n,i){switch(tT(e)){case 2:var r=sR;break;case 8:r=aR;break;default:r=pm}n=r.bind(null,e,n,t),r=void 0,!gf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Hh(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;a=a.return}for(;l!==null;){if(a=fr(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=s=a;continue e}l=l.parentNode}}i=i.return}Wv(function(){var h=s,d=Od(n),g=[];e:{var m=f0.get(t);if(m!==void 0){var v=cc,C=t;switch(t){case"keypress":if(Ql(n)===0)break e;case"keydown":case"keyup":v=Rw;break;case"focusin":C="focus",v=Eh;break;case"focusout":C="blur",v=Eh;break;case"beforeblur":case"afterblur":v=Eh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Dp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=mw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=xw;break;case l0:case u0:case c0:v=yw;break;case h0:v=Dw;break;case"scroll":case"scrollend":v=fw;break;case"wheel":v=Mw;break;case"copy":case"cut":case"paste":v=vw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Mp;break;case"toggle":case"beforetoggle":v=Vw}var O=(e&4)!==0,M=!O&&(t==="scroll"||t==="scrollend"),A=O?m!==null?m+"Capture":null:m;O=[];for(var E=h,S;E!==null;){var x=E;if(S=x.stateNode,x=x.tag,x!==5&&x!==26&&x!==27||S===null||A===null||(x=ho(E,A),x!=null&&O.push(vo(E,x,S))),M)break;E=E.return}0<O.length&&(m=new v(m,C,null,n,d),g.push({event:m,listeners:O}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==mf&&(C=n.relatedTarget||n.fromElement)&&(fr(C)||C[$s]))break e;if((v||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,v?(C=n.relatedTarget||n.toElement,v=h,C=C?fr(C):null,C!==null&&(M=Ys(C),O=C.tag,C!==M||O!==5&&O!==27&&O!==6)&&(C=null)):(v=null,C=h),v!==C)){if(O=Dp,x="onMouseLeave",A="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(O=Mp,x="onPointerLeave",A="onPointerEnter",E="pointer"),M=v==null?m:ka(v),S=C==null?m:ka(C),m=new O(x,E+"leave",v,n,d),m.target=M,m.relatedTarget=S,x=null,fr(d)===h&&(O=new O(A,E+"enter",C,n,d),O.target=S,O.relatedTarget=M,x=O),M=x,v&&C)t:{for(O=v,A=C,E=0,S=O;S;S=Xr(S))E++;for(S=0,x=A;x;x=Xr(x))S++;for(;0<E-S;)O=Xr(O),E--;for(;0<S-E;)A=Xr(A),S--;for(;E--;){if(O===A||A!==null&&O===A.alternate)break t;O=Xr(O),A=Xr(A)}O=null}else O=null;v!==null&&Ay(g,m,v,O,!1),C!==null&&M!==null&&Ay(g,M,C,O,!0)}}e:{if(m=h?ka(h):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var L=Up;else if(Pp(m))if(i0)L=Gw;else{L=Hw;var j=qw}else v=m.nodeName,!v||v.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?h&&Dd(h.elementType)&&(L=Up):L=Fw;if(L&&(L=L(t,h))){n0(g,L,n,d);break e}j&&j(t,m,h),t==="focusout"&&h&&m.type==="number"&&h.memoizedProps.value!=null&&df(m,"number",m.value)}switch(j=h?ka(h):window,t){case"focusin":(Pp(j)||j.contentEditable==="true")&&(cs=j,pf=h,Ga=null);break;case"focusout":Ga=pf=cs=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,qp(g,n,d);break;case"selectionchange":if(Yw)break;case"keydown":case"keyup":qp(g,n,d)}var T;if(Vd)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else us?e0(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Jv&&n.locale!=="ko"&&(us||_!=="onCompositionStart"?_==="onCompositionEnd"&&us&&(T=Zv()):(Ri=d,Md="value"in Ri?Ri.value:Ri.textContent,us=!0)),j=Mu(h,_),0<j.length&&(_=new Op(_,t,null,n,d),g.push({event:_,listeners:j}),T?_.data=T:(T=t0(n),T!==null&&(_.data=T)))),(T=Uw?Lw(t,n):jw(t,n))&&(_=Mu(h,"onBeforeInput"),0<_.length&&(j=new Op("onBeforeInput","beforeinput",null,n,d),g.push({event:j,listeners:_}),j.data=T)),N1(g,t,h,n,d)}qE(g,e)})}function vo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r=r.tag,r!==5&&r!==26&&r!==27||s===null||(r=ho(t,n),r!=null&&i.unshift(vo(t,r,s)),r=ho(t,e),r!=null&&i.push(vo(t,r,s))),t=t.return}return i}function Xr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ay(t,e,n,i,r){for(var s=e._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,r?(h=ho(n,s),h!=null&&a.unshift(vo(n,h,u))):r||(h=ho(n,s),h!=null&&a.push(vo(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var k1=/\r\n?/g,V1=/\u0000|\uFFFD/g;function Sy(t){return(typeof t=="string"?t:""+t).replace(k1,`
`).replace(V1,"")}function FE(t,e){return e=Sy(e),Sy(t)===e}function Tc(){}function ge(t,e,n,i,r,s){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Ds(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Ds(t,""+i);break;case"className":Rl(t,"class",i);break;case"tabIndex":Rl(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Rl(t,n,i);break;case"style":Xv(t,i,s);break;case"data":if(e!=="object"){Rl(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Gl(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&ge(t,e,"name",r.name,r,null),ge(t,e,"formEncType",r.formEncType,r,null),ge(t,e,"formMethod",r.formMethod,r,null),ge(t,e,"formTarget",r.formTarget,r,null)):(ge(t,e,"encType",r.encType,r,null),ge(t,e,"method",r.method,r,null),ge(t,e,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Gl(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Tc);break;case"onScroll":i!=null&&le("scroll",t);break;case"onScrollEnd":i!=null&&le("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(P(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Gl(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":le("beforetoggle",t),le("toggle",t),Fl(t,"popover",i);break;case"xlinkActuate":In(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":In(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":In(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":In(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":In(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":In(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":In(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":In(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":In(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Fl(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=cw.get(n)||n,Fl(t,n,i))}}function Hf(t,e,n,i,r,s){switch(n){case"style":Xv(t,i,s);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(P(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(P(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Ds(t,i):(typeof i=="number"||typeof i=="bigint")&&Ds(t,""+i);break;case"onScroll":i!=null&&le("scroll",t);break;case"onScrollEnd":i!=null&&le("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Tc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fv.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),e=n.slice(2,r?n.length-7:void 0),s=t[xt]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,r),typeof i=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,r);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Fl(t,n,i)}}}function st(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":le("error",t),le("load",t);var i=!1,r=!1,s;for(s in n)if(n.hasOwnProperty(s)){var a=n[s];if(a!=null)switch(s){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(P(137,e));default:ge(t,e,s,a,n,null)}}r&&ge(t,e,"srcSet",n.srcSet,n,null),i&&ge(t,e,"src",n.src,n,null);return;case"input":le("invalid",t);var l=s=a=r=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(d!=null)switch(i){case"name":r=d;break;case"type":a=d;break;case"checked":u=d;break;case"defaultChecked":h=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(P(137,e));break;default:ge(t,e,i,d,n,null)}}Qv(t,s,l,u,h,a,r,!1),pu(t);return;case"select":le("invalid",t),i=a=s=null;for(r in n)if(n.hasOwnProperty(r)&&(l=n[r],l!=null))switch(r){case"value":s=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:ge(t,e,r,l,n,null)}e=s,n=a,t.multiple=!!i,e!=null?_s(t,!!i,e,!1):n!=null&&_s(t,!!i,n,!0);return;case"textarea":le("invalid",t),s=r=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":r=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(P(91));break;default:ge(t,e,a,l,n,null)}$v(t,i,r,s),pu(t);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:ge(t,e,u,i,n,null)}return;case"dialog":le("cancel",t),le("close",t);break;case"iframe":case"object":le("load",t);break;case"video":case"audio":for(i=0;i<_o.length;i++)le(_o[i],t);break;case"image":le("error",t),le("load",t);break;case"details":le("toggle",t);break;case"embed":case"source":case"link":le("error",t),le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(P(137,e));default:ge(t,e,h,i,n,null)}return;default:if(Dd(e)){for(d in n)n.hasOwnProperty(d)&&(i=n[d],i!==void 0&&Hf(t,e,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&ge(t,e,l,i,n,null))}function P1(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,s=null,a=null,l=null,u=null,h=null,d=null;for(v in n){var g=n[v];if(n.hasOwnProperty(v)&&g!=null)switch(v){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(v)||ge(t,e,v,null,i,g)}}for(var m in i){var v=i[m];if(g=n[m],i.hasOwnProperty(m)&&(v!=null||g!=null))switch(m){case"type":s=v;break;case"name":r=v;break;case"checked":h=v;break;case"defaultChecked":d=v;break;case"value":a=v;break;case"defaultValue":l=v;break;case"children":case"dangerouslySetInnerHTML":if(v!=null)throw Error(P(137,e));break;default:v!==g&&ge(t,e,m,v,i,g)}}ff(t,a,l,u,h,d,s,r);return;case"select":v=a=l=m=null;for(s in n)if(u=n[s],n.hasOwnProperty(s)&&u!=null)switch(s){case"value":break;case"multiple":v=u;default:i.hasOwnProperty(s)||ge(t,e,s,null,i,u)}for(r in i)if(s=i[r],u=n[r],i.hasOwnProperty(r)&&(s!=null||u!=null))switch(r){case"value":m=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==u&&ge(t,e,r,s,i,u)}e=l,n=a,i=v,m!=null?_s(t,!!n,m,!1):!!i!=!!n&&(e!=null?_s(t,!!n,e,!0):_s(t,!!n,n?[]:"",!1));return;case"textarea":v=m=null;for(l in n)if(r=n[l],n.hasOwnProperty(l)&&r!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:ge(t,e,l,null,i,r)}for(a in i)if(r=i[a],s=n[a],i.hasOwnProperty(a)&&(r!=null||s!=null))switch(a){case"value":m=r;break;case"defaultValue":v=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(P(91));break;default:r!==s&&ge(t,e,a,r,i,s)}Yv(t,m,v);return;case"option":for(var C in n)if(m=n[C],n.hasOwnProperty(C)&&m!=null&&!i.hasOwnProperty(C))switch(C){case"selected":t.selected=!1;break;default:ge(t,e,C,null,i,m)}for(u in i)if(m=i[u],v=n[u],i.hasOwnProperty(u)&&m!==v&&(m!=null||v!=null))switch(u){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ge(t,e,u,m,i,v)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)m=n[O],n.hasOwnProperty(O)&&m!=null&&!i.hasOwnProperty(O)&&ge(t,e,O,null,i,m);for(h in i)if(m=i[h],v=n[h],i.hasOwnProperty(h)&&m!==v&&(m!=null||v!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(P(137,e));break;default:ge(t,e,h,m,i,v)}return;default:if(Dd(e)){for(var M in n)m=n[M],n.hasOwnProperty(M)&&m!==void 0&&!i.hasOwnProperty(M)&&Hf(t,e,M,void 0,i,m);for(d in i)m=i[d],v=n[d],!i.hasOwnProperty(d)||m===v||m===void 0&&v===void 0||Hf(t,e,d,m,i,v);return}}for(var A in n)m=n[A],n.hasOwnProperty(A)&&m!=null&&!i.hasOwnProperty(A)&&ge(t,e,A,null,i,m);for(g in i)m=i[g],v=n[g],!i.hasOwnProperty(g)||m===v||m==null&&v==null||ge(t,e,g,m,i,v)}var Ff=null,Gf=null;function ku(t){return t.nodeType===9?t:t.ownerDocument}function wy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function GE(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Kf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fh=null;function U1(){var t=window.event;return t&&t.type==="popstate"?t===Fh?!1:(Fh=t,!0):(Fh=null,!1)}var KE=typeof setTimeout=="function"?setTimeout:void 0,L1=typeof clearTimeout=="function"?clearTimeout:void 0,Ry=typeof Promise=="function"?Promise:void 0,j1=typeof queueMicrotask=="function"?queueMicrotask:typeof Ry<"u"?function(t){return Ry.resolve(null).then(t).catch(z1)}:KE;function z1(t){setTimeout(function(){throw t})}function Gh(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),So(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);So(e)}function Qf(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Qf(n),Nd(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function B1(t,e,n,i){for(;t.nodeType===1;){var r=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[co])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==r.rel||t.getAttribute("href")!==(r.href==null?null:r.href)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||t.getAttribute("title")!==(r.title==null?null:r.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(r.src==null?null:r.src)||t.getAttribute("type")!==(r.type==null?null:r.type)||t.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=r.name==null?null:""+r.name;if(r.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=an(t.nextSibling),t===null)break}return null}function q1(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=an(t.nextSibling),t===null))return null;return t}function an(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}function Iy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function QE(t,e,n){switch(e=ku(n),t){case"html":if(t=e.documentElement,!t)throw Error(P(452));return t;case"head":if(t=e.head,!t)throw Error(P(453));return t;case"body":if(t=e.body,!t)throw Error(P(454));return t;default:throw Error(P(451))}}var en=new Map,Cy=new Set;function Vu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.ownerDocument}var ti=we.d;we.d={f:H1,r:F1,D:G1,C:K1,L:Q1,m:Y1,X:X1,S:$1,M:W1};function H1(){var t=ti.f(),e=vc();return t||e}function F1(t){var e=Xs(t);e!==null&&e.tag===5&&e.type==="form"?Q0(e):ti.r(t)}var Zs=typeof document>"u"?null:document;function YE(t,e,n){var i=Zs;if(i&&typeof e=="string"&&e){var r=Yt(e);r='link[rel="'+t+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),Cy.has(r)||(Cy.add(r),t={rel:t,crossOrigin:n,href:e},i.querySelector(r)===null&&(e=i.createElement("link"),st(e,"link",t),Xe(e),i.head.appendChild(e)))}}function G1(t){ti.D(t),YE("dns-prefetch",t,null)}function K1(t,e){ti.C(t,e),YE("preconnect",t,e)}function Q1(t,e,n){ti.L(t,e,n);var i=Zs;if(i&&t&&e){var r='link[rel="preload"][as="'+Yt(e)+'"]';e==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+Yt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+Yt(n.imageSizes)+'"]')):r+='[href="'+Yt(t)+'"]';var s=r;switch(e){case"style":s=Us(t);break;case"script":s=Js(t)}en.has(s)||(t=Re({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),en.set(s,t),i.querySelector(r)!==null||e==="style"&&i.querySelector(Ko(s))||e==="script"&&i.querySelector(Qo(s))||(e=i.createElement("link"),st(e,"link",t),Xe(e),i.head.appendChild(e)))}}function Y1(t,e){ti.m(t,e);var n=Zs;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",r='link[rel="modulepreload"][as="'+Yt(i)+'"][href="'+Yt(t)+'"]',s=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Js(t)}if(!en.has(s)&&(t=Re({rel:"modulepreload",href:t},e),en.set(s,t),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Qo(s)))return}i=n.createElement("link"),st(i,"link",t),Xe(i),n.head.appendChild(i)}}}function $1(t,e,n){ti.S(t,e,n);var i=Zs;if(i&&t){var r=ys(i).hoistableStyles,s=Us(t);e=e||"default";var a=r.get(s);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Ko(s)))l.loading=5;else{t=Re({rel:"stylesheet",href:t,"data-precedence":e},n),(n=en.get(s))&&dm(t,n);var u=a=i.createElement("link");Xe(u),st(u,"link",t),u._p=new Promise(function(h,d){u.onload=h,u.onerror=d}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,Jl(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:l},r.set(s,a)}}}function X1(t,e){ti.X(t,e);var n=Zs;if(n&&t){var i=ys(n).hoistableScripts,r=Js(t),s=i.get(r);s||(s=n.querySelector(Qo(r)),s||(t=Re({src:t,async:!0},e),(e=en.get(r))&&mm(t,e),s=n.createElement("script"),Xe(s),st(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function W1(t,e){ti.M(t,e);var n=Zs;if(n&&t){var i=ys(n).hoistableScripts,r=Js(t),s=i.get(r);s||(s=n.querySelector(Qo(r)),s||(t=Re({src:t,async:!0,type:"module"},e),(e=en.get(r))&&mm(t,e),s=n.createElement("script"),Xe(s),st(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},i.set(r,s))}}function xy(t,e,n,i){var r=(r=Ci.current)?Vu(r):null;if(!r)throw Error(P(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Us(n.href),n=ys(r).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Us(n.href);var s=ys(r).hoistableStyles,a=s.get(t);if(a||(r=r.ownerDocument||r,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,a),(s=r.querySelector(Ko(t)))&&!s._p&&(a.instance=s,a.state.loading=5),en.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},en.set(t,n),s||Z1(r,t,n,a.state))),e&&i===null)throw Error(P(528,""));return a}if(e&&i!==null)throw Error(P(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Js(n),n=ys(r).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(P(444,t))}}function Us(t){return'href="'+Yt(t)+'"'}function Ko(t){return'link[rel="stylesheet"]['+t+"]"}function $E(t){return Re({},t,{"data-precedence":t.precedence,precedence:null})}function Z1(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),st(e,"link",n),Xe(e),t.head.appendChild(e))}function Js(t){return'[src="'+Yt(t)+'"]'}function Qo(t){return"script[async]"+t}function Ny(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+Yt(n.href)+'"]');if(i)return e.instance=i,Xe(i),i;var r=Re({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),Xe(i),st(i,"style",r),Jl(i,n.precedence,t),e.instance=i;case"stylesheet":r=Us(n.href);var s=t.querySelector(Ko(r));if(s)return e.state.loading|=4,e.instance=s,Xe(s),s;i=$E(n),(r=en.get(r))&&dm(i,r),s=(t.ownerDocument||t).createElement("link"),Xe(s);var a=s;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),st(s,"link",i),e.state.loading|=4,Jl(s,n.precedence,t),e.instance=s;case"script":return s=Js(n.src),(r=t.querySelector(Qo(s)))?(e.instance=r,Xe(r),r):(i=n,(r=en.get(s))&&(i=Re({},n),mm(i,r)),t=t.ownerDocument||t,r=t.createElement("script"),Xe(r),st(r,"link",i),t.head.appendChild(r),e.instance=r);case"void":return null;default:throw Error(P(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Jl(i,n.precedence,t));return e.instance}function Jl(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,s=r,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===e)s=l;else if(s!==r)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function dm(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function mm(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var eu=null;function Dy(t,e,n){if(eu===null){var i=new Map,r=eu=new Map;r.set(n,i)}else r=eu,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),r=0;r<n.length;r++){var s=n[r];if(!(s[co]||s[dt]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var a=s.getAttribute(e)||"";a=t+a;var l=i.get(a);l?l.push(s):i.set(a,[s])}}return i}function Oy(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function J1(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function XE(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var Eo=null;function eR(){}function tR(t,e,n){if(Eo===null)throw Error(P(475));var i=Eo;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var r=Us(n.href),s=t.querySelector(Ko(r));if(s){t=s._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=Pu.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=s,Xe(s);return}s=t.ownerDocument||t,n=$E(n),(r=en.get(r))&&dm(n,r),s=s.createElement("link"),Xe(s);var a=s;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),st(s,"link",n),e.instance=s}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(i.count++,e=Pu.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}function nR(){if(Eo===null)throw Error(P(475));var t=Eo;return t.stylesheets&&t.count===0&&Yf(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&Yf(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Pu(){if(this.count--,this.count===0){if(this.stylesheets)Yf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Uu=null;function Yf(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Uu=new Map,e.forEach(iR,t),Uu=null,Pu.call(t))}function iR(t,e){if(!(e.state.loading&4)){var n=Uu.get(t);if(n)var i=n.get(null);else{n=new Map,Uu.set(t,n);for(var r=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<r.length;s++){var a=r[s];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}r=e.instance,a=r.getAttribute("data-precedence"),s=n.get(a)||i,s===i&&n.set(null,r),n.set(a,r),this.count++,i=Pu.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),s?s.parentNode.insertBefore(r,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(r,t.firstChild)),e.state.loading|=4}}var To={$$typeof:Vn,Provider:null,Consumer:null,_currentValue:pr,_currentValue2:pr,_threadCount:0};function rR(t,e,n,i,r,s,a,l){this.tag=1,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ph(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ph(0),this.hiddenUpdates=ph(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function WE(t,e,n,i,r,s,a,l,u,h,d,g){return t=new rR(t,e,n,a,l,u,h,g),e=1,s===!0&&(e|=24),s=Xt(3,null,null,e),t.current=s,s.stateNode=t,e=qd(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:i,isDehydrated:n,cache:e},im(s),t}function ZE(t){return t?(t=ds,t):ds}function JE(t,e,n,i,r,s){r=ZE(r),i.context===null?i.context=r:i.pendingContext=r,i=xi(e),i.payload={element:n},s=s===void 0?null:s,s!==null&&(i.callback=s),n=Ni(t,i,e),n!==null&&(At(n,t,e),Wa(n,t,e))}function My(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gm(t,e){My(t,e),(t=t.alternate)&&My(t,e)}function eT(t){if(t.tag===13){var e=Bi(t,67108864);e!==null&&At(e,t,67108864),gm(t,67108864)}}var Lu=!0;function sR(t,e,n,i){var r=ee.T;ee.T=null;var s=we.p;try{we.p=2,pm(t,e,n,i)}finally{we.p=s,ee.T=r}}function aR(t,e,n,i){var r=ee.T;ee.T=null;var s=we.p;try{we.p=8,pm(t,e,n,i)}finally{we.p=s,ee.T=r}}function pm(t,e,n,i){if(Lu){var r=$f(i);if(r===null)Hh(t,e,i,ju,n),ky(t,i);else if(lR(r,t,e,n,i))i.stopPropagation();else if(ky(t,i),e&4&&-1<oR.indexOf(t)){for(;r!==null;){var s=Xs(r);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var a=lr(s.pendingLanes);if(a!==0){var l=s;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-jt(a);l.entanglements[1]|=u,a&=~u}An(s),!(Ne&6)&&(xu=gn()+500,Go(0))}}break;case 13:l=Bi(s,2),l!==null&&At(l,s,2),vc(),gm(s,2)}if(s=$f(i),s===null&&Hh(t,e,i,ju,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Hh(t,e,i,null,n)}}function $f(t){return t=Od(t),ym(t)}var ju=null;function ym(t){if(ju=null,t=fr(t),t!==null){var e=Ys(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Ov(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return ju=t,null}function tT(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(KS()){case kv:return 2;case Vv:return 8;case gu:case QS:return 32;case Pv:return 268435456;default:return 32}default:return 32}}var Xf=!1,Mi=null,ki=null,Vi=null,bo=new Map,Ao=new Map,Ti=[],oR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ky(t,e){switch(t){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":ki=null;break;case"mouseover":case"mouseout":Vi=null;break;case"pointerover":case"pointerout":bo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ao.delete(e.pointerId)}}function xa(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Xs(e),e!==null&&eT(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function lR(t,e,n,i,r){switch(e){case"focusin":return Mi=xa(Mi,t,e,n,i,r),!0;case"dragenter":return ki=xa(ki,t,e,n,i,r),!0;case"mouseover":return Vi=xa(Vi,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return bo.set(s,xa(bo.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ao.set(s,xa(Ao.get(s)||null,t,e,n,i,r)),!0}return!1}function nT(t){var e=fr(t.target);if(e!==null){var n=Ys(e);if(n!==null){if(e=n.tag,e===13){if(e=Ov(n),e!==null){t.blockedOn=e,nw(t.priority,function(){if(n.tag===13){var i=zt(),r=Bi(n,i);r!==null&&At(r,n,i),gm(n,i)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$f(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);mf=i,n.target.dispatchEvent(i),mf=null}else return e=Xs(n),e!==null&&eT(e),t.blockedOn=n,!1;e.shift()}return!0}function Vy(t,e,n){tu(t)&&n.delete(e)}function uR(){Xf=!1,Mi!==null&&tu(Mi)&&(Mi=null),ki!==null&&tu(ki)&&(ki=null),Vi!==null&&tu(Vi)&&(Vi=null),bo.forEach(Vy),Ao.forEach(Vy)}function Vl(t,e){t.blockedOn===e&&(t.blockedOn=null,Xf||(Xf=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,uR)))}var Pl=null;function Py(t){Pl!==t&&(Pl=t,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,function(){Pl===t&&(Pl=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],r=t[e+2];if(typeof i!="function"){if(ym(i||n)===null)continue;break}var s=Xs(n);s!==null&&(t.splice(e,3),e-=3,Sf(s,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function So(t){function e(u){return Vl(u,t)}Mi!==null&&Vl(Mi,t),ki!==null&&Vl(ki,t),Vi!==null&&Vl(Vi,t),bo.forEach(e),Ao.forEach(e);for(var n=0;n<Ti.length;n++){var i=Ti[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Ti.length&&(n=Ti[0],n.blockedOn===null);)nT(n),n.blockedOn===null&&Ti.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],s=n[i+1],a=r[xt]||null;if(typeof s=="function")a||Py(n);else if(a){var l=null;if(s&&s.hasAttribute("formAction")){if(r=s,a=s[xt]||null)l=a.formAction;else if(ym(r)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Py(n)}}}function _m(t){this._internalRoot=t}bc.prototype.render=_m.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));var n=e.current,i=zt();JE(n,i,t,e,null,null)};bc.prototype.unmount=_m.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;t.tag===0&&Ss(),JE(t.current,2,null,t,null,null),vc(),e[$s]=null}};function bc(t){this._internalRoot=t}bc.prototype.unstable_scheduleHydration=function(t){if(t){var e=qv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ti.length&&e!==0&&e<Ti[n].priority;n++);Ti.splice(n,0,t),n===0&&nT(t)}};var Uy=Iv.version;if(Uy!=="19.0.0")throw Error(P(527,Uy,"19.0.0"));we.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=HS(e),t=t!==null?Mv(t):null,t=t===null?null:t.stateNode,t};var cR={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,findFiberByHostInstance:fr,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{Po=Ul.inject(cR),Lt=Ul}catch{}}oc.createRoot=function(t,e){if(!Cv(t))throw Error(P(299));var n=!1,i="",r=J0,s=eE,a=tE,l=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(r=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(l=e.unstable_transitionCallbacks)),e=WE(t,1,!1,null,null,n,i,r,s,a,l,null),t[$s]=e.current,fm(t.nodeType===8?t.parentNode:t),new _m(e)};oc.hydrateRoot=function(t,e,n){if(!Cv(t))throw Error(P(299));var i=!1,r="",s=J0,a=eE,l=tE,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),e=WE(t,1,!0,e,n??null,i,r,s,a,l,u,h),e.context=ZE(null),n=e.current,i=zt(),r=xi(i),r.callback=null,Ni(n,r,i),e.current.lanes=i,Lo(e,i),An(e),t[$s]=e.current,fm(t),new bc(e)};oc.version="19.0.0";function iT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iT)}catch(t){console.error(t)}}iT(),Tv.exports=oc;var hR=Tv.exports;/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rT=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=G.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:a,...l},u)=>G.createElement("svg",{ref:u,...dR,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:rT("lucide",r),...l},[...a.map(([h,d])=>G.createElement(h,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=(t,e)=>{const n=G.forwardRef(({className:i,...r},s)=>G.createElement(mR,{ref:s,iconNode:e,className:rT(`lucide-${fR(t)}`,i),...r}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ac=pt("Calendar",gR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],sT=pt("ChartColumn",pR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],aT=pt("ChevronLeft",yR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],oT=pt("ChevronRight",_R);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],lT=pt("CreditCard",vR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],TR=pt("Link",ER);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],AR=pt("List",bR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],wR=pt("LogOut",SR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],IR=pt("MapPin",RR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],xR=pt("Menu",CR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],uT=pt("Pencil",NR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vm=pt("Plus",DR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],MR=pt("Trash2",OR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],cT=pt("UserCheck",kR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],PR=pt("User",VR);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],hT=pt("Users",UR),LR=()=>{};var Ly={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},jR=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],a=t[n++],l=t[n++],u=((r&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|a&63)}}return e.join("")},dT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],a=r+1<t.length,l=a?t[r+1]:0,u=r+2<t.length,h=u?t[r+2]:0,d=s>>2,g=(s&3)<<4|l>>4;let m=(l&15)<<2|h>>6,v=h&63;u||(v=64,a||(m=64)),i.push(n[d],n[g],n[m],n[v])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const g=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||l==null||h==null||g==null)throw new zR;const m=s<<2|l>>4;if(i.push(m),h!==64){const v=l<<4&240|h>>2;if(i.push(v),g!==64){const C=h<<6&192|g;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BR=function(t){const e=fT(t);return dT.encodeByteArray(e,!0)},zu=function(t){return BR(t).replace(/\./g,"")},mT=function(t){try{return dT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=()=>qR().__FIREBASE_DEFAULTS__,FR=()=>{if(typeof process>"u"||typeof Ly>"u")return;const t=Ly.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mT(t[1]);return e&&JSON.parse(e)},Sc=()=>{try{return LR()||HR()||FR()||GR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gT=t=>{var e,n;return(n=(e=Sc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},KR=t=>{const e=gT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},pT=()=>{var t;return(t=Sc())===null||t===void 0?void 0:t.config},yT=t=>{var e;return(e=Sc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zu(JSON.stringify(n)),zu(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $R(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function XR(){var t;const e=(t=Sc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eI(){const t=gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tI(){return!XR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nI(){try{return typeof indexedDB=="object"}catch{return!1}}function iI(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="FirebaseError";class ni extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=rI,Object.setPrototypeOf(this,ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yo.prototype.create)}}class Yo{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],a=s?sI(s,i):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new ni(r,l,i)}}function sI(t,e){return t.replace(aI,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const aI=/\{\$([^}]+)}/g;function oI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xr(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],a=e[r];if(jy(s)&&jy(a)){if(!xr(s,a))return!1}else if(s!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function jy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Pa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Ua(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function lI(t,e){const n=new uI(t,e);return n.subscribe.bind(n)}class uI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");cI(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Kh),r.error===void 0&&(r.error=Kh),r.complete===void 0&&(r.complete=Kh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t){return t&&t._delegate?t._delegate:t}class Nr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new QR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dI(e))try{this.getOrInitializeService({instanceIdentifier:cr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cr){return this.instances.has(e)}getOptions(e=cr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&a.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fI(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=cr){return this.component?this.component.multipleInstances?e:cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fI(t){return t===cr?void 0:t}function dI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const gI={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},pI=se.INFO,yI={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},_I=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=yI[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Em{constructor(e){this.name=e,this._logLevel=pI,this._logHandler=_I,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const vI=(t,e)=>e.some(n=>t instanceof n);let zy,By;function EI(){return zy||(zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TI(){return By||(By=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _T=new WeakMap,Wf=new WeakMap,vT=new WeakMap,Qh=new WeakMap,Tm=new WeakMap;function bI(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Pi(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&_T.set(n,t)}).catch(()=>{}),Tm.set(e,t),e}function AI(t){if(Wf.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Wf.set(t,e)}let Zf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||vT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SI(t){Zf=t(Zf)}function wI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Yh(this),e,...n);return vT.set(i,e.sort?e.sort():[e]),Pi(i)}:TI().includes(t)?function(...e){return t.apply(Yh(this),e),Pi(_T.get(this))}:function(...e){return Pi(t.apply(Yh(this),e))}}function RI(t){return typeof t=="function"?wI(t):(t instanceof IDBTransaction&&AI(t),vI(t,EI())?new Proxy(t,Zf):t)}function Pi(t){if(t instanceof IDBRequest)return bI(t);if(Qh.has(t))return Qh.get(t);const e=RI(t);return e!==t&&(Qh.set(t,e),Tm.set(e,t)),e}const Yh=t=>Tm.get(t);function II(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const a=indexedDB.open(t,e),l=Pi(a);return i&&a.addEventListener("upgradeneeded",u=>{i(Pi(a.result),u.oldVersion,u.newVersion,Pi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const CI=["get","getKey","getAll","getAllKeys","count"],xI=["put","add","delete","clear"],$h=new Map;function qy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($h.get(e))return $h.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=xI.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||CI.includes(n)))return;const s=async function(a,...l){const u=this.transaction(a,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return $h.set(e,s),s}SI(t=>({...t,get:(e,n,i)=>qy(e,n)||t.get(e,n,i),has:(e,n)=>!!qy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DI(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function DI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jf="@firebase/app",Hy="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new Em("@firebase/app"),OI="@firebase/app-compat",MI="@firebase/analytics-compat",kI="@firebase/analytics",VI="@firebase/app-check-compat",PI="@firebase/app-check",UI="@firebase/auth",LI="@firebase/auth-compat",jI="@firebase/database",zI="@firebase/data-connect",BI="@firebase/database-compat",qI="@firebase/functions",HI="@firebase/functions-compat",FI="@firebase/installations",GI="@firebase/installations-compat",KI="@firebase/messaging",QI="@firebase/messaging-compat",YI="@firebase/performance",$I="@firebase/performance-compat",XI="@firebase/remote-config",WI="@firebase/remote-config-compat",ZI="@firebase/storage",JI="@firebase/storage-compat",eC="@firebase/firestore",tC="@firebase/vertexai",nC="@firebase/firestore-compat",iC="firebase",rC="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed="[DEFAULT]",sC={[Jf]:"fire-core",[OI]:"fire-core-compat",[kI]:"fire-analytics",[MI]:"fire-analytics-compat",[PI]:"fire-app-check",[VI]:"fire-app-check-compat",[UI]:"fire-auth",[LI]:"fire-auth-compat",[jI]:"fire-rtdb",[zI]:"fire-data-connect",[BI]:"fire-rtdb-compat",[qI]:"fire-fn",[HI]:"fire-fn-compat",[FI]:"fire-iid",[GI]:"fire-iid-compat",[KI]:"fire-fcm",[QI]:"fire-fcm-compat",[YI]:"fire-perf",[$I]:"fire-perf-compat",[XI]:"fire-rc",[WI]:"fire-rc-compat",[ZI]:"fire-gcs",[JI]:"fire-gcs-compat",[eC]:"fire-fst",[nC]:"fire-fst-compat",[tC]:"fire-vertex","fire-js":"fire-js",[iC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=new Map,aC=new Map,td=new Map;function Fy(t,e){try{t.container.addComponent(e)}catch(n){Xn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ls(t){const e=t.name;if(td.has(e))return Xn.debug(`There were multiple attempts to register component ${e}.`),!1;td.set(e,t);for(const n of Bu.values())Fy(n,t);for(const n of aC.values())Fy(n,t);return!0}function bm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Pt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new Yo("app","Firebase",oC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Nr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=rC;function ET(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ed,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ui.create("bad-app-name",{appName:String(r)});if(n||(n=pT()),!n)throw Ui.create("no-options");const s=Bu.get(r);if(s){if(xr(n,s.options)&&xr(i,s.config))return s;throw Ui.create("duplicate-app",{appName:r})}const a=new mI(r);for(const u of td.values())a.addComponent(u);const l=new lC(n,i,a);return Bu.set(r,l),l}function TT(t=ed){const e=Bu.get(t);if(!e&&t===ed&&pT())return ET();if(!e)throw Ui.create("no-app",{appName:t});return e}function Li(t,e,n){var i;let r=(i=sC[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xn.warn(l.join(" "));return}Ls(new Nr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="firebase-heartbeat-database",cC=1,wo="firebase-heartbeat-store";let Xh=null;function bT(){return Xh||(Xh=II(uC,cC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ui.create("idb-open",{originalErrorMessage:t.message})})),Xh}async function hC(t){try{const n=(await bT()).transaction(wo),i=await n.objectStore(wo).get(AT(t));return await n.done,i}catch(e){if(e instanceof ni)Xn.warn(e.message);else{const n=Ui.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xn.warn(n.message)}}}async function Gy(t,e){try{const i=(await bT()).transaction(wo,"readwrite");await i.objectStore(wo).put(e,AT(t)),await i.done}catch(n){if(n instanceof ni)Xn.warn(n.message);else{const i=Ui.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xn.warn(i.message)}}}function AT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=1024,dC=30;class mC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pC(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ky();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>dC){const a=yC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Xn.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ky(),{heartbeatsToSend:i,unsentEntries:r}=gC(this._heartbeatsCache.heartbeats),s=zu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Xn.warn(n),""}}}function Ky(){return new Date().toISOString().substring(0,10)}function gC(t,e=fC){const n=[];let i=t.slice();for(const r of t){const s=n.find(a=>a.agent===r.agent);if(s){if(s.dates.push(r.date),Qy(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Qy(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class pC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nI()?iI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Gy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Gy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Qy(t){return zu(JSON.stringify({version:2,heartbeats:t})).length}function yC(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t){Ls(new Nr("platform-logger",e=>new NI(e),"PRIVATE")),Ls(new Nr("heartbeat",e=>new mC(e),"PRIVATE")),Li(Jf,Hy,t),Li(Jf,Hy,"esm2017"),Li("fire-js","")}_C("");var vC="firebase",EC="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li(vC,EC,"app");var Yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ji,ST;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function b(){}b.prototype=_.prototype,T.D=_.prototype,T.prototype=new b,T.prototype.constructor=T,T.C=function(w,I,D){for(var R=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)R[yt-2]=arguments[yt];return _.prototype[I].apply(w,R)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,_,b){b||(b=0);var w=Array(16);if(typeof _=="string")for(var I=0;16>I;++I)w[I]=_.charCodeAt(b++)|_.charCodeAt(b++)<<8|_.charCodeAt(b++)<<16|_.charCodeAt(b++)<<24;else for(I=0;16>I;++I)w[I]=_[b++]|_[b++]<<8|_[b++]<<16|_[b++]<<24;_=T.g[0],b=T.g[1],I=T.g[2];var D=T.g[3],R=_+(D^b&(I^D))+w[0]+3614090360&4294967295;_=b+(R<<7&4294967295|R>>>25),R=D+(I^_&(b^I))+w[1]+3905402710&4294967295,D=_+(R<<12&4294967295|R>>>20),R=I+(b^D&(_^b))+w[2]+606105819&4294967295,I=D+(R<<17&4294967295|R>>>15),R=b+(_^I&(D^_))+w[3]+3250441966&4294967295,b=I+(R<<22&4294967295|R>>>10),R=_+(D^b&(I^D))+w[4]+4118548399&4294967295,_=b+(R<<7&4294967295|R>>>25),R=D+(I^_&(b^I))+w[5]+1200080426&4294967295,D=_+(R<<12&4294967295|R>>>20),R=I+(b^D&(_^b))+w[6]+2821735955&4294967295,I=D+(R<<17&4294967295|R>>>15),R=b+(_^I&(D^_))+w[7]+4249261313&4294967295,b=I+(R<<22&4294967295|R>>>10),R=_+(D^b&(I^D))+w[8]+1770035416&4294967295,_=b+(R<<7&4294967295|R>>>25),R=D+(I^_&(b^I))+w[9]+2336552879&4294967295,D=_+(R<<12&4294967295|R>>>20),R=I+(b^D&(_^b))+w[10]+4294925233&4294967295,I=D+(R<<17&4294967295|R>>>15),R=b+(_^I&(D^_))+w[11]+2304563134&4294967295,b=I+(R<<22&4294967295|R>>>10),R=_+(D^b&(I^D))+w[12]+1804603682&4294967295,_=b+(R<<7&4294967295|R>>>25),R=D+(I^_&(b^I))+w[13]+4254626195&4294967295,D=_+(R<<12&4294967295|R>>>20),R=I+(b^D&(_^b))+w[14]+2792965006&4294967295,I=D+(R<<17&4294967295|R>>>15),R=b+(_^I&(D^_))+w[15]+1236535329&4294967295,b=I+(R<<22&4294967295|R>>>10),R=_+(I^D&(b^I))+w[1]+4129170786&4294967295,_=b+(R<<5&4294967295|R>>>27),R=D+(b^I&(_^b))+w[6]+3225465664&4294967295,D=_+(R<<9&4294967295|R>>>23),R=I+(_^b&(D^_))+w[11]+643717713&4294967295,I=D+(R<<14&4294967295|R>>>18),R=b+(D^_&(I^D))+w[0]+3921069994&4294967295,b=I+(R<<20&4294967295|R>>>12),R=_+(I^D&(b^I))+w[5]+3593408605&4294967295,_=b+(R<<5&4294967295|R>>>27),R=D+(b^I&(_^b))+w[10]+38016083&4294967295,D=_+(R<<9&4294967295|R>>>23),R=I+(_^b&(D^_))+w[15]+3634488961&4294967295,I=D+(R<<14&4294967295|R>>>18),R=b+(D^_&(I^D))+w[4]+3889429448&4294967295,b=I+(R<<20&4294967295|R>>>12),R=_+(I^D&(b^I))+w[9]+568446438&4294967295,_=b+(R<<5&4294967295|R>>>27),R=D+(b^I&(_^b))+w[14]+3275163606&4294967295,D=_+(R<<9&4294967295|R>>>23),R=I+(_^b&(D^_))+w[3]+4107603335&4294967295,I=D+(R<<14&4294967295|R>>>18),R=b+(D^_&(I^D))+w[8]+1163531501&4294967295,b=I+(R<<20&4294967295|R>>>12),R=_+(I^D&(b^I))+w[13]+2850285829&4294967295,_=b+(R<<5&4294967295|R>>>27),R=D+(b^I&(_^b))+w[2]+4243563512&4294967295,D=_+(R<<9&4294967295|R>>>23),R=I+(_^b&(D^_))+w[7]+1735328473&4294967295,I=D+(R<<14&4294967295|R>>>18),R=b+(D^_&(I^D))+w[12]+2368359562&4294967295,b=I+(R<<20&4294967295|R>>>12),R=_+(b^I^D)+w[5]+4294588738&4294967295,_=b+(R<<4&4294967295|R>>>28),R=D+(_^b^I)+w[8]+2272392833&4294967295,D=_+(R<<11&4294967295|R>>>21),R=I+(D^_^b)+w[11]+1839030562&4294967295,I=D+(R<<16&4294967295|R>>>16),R=b+(I^D^_)+w[14]+4259657740&4294967295,b=I+(R<<23&4294967295|R>>>9),R=_+(b^I^D)+w[1]+2763975236&4294967295,_=b+(R<<4&4294967295|R>>>28),R=D+(_^b^I)+w[4]+1272893353&4294967295,D=_+(R<<11&4294967295|R>>>21),R=I+(D^_^b)+w[7]+4139469664&4294967295,I=D+(R<<16&4294967295|R>>>16),R=b+(I^D^_)+w[10]+3200236656&4294967295,b=I+(R<<23&4294967295|R>>>9),R=_+(b^I^D)+w[13]+681279174&4294967295,_=b+(R<<4&4294967295|R>>>28),R=D+(_^b^I)+w[0]+3936430074&4294967295,D=_+(R<<11&4294967295|R>>>21),R=I+(D^_^b)+w[3]+3572445317&4294967295,I=D+(R<<16&4294967295|R>>>16),R=b+(I^D^_)+w[6]+76029189&4294967295,b=I+(R<<23&4294967295|R>>>9),R=_+(b^I^D)+w[9]+3654602809&4294967295,_=b+(R<<4&4294967295|R>>>28),R=D+(_^b^I)+w[12]+3873151461&4294967295,D=_+(R<<11&4294967295|R>>>21),R=I+(D^_^b)+w[15]+530742520&4294967295,I=D+(R<<16&4294967295|R>>>16),R=b+(I^D^_)+w[2]+3299628645&4294967295,b=I+(R<<23&4294967295|R>>>9),R=_+(I^(b|~D))+w[0]+4096336452&4294967295,_=b+(R<<6&4294967295|R>>>26),R=D+(b^(_|~I))+w[7]+1126891415&4294967295,D=_+(R<<10&4294967295|R>>>22),R=I+(_^(D|~b))+w[14]+2878612391&4294967295,I=D+(R<<15&4294967295|R>>>17),R=b+(D^(I|~_))+w[5]+4237533241&4294967295,b=I+(R<<21&4294967295|R>>>11),R=_+(I^(b|~D))+w[12]+1700485571&4294967295,_=b+(R<<6&4294967295|R>>>26),R=D+(b^(_|~I))+w[3]+2399980690&4294967295,D=_+(R<<10&4294967295|R>>>22),R=I+(_^(D|~b))+w[10]+4293915773&4294967295,I=D+(R<<15&4294967295|R>>>17),R=b+(D^(I|~_))+w[1]+2240044497&4294967295,b=I+(R<<21&4294967295|R>>>11),R=_+(I^(b|~D))+w[8]+1873313359&4294967295,_=b+(R<<6&4294967295|R>>>26),R=D+(b^(_|~I))+w[15]+4264355552&4294967295,D=_+(R<<10&4294967295|R>>>22),R=I+(_^(D|~b))+w[6]+2734768916&4294967295,I=D+(R<<15&4294967295|R>>>17),R=b+(D^(I|~_))+w[13]+1309151649&4294967295,b=I+(R<<21&4294967295|R>>>11),R=_+(I^(b|~D))+w[4]+4149444226&4294967295,_=b+(R<<6&4294967295|R>>>26),R=D+(b^(_|~I))+w[11]+3174756917&4294967295,D=_+(R<<10&4294967295|R>>>22),R=I+(_^(D|~b))+w[2]+718787259&4294967295,I=D+(R<<15&4294967295|R>>>17),R=b+(D^(I|~_))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(I+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+I&4294967295,T.g[3]=T.g[3]+D&4294967295}i.prototype.u=function(T,_){_===void 0&&(_=T.length);for(var b=_-this.blockSize,w=this.B,I=this.h,D=0;D<_;){if(I==0)for(;D<=b;)r(this,T,D),D+=this.blockSize;if(typeof T=="string"){for(;D<_;)if(w[I++]=T.charCodeAt(D++),I==this.blockSize){r(this,w),I=0;break}}else for(;D<_;)if(w[I++]=T[D++],I==this.blockSize){r(this,w),I=0;break}}this.h=I,this.o+=_},i.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;var b=8*this.o;for(_=T.length-8;_<T.length;++_)T[_]=b&255,b/=256;for(this.u(T),T=Array(16),_=b=0;4>_;++_)for(var w=0;32>w;w+=8)T[b++]=this.g[_]>>>w&255;return T};function s(T,_){var b=l;return Object.prototype.hasOwnProperty.call(b,T)?b[T]:b[T]=_(T)}function a(T,_){this.h=_;for(var b=[],w=!0,I=T.length-1;0<=I;I--){var D=T[I]|0;w&&D==_||(b[I]=D,w=!1)}this.g=b}var l={};function u(T){return-128<=T&&128>T?s(T,function(_){return new a([_|0],0>_?-1:0)}):new a([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return g;if(0>T)return M(h(-T));for(var _=[],b=1,w=0;T>=b;w++)_[w]=T/b|0,b*=4294967296;return new a(_,0)}function d(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return M(d(T.substring(1),_));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=h(Math.pow(_,8)),w=g,I=0;I<T.length;I+=8){var D=Math.min(8,T.length-I),R=parseInt(T.substring(I,I+D),_);8>D?(D=h(Math.pow(_,D)),w=w.j(D).add(h(R))):(w=w.j(b),w=w.add(h(R)))}return w}var g=u(0),m=u(1),v=u(16777216);t=a.prototype,t.m=function(){if(O(this))return-M(this).m();for(var T=0,_=1,b=0;b<this.g.length;b++){var w=this.i(b);T+=(0<=w?w:4294967296+w)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(C(this))return"0";if(O(this))return"-"+M(this).toString(T);for(var _=h(Math.pow(T,6)),b=this,w="";;){var I=x(b,_).g;b=A(b,I.j(_));var D=((0<b.g.length?b.g[0]:b.h)>>>0).toString(T);if(b=I,C(b))return D+w;for(;6>D.length;)D="0"+D;w=D+w}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function C(T){if(T.h!=0)return!1;for(var _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function O(T){return T.h==-1}t.l=function(T){return T=A(this,T),O(T)?-1:C(T)?0:1};function M(T){for(var _=T.g.length,b=[],w=0;w<_;w++)b[w]=~T.g[w];return new a(b,~T.h).add(m)}t.abs=function(){return O(this)?M(this):this},t.add=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],w=0,I=0;I<=_;I++){var D=w+(this.i(I)&65535)+(T.i(I)&65535),R=(D>>>16)+(this.i(I)>>>16)+(T.i(I)>>>16);w=R>>>16,D&=65535,R&=65535,b[I]=R<<16|D}return new a(b,b[b.length-1]&-2147483648?-1:0)};function A(T,_){return T.add(M(_))}t.j=function(T){if(C(this)||C(T))return g;if(O(this))return O(T)?M(this).j(M(T)):M(M(this).j(T));if(O(T))return M(this.j(M(T)));if(0>this.l(v)&&0>T.l(v))return h(this.m()*T.m());for(var _=this.g.length+T.g.length,b=[],w=0;w<2*_;w++)b[w]=0;for(w=0;w<this.g.length;w++)for(var I=0;I<T.g.length;I++){var D=this.i(w)>>>16,R=this.i(w)&65535,yt=T.i(I)>>>16,Dt=T.i(I)&65535;b[2*w+2*I]+=R*Dt,E(b,2*w+2*I),b[2*w+2*I+1]+=D*Dt,E(b,2*w+2*I+1),b[2*w+2*I+1]+=R*yt,E(b,2*w+2*I+1),b[2*w+2*I+2]+=D*yt,E(b,2*w+2*I+2)}for(w=0;w<_;w++)b[w]=b[2*w+1]<<16|b[2*w];for(w=_;w<2*_;w++)b[w]=0;return new a(b,0)};function E(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function S(T,_){this.g=T,this.h=_}function x(T,_){if(C(_))throw Error("division by zero");if(C(T))return new S(g,g);if(O(T))return _=x(M(T),_),new S(M(_.g),M(_.h));if(O(_))return _=x(T,M(_)),new S(M(_.g),_.h);if(30<T.g.length){if(O(T)||O(_))throw Error("slowDivide_ only works with positive integers.");for(var b=m,w=_;0>=w.l(T);)b=L(b),w=L(w);var I=j(b,1),D=j(w,1);for(w=j(w,2),b=j(b,2);!C(w);){var R=D.add(w);0>=R.l(T)&&(I=I.add(b),D=R),w=j(w,1),b=j(b,1)}return _=A(T,I.j(_)),new S(I,_)}for(I=g;0<=T.l(_);){for(b=Math.max(1,Math.floor(T.m()/_.m())),w=Math.ceil(Math.log(b)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),D=h(b),R=D.j(_);O(R)||0<R.l(T);)b-=w,D=h(b),R=D.j(_);C(D)&&(D=m),I=I.add(D),T=A(T,R)}return new S(I,T)}t.A=function(T){return x(this,T).h},t.and=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],w=0;w<_;w++)b[w]=this.i(w)&T.i(w);return new a(b,this.h&T.h)},t.or=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],w=0;w<_;w++)b[w]=this.i(w)|T.i(w);return new a(b,this.h|T.h)},t.xor=function(T){for(var _=Math.max(this.g.length,T.g.length),b=[],w=0;w<_;w++)b[w]=this.i(w)^T.i(w);return new a(b,this.h^T.h)};function L(T){for(var _=T.g.length+1,b=[],w=0;w<_;w++)b[w]=T.i(w)<<1|T.i(w-1)>>>31;return new a(b,T.h)}function j(T,_){var b=_>>5;_%=32;for(var w=T.g.length-b,I=[],D=0;D<w;D++)I[D]=0<_?T.i(D+b)>>>_|T.i(D+b+1)<<32-_:T.i(D+b);return new a(I,T.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ST=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,ji=a}).apply(typeof Yy<"u"?Yy:typeof self<"u"?self:typeof window<"u"?window:{});var Ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wT,La,RT,nu,nd,IT,CT,xT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ll=="object"&&Ll];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function r(o,c){if(c)e:{var f=i;o=o.split(".");for(var p=0;p<o.length-1;p++){var N=o[p];if(!(N in f))break e;f=f[N]}o=o[o.length-1],p=f[o],c=c(p),c!=p&&c!=null&&e(f,o,{configurable:!0,writable:!0,value:c})}}function s(o,c){o instanceof String&&(o+="");var f=0,p=!1,N={next:function(){if(!p&&f<o.length){var k=f++;return{value:c(k,o[k]),done:!1}}return p=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(o){return o||function(){return s(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,p),o.apply(c,N)}}return function(){return o.apply(c,arguments)}}function m(o,c,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:g,m.apply(null,arguments)}function v(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function C(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,N,k){for(var z=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)z[ve-2]=arguments[ve];return c.prototype[N].apply(p,z)}}function O(o){const c=o.length;if(0<c){const f=Array(c);for(let p=0;p<c;p++)f[p]=o[p];return f}return[]}function M(o,c){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(u(p)){const N=o.length||0,k=p.length||0;o.length=N+k;for(let z=0;z<k;z++)o[N+z]=p[z]}else o.push(p)}}class A{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function E(o){return/^[\s\xa0]*$/.test(o)}function S(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function x(o){return x[" "](o),o}x[" "]=function(){};var L=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function j(o,c,f){for(const p in o)c.call(f,o[p],p,o)}function T(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function _(o){const c={};for(const f in o)c[f]=o[f];return c}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,c){let f,p;for(let N=1;N<arguments.length;N++){p=arguments[N];for(f in p)o[f]=p[f];for(let k=0;k<b.length;k++)f=b[k],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function I(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function D(o){l.setTimeout(()=>{throw o},0)}function R(){var o=ye;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class yt{constructor(){this.h=this.g=null}add(c,f){const p=Dt.get();p.set(c,f),this.h?this.h.next=p:this.g=p,this.h=p}}var Dt=new A(()=>new B,o=>o.reset());class B{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let W,X=!1,ye=new yt,q=()=>{const o=l.Promise.resolve(void 0);W=()=>{o.then(ie)}};var ie=()=>{for(var o;o=R();){try{o.h.call(o.g)}catch(f){D(f)}var c=Dt;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}X=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function qe(o,c){if(Y.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(L){e:{try{x(c.nodeName);var N=!0;break e}catch{}N=!1}N||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:tr[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&qe.aa.h.call(this)}}C(qe,Y);var tr={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var _t="closure_listenable_"+(1e6*Math.random()|0),la=0;function Sn(o,c,f,p,N){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!p,this.ha=N,this.key=++la,this.da=this.fa=!1}function ai(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function oi(o){this.src=o,this.g={},this.h=0}oi.prototype.add=function(o,c,f,p,N){var k=o.toString();o=this.g[k],o||(o=this.g[k]=[],this.h++);var z=Fr(o,c,p,N);return-1<z?(c=o[z],f||(c.fa=!1)):(c=new Sn(c,this.src,k,!!p,N),c.fa=f,o.push(c)),c};function nr(o,c){var f=c.type;if(f in o.g){var p=o.g[f],N=Array.prototype.indexOf.call(p,c,void 0),k;(k=0<=N)&&Array.prototype.splice.call(p,N,1),k&&(ai(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Fr(o,c,f,p){for(var N=0;N<o.length;++N){var k=o[N];if(!k.da&&k.listener==c&&k.capture==!!f&&k.ha==p)return N}return-1}var Fc="closure_lm_"+(1e6*Math.random()|0),Gc={};function yg(o,c,f,p,N){if(Array.isArray(c)){for(var k=0;k<c.length;k++)yg(o,c[k],f,p,N);return null}return f=Eg(f),o&&o[_t]?o.K(c,f,h(p)?!!p.capture:!1,N):zA(o,c,f,!1,p,N)}function zA(o,c,f,p,N,k){if(!c)throw Error("Invalid event type");var z=h(N)?!!N.capture:!!N,ve=Qc(o);if(ve||(o[Fc]=ve=new oi(o)),f=ve.add(c,f,p,z,k),f.proxy)return f;if(p=BA(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)_e||(N=z),N===void 0&&(N=!1),o.addEventListener(c.toString(),p,N);else if(o.attachEvent)o.attachEvent(vg(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function BA(){function o(f){return c.call(o.src,o.listener,f)}const c=qA;return o}function _g(o,c,f,p,N){if(Array.isArray(c))for(var k=0;k<c.length;k++)_g(o,c[k],f,p,N);else p=h(p)?!!p.capture:!!p,f=Eg(f),o&&o[_t]?(o=o.i,c=String(c).toString(),c in o.g&&(k=o.g[c],f=Fr(k,f,p,N),-1<f&&(ai(k[f]),Array.prototype.splice.call(k,f,1),k.length==0&&(delete o.g[c],o.h--)))):o&&(o=Qc(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Fr(c,f,p,N)),(f=-1<o?c[o]:null)&&Kc(f))}function Kc(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[_t])nr(c.i,o);else{var f=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(f,p,o.capture):c.detachEvent?c.detachEvent(vg(f),p):c.addListener&&c.removeListener&&c.removeListener(p),(f=Qc(c))?(nr(f,o),f.h==0&&(f.src=null,c[Fc]=null)):ai(o)}}}function vg(o){return o in Gc?Gc[o]:Gc[o]="on"+o}function qA(o,c){if(o.da)o=!0;else{c=new qe(c,this);var f=o.listener,p=o.ha||o.src;o.fa&&Kc(o),o=f.call(p,c)}return o}function Qc(o){return o=o[Fc],o instanceof oi?o:null}var Yc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Eg(o){return typeof o=="function"?o:(o[Yc]||(o[Yc]=function(c){return o.handleEvent(c)}),o[Yc])}function ot(){oe.call(this),this.i=new oi(this),this.M=this,this.F=null}C(ot,oe),ot.prototype[_t]=!0,ot.prototype.removeEventListener=function(o,c,f,p){_g(this,o,c,f,p)};function vt(o,c){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new Y(c,o);else if(c instanceof Y)c.target=c.target||o;else{var N=c;c=new Y(p,o),w(c,N)}if(N=!0,f)for(var k=f.length-1;0<=k;k--){var z=c.g=f[k];N=al(z,p,!0,c)&&N}if(z=c.g=o,N=al(z,p,!0,c)&&N,N=al(z,p,!1,c)&&N,f)for(k=0;k<f.length;k++)z=c.g=f[k],N=al(z,p,!1,c)&&N}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],p=0;p<f.length;p++)ai(f[p]);delete o.g[c],o.h--}}this.F=null},ot.prototype.K=function(o,c,f,p){return this.i.add(String(o),c,!1,f,p)},ot.prototype.L=function(o,c,f,p){return this.i.add(String(o),c,!0,f,p)};function al(o,c,f,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var N=!0,k=0;k<c.length;++k){var z=c[k];if(z&&!z.da&&z.capture==f){var ve=z.listener,et=z.ha||z.src;z.fa&&nr(o.i,z),N=ve.call(et,p)!==!1&&N}}return N&&!p.defaultPrevented}function Tg(o,c,f){if(typeof o=="function")f&&(o=m(o,f));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function bg(o){o.g=Tg(()=>{o.g=null,o.i&&(o.i=!1,bg(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class HA extends oe{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:bg(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ua(o){oe.call(this),this.h=o,this.g={}}C(ua,oe);var Ag=[];function Sg(o){j(o.g,function(c,f){this.g.hasOwnProperty(f)&&Kc(c)},o),o.g={}}ua.prototype.N=function(){ua.aa.N.call(this),Sg(this)},ua.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $c=l.JSON.stringify,FA=l.JSON.parse,GA=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Xc(){}Xc.prototype.h=null;function wg(o){return o.h||(o.h=o.i())}function Rg(){}var ca={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wc(){Y.call(this,"d")}C(Wc,Y);function Zc(){Y.call(this,"c")}C(Zc,Y);var ir={},Ig=null;function ol(){return Ig=Ig||new ot}ir.La="serverreachability";function Cg(o){Y.call(this,ir.La,o)}C(Cg,Y);function ha(o){const c=ol();vt(c,new Cg(c))}ir.STAT_EVENT="statevent";function xg(o,c){Y.call(this,ir.STAT_EVENT,o),this.stat=c}C(xg,Y);function Et(o){const c=ol();vt(c,new xg(c,o))}ir.Ma="timingevent";function Ng(o,c){Y.call(this,ir.Ma,o),this.size=c}C(Ng,Y);function fa(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function da(){this.g=!0}da.prototype.xa=function(){this.g=!1};function KA(o,c,f,p,N,k){o.info(function(){if(o.g)if(k)for(var z="",ve=k.split("&"),et=0;et<ve.length;et++){var fe=ve[et].split("=");if(1<fe.length){var lt=fe[0];fe=fe[1];var ut=lt.split("_");z=2<=ut.length&&ut[1]=="type"?z+(lt+"="+fe+"&"):z+(lt+"=redacted&")}}else z=null;else z=k;return"XMLHTTP REQ ("+p+") [attempt "+N+"]: "+c+`
`+f+`
`+z})}function QA(o,c,f,p,N,k,z){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+N+"]: "+c+`
`+f+`
`+k+" "+z})}function Gr(o,c,f,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+$A(o,f)+(p?" "+p:"")})}function YA(o,c){o.info(function(){return"TIMEOUT: "+c})}da.prototype.info=function(){};function $A(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var N=p[1];if(Array.isArray(N)&&!(1>N.length)){var k=N[0];if(k!="noop"&&k!="stop"&&k!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return $c(f)}catch{return c}}var ll={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jc;function ul(){}C(ul,Xc),ul.prototype.g=function(){return new XMLHttpRequest},ul.prototype.i=function(){return{}},Jc=new ul;function li(o,c,f,p){this.j=o,this.i=c,this.l=f,this.R=p||1,this.U=new ua(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Og}function Og(){this.i=null,this.g="",this.h=!1}var Mg={},eh={};function th(o,c,f){o.L=1,o.v=dl(wn(c)),o.m=f,o.P=!0,kg(o,null)}function kg(o,c){o.F=Date.now(),cl(o),o.A=wn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),Yg(f.i,"t",p),o.C=0,f=o.j.J,o.h=new Og,o.g=fp(o.j,f?c:null,!o.m),0<o.O&&(o.M=new HA(m(o.Y,o,o.g),o.O)),c=o.U,f=o.g,p=o.ca;var N="readystatechange";Array.isArray(N)||(N&&(Ag[0]=N.toString()),N=Ag);for(var k=0;k<N.length;k++){var z=yg(f,N[k],p||c.handleEvent,!1,c.h||c);if(!z)break;c.g[z.key]=z}c=o.H?_(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),ha(),KA(o.i,o.u,o.A,o.l,o.R,o.m)}li.prototype.ca=function(o){o=o.target;const c=this.M;c&&Rn(o)==3?c.j():this.Y(o)},li.prototype.Y=function(o){try{if(o==this.g)e:{const ut=Rn(this.g);var c=this.g.Ba();const Yr=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||tp(this.g)))){this.J||ut!=4||c==7||(c==8||0>=Yr?ha(3):ha(2)),nh(this);var f=this.g.Z();this.X=f;t:if(Vg(this)){var p=tp(this.g);o="";var N=p.length,k=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rr(this),ma(this);var z="";break t}this.h.i=new l.TextDecoder}for(c=0;c<N;c++)this.h.h=!0,o+=this.h.i.decode(p[c],{stream:!(k&&c==N-1)});p.length=0,this.h.g+=o,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=f==200,QA(this.i,this.u,this.A,this.l,this.R,ut,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,et=this.g;if((ve=et.g?et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ve)){var fe=ve;break t}}fe=null}if(f=fe)Gr(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ih(this,f);else{this.o=!1,this.s=3,Et(12),rr(this),ma(this);break e}}if(this.P){f=!0;let nn;for(;!this.J&&this.C<z.length;)if(nn=XA(this,z),nn==eh){ut==4&&(this.s=4,Et(14),f=!1),Gr(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==Mg){this.s=4,Et(15),Gr(this.i,this.l,z,"[Invalid Chunk]"),f=!1;break}else Gr(this.i,this.l,nn,null),ih(this,nn);if(Vg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||z.length!=0||this.h.h||(this.s=1,Et(16),f=!1),this.o=this.o&&f,!f)Gr(this.i,this.l,z,"[Invalid Chunked Response]"),rr(this),ma(this);else if(0<z.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),uh(lt),lt.M=!0,Et(11))}}else Gr(this.i,this.l,z,null),ih(this,z);ut==4&&rr(this),this.o&&!this.J&&(ut==4?lp(this.j,this):(this.o=!1,cl(this)))}else dS(this.g),f==400&&0<z.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),rr(this),ma(this)}}}catch{}finally{}};function Vg(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function XA(o,c){var f=o.C,p=c.indexOf(`
`,f);return p==-1?eh:(f=Number(c.substring(f,p)),isNaN(f)?Mg:(p+=1,p+f>c.length?eh:(c=c.slice(p,p+f),o.C=p+f,c)))}li.prototype.cancel=function(){this.J=!0,rr(this)};function cl(o){o.S=Date.now()+o.I,Pg(o,o.I)}function Pg(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=fa(m(o.ba,o),c)}function nh(o){o.B&&(l.clearTimeout(o.B),o.B=null)}li.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(YA(this.i,this.A),this.L!=2&&(ha(),Et(17)),rr(this),this.s=2,ma(this)):Pg(this,this.S-o)};function ma(o){o.j.G==0||o.J||lp(o.j,o)}function rr(o){nh(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Sg(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function ih(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||rh(f.h,o))){if(!o.K&&rh(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var N=p;if(N[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)vl(f),yl(f);else break e;lh(f),Et(18)}}else f.za=N[1],0<f.za-f.T&&37500>N[2]&&f.F&&f.v==0&&!f.C&&(f.C=fa(m(f.Za,f),6e3));if(1>=jg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ar(f,11)}else if((o.K||f.g==o)&&vl(f),!E(c))for(N=f.Da.g.parse(c),c=0;c<N.length;c++){let fe=N[c];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];const lt=fe[3];lt!=null&&(f.la=lt,f.j.info("VER="+f.la));const ut=fe[4];ut!=null&&(f.Aa=ut,f.j.info("SVER="+f.Aa));const Yr=fe[5];Yr!=null&&typeof Yr=="number"&&0<Yr&&(p=1.5*Yr,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const nn=o.g;if(nn){const Tl=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tl){var k=p.h;k.g||Tl.indexOf("spdy")==-1&&Tl.indexOf("quic")==-1&&Tl.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(sh(k,k.h),k.h=null))}if(p.D){const ch=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;ch&&(p.ya=ch,Ae(p.I,p.D,ch))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var z=o;if(p.qa=hp(p,p.J?p.ia:null,p.W),z.K){zg(p.h,z);var ve=z,et=p.L;et&&(ve.I=et),ve.B&&(nh(ve),cl(ve)),p.g=z}else ap(p);0<f.i.length&&_l(f)}else fe[0]!="stop"&&fe[0]!="close"||ar(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?ar(f,7):oh(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}ha(4)}catch{}}var WA=class{constructor(o,c){this.g=o,this.map=c}};function Ug(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lg(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function jg(o){return o.h?1:o.g?o.g.size:0}function rh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function sh(o,c){o.g?o.g.add(c):o.h=c}function zg(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Ug.prototype.cancel=function(){if(this.i=Bg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Bg(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return O(o.i)}function ZA(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,p=0;p<f;p++)c.push(o[p]);return c}c=[],f=0;for(p in o)c[f++]=o[p];return c}function JA(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const p in o)c[f++]=p;return c}}}function qg(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=JA(o),p=ZA(o),N=p.length,k=0;k<N;k++)c.call(void 0,p[k],f&&f[k],o)}var Hg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eS(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),N=null;if(0<=p){var k=o[f].substring(0,p);N=o[f].substring(p+1)}else k=o[f];c(k,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function sr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof sr){this.h=o.h,hl(this,o.j),this.o=o.o,this.g=o.g,fl(this,o.s),this.l=o.l;var c=o.i,f=new ya;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Fg(this,f),this.m=o.m}else o&&(c=String(o).match(Hg))?(this.h=!1,hl(this,c[1]||"",!0),this.o=ga(c[2]||""),this.g=ga(c[3]||"",!0),fl(this,c[4]),this.l=ga(c[5]||"",!0),Fg(this,c[6]||"",!0),this.m=ga(c[7]||"")):(this.h=!1,this.i=new ya(null,this.h))}sr.prototype.toString=function(){var o=[],c=this.j;c&&o.push(pa(c,Gg,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(pa(c,Gg,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(pa(f,f.charAt(0)=="/"?iS:nS,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",pa(f,sS)),o.join("")};function wn(o){return new sr(o)}function hl(o,c,f){o.j=f?ga(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function fl(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Fg(o,c,f){c instanceof ya?(o.i=c,aS(o.i,o.h)):(f||(c=pa(c,rS)),o.i=new ya(c,o.h))}function Ae(o,c,f){o.i.set(c,f)}function dl(o){return Ae(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function ga(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function pa(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,tS),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function tS(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Gg=/[#\/\?@]/g,nS=/[#\?:]/g,iS=/[#\?]/g,rS=/[#\?@]/g,sS=/#/g;function ya(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function ui(o){o.g||(o.g=new Map,o.h=0,o.i&&eS(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=ya.prototype,t.add=function(o,c){ui(this),this.i=null,o=Kr(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function Kg(o,c){ui(o),c=Kr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Qg(o,c){return ui(o),c=Kr(o,c),o.g.has(c)}t.forEach=function(o,c){ui(this),this.g.forEach(function(f,p){f.forEach(function(N){o.call(c,N,p,this)},this)},this)},t.na=function(){ui(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let p=0;p<c.length;p++){const N=o[p];for(let k=0;k<N.length;k++)f.push(c[p])}return f},t.V=function(o){ui(this);let c=[];if(typeof o=="string")Qg(this,o)&&(c=c.concat(this.g.get(Kr(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},t.set=function(o,c){return ui(this),this.i=null,o=Kr(this,o),Qg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Yg(o,c,f){Kg(o,c),0<f.length&&(o.i=null,o.g.set(Kr(o,c),O(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var p=c[f];const k=encodeURIComponent(String(p)),z=this.V(p);for(p=0;p<z.length;p++){var N=k;z[p]!==""&&(N+="="+encodeURIComponent(String(z[p]))),o.push(N)}}return this.i=o.join("&")};function Kr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function aS(o,c){c&&!o.j&&(ui(o),o.i=null,o.g.forEach(function(f,p){var N=p.toLowerCase();p!=N&&(Kg(this,p),Yg(this,N,f))},o)),o.j=c}function oS(o,c){const f=new da;if(l.Image){const p=new Image;p.onload=v(ci,f,"TestLoadImage: loaded",!0,c,p),p.onerror=v(ci,f,"TestLoadImage: error",!1,c,p),p.onabort=v(ci,f,"TestLoadImage: abort",!1,c,p),p.ontimeout=v(ci,f,"TestLoadImage: timeout",!1,c,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function lS(o,c){const f=new da,p=new AbortController,N=setTimeout(()=>{p.abort(),ci(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(k=>{clearTimeout(N),k.ok?ci(f,"TestPingServer: ok",!0,c):ci(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(N),ci(f,"TestPingServer: error",!1,c)})}function ci(o,c,f,p,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),p(f)}catch{}}function uS(){this.g=new GA}function cS(o,c,f){const p=f||"";try{qg(o,function(N,k){let z=N;h(N)&&(z=$c(N)),c.push(p+k+"="+encodeURIComponent(z))})}catch(N){throw c.push(p+"type="+encodeURIComponent("_badmap")),N}}function ml(o){this.l=o.Ub||null,this.j=o.eb||!1}C(ml,Xc),ml.prototype.g=function(){return new gl(this.l,this.j)},ml.prototype.i=function(o){return function(){return o}}({});function gl(o,c){ot.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(gl,ot),t=gl.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,va(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_a(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,va(this)),this.g&&(this.readyState=3,va(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;$g(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function $g(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?_a(this):va(this),this.readyState==3&&$g(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,_a(this))},t.Qa=function(o){this.g&&(this.response=o,_a(this))},t.ga=function(){this.g&&_a(this)};function _a(o){o.readyState=4,o.l=null,o.j=null,o.v=null,va(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function va(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Xg(o){let c="";return j(o,function(f,p){c+=p,c+=":",c+=f,c+=`\r
`}),c}function ah(o,c,f){e:{for(p in f){var p=!1;break e}p=!0}p||(f=Xg(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Ae(o,c,f))}function Oe(o){ot.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Oe,ot);var hS=/^https?$/i,fS=["POST","PUT"];t=Oe.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jc.g(),this.v=this.o?wg(this.o):wg(Jc),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(k){Wg(this,k);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var N in p)f.set(N,p[N]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const k of p.keys())f.set(k,p.get(k));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(k=>k.toLowerCase()=="content-type"),N=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(fS,c,void 0))||p||N||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[k,z]of f)this.g.setRequestHeader(k,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ep(this),this.u=!0,this.g.send(o),this.u=!1}catch(k){Wg(this,k)}};function Wg(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Zg(o),pl(o)}function Zg(o){o.A||(o.A=!0,vt(o,"complete"),vt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,vt(this,"complete"),vt(this,"abort"),pl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pl(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Jg(this):this.bb())},t.bb=function(){Jg(this)};function Jg(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Rn(o)!=4||o.Z()!=2)){if(o.u&&Rn(o)==4)Tg(o.Ea,0,o);else if(vt(o,"readystatechange"),Rn(o)==4){o.h=!1;try{const z=o.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var p;if(p=z===0){var N=String(o.D).match(Hg)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),p=!hS.test(N?N.toLowerCase():"")}f=p}if(f)vt(o,"complete"),vt(o,"success");else{o.m=6;try{var k=2<Rn(o)?o.g.statusText:""}catch{k=""}o.l=k+" ["+o.Z()+"]",Zg(o)}}finally{pl(o)}}}}function pl(o,c){if(o.g){ep(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||vt(o,"ready");try{f.onreadystatechange=p}catch{}}}function ep(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function Rn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),FA(c)}};function tp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function dS(o){const c={};o=(o.g&&2<=Rn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(E(o[p]))continue;var f=I(o[p]);const N=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const k=c[N]||[];c[N]=k,k.push(f)}T(c,function(p){return p.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ea(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function np(o){this.Aa=0,this.i=[],this.j=new da,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ea("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ea("baseRetryDelayMs",5e3,o),this.cb=Ea("retryDelaySeedMs",1e4,o),this.Wa=Ea("forwardChannelMaxRetries",2,o),this.wa=Ea("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Ug(o&&o.concurrentRequestLimit),this.Da=new uS,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=np.prototype,t.la=8,t.G=1,t.connect=function(o,c,f,p){Et(0),this.W=o,this.H=c||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=hp(this,null,this.W),_l(this)};function oh(o){if(ip(o),o.G==3){var c=o.U++,f=wn(o.I);if(Ae(f,"SID",o.K),Ae(f,"RID",c),Ae(f,"TYPE","terminate"),Ta(o,f),c=new li(o,o.j,c),c.L=2,c.v=dl(wn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=fp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),cl(c)}cp(o)}function yl(o){o.g&&(uh(o),o.g.cancel(),o.g=null)}function ip(o){yl(o),o.u&&(l.clearTimeout(o.u),o.u=null),vl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function _l(o){if(!Lg(o.h)&&!o.s){o.s=!0;var c=o.Ga;W||q(),X||(W(),X=!0),ye.add(c,o),o.B=0}}function mS(o,c){return jg(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=fa(m(o.Ga,o,c),up(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const N=new li(this,this.j,o);let k=this.o;if(this.S&&(k?(k=_(k),w(k,this.S)):k=this.S),this.m!==null||this.O||(N.H=k,k=null),this.P)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break t}p=void 0}if(p===void 0)break;if(c+=p,4096<c){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=sp(this,N,c),f=wn(this.I),Ae(f,"RID",o),Ae(f,"CVER",22),this.D&&Ae(f,"X-HTTP-Session-Id",this.D),Ta(this,f),k&&(this.O?c="headers="+encodeURIComponent(String(Xg(k)))+"&"+c:this.m&&ah(f,this.m,k)),sh(this.h,N),this.Ua&&Ae(f,"TYPE","init"),this.P?(Ae(f,"$req",c),Ae(f,"SID","null"),N.T=!0,th(N,f,null)):th(N,f,c),this.G=2}}else this.G==3&&(o?rp(this,o):this.i.length==0||Lg(this.h)||rp(this))};function rp(o,c){var f;c?f=c.l:f=o.U++;const p=wn(o.I);Ae(p,"SID",o.K),Ae(p,"RID",f),Ae(p,"AID",o.T),Ta(o,p),o.m&&o.o&&ah(p,o.m,o.o),f=new li(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=sp(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),sh(o.h,f),th(f,p,c)}function Ta(o,c){o.H&&j(o.H,function(f,p){Ae(c,p,f)}),o.l&&qg({},function(f,p){Ae(c,p,f)})}function sp(o,c,f){f=Math.min(o.i.length,f);var p=o.l?m(o.l.Na,o.l,o):null;e:{var N=o.i;let k=-1;for(;;){const z=["count="+f];k==-1?0<f?(k=N[0].g,z.push("ofs="+k)):k=0:z.push("ofs="+k);let ve=!0;for(let et=0;et<f;et++){let fe=N[et].g;const lt=N[et].map;if(fe-=k,0>fe)k=Math.max(0,N[et].g-100),ve=!1;else try{cS(lt,z,"req"+fe+"_")}catch{p&&p(lt)}}if(ve){p=z.join("&");break e}}}return o=o.i.splice(0,f),c.D=o,p}function ap(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;W||q(),X||(W(),X=!0),ye.add(c,o),o.v=0}}function lh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=fa(m(o.Fa,o),up(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,op(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=fa(m(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),yl(this),op(this))};function uh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function op(o){o.g=new li(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=wn(o.qa);Ae(c,"RID","rpc"),Ae(c,"SID",o.K),Ae(c,"AID",o.T),Ae(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ae(c,"TO",o.ja),Ae(c,"TYPE","xmlhttp"),Ta(o,c),o.m&&o.o&&ah(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=dl(wn(c)),f.m=null,f.P=!0,kg(f,o)}t.Za=function(){this.C!=null&&(this.C=null,yl(this),lh(this),Et(19))};function vl(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function lp(o,c){var f=null;if(o.g==c){vl(o),uh(o),o.g=null;var p=2}else if(rh(o.h,c))f=c.D,zg(o.h,c),p=1;else return;if(o.G!=0){if(c.o)if(p==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var N=o.B;p=ol(),vt(p,new Ng(p,f)),_l(o)}else ap(o);else if(N=c.s,N==3||N==0&&0<c.X||!(p==1&&mS(o,c)||p==2&&lh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),N){case 1:ar(o,5);break;case 4:ar(o,10);break;case 3:ar(o,6);break;default:ar(o,2)}}}function up(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function ar(o,c){if(o.j.info("Error code "+c),c==2){var f=m(o.fb,o),p=o.Xa;const N=!p;p=new sr(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||hl(p,"https"),dl(p),N?oS(p.toString(),f):lS(p.toString(),f)}else Et(2);o.G=0,o.l&&o.l.sa(c),cp(o),ip(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function cp(o){if(o.G=0,o.ka=[],o.l){const c=Bg(o.h);(c.length!=0||o.i.length!=0)&&(M(o.ka,c),M(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function hp(o,c,f){var p=f instanceof sr?wn(f):new sr(f);if(p.g!="")c&&(p.g=c+"."+p.g),fl(p,p.s);else{var N=l.location;p=N.protocol,c=c?c+"."+N.hostname:N.hostname,N=+N.port;var k=new sr(null);p&&hl(k,p),c&&(k.g=c),N&&fl(k,N),f&&(k.l=f),p=k}return f=o.D,c=o.ya,f&&c&&Ae(p,f,c),Ae(p,"VER",o.la),Ta(o,p),p}function fp(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Oe(new ml({eb:f})):new Oe(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function dp(){}t=dp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function El(){}El.prototype.g=function(o,c){return new Ot(o,c)};function Ot(o,c){ot.call(this),this.g=new np(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!E(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!E(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Qr(this)}C(Ot,ot),Ot.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){oh(this.g)},Ot.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=$c(o),o=f);c.i.push(new WA(c.Ya++,o)),c.G==3&&_l(c)},Ot.prototype.N=function(){this.g.l=null,delete this.j,oh(this.g),delete this.g,Ot.aa.N.call(this)};function mp(o){Wc.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const f in c){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}C(mp,Wc);function gp(){Zc.call(this),this.status=1}C(gp,Zc);function Qr(o){this.g=o}C(Qr,dp),Qr.prototype.ua=function(){vt(this.g,"a")},Qr.prototype.ta=function(o){vt(this.g,new mp(o))},Qr.prototype.sa=function(o){vt(this.g,new gp)},Qr.prototype.ra=function(){vt(this.g,"b")},El.prototype.createWebChannel=El.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,xT=function(){return new El},CT=function(){return ol()},IT=ir,nd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ll.NO_ERROR=0,ll.TIMEOUT=8,ll.HTTP_ERROR=6,nu=ll,Dg.COMPLETE="complete",RT=Dg,Rg.EventType=ca,ca.OPEN="a",ca.CLOSE="b",ca.ERROR="c",ca.MESSAGE="d",ot.prototype.listen=ot.prototype.K,La=Rg,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,wT=Oe}).apply(typeof Ll<"u"?Ll:typeof self<"u"?self:typeof window<"u"?window:{});const $y="@firebase/firestore",Xy="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ta="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new Em("@firebase/firestore");function ns(){return Dr.logLevel}function H(t,...e){if(Dr.logLevel<=se.DEBUG){const n=e.map(Am);Dr.debug(`Firestore (${ta}): ${t}`,...n)}}function Wn(t,...e){if(Dr.logLevel<=se.ERROR){const n=e.map(Am);Dr.error(`Firestore (${ta}): ${t}`,...n)}}function js(t,...e){if(Dr.logLevel<=se.WARN){const n=e.map(Am);Dr.warn(`Firestore (${ta}): ${t}`,...n)}}function Am(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(t="Unexpected state"){const e=`FIRESTORE (${ta}) INTERNAL ASSERTION FAILED: `+t;throw Wn(e),new Error(e)}function me(t,e){t||$()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class F extends ni{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}}class bC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class AC{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new Fn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Fn,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Fn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(me(typeof i.accessToken=="string"),new NT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new ht(e)}}class SC{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class wC{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new SC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RC{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Pt(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){me(this.o===void 0);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Wy(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new Wy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=IC(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%62))}return i}}function ue(t,e){return t<e?-1:t>e?1:0}function zs(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=-62135596800,Jy=1e6;class Ge{static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Jy);return new Ge(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new F(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new F(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Zy)throw new F(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Jy}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Zy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Ge(0,0))}static max(){return new Z(new Ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="__name__";class hn{constructor(e,n,i){n===void 0?n=0:n>e.length&&$(),i===void 0?i=e.length-n:i>e.length-n&&$(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return hn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof hn?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=hn.compareSegments(e.get(r),n.get(r));if(s!==0)return s}return Math.sign(e.length-n.length)}static compareSegments(e,n){const i=hn.isNumericId(e),r=hn.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?hn.extractNumericId(e).compare(hn.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ji.fromString(e.substring(4,e.length-2))}}class Se extends hn{construct(e,n,i){return new Se(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new F(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const CC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends hn{construct(e,n,i){return new rt(e,n,i)}static isValidIdentifier(e){return CC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e_}static keyField(){return new rt([e_])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new F(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new F(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new F(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(i+=l,r++):(s(),r++)}if(s(),a)throw new F(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rt(n)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(Se.fromString(e))}static fromName(e){return new K(Se.fromString(e).popFirst(5))}static empty(){return new K(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new Se(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=-1;function xC(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(i===1e9?new Ge(n+1,0):new Ge(n,i));return new Gi(r,K.empty(),e)}function NC(t){return new Gi(t.readTime,t.key,Ro)}class Gi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Gi(Z.min(),K.empty(),Ro)}static max(){return new Gi(Z.max(),K.empty(),Ro)}}function DC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==OC)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,i)=>{n(e)})}static reject(e){return new V((n,i)=>{i(e)})}static waitFor(e){return new V((n,i)=>{let r=0,s=0,a=!1;e.forEach(l=>{++r,l.next(()=>{++s,a&&s===r&&n()},u=>i(u))}),a=!0,s===r&&n()})}static or(e){let n=V.resolve(!1);for(const i of e)n=n.next(r=>r?V.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new V((i,r)=>{const s=e.length,a=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(d=>{a[h]=d,++l,l===s&&i(a)},d=>r(d))}})}static doWhile(e,n){return new V((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function kC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ia(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.oe(i),this._e=i=>n.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}wc.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=-1;function Rc(t){return t==null}function qu(t){return t===0&&1/t==-1/0}function VC(t){return typeof t=="number"&&Number.isInteger(t)&&!qu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="";function PC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=t_(e)),e=UC(t.get(n),e);return t_(e)}function UC(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const s=t.charAt(r);switch(s){case"\0":n+="";break;case OT:n+="";break;default:n+=s}}return n}function t_(t){return t+OT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ji(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function MT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||nt.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jl(this.root,e,this.comparator,!1)}getReverseIterator(){return new jl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jl(this.root,e,this.comparator,!0)}}class jl{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??nt.RED,this.left=r??nt.EMPTY,this.right=s??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new nt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return nt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $();const e=this.left.check();if(e!==this.right.check())throw $();return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw $()}get value(){throw $()}get color(){throw $()}get left(){throw $()}get right(){throw $()}copy(e,n,i,r,s){return this}insert(e,n,i){return new nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new i_(this.data.getIterator())}getIteratorFrom(e){return new i_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class i_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(rt.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new Ke(rt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zs(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new kT("Invalid base64 string: "+s):s}}(e);return new at(n)}static fromUint8Array(e){const n=function(r){let s="";for(let a=0;a<r.length;++a)s+=String.fromCharCode(r[a]);return s}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const LC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ki(t){if(me(!!t),typeof t=="string"){let e=0;const n=LC.exec(t);if(me(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qi(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="server_timestamp",PT="__type__",UT="__previous_value__",LT="__local_write_time__";function wm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[PT])===null||n===void 0?void 0:n.stringValue)===VT}function Ic(t){const e=t.mapValue.fields[UT];return wm(e)?Ic(e):e}function Io(t){const e=Ki(t.mapValue.fields[LT].timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,n,i,r,s,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}const Hu="(default)";class Co{constructor(e,n){this.projectId=e,this.database=n||Hu}static empty(){return new Co("","")}get isDefaultDatabase(){return this.database===Hu}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="__type__",zC="__max__",zl={mapValue:{}},zT="__vector__",Fu="value";function Yi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wm(t)?4:qC(t)?9007199254740991:BC(t)?10:11:$()}function Tn(t,e){if(t===e)return!0;const n=Yi(t);if(n!==Yi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Io(t).isEqual(Io(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const a=Ki(r.timestampValue),l=Ki(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Qi(r.bytesValue).isEqual(Qi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Pe(r.geoPointValue.latitude)===Pe(s.geoPointValue.latitude)&&Pe(r.geoPointValue.longitude)===Pe(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Pe(r.integerValue)===Pe(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const a=Pe(r.doubleValue),l=Pe(s.doubleValue);return a===l?qu(a)===qu(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return zs(t.arrayValue.values||[],e.arrayValue.values||[],Tn);case 10:case 11:return function(r,s){const a=r.mapValue.fields||{},l=s.mapValue.fields||{};if(n_(a)!==n_(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Tn(a[u],l[u])))return!1;return!0}(t,e);default:return $()}}function xo(t,e){return(t.values||[]).find(n=>Tn(n,e))!==void 0}function Bs(t,e){if(t===e)return 0;const n=Yi(t),i=Yi(e);if(n!==i)return ue(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Pe(s.integerValue||s.doubleValue),u=Pe(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return r_(t.timestampValue,e.timestampValue);case 4:return r_(Io(t),Io(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(s,a){const l=Qi(s),u=Qi(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=ue(l[h],u[h]);if(d!==0)return d}return ue(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=ue(Pe(s.latitude),Pe(a.latitude));return l!==0?l:ue(Pe(s.longitude),Pe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return s_(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,u,h,d;const g=s.fields||{},m=a.fields||{},v=(l=g[Fu])===null||l===void 0?void 0:l.arrayValue,C=(u=m[Fu])===null||u===void 0?void 0:u.arrayValue,O=ue(((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0,((d=C==null?void 0:C.values)===null||d===void 0?void 0:d.length)||0);return O!==0?O:s_(v,C)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===zl.mapValue&&a===zl.mapValue)return 0;if(s===zl.mapValue)return 1;if(a===zl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=a.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let g=0;g<u.length&&g<d.length;++g){const m=ue(u[g],d[g]);if(m!==0)return m;const v=Bs(l[u[g]],h[d[g]]);if(v!==0)return v}return ue(u.length,d.length)}(t.mapValue,e.mapValue);default:throw $()}}function r_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Ki(t),i=Ki(e),r=ue(n.seconds,i.seconds);return r!==0?r:ue(n.nanos,i.nanos)}function s_(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Bs(n[r],i[r]);if(s)return s}return ue(n.length,i.length)}function qs(t){return id(t)}function id(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Ki(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=id(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const a of i)s?s=!1:r+=",",r+=`${a}:${id(n.fields[a])}`;return r+"}"}(t.mapValue):$()}function iu(t){switch(Yi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ic(t);return e?16+iu(e):16;case 5:return 2*t.stringValue.length;case 6:return Qi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+iu(s),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return Ji(i.fields,(s,a)=>{r+=s.length+iu(a)}),r}(t.mapValue);default:throw $()}}function a_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rd(t){return!!t&&"integerValue"in t}function Rm(t){return!!t&&"arrayValue"in t}function o_(t){return!!t&&"nullValue"in t}function l_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ru(t){return!!t&&"mapValue"in t}function BC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[jT])===null||n===void 0?void 0:n.stringValue)===zT}function ro(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ji(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ro(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ro(t.arrayValue.values[n]);return e}return Object.assign({},t)}function qC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===zC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ru(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ro(n)}setAll(e){let n=rt.emptyPath(),i={},r=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}a?i[l.lastSegment()]=ro(a):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());ru(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];ru(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Ji(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new It(ro(this.value))}}function BT(t){const e=[];return Ji(t.fields,(n,i)=>{const r=new rt([n]);if(ru(i)){const s=BT(i.mapValue).fields;if(s.length===0)e.push(r);else for(const a of s)e.push(r.child(a))}else e.push(r)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,i,r,s,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new ft(e,0,Z.min(),Z.min(),Z.min(),It.empty(),0)}static newFoundDocument(e,n,i,r){return new ft(e,1,n,Z.min(),i,r,0)}static newNoDocument(e,n){return new ft(e,2,n,Z.min(),Z.min(),It.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,Z.min(),Z.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n){this.position=e,this.inclusive=n}}function u_(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],a=t.position[r];if(s.field.isKeyField()?i=K.comparator(K.fromName(a.referenceValue),n.key):i=Bs(a,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function c_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n="asc"){this.field=e,this.dir=n}}function HC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{}class ze extends qT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new GC(e,n,i):n==="array-contains"?new YC(e,i):n==="in"?new $C(e,i):n==="not-in"?new XC(e,i):n==="array-contains-any"?new WC(e,i):new ze(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new KC(e,i):new QC(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Bs(n,this.value)):n!==null&&Yi(this.value)===Yi(n)&&this.matchesComparison(Bs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends qT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new un(e,n)}matches(e){return HT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function HT(t){return t.op==="and"}function FT(t){return FC(t)&&HT(t)}function FC(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function sd(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+qs(t.value);if(FT(t))return t.filters.map(e=>sd(e)).join(",");{const e=t.filters.map(n=>sd(n)).join(",");return`${t.op}(${e})`}}function GT(t,e){return t instanceof ze?function(i,r){return r instanceof ze&&i.op===r.op&&i.field.isEqual(r.field)&&Tn(i.value,r.value)}(t,e):t instanceof un?function(i,r){return r instanceof un&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,a,l)=>s&&GT(a,r.filters[l]),!0):!1}(t,e):void $()}function KT(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${qs(n.value)}`}(t):t instanceof un?function(n){return n.op.toString()+" {"+n.getFilters().map(KT).join(" ,")+"}"}(t):"Filter"}class GC extends ze{constructor(e,n,i){super(e,n,i),this.key=K.fromName(i.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class KC extends ze{constructor(e,n){super(e,"in",n),this.keys=QT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QC extends ze{constructor(e,n){super(e,"not-in",n),this.keys=QT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function QT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>K.fromName(i.referenceValue))}class YC extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rm(n)&&xo(n.arrayValue,this.value)}}class $C extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&xo(this.value.arrayValue,n)}}class XC extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(xo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!xo(this.value.arrayValue,n)}}class WC extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>xo(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n=null,i=[],r=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=a,this.endAt=l,this.le=null}}function h_(t,e=null,n=[],i=[],r=null,s=null,a=null){return new ZC(t,e,n,i,r,s,a)}function Im(t){const e=J(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>sd(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Rc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>qs(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>qs(i)).join(",")),e.le=n}return e.le}function Cm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!c_(t.startAt,e.startAt)&&c_(t.endAt,e.endAt)}function ad(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n=null,i=[],r=[],s=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function JC(t,e,n,i,r,s,a,l){return new Xo(t,e,n,i,r,s,a,l)}function xm(t){return new Xo(t)}function f_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function YT(t){return t.collectionGroup!==null}function so(t){const e=J(t);if(e.he===null){e.he=[];const n=new Set;for(const s of e.explicitOrderBy)e.he.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ke(rt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.he.push(new Ku(s,i))}),n.has(rt.keyField().canonicalString())||e.he.push(new Ku(rt.keyField(),i))}return e.he}function yn(t){const e=J(t);return e.Pe||(e.Pe=e2(e,so(t))),e.Pe}function e2(t,e){if(t.limitType==="F")return h_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Ku(r.field,s)});const n=t.endAt?new Gu(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Gu(t.startAt.position,t.startAt.inclusive):null;return h_(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function od(t,e){const n=t.filters.concat([e]);return new Xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ld(t,e,n){return new Xo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cc(t,e){return Cm(yn(t),yn(e))&&t.limitType===e.limitType}function $T(t){return`${Im(yn(t))}|lt:${t.limitType}`}function is(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>KT(r)).join(", ")}]`),Rc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>qs(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>qs(r)).join(",")),`Target(${i})`}(yn(t))}; limitType=${t.limitType})`}function xc(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):K.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of so(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,l,u){const h=u_(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,so(i),r)||i.endAt&&!function(a,l,u){const h=u_(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,so(i),r))}(t,e)}function t2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XT(t){return(e,n)=>{let i=!1;for(const r of so(t)){const s=n2(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function n2(t,e,n){const i=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,a,l){const u=a.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Bs(u,h):$()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return $()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ji(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return MT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=new De(K.comparator);function Zn(){return i2}const WT=new De(K.comparator);function ja(...t){let e=WT;for(const n of t)e=e.insert(n.key,n);return e}function ZT(t){let e=WT;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function mr(){return ao()}function JT(){return ao()}function ao(){return new Br(t=>t.toString(),(t,e)=>t.isEqual(e))}const r2=new De(K.comparator),s2=new Ke(K.comparator);function ae(...t){let e=s2;for(const n of t)e=e.add(n);return e}const a2=new Ke(ue);function o2(){return a2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qu(e)?"-0":e}}function eb(t){return{integerValue:""+t}}function l2(t,e){return VC(e)?eb(e):Nm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this._=void 0}}function u2(t,e,n){return t instanceof Qu?function(r,s){const a={fields:{[PT]:{stringValue:VT},[LT]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&wm(s)&&(s=Ic(s)),s&&(a.fields[UT]=s),{mapValue:a}}(n,e):t instanceof No?nb(t,e):t instanceof Do?ib(t,e):function(r,s){const a=tb(r,s),l=d_(a)+d_(r.Ie);return rd(a)&&rd(r.Ie)?eb(l):Nm(r.serializer,l)}(t,e)}function c2(t,e,n){return t instanceof No?nb(t,e):t instanceof Do?ib(t,e):n}function tb(t,e){return t instanceof Yu?function(i){return rd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Qu extends Nc{}class No extends Nc{constructor(e){super(),this.elements=e}}function nb(t,e){const n=rb(e);for(const i of t.elements)n.some(r=>Tn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Do extends Nc{constructor(e){super(),this.elements=e}}function ib(t,e){let n=rb(e);for(const i of t.elements)n=n.filter(r=>!Tn(r,i));return{arrayValue:{values:n}}}class Yu extends Nc{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function d_(t){return Pe(t.integerValue||t.doubleValue)}function rb(t){return Rm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function h2(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof No&&r instanceof No||i instanceof Do&&r instanceof Do?zs(i.elements,r.elements,Tn):i instanceof Yu&&r instanceof Yu?Tn(i.Ie,r.Ie):i instanceof Qu&&r instanceof Qu}(t.transform,e.transform)}class f2{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function su(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dc{}function sb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Dm(t.key,on.none()):new Wo(t.key,t.data,on.none());{const n=t.data,i=It.empty();let r=new Ke(rt.comparator);for(let s of e.fields)if(!r.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?i.delete(s):i.set(s,a),r=r.add(s)}return new er(t.key,i,new Ut(r.toArray()),on.none())}}function d2(t,e,n){t instanceof Wo?function(r,s,a){const l=r.value.clone(),u=g_(r.fieldTransforms,s,a.transformResults);l.setAll(u),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof er?function(r,s,a){if(!su(r.precondition,s))return void s.convertToUnknownDocument(a.version);const l=g_(r.fieldTransforms,s,a.transformResults),u=s.data;u.setAll(ab(r)),u.setAll(l),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(r,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function oo(t,e,n,i){return t instanceof Wo?function(s,a,l,u){if(!su(s.precondition,a))return l;const h=s.value.clone(),d=p_(s.fieldTransforms,u,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof er?function(s,a,l,u){if(!su(s.precondition,a))return l;const h=p_(s.fieldTransforms,u,a),d=a.data;return d.setAll(ab(s)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(s,a,l){return su(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function m2(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=tb(i.transform,r||null);s!=null&&(n===null&&(n=It.empty()),n.set(i.field,s))}return n||null}function m_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&zs(i,r,(s,a)=>h2(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wo extends Dc{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class er extends Dc{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ab(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function g_(t,e,n){const i=new Map;me(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],a=s.transform,l=e.data.field(s.field);i.set(s.field,c2(a,l,n[r]))}return i}function p_(t,e,n){const i=new Map;for(const r of t){const s=r.transform,a=n.data.field(r.field);i.set(r.field,u2(s,a,e))}return i}class Dm extends Dc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g2 extends Dc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&d2(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=oo(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=oo(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=JT();return this.mutations.forEach(r=>{const s=e.get(r.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(r.key)?null:l;const u=sb(a,l);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&zs(this.mutations,e.mutations,(n,i)=>m_(n,i))&&zs(this.baseMutations,e.baseMutations,(n,i)=>m_(n,i))}}class Om{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){me(e.mutations.length===i.length);let r=function(){return r2}();const s=e.mutations;for(let a=0;a<s.length;a++)r=r.insert(s[a].key,i[a].version);return new Om(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,ce;function v2(t){switch(t){case U.OK:return $();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return $()}}function ob(t){if(t===void 0)return Wn("GRPC error has no .code"),U.UNKNOWN;switch(t){case Ue.OK:return U.OK;case Ue.CANCELLED:return U.CANCELLED;case Ue.UNKNOWN:return U.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return U.INTERNAL;case Ue.UNAVAILABLE:return U.UNAVAILABLE;case Ue.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ue.NOT_FOUND:return U.NOT_FOUND;case Ue.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ue.ABORTED:return U.ABORTED;case Ue.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ue.DATA_LOSS:return U.DATA_LOSS;default:return $()}}(ce=Ue||(Ue={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new ji([4294967295,4294967295],0);function y_(t){const e=E2().encode(t),n=new ST;return n.update(e),new Uint8Array(n.digest())}function __(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ji([n,i],0),new ji([r,s],0)]}class Mm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new za(`Invalid padding: ${n}`);if(i<0)throw new za(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new za(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new za(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=ji.fromNumber(this.Ee)}Ae(e,n,i){let r=e.add(n.multiply(ji.fromNumber(i)));return r.compare(T2)===1&&(r=new ji([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=y_(e),[i,r]=__(n);for(let s=0;s<this.hashCount;s++){const a=this.Ae(i,r,s);if(!this.Re(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Mm(s,r,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.Ee===0)return;const n=y_(e),[i,r]=__(n);for(let s=0;s<this.hashCount;s++){const a=this.Ae(i,r,s);this.Ve(a)}}Ve(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class za extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Zo.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Oc(Z.min(),r,new De(ue),Zn(),ae())}}class Zo{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Zo(i,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n,i,r){this.me=e,this.removedTargetIds=n,this.key=i,this.fe=r}}class lb{constructor(e,n){this.targetId=e,this.ge=n}}class ub{constructor(e,n,i=at.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class v_{constructor(){this.pe=0,this.ye=E_(),this.we=at.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=ae(),n=ae(),i=ae();return this.ye.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:$()}}),new Zo(this.we,this.be,e,n,i)}Me(){this.Se=!1,this.ye=E_()}xe(e,n){this.Se=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,me(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class b2{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Zn(),this.$e=Bl(),this.Ke=Bl(),this.Ue=new De(ue)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const i=this.He(n);switch(e.state){case 0:this.Je(n)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(n);break;case 3:this.Je(n)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),i.Ce(e.resumeToken));break;default:$()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((i,r)=>{this.Je(r)&&n(r)})}Ze(e){const n=e.targetId,i=e.ge.count,r=this.Xe(n);if(r){const s=r.target;if(ad(s))if(i===0){const a=new K(s.path);this.ze(n,a,ft.newNoDocument(a,Z.min()))}else me(i===1);else{const a=this.et(n);if(a!==i){const l=this.tt(e),u=l?this.nt(l,e,a):1;if(u!==0){this.Ye(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,h)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let a,l;try{a=Qi(i).toUint8Array()}catch(u){if(u instanceof kT)return js("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Mm(a,r,s)}catch(u){return js(u instanceof za?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(e,n,i){return n.ge.count===i-this.st(e,n.targetId)?0:2}st(e,n){const i=this.ke.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const a=this.ke.it(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.ze(n,s,null),r++)}),r}ot(e){const n=new Map;this.qe.forEach((s,a)=>{const l=this.Xe(a);if(l){if(s.current&&ad(l.target)){const u=new K(l.target.path);this._t(u).has(a)||this.ut(a,u)||this.ze(a,u,ft.newNoDocument(u,e))}s.ve&&(n.set(a,s.Fe()),s.Me())}});let i=ae();this.Ke.forEach((s,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Xe(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.Qe.forEach((s,a)=>a.setReadTime(e));const r=new Oc(e,n,this.Ue,this.Qe,i);return this.Qe=Zn(),this.$e=Bl(),this.Ke=Bl(),this.Ue=new De(ue),r}Ge(e,n){if(!this.Je(e))return;const i=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,i),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(e))}ze(e,n,i){if(!this.Je(e))return;const r=this.He(e);this.ut(e,n)?r.xe(n,1):r.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(e)),this.Ke=this.Ke.insert(n,this.ct(n).add(e)),i&&(this.Qe=this.Qe.insert(n,i))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new v_,this.qe.set(e,n)),n}ct(e){let n=this.Ke.get(e);return n||(n=new Ke(ue),this.Ke=this.Ke.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Ke(ue),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new v_),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function Bl(){return new De(K.comparator)}function E_(){return new De(K.comparator)}const A2={asc:"ASCENDING",desc:"DESCENDING"},S2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w2={and:"AND",or:"OR"};class R2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ud(t,e){return t.useProto3Json||Rc(e)?e:{value:e}}function $u(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function I2(t,e){return $u(t,e.toTimestamp())}function _n(t){return me(!!t),Z.fromTimestamp(function(n){const i=Ki(n);return new Ge(i.seconds,i.nanos)}(t))}function km(t,e){return cd(t,e).canonicalString()}function cd(t,e){const n=function(r){return new Se(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hb(t){const e=Se.fromString(t);return me(pb(e)),e}function hd(t,e){return km(t.databaseId,e.path)}function Wh(t,e){const n=hb(e);if(n.get(1)!==t.databaseId.projectId)throw new F(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new F(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(db(n))}function fb(t,e){return km(t.databaseId,e)}function C2(t){const e=hb(t);return e.length===4?Se.emptyPath():db(e)}function fd(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function db(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function T_(t,e,n){return{name:hd(t,e),fields:n.value.mapValue.fields}}function x2(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:$()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(me(d===void 0||typeof d=="string"),at.fromBase64String(d||"")):(me(d===void 0||d instanceof Buffer||d instanceof Uint8Array),at.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const d=h.code===void 0?U.UNKNOWN:ob(h.code);return new F(d,h.message||"")}(a);n=new ub(i,r,s,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Wh(t,i.document.name),s=_n(i.document.updateTime),a=i.document.createTime?_n(i.document.createTime):Z.min(),l=new It({mapValue:{fields:i.document.fields}}),u=ft.newFoundDocument(r,s,a,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new au(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Wh(t,i.document),s=i.readTime?_n(i.readTime):Z.min(),a=ft.newNoDocument(r,s),l=i.removedTargetIds||[];n=new au([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Wh(t,i.document),s=i.removedTargetIds||[];n=new au([],s,r,null)}else{if(!("filter"in e))return $();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,a=new _2(r,s),l=i.targetId;n=new lb(l,a)}}return n}function N2(t,e){let n;if(e instanceof Wo)n={update:T_(t,e.key,e.value)};else if(e instanceof Dm)n={delete:hd(t,e.key)};else if(e instanceof er)n={update:T_(t,e.key,e.data),updateMask:j2(e.fieldMask)};else{if(!(e instanceof g2))return $();n={verify:hd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,a){const l=a.transform;if(l instanceof Qu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof No)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Do)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Yu)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw $()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:I2(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$()}(t,e.precondition)),n}function D2(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(r,s){let a=r.updateTime?_n(r.updateTime):_n(s);return a.isEqual(Z.min())&&(a=_n(s)),new f2(a,r.transformResults||[])}(n,e))):[]}function O2(t,e){return{documents:[fb(t,e.path)]}}function M2(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=fb(t,r);const s=function(h){if(h.length!==0)return gb(un.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(h){if(h.length!==0)return h.map(d=>function(m){return{field:rs(m.field),direction:P2(m.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=ud(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:n,parent:r}}function k2(t){let e=C2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){me(i===1);const d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(g){const m=mb(g);return m instanceof un&&FT(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(m=>function(C){return new Ku(ss(C.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,Rc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(g){const m=!!g.before,v=g.values||[];return new Gu(v,m)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const m=!g.before,v=g.values||[];return new Gu(v,m)}(n.endAt)),JC(e,r,a,s,l,"F",u,h)}function V2(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ss(n.unaryFilter.field);return ze.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ss(n.unaryFilter.field);return ze.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ss(n.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ss(n.unaryFilter.field);return ze.create(a,"!=",{nullValue:"NULL_VALUE"});default:return $()}}(t):t.fieldFilter!==void 0?function(n){return ze.create(ss(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return un.create(n.compositeFilter.filters.map(i=>mb(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return $()}}(n.compositeFilter.op))}(t):$()}function P2(t){return A2[t]}function U2(t){return S2[t]}function L2(t){return w2[t]}function rs(t){return{fieldPath:t.canonicalString()}}function ss(t){return rt.fromServerFormat(t.fieldPath)}function gb(t){return t instanceof ze?function(n){if(n.op==="=="){if(l_(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NAN"}};if(o_(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(l_(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NOT_NAN"}};if(o_(n.value))return{unaryFilter:{field:rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rs(n.field),op:U2(n.op),value:n.value}}}(t):t instanceof un?function(n){const i=n.getFilters().map(r=>gb(r));return i.length===1?i[0]:{compositeFilter:{op:L2(n.op),filters:i}}}(t):$()}function j2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n,i,r,s=Z.min(),a=Z.min(),l=at.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this.Tt=e}}function B2(t){const e=k2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ld(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(){this.Tn=new H2}addToCollectionParentIndex(e,n){return this.Tn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Gi.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Gi.min())}updateCollectionGroup(e,n,i){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class H2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ke(Se.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ke(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},yb=41943040;class Rt{static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(yb,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Hs(0)}static Un(){return new Hs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="LruGarbageCollector",F2=1048576;function S_([t,e],[n,i]){const r=ue(t,n);return r===0?ue(e,i):r}class G2{constructor(e){this.Hn=e,this.buffer=new Ke(S_),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();S_(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class K2{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){H(A_,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ia(n)?H(A_,"Ignoring IndexedDB error during garbage collection: ",n):await na(n)}await this.er(3e5)})}}class Q2{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return V.resolve(wc.ae);const i=new G2(n);return this.tr.forEachTarget(e,r=>i.Zn(r.sequenceNumber)).next(()=>this.tr.rr(e,r=>i.Zn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.tr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(b_)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),b_):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let i,r,s,a,l,u,h;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),r=this.params.maximumSequenceNumbersToCollect):r=g,a=Date.now(),this.nthSequenceNumber(e,r))).next(g=>(i=g,l=Date.now(),this.removeTargets(e,i,n))).next(g=>(s=g,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(h=Date.now(),ns()<=se.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:g})))}}function Y2(t,e){return new Q2(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.changes=new Br(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?V.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&oo(i.mutation,r,Ut.empty(),Ge.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,ae()).next(()=>i))}getLocalViewOfDocuments(e,n,i=ae()){const r=mr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let a=ja();return s.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=mr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,ae()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,r){let s=Zn();const a=ao(),l=function(){return ao()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof er)?s=s.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),oo(d.mutation,h,d.mutation.getFieldMask(),Ge.now())):a.set(h.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,d)=>a.set(h,d)),n.forEach((h,d)=>{var g;return l.set(h,new X2(d,(g=a.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const i=ao();let r=new De((a,l)=>a-l),s=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||Ut.empty();d=l.applyToLocalView(h,d),i.set(u,d);const g=(r.get(l.batchId)||ae()).add(u);r=r.insert(l.batchId,g)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,g=JT();d.forEach(m=>{if(!s.has(m)){const v=sb(n.get(m),i.get(m));v!==null&&g.set(m,v),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return V.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return K.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const a=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):V.resolve(mr());let l=Ro,u=s;return a.next(h=>V.forEach(h,(d,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),s.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,ae())).next(d=>({batchId:l,changes:ZT(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(i=>{let r=ja();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let a=ja();return this.indexManager.getCollectionParents(e,s).next(l=>V.forEach(l,u=>{const h=function(g,m){return new Xo(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next(d=>{d.forEach((g,m)=>{a=a.insert(g,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(a=>{s.forEach((u,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,ft.newInvalidDocument(d)))});let l=ja();return a.forEach((u,h)=>{const d=s.get(u);d!==void 0&&oo(d.mutation,h,Ut.empty(),Ge.now()),xc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return V.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:_n(r.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(r){return{name:r.name,query:B2(r.bundledQuery),readTime:_n(r.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.overlays=new De(K.comparator),this.Rr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const i=mr();return V.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.Et(e,n,s)}),V.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Rr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(i)),V.resolve()}getOverlaysForCollection(e,n,i){const r=mr(),s=n.length+1,a=new K(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return V.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new De((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=mr(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=mr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return V.resolve(l)}Et(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.Rr.get(r.largestBatchId).delete(i.key);this.Rr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new y2(n,i));let s=this.Rr.get(n);s===void 0&&(s=ae(),this.Rr.set(n,s)),this.Rr.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this.Vr=new Ke(Ye.mr),this.gr=new Ke(Ye.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const i=new Ye(e,n);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.wr(new Ye(e,n))}br(e,n){e.forEach(i=>this.removeReference(i,n))}Sr(e){const n=new K(new Se([])),i=new Ye(n,e),r=new Ye(n,e+1),s=[];return this.gr.forEachInRange([i,r],a=>{this.wr(a),s.push(a.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new K(new Se([])),i=new Ye(n,e),r=new Ye(n,e+1);let s=ae();return this.gr.forEachInRange([i,r],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Ye(e,0),i=this.Vr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ye{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return K.comparator(e.key,n.key)||ue(e.Cr,n.Cr)}static pr(e,n){return ue(e.Cr,n.Cr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Ke(Ye.mr)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new p2(s,n,i,r);this.mutationQueue.push(a);for(const l of r)this.Mr=this.Mr.add(new Ye(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return V.resolve(a)}lookupMutationBatch(e,n){return V.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.Nr(i),s=r<0?0:r;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?Sm:this.Fr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ye(n,0),r=new Ye(n,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([i,r],a=>{const l=this.Or(a.Cr);s.push(l)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ke(ue);return n.forEach(r=>{const s=new Ye(r,0),a=new Ye(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,a],l=>{i=i.add(l.Cr)})}),V.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;K.isDocumentKey(s)||(s=s.child(""));const a=new Ye(new K(s),0);let l=new Ke(ue);return this.Mr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.Cr)),!0)},a),V.resolve(this.Br(l))}Br(e){const n=[];return e.forEach(i=>{const r=this.Or(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){me(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return V.forEach(n.mutations,r=>{const s=new Ye(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,n){const i=new Ye(n,0),r=this.Mr.firstAfterOrEqual(i);return V.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.kr=e,this.docs=function(){return new De(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,a=this.kr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return V.resolve(i?i.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let i=Zn();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ft.newInvalidDocument(r))}),V.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=Zn();const a=n.path,l=new K(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||DC(NC(d),i)<=0||(r.has(d.key)||xc(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,n,i,r){$()}qr(e,n){return V.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new ix(this)}getSize(e){return V.resolve(this.size)}}class ix extends $2{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(i)}),V.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.persistence=e,this.Qr=new Br(n=>Im(n),Cm),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Vm,this.targetCount=0,this.Ur=Hs.Kn()}forEachTarget(e,n){return this.Qr.forEach((i,r)=>n(r)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$r&&(this.$r=n),V.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ur=new Hs(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.zn(n),V.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Kr.Sr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Qr.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.Qr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),V.waitFor(s).next(()=>r)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const i=this.Qr.get(n)||null;return V.resolve(i)}addMatchingKeys(e,n,i){return this.Kr.yr(n,i),V.resolve()}removeMatchingKeys(e,n,i){this.Kr.br(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(a=>{s.push(r.markPotentiallyOrphaned(e,a))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Kr.Sr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Kr.vr(n);return V.resolve(i)}containsKey(e,n){return V.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new wc(0),this.zr=!1,this.zr=!0,this.jr=new ex,this.referenceDelegate=e(this),this.Hr=new rx(this),this.indexManager=new q2,this.remoteDocumentCache=function(r){return new nx(r)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new z2(n),this.Yr=new Z2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new J2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Wr[e.toKey()];return i||(i=new tx(n,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,i){H("MemoryPersistence","Starting transaction:",e);const r=new sx(this.Gr.next());return this.referenceDelegate.Zr(),i(r).next(s=>this.referenceDelegate.Xr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}ei(e,n){return V.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,n)))}}class sx extends MC{constructor(e){super(),this.currentSequenceNumber=e}}class Pm{constructor(e){this.persistence=e,this.ti=new Vm,this.ni=null}static ri(e){return new Pm(e)}get ii(){if(this.ni)return this.ni;throw $()}addReference(e,n,i){return this.ti.addReference(i,n),this.ii.delete(i.toString()),V.resolve()}removeReference(e,n,i){return this.ti.removeReference(i,n),this.ii.add(i.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),V.resolve()}removeTarget(e,n){this.ti.Sr(n.targetId).forEach(r=>this.ii.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.ii.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ii,i=>{const r=K.fromPath(i);return this.si(e,r).next(s=>{s||n.removeEntry(r,Z.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(i=>{i?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return V.or([()=>V.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Xu{constructor(e,n){this.persistence=e,this.oi=new Br(i=>PC(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=Y2(this,n)}static ri(e,n){return new Xu(e,n)}Zr(){}Xr(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}sr(e){let n=0;return this.rr(e,i=>{n++}).next(()=>n)}rr(e,n){return V.forEach(this.oi,(i,r)=>this.ar(e,i,r).next(s=>s?V.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.qr(e,a=>this.ar(e,a,n).next(l=>{l||(i++,s.removeEntry(a,Z.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.oi.set(i,e.currentSequenceNumber),V.resolve()}removeReference(e,n,i){return this.oi.set(i,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),V.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=iu(e.data.value)),n}ar(e,n,i){return V.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.oi.get(n);return V.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Hi=i,this.Ji=r}static Yi(e,n){let i=ae(),r=ae();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Um(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return tI()?8:kC(gt())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.rs(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ss(e,n,r,i).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new ax;return this._s(e,n,a).next(l=>{if(s.result=l,this.Xi)return this.us(e,n,a,l.size)})}).next(()=>s.result)}us(e,n,i,r){return i.documentReadCount<this.es?(ns()<=se.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),V.resolve()):(ns()<=se.DEBUG&&H("QueryEngine","Query:",is(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ts*r?(ns()<=se.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yn(n))):V.resolve())}rs(e,n){if(f_(n))return V.resolve(null);let i=yn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=ld(n,null,"F"),i=yn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const a=ae(...s);return this.ns.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const h=this.cs(n,l);return this.ls(n,h,a,u.readTime)?this.rs(e,ld(n,null,"F")):this.hs(e,h,n,u)}))})))}ss(e,n,i,r){return f_(n)||r.isEqual(Z.min())?V.resolve(null):this.ns.getDocuments(e,i).next(s=>{const a=this.cs(n,s);return this.ls(n,a,i,r)?V.resolve(null):(ns()<=se.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),is(n)),this.hs(e,a,n,xC(r,Ro)).next(l=>l))})}cs(e,n){let i=new Ke(XT(e));return n.forEach((r,s)=>{xc(e,s)&&(i=i.add(s))}),i}ls(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}_s(e,n,i){return ns()<=se.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",is(n)),this.ns.getDocumentsMatchingQuery(e,n,Gi.min(),i)}hs(e,n,i,r){return this.ns.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="LocalStore",lx=3e8;class ux{constructor(e,n,i,r){this.persistence=e,this.Ps=n,this.serializer=r,this.Ts=new De(ue),this.Is=new Br(s=>Im(s),Cm),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new W2(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function cx(t,e,n,i){return new ux(t,e,n,i)}async function vb(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.As(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const a=[],l=[];let u=ae();for(const h of r){a.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Rs:h,removedBatchIds:a,addedBatchIds:l}))})})}function hx(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const g=h.batch,m=g.keys();let v=V.resolve();return m.forEach(C=>{v=v.next(()=>d.getEntry(u,C)).next(O=>{const M=h.docVersions.get(C);me(M!==null),O.version.compareTo(M)<0&&(g.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),d.addEntry(O)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=ae();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function Eb(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function fx(t,e){const n=J(t),i=e.snapshotVersion;let r=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.ds.newChangeBuffer({trackRemovals:!0});r=n.Ts;const l=[];e.targetChanges.forEach((d,g)=>{const m=r.get(g);if(!m)return;l.push(n.Hr.removeMatchingKeys(s,d.removedDocuments,g).next(()=>n.Hr.addMatchingKeys(s,d.addedDocuments,g)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(g)!==null?v=v.withResumeToken(at.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,i)),r=r.insert(g,v),function(O,M,A){return O.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=lx?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,v,d)&&l.push(n.Hr.updateTargetData(s,v))});let u=Zn(),h=ae();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(dx(s,a,e.documentUpdates).next(d=>{u=d.Vs,h=d.fs})),!i.isEqual(Z.min())){const d=n.Hr.getLastRemoteSnapshotVersion(s).next(g=>n.Hr.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return V.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.Ts=r,s))}function dx(t,e,n){let i=ae(),r=ae();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let a=Zn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):H(Lm,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Vs:a,fs:r}})}function mx(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Sm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function gx(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Hr.getTargetData(i,e).next(s=>s?(r=s,V.resolve(r)):n.Hr.allocateTargetId(i).next(a=>(r=new Ii(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Hr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(i.targetId,i),n.Is.set(e,i.targetId)),i})}async function dd(t,e,n){const i=J(t),r=i.Ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!ia(a))throw a;H(Lm,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ts=i.Ts.remove(e),i.Is.delete(r.target)}function w_(t,e,n){const i=J(t);let r=Z.min(),s=ae();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,d){const g=J(u),m=g.Is.get(d);return m!==void 0?V.resolve(g.Ts.get(m)):g.Hr.getTargetData(h,d)}(i,a,yn(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(a,l.targetId).next(u=>{s=u})}).next(()=>i.Ps.getDocumentsMatchingQuery(a,e,n?r:Z.min(),n?s:ae())).next(l=>(px(i,t2(e),l),{documents:l,gs:s})))}function px(t,e,n){let i=t.Es.get(e)||Z.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Es.set(e,i)}class R_{constructor(){this.activeTargetIds=o2()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yx{constructor(){this.ho=new R_,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,i){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new R_,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="ConnectivityMonitor";class C_{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){H(I_,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){H(I_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function md(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="RestConnection",vx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ex{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${i}/databases/${r}`,this.wo=this.databaseId.database===Hu?`project_id=${i}`:`project_id=${i}&database_id=${r}`}bo(e,n,i,r,s){const a=md(),l=this.So(e,n.toUriEncodedString());H(Zh,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,r,s),this.vo(e,l,u,i).then(h=>(H(Zh,`Received RPC '${e}' ${a}: `,h),h),h=>{throw js(Zh,`RPC '${e}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Co(e,n,i,r,s,a){return this.bo(e,n,i,r,s)}Do(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ta}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}So(e,n){const i=vx[e];return`${this.po}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection";class bx extends Ex{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,i,r){const s=md();return new Promise((a,l)=>{const u=new wT;u.setWithCredentials(!0),u.listenOnce(RT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case nu.NO_ERROR:const d=u.getResponseJson();H(ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case nu.TIMEOUT:H(ct,`RPC '${e}' ${s} timed out`),l(new F(U.DEADLINE_EXCEEDED,"Request time out"));break;case nu.HTTP_ERROR:const g=u.getStatus();if(H(ct,`RPC '${e}' ${s} failed with status:`,g,"response text:",u.getResponseText()),g>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const C=function(M){const A=M.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(A)>=0?A:U.UNKNOWN}(v.status);l(new F(C,v.message))}else l(new F(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new F(U.UNAVAILABLE,"Connection failed."));break;default:$()}}finally{H(ct,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(r);H(ct,`RPC '${e}' ${s} sending request:`,r),u.send(n,"POST",h,i,15)})}Wo(e,n,i){const r=md(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=xT(),l=CT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");H(ct,`Creating RPC '${e}' stream ${r}: ${d}`,u);const g=a.createWebChannel(d,u);let m=!1,v=!1;const C=new Tx({Fo:M=>{v?H(ct,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(m||(H(ct,`Opening RPC '${e}' stream ${r} transport.`),g.open(),m=!0),H(ct,`RPC '${e}' stream ${r} sending:`,M),g.send(M))},Mo:()=>g.close()}),O=(M,A,E)=>{M.listen(A,S=>{try{E(S)}catch(x){setTimeout(()=>{throw x},0)}})};return O(g,La.EventType.OPEN,()=>{v||(H(ct,`RPC '${e}' stream ${r} transport opened.`),C.Qo())}),O(g,La.EventType.CLOSE,()=>{v||(v=!0,H(ct,`RPC '${e}' stream ${r} transport closed`),C.Ko())}),O(g,La.EventType.ERROR,M=>{v||(v=!0,js(ct,`RPC '${e}' stream ${r} transport errored:`,M),C.Ko(new F(U.UNAVAILABLE,"The operation could not be completed")))}),O(g,La.EventType.MESSAGE,M=>{var A;if(!v){const E=M.data[0];me(!!E);const S=E,x=(S==null?void 0:S.error)||((A=S[0])===null||A===void 0?void 0:A.error);if(x){H(ct,`RPC '${e}' stream ${r} received error:`,x);const L=x.status;let j=function(b){const w=Ue[b];if(w!==void 0)return ob(w)}(L),T=x.message;j===void 0&&(j=U.INTERNAL,T="Unknown error status: "+L+" with message "+x.message),v=!0,C.Ko(new F(j,T)),g.close()}else H(ct,`RPC '${e}' stream ${r} received:`,E),C.Uo(E)}}),O(l,IT.STAT_EVENT,M=>{M.stat===nd.PROXY?H(ct,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===nd.NOPROXY&&H(ct,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{C.$o()},0),C}}function Jh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(t){return new R2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,n,i=1e3,r=1.5,s=6e4){this.Ti=e,this.timerId=n,this.Go=i,this.zo=r,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="PersistentStream";class bb{constructor(e,n,i,r,s,a,l,u){this.Ti=e,this.n_=i,this.r_=r,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Tb(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Wn(n.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.i_===n&&this.V_(i,r)},i=>{e(()=>{const r=new F(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(r)})})}V_(e,n){const i=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{i(()=>this.m_(r))}),this.stream.onMessage(r=>{i(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return H(x_,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(H(x_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ax extends bb{constructor(e,n,i,r,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=x2(this.serializer,e),i=function(s){if(!("targetChange"in s))return Z.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Z.min():a.readTime?_n(a.readTime):Z.min()}(e);return this.listener.p_(n,i)}y_(e){const n={};n.database=fd(this.serializer),n.addTarget=function(s,a){let l;const u=a.target;if(l=ad(u)?{documents:O2(s,u)}:{query:M2(s,u).ht},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=cb(s,a.resumeToken);const h=ud(s,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(Z.min())>0){l.readTime=$u(s,a.snapshotVersion.toTimestamp());const h=ud(s,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const i=V2(this.serializer,e);i&&(n.labels=i),this.I_(n)}w_(e){const n={};n.database=fd(this.serializer),n.removeTarget=e,this.I_(n)}}class Sx extends bb{constructor(e,n,i,r,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=s}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=D2(e.writeResults,e.commitTime),i=_n(e.commitTime);return this.listener.v_(i,n)}C_(){const e={};e.database=fd(this.serializer),this.I_(e)}S_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>N2(this.serializer,i))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{}class Rx extends wx{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new F(U.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.bo(e,cd(n,i),r,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(U.UNKNOWN,s.toString())})}Co(e,n,i,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Co(e,cd(n,i),r,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new F(U.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Ix{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Wn(n),this.N_=!1):H("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="RemoteStore";class Cx{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(a=>{i.enqueueAndForget(async()=>{qr(this)&&(H(Or,"Restarting streams for network reachability change."),await async function(u){const h=J(u);h.W_.add(4),await Jo(h),h.j_.set("Unknown"),h.W_.delete(4),await kc(h)}(this))})}),this.j_=new Ix(i,r)}}async function kc(t){if(qr(t))for(const e of t.G_)await e(!0)}async function Jo(t){for(const e of t.G_)await e(!1)}function Ab(t,e){const n=J(t);n.U_.has(e.targetId)||(n.U_.set(e.targetId,e),qm(n)?Bm(n):ra(n).c_()&&zm(n,e))}function jm(t,e){const n=J(t),i=ra(n);n.U_.delete(e),i.c_()&&Sb(n,e),n.U_.size===0&&(i.c_()?i.P_():qr(n)&&n.j_.set("Unknown"))}function zm(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ra(t).y_(e)}function Sb(t,e){t.H_.Ne(e),ra(t).w_(e)}function Bm(t){t.H_=new b2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),ra(t).start(),t.j_.B_()}function qm(t){return qr(t)&&!ra(t).u_()&&t.U_.size>0}function qr(t){return J(t).W_.size===0}function wb(t){t.H_=void 0}async function xx(t){t.j_.set("Online")}async function Nx(t){t.U_.forEach((e,n)=>{zm(t,e)})}async function Dx(t,e){wb(t),qm(t)?(t.j_.q_(e),Bm(t)):t.j_.set("Unknown")}async function Ox(t,e,n){if(t.j_.set("Online"),e instanceof ub&&e.state===2&&e.cause)try{await async function(r,s){const a=s.cause;for(const l of s.targetIds)r.U_.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.U_.delete(l),r.H_.removeTarget(l))}(t,e)}catch(i){H(Or,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Wu(t,i)}else if(e instanceof au?t.H_.We(e):e instanceof lb?t.H_.Ze(e):t.H_.je(e),!n.isEqual(Z.min()))try{const i=await Eb(t.localStore);n.compareTo(i)>=0&&await function(s,a){const l=s.H_.ot(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.U_.get(h);d&&s.U_.set(h,d.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const d=s.U_.get(u);if(!d)return;s.U_.set(u,d.withResumeToken(at.EMPTY_BYTE_STRING,d.snapshotVersion)),Sb(s,u);const g=new Ii(d.target,u,h,d.sequenceNumber);zm(s,g)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){H(Or,"Failed to raise snapshot:",i),await Wu(t,i)}}async function Wu(t,e,n){if(!ia(e))throw e;t.W_.add(1),await Jo(t),t.j_.set("Offline"),n||(n=()=>Eb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Or,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await kc(t)})}function Rb(t,e){return e().catch(n=>Wu(t,n,e))}async function Vc(t){const e=J(t),n=$i(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:Sm;for(;Mx(e);)try{const r=await mx(e.localStore,i);if(r===null){e.K_.length===0&&n.P_();break}i=r.batchId,kx(e,r)}catch(r){await Wu(e,r)}Ib(e)&&Cb(e)}function Mx(t){return qr(t)&&t.K_.length<10}function kx(t,e){t.K_.push(e);const n=$i(t);n.c_()&&n.b_&&n.S_(e.mutations)}function Ib(t){return qr(t)&&!$i(t).u_()&&t.K_.length>0}function Cb(t){$i(t).start()}async function Vx(t){$i(t).C_()}async function Px(t){const e=$i(t);for(const n of t.K_)e.S_(n.mutations)}async function Ux(t,e,n){const i=t.K_.shift(),r=Om.from(i,e,n);await Rb(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Vc(t)}async function Lx(t,e){e&&$i(t).b_&&await async function(i,r){if(function(a){return v2(a)&&a!==U.ABORTED}(r.code)){const s=i.K_.shift();$i(i).h_(),await Rb(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Vc(i)}}(t,e),Ib(t)&&Cb(t)}async function N_(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),H(Or,"RemoteStore received new credentials");const i=qr(n);n.W_.add(3),await Jo(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await kc(n)}async function jx(t,e){const n=J(t);e?(n.W_.delete(2),await kc(n)):e||(n.W_.add(2),await Jo(n),n.j_.set("Unknown"))}function ra(t){return t.J_||(t.J_=function(n,i,r){const s=J(n);return s.M_(),new Ax(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{xo:xx.bind(null,t),No:Nx.bind(null,t),Lo:Dx.bind(null,t),p_:Ox.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),qm(t)?Bm(t):t.j_.set("Unknown")):(await t.J_.stop(),wb(t))})),t.J_}function $i(t){return t.Y_||(t.Y_=function(n,i,r){const s=J(n);return s.M_(),new Sx(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:Vx.bind(null,t),Lo:Lx.bind(null,t),D_:Px.bind(null,t),v_:Ux.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Vc(t)):(await t.Y_.stop(),t.K_.length>0&&(H(Or,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const a=Date.now()+i,l=new Hm(e,n,a,r,s);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fm(t,e){if(Wn("AsyncQueue",`${e}: ${t}`),ia(t))return new F(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{static emptySet(e){return new ws(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||K.comparator(n.key,i.key):(n,i)=>K.comparator(n.key,i.key),this.keyedMap=ja(),this.sortedSet=new De(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ws)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ws;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(){this.Z_=new De(K.comparator)}track(e){const n=e.doc.key,i=this.Z_.get(n);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(n):e.type===1&&i.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):$():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Fs{constructor(e,n,i,r,s,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,r,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Fs(e,n,ws.emptySet(n),a,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class Bx{constructor(){this.queries=O_(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,i){const r=J(n),s=r.queries;r.queries=O_(),s.forEach((a,l)=>{for(const u of l.ta)u.onError(i)})})(this,new F(U.ABORTED,"Firestore shutting down"))}}function O_(){return new Br(t=>$T(t),Cc)}async function xb(t,e){const n=J(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.na()&&e.ra()&&(i=2):(s=new zx,i=e.ra()?0:1);try{switch(i){case 0:s.ea=await n.onListen(r,!0);break;case 1:s.ea=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const l=Fm(a,`Initialization of query '${is(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,s),s.ta.push(e),e.sa(n.onlineState),s.ea&&e.oa(s.ea)&&Gm(n)}async function Nb(t,e){const n=J(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const a=s.ta.indexOf(e);a>=0&&(s.ta.splice(a,1),s.ta.length===0?r=e.ra()?0:1:!s.na()&&e.ra()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function qx(t,e){const n=J(t);let i=!1;for(const r of e){const s=r.query,a=n.queries.get(s);if(a){for(const l of a.ta)l.oa(r)&&(i=!0);a.ea=r}}i&&Gm(n)}function Hx(t,e,n){const i=J(t),r=i.queries.get(e);if(r)for(const s of r.ta)s.onError(n);i.queries.delete(e)}function Gm(t){t.ia.forEach(e=>{e.next()})}var gd,M_;(M_=gd||(gd={}))._a="default",M_.Cache="cache";class Db{constructor(e,n,i){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Fs(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const i=n!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Fs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==gd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e){this.key=e}}class Mb{constructor(e){this.key=e}}class Fx{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=ae(),this.mutatedKeys=ae(),this.ya=XT(e),this.wa=new ws(this.ya)}get ba(){return this.fa}Sa(e,n){const i=n?n.Da:new D_,r=n?n.wa:this.wa;let s=n?n.mutatedKeys:this.mutatedKeys,a=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,g)=>{const m=r.get(d),v=xc(this.query,g)?g:null,C=!!m&&this.mutatedKeys.has(m.key),O=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let M=!1;m&&v?m.data.isEqual(v.data)?C!==O&&(i.track({type:3,doc:v}),M=!0):this.va(m,v)||(i.track({type:2,doc:v}),M=!0,(u&&this.ya(v,u)>0||h&&this.ya(v,h)<0)&&(l=!0)):!m&&v?(i.track({type:0,doc:v}),M=!0):m&&!v&&(i.track({type:1,doc:m}),M=!0,(u||h)&&(l=!0)),M&&(v?(a=a.add(v),s=O?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{wa:a,Da:i,ls:l,mutatedKeys:s}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const a=e.Da.X_();a.sort((d,g)=>function(v,C){const O=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $()}};return O(v)-O(C)}(d.type,g.type)||this.ya(d.doc,g.doc)),this.Ca(i),r=r!=null&&r;const l=n&&!r?this.Fa():[],u=this.pa.size===0&&this.current&&!r?1:0,h=u!==this.ga;return this.ga=u,a.length!==0||h?{snapshot:new Fs(this.query,e.wa,s,a,e.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new D_,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=ae(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const n=[];return e.forEach(i=>{this.pa.has(i)||n.push(new Mb(i))}),this.pa.forEach(i=>{e.has(i)||n.push(new Ob(i))}),n}Oa(e){this.fa=e.gs,this.pa=ae();const n=this.Sa(e.documents);return this.applyChanges(n,!0)}Na(){return Fs.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const Km="SyncEngine";class Gx{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class Kx{constructor(e){this.key=e,this.Ba=!1}}class Qx{constructor(e,n,i,r,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Br(l=>$T(l),Cc),this.qa=new Map,this.Qa=new Set,this.$a=new De(K.comparator),this.Ka=new Map,this.Ua=new Vm,this.Wa={},this.Ga=new Map,this.za=Hs.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Yx(t,e,n=!0){const i=jb(t);let r;const s=i.ka.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Na()):r=await kb(i,e,n,!0),r}async function $x(t,e){const n=jb(t);await kb(n,e,!0,!1)}async function kb(t,e,n,i){const r=await gx(t.localStore,yn(e)),s=r.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await Xx(t,e,s,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&Ab(t.remoteStore,r),l}async function Xx(t,e,n,i,r){t.Ha=(g,m,v)=>async function(O,M,A,E){let S=M.view.Sa(A);S.ls&&(S=await w_(O.localStore,M.query,!1).then(({documents:T})=>M.view.Sa(T,S)));const x=E&&E.targetChanges.get(M.targetId),L=E&&E.targetMismatches.get(M.targetId)!=null,j=M.view.applyChanges(S,O.isPrimaryClient,x,L);return V_(O,M.targetId,j.Ma),j.snapshot}(t,g,m,v);const s=await w_(t.localStore,e,!0),a=new Fx(e,s.gs),l=a.Sa(s.documents),u=Zo.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),h=a.applyChanges(l,t.isPrimaryClient,u);V_(t,n,h.Ma);const d=new Gx(e,n,a);return t.ka.set(e,d),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),h.snapshot}async function Wx(t,e,n){const i=J(t),r=i.ka.get(e),s=i.qa.get(r.targetId);if(s.length>1)return i.qa.set(r.targetId,s.filter(a=>!Cc(a,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await dd(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&jm(i.remoteStore,r.targetId),pd(i,r.targetId)}).catch(na)):(pd(i,r.targetId),await dd(i.localStore,r.targetId,!0))}async function Zx(t,e){const n=J(t),i=n.ka.get(e),r=n.qa.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),jm(n.remoteStore,i.targetId))}async function Jx(t,e,n){const i=aN(t);try{const r=await function(a,l){const u=J(a),h=Ge.now(),d=l.reduce((v,C)=>v.add(C.key),ae());let g,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let C=Zn(),O=ae();return u.ds.getEntries(v,d).next(M=>{C=M,C.forEach((A,E)=>{E.isValidDocument()||(O=O.add(A))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,C)).next(M=>{g=M;const A=[];for(const E of l){const S=m2(E,g.get(E.key).overlayedDocument);S!=null&&A.push(new er(E.key,S,BT(S.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(v,h,A,l)}).next(M=>{m=M;const A=M.applyToLocalDocumentSet(g,O);return u.documentOverlayCache.saveOverlays(v,M.batchId,A)})}).then(()=>({batchId:m.batchId,changes:ZT(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,l,u){let h=a.Wa[a.currentUser.toKey()];h||(h=new De(ue)),h=h.insert(l,u),a.Wa[a.currentUser.toKey()]=h}(i,r.batchId,n),await el(i,r.changes),await Vc(i.remoteStore)}catch(r){const s=Fm(r,"Failed to persist write");n.reject(s)}}async function Vb(t,e){const n=J(t);try{const i=await fx(n.localStore,e);e.targetChanges.forEach((r,s)=>{const a=n.Ka.get(s);a&&(me(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.Ba=!0:r.modifiedDocuments.size>0?me(a.Ba):r.removedDocuments.size>0&&(me(a.Ba),a.Ba=!1))}),await el(n,i,e)}catch(i){await na(i)}}function k_(t,e,n){const i=J(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.ka.forEach((s,a)=>{const l=a.view.sa(e);l.snapshot&&r.push(l.snapshot)}),function(a,l){const u=J(a);u.onlineState=l;let h=!1;u.queries.forEach((d,g)=>{for(const m of g.ta)m.sa(l)&&(h=!0)}),h&&Gm(u)}(i.eventManager,e),r.length&&i.La.p_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function eN(t,e,n){const i=J(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Ka.get(e),s=r&&r.key;if(s){let a=new De(K.comparator);a=a.insert(s,ft.newNoDocument(s,Z.min()));const l=ae().add(s),u=new Oc(Z.min(),new Map,new De(ue),a,l);await Vb(i,u),i.$a=i.$a.remove(s),i.Ka.delete(e),Qm(i)}else await dd(i.localStore,e,!1).then(()=>pd(i,e,n)).catch(na)}async function tN(t,e){const n=J(t),i=e.batch.batchId;try{const r=await hx(n.localStore,e);Ub(n,i,null),Pb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await el(n,r)}catch(r){await na(r)}}async function nN(t,e,n){const i=J(t);try{const r=await function(a,l){const u=J(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(me(g!==null),d=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,e);Ub(i,e,n),Pb(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await el(i,r)}catch(r){await na(r)}}function Pb(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function Ub(t,e,n){const i=J(t);let r=i.Wa[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Wa[i.currentUser.toKey()]=r}}function pd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.qa.get(e))t.ka.delete(i),n&&t.La.Ja(i,n);t.qa.delete(e),t.isPrimaryClient&&t.Ua.Sr(e).forEach(i=>{t.Ua.containsKey(i)||Lb(t,i)})}function Lb(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(jm(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ka.delete(n),Qm(t))}function V_(t,e,n){for(const i of n)i instanceof Ob?(t.Ua.addReference(i.key,e),iN(t,i)):i instanceof Mb?(H(Km,"Document no longer in limbo: "+i.key),t.Ua.removeReference(i.key,e),t.Ua.containsKey(i.key)||Lb(t,i.key)):$()}function iN(t,e){const n=e.key,i=n.path.canonicalString();t.$a.get(n)||t.Qa.has(i)||(H(Km,"New document in limbo: "+n),t.Qa.add(i),Qm(t))}function Qm(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new K(Se.fromString(e)),i=t.za.next();t.Ka.set(i,new Kx(n)),t.$a=t.$a.insert(n,i),Ab(t.remoteStore,new Ii(yn(xm(n.path)),i,"TargetPurposeLimboResolution",wc.ae))}}async function el(t,e,n){const i=J(t),r=[],s=[],a=[];i.ka.isEmpty()||(i.ka.forEach((l,u)=>{a.push(i.Ha(u,e,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){r.push(h);const g=Um.Yi(u.targetId,h);s.push(g)}}))}),await Promise.all(a),i.La.p_(r),await async function(u,h){const d=J(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>V.forEach(h,m=>V.forEach(m.Hi,v=>d.persistence.referenceDelegate.addReference(g,m.targetId,v)).next(()=>V.forEach(m.Ji,v=>d.persistence.referenceDelegate.removeReference(g,m.targetId,v)))))}catch(g){if(!ia(g))throw g;H(Lm,"Failed to update sequence numbers: "+g)}for(const g of h){const m=g.targetId;if(!g.fromCache){const v=d.Ts.get(m),C=v.snapshotVersion,O=v.withLastLimboFreeSnapshotVersion(C);d.Ts=d.Ts.insert(m,O)}}}(i.localStore,s))}async function rN(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){H(Km,"User change. New user:",e.toKey());const i=await vb(n.localStore,e);n.currentUser=e,function(s,a){s.Ga.forEach(l=>{l.forEach(u=>{u.reject(new F(U.CANCELLED,a))})}),s.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await el(n,i.Rs)}}function sN(t,e){const n=J(t),i=n.Ka.get(e);if(i&&i.Ba)return ae().add(i.key);{let r=ae();const s=n.qa.get(e);if(!s)return r;for(const a of s){const l=n.ka.get(a);r=r.unionWith(l.view.ba)}return r}}function jb(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=eN.bind(null,e),e.La.p_=qx.bind(null,e.eventManager),e.La.Ja=Hx.bind(null,e.eventManager),e}function aN(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nN.bind(null,e),e}class Zu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mc(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return cx(this.persistence,new ox,e.initialUser,this.serializer)}Xa(e){return new _b(Pm.ri,this.serializer)}Za(e){return new yx}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zu.provider={build:()=>new Zu};class oN extends Zu{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){me(this.persistence.referenceDelegate instanceof Xu);const i=this.persistence.referenceDelegate.garbageCollector;return new K2(i,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new _b(i=>Xu.ri(i,n),this.serializer)}}class yd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>k_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rN.bind(null,this.syncEngine),await jx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Bx}()}createDatastore(e){const n=Mc(e.databaseInfo.databaseId),i=function(s){return new bx(s)}(e.databaseInfo);return function(s,a,l,u){return new Rx(s,a,l,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,a,l){return new Cx(i,r,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>k_(this.syncEngine,n,0),function(){return C_.D()?new C_:new _x}())}createSyncEngine(e,n){return function(r,s,a,l,u,h,d){const g=new Qx(r,s,a,l,u,h);return d&&(g.ja=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=J(r);H(Or,"RemoteStore shutting down."),s.W_.add(5),await Jo(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}yd.provider={build:()=>new yd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Wn("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="FirestoreClient";class lN{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ht.UNAUTHENTICATED,this.clientId=DT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async a=>{H(Xi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(H(Xi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Fm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function ef(t,e){t.asyncQueue.verifyOperationInProgress(),H(Xi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await vb(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function P_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uN(t);H(Xi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>N_(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>N_(e.remoteStore,r)),t._onlineComponents=e}async function uN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(Xi,"Using user provided OfflineComponentProvider");try{await ef(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===U.FAILED_PRECONDITION||r.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;js("Error using user provided cache. Falling back to memory cache: "+n),await ef(t,new Zu)}}else H(Xi,"Using default OfflineComponentProvider"),await ef(t,new oN(void 0));return t._offlineComponents}async function Bb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(Xi,"Using user provided OnlineComponentProvider"),await P_(t,t._uninitializedComponentsProvider._online)):(H(Xi,"Using default OnlineComponentProvider"),await P_(t,new yd))),t._onlineComponents}function cN(t){return Bb(t).then(e=>e.syncEngine)}async function qb(t){const e=await Bb(t),n=e.eventManager;return n.onListen=Yx.bind(null,e.syncEngine),n.onUnlisten=Wx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$x.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Zx.bind(null,e.syncEngine),n}function hN(t,e,n={}){const i=new Fn;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new zb({next:m=>{d.su(),a.enqueueAndForget(()=>Nb(s,g));const v=m.docs.has(l);!v&&m.fromCache?h.reject(new F(U.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?h.reject(new F(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new Db(xm(l.path),d,{includeMetadataChanges:!0,Ta:!0});return xb(s,g)}(await qb(t),t.asyncQueue,e,n,i)),i.promise}function fN(t,e,n={}){const i=new Fn;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,u,h){const d=new zb({next:m=>{d.su(),a.enqueueAndForget(()=>Nb(s,g)),m.fromCache&&u.source==="server"?h.reject(new F(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(m)},error:m=>h.reject(m)}),g=new Db(l,d,{includeMetadataChanges:!0,Ta:!0});return xb(s,g)}(await qb(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t,e,n){if(!n)throw new F(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dN(t,e,n,i){if(e===!0&&i===!0)throw new F(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function L_(t){if(!K.isDocumentKey(t))throw new F(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function j_(t){if(K.isDocumentKey(t))throw new F(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Pc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$()}function Jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new F(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pc(t);throw new F(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="firestore.googleapis.com",z_=!0;class B_{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new F(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Gb,this.ssl=z_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:z_;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=yb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<F2)throw new F(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hb((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uc{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new F(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new F(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new TC;switch(i.type){case"firstParty":return new wC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new F(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=U_.get(n);i&&(H("ComponentProvider","Removing Datastore"),U_.delete(n),i.terminate())}(this),Promise.resolve()}}function mN(t,e,n,i={}){var r;const s=(t=Jn(t,Uc))._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;s.host!==Gb&&s.host!==l&&js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:l,ssl:!1,emulatorOptions:i});if(!xr(u,a)&&(t._setSettings(u),i.mockUserToken)){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=ht.MOCK_USER;else{h=YR(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new F(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ht(g)}t._authCredentials=new bC(new NT(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new sa(this.firestore,e,this._query)}}class Ct{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}}class zi extends sa{constructor(e,n,i){super(e,n,xm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new K(e))}withConverter(e){return new zi(this.firestore,e,this._path)}}function br(t,e,...n){if(t=Je(t),Fb("collection","path",e),t instanceof Uc){const i=Se.fromString(e,...n);return j_(i),new zi(t,null,i)}{if(!(t instanceof Ct||t instanceof zi))throw new F(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Se.fromString(e,...n));return j_(i),new zi(t.firestore,null,i)}}function Gs(t,e,...n){if(t=Je(t),arguments.length===1&&(e=DT.newId()),Fb("doc","path",e),t instanceof Uc){const i=Se.fromString(e,...n);return L_(i),new Ct(t,null,new K(i))}{if(!(t instanceof Ct||t instanceof zi))throw new F(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Se.fromString(e,...n));return L_(i),new Ct(t.firestore,t instanceof zi?t.converter:null,new K(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="AsyncQueue";class H_{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Tb(this,"async_queue_retry"),this.bu=()=>{const i=Jh();i&&H(q_,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.Su=e;const n=Jh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=Jh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Fn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ia(e))throw e;H(q_,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.Su.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const r=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(i);throw Wn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.pu=!1,i))));return this.Su=n,n}enqueueAfterDelay(e,n,i){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const r=Hm.createAndSchedule(this,e,n,i,s=>this.Fu(s));return this.fu.push(r),r}Du(){this.gu&&$()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class aa extends Uc{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new H_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new H_(e),this._firestoreClient=void 0,await e}}}function gN(t,e){const n=typeof t=="object"?t:TT(),i=typeof t=="string"?t:Hu,r=bm(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=KR("firestore");s&&mN(r,...s)}return r}function Ym(t){if(t._terminated)throw new F(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pN(t),t._firestoreClient}function pN(t){var e,n,i;const r=t._freezeSettings(),s=function(l,u,h,d){return new jC(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Hb(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new lN(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ks(at.fromBase64String(e))}catch(n){throw new F(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ks(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new F(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new F(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new F(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=/^__.*__$/;class _N{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new er(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wo(e,this.data,n,this.fieldTransforms)}}class Kb{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new er(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Qb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $()}}class Zm{constructor(e,n,i,r,s,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Zm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ku({path:i,Qu:!1});return r.$u(e),r}Ku(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ku({path:i,Qu:!1});return r.Bu(),r}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Ju(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Qb(this.Lu)&&yN.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class vN{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Mc(e)}ju(e,n,i,r=!1){return new Zm({Lu:e,methodName:n,zu:i,path:rt.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jm(t){const e=t._freezeSettings(),n=Mc(t._databaseId);return new vN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function EN(t,e,n,i,r,s={}){const a=t.ju(s.merge||s.mergeFields?2:0,e,n,r);eg("Data must be an object, but it was:",a,i);const l=Yb(i,a);let u,h;if(s.merge)u=new Ut(a.fieldMask),h=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const g of s.mergeFields){const m=_d(e,g,n);if(!a.contains(m))throw new F(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Xb(d,m)||d.push(m)}u=new Ut(d),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new _N(new It(l),u,h)}class jc extends $m{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jc}}function TN(t,e,n,i){const r=t.ju(1,e,n);eg("Data must be an object, but it was:",r,i);const s=[],a=It.empty();Ji(i,(u,h)=>{const d=tg(e,u,n);h=Je(h);const g=r.Ku(d);if(h instanceof jc)s.push(d);else{const m=tl(h,g);m!=null&&(s.push(d),a.set(d,m))}});const l=new Ut(s);return new Kb(a,l,r.fieldTransforms)}function bN(t,e,n,i,r,s){const a=t.ju(1,e,n),l=[_d(e,i,n)],u=[r];if(s.length%2!=0)throw new F(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(_d(e,s[m])),u.push(s[m+1]);const h=[],d=It.empty();for(let m=l.length-1;m>=0;--m)if(!Xb(h,l[m])){const v=l[m];let C=u[m];C=Je(C);const O=a.Ku(v);if(C instanceof jc)h.push(v);else{const M=tl(C,O);M!=null&&(h.push(v),d.set(v,M))}}const g=new Ut(h);return new Kb(d,g,a.fieldTransforms)}function AN(t,e,n,i=!1){return tl(n,t.ju(i?4:3,e))}function tl(t,e){if($b(t=Je(t)))return eg("Unsupported field value:",e,t),Yb(t,e);if(t instanceof $m)return function(i,r){if(!Qb(r.Lu))throw r.Wu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,r){const s=[];let a=0;for(const l of i){let u=tl(l,r.Uu(a));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),a++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Je(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return l2(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ge.fromDate(i);return{timestampValue:$u(r.serializer,s)}}if(i instanceof Ge){const s=new Ge(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:$u(r.serializer,s)}}if(i instanceof Xm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ks)return{bytesValue:cb(r.serializer,i._byteString)};if(i instanceof Ct){const s=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(s))throw r.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:km(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Wm)return function(a,l){return{mapValue:{fields:{[jT]:{stringValue:zT},[Fu]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Wu("VectorValues must only contain numeric values.");return Nm(l.serializer,h)})}}}}}}(i,r);throw r.Wu(`Unsupported field value: ${Pc(i)}`)}(t,e)}function Yb(t,e){const n={};return MT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ji(t,(i,r)=>{const s=tl(r,e.qu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function $b(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof Xm||t instanceof Ks||t instanceof Ct||t instanceof $m||t instanceof Wm)}function eg(t,e,n){if(!$b(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Pc(n);throw i==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}}function _d(t,e,n){if((e=Je(e))instanceof Lc)return e._internalPath;if(typeof e=="string")return tg(t,e);throw Ju("Field path arguments must be of type string or ",t,!1,void 0,n)}const SN=new RegExp("[~\\*/\\[\\]]");function tg(t,e,n){if(e.search(SN)>=0)throw Ju(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lc(...e.split("."))._internalPath}catch{throw Ju(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ju(t,e,n,i,r){const s=i&&!i.isEmpty(),a=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||a)&&(u+=" (found",s&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new F(U.INVALID_ARGUMENT,l+t+u)}function Xb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ng("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wN extends Wb{data(){return super.data()}}function ng(t,e){return typeof e=="string"?tg(t,e):e instanceof Lc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new F(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ig{}class IN extends ig{}function Oo(t,e,...n){let i=[];e instanceof ig&&i.push(e),i=i.concat(n),function(s){const a=s.filter(u=>u instanceof rg).length,l=s.filter(u=>u instanceof zc).length;if(a>1||a>0&&l>0)throw new F(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class zc extends IN{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new zc(e,n,i)}_apply(e){const n=this._parse(e);return Zb(e._query,n),new sa(e.firestore,e.converter,od(e._query,n))}_parse(e){const n=Jm(e.firestore);return function(s,a,l,u,h,d,g){let m;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new F(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){G_(g,d);const C=[];for(const O of g)C.push(F_(u,s,O));m={arrayValue:{values:C}}}else m=F_(u,s,g)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||G_(g,d),m=AN(l,a,g,d==="in"||d==="not-in");return ze.create(h,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ar(t,e,n){const i=e,r=ng("where",t);return zc._create(r,i,n)}class rg extends ig{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let a=r;const l=s.getFlattenedFilters();for(const u of l)Zb(a,u),a=od(a,u)}(e._query,n),new sa(e.firestore,e.converter,od(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function F_(t,e,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new F(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YT(e)&&n.indexOf("/")!==-1)throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Se.fromString(n));if(!K.isDocumentKey(i))throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return a_(t,new K(i))}if(n instanceof Ct)return a_(t,n._key);throw new F(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pc(n)}.`)}function G_(t,e){if(!Array.isArray(t)||t.length===0)throw new F(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zb(t,e){const n=function(r,s){for(const a of r)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new F(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new F(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class CN{convertValue(e,n="none"){switch(Yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ji(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n[Fu].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(a=>Pe(a.doubleValue));return new Wm(s)}convertGeoPoint(e){return new Xm(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Ic(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Io(e));default:return null}}convertTimestamp(e){const n=Ki(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Se.fromString(e);me(pb(i));const r=new Co(i.get(1),i.get(3)),s=new K(i.popFirst(5));return r.isEqual(n)||Wn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jb extends Wb{constructor(e,n,i,r,s,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(ng("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class ou extends Jb{data(e={}){return super.data(e)}}class NN{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ba(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new ou(this._firestore,this._userDataWriter,i.key,i,new Ba(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new F(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const u=new ou(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ba(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new ou(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ba(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:DN(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function DN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t){t=Jn(t,Ct);const e=Jn(t.firestore,aa);return hN(Ym(e),t._key).then(n=>MN(e,t,n))}class eA extends CN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function Mo(t){t=Jn(t,sa);const e=Jn(t.firestore,aa),n=Ym(e),i=new eA(e);return RN(t._query),fN(n,t._query).then(r=>new NN(e,i,t,r))}function tA(t,e,n,...i){t=Jn(t,Ct);const r=Jn(t.firestore,aa),s=Jm(r);let a;return a=typeof(e=Je(e))=="string"||e instanceof Lc?bN(s,"updateDoc",t._key,e,n,i):TN(s,"updateDoc",t._key,e),sg(r,[a.toMutation(t._key,on.exists(!0))])}function ON(t){return sg(Jn(t.firestore,aa),[new Dm(t._key,on.none())])}function nA(t,e){const n=Jn(t.firestore,aa),i=Gs(t),r=xN(t.converter,e);return sg(n,[EN(Jm(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,on.exists(!1))]).then(()=>i)}function sg(t,e){return function(i,r){const s=new Fn;return i.asyncQueue.enqueueAndForget(async()=>Jx(await cN(i),r,s)),s.promise}(Ym(t),e)}function MN(t,e,n){const i=n.docs.get(e._key),r=new eA(t);return new Jb(t,r,e._key,i,new Ba(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){ta=r})(ea),Ls(new Nr("firestore",(i,{instanceIdentifier:r,options:s})=>{const a=i.getProvider("app").getImmediate(),l=new aa(new AC(i.getProvider("auth-internal")),new RC(a,i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new F(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(h.options.projectId,d)}(a,r),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Li($y,Xy,e),Li($y,Xy,"esm2017")})();function ag(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function iA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const kN=iA,rA=new Yo("auth","Firebase",iA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new Em("@firebase/auth");function VN(t,...e){ec.logLevel<=se.WARN&&ec.warn(`Auth (${ea}): ${t}`,...e)}function lu(t,...e){ec.logLevel<=se.ERROR&&ec.error(`Auth (${ea}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t,...e){throw lg(t,...e)}function ln(t,...e){return lg(t,...e)}function og(t,e,n){const i=Object.assign(Object.assign({},kN()),{[e]:n});return new Yo("auth","Firebase",i).create(e,{appName:t.name})}function Gn(t){return og(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PN(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&tn(t,"argument-error"),og(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return rA.create(t,...e)}function Q(t,e,...n){if(!t)throw lg(e,...n)}function zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw lu(e),new Error(e)}function ei(t,e){t||zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function UN(){return Q_()==="http:"||Q_()==="https:"}function Q_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UN()||ZR()||"connection"in navigator)?navigator.onLine:!0}function jN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ei(n>e,"Short delay should be less than long delay!"),this.isMobile=$R()||JR()}get(){return LN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(t,e){ei(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=new nl(3e4,6e4);function ii(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ri(t,e,n,i,r={}){return aA(t,r,async()=>{let s={},a={};i&&(e==="GET"?a=i:s={body:JSON.stringify(i)});const l=$o(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},s);return WR()||(h.referrerPolicy="no-referrer"),sA.fetch()(oA(t,t.config.apiHost,n,l),h)})}async function aA(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},zN),e);try{const r=new HN(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw Hl(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Hl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Hl(t,"user-disabled",a);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw og(t,d,h);tn(t,d)}}catch(r){if(r instanceof ni)throw r;tn(t,"network-request-failed",{message:String(r)})}}async function il(t,e,n,i,r={}){const s=await ri(t,e,n,i,r);return"mfaPendingCredential"in s&&tn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function oA(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?ug(t.config,r):`${t.config.apiScheme}://${r}`}function qN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(ln(this.auth,"network-request-failed")),BN.get())})}}function Hl(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=ln(t,e,i);return r.customData._tokenResponse=n,r}function Y_(t){return t!==void 0&&t.enterprise!==void 0}class FN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return qN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GN(t,e){return ri(t,"GET","/v2/recaptchaConfig",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(t,e){return ri(t,"POST","/v1/accounts:delete",e)}async function lA(t,e){return ri(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QN(t,e=!1){const n=Je(t),i=await n.getIdToken(e),r=cg(i);Q(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:lo(tf(r.auth_time)),issuedAtTime:lo(tf(r.iat)),expirationTime:lo(tf(r.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function tf(t){return Number(t)*1e3}function cg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return lu("JWT malformed, contained fewer than 3 sections"),null;try{const r=mT(n);return r?JSON.parse(r):(lu("Failed to decode base64 JWT payload"),null)}catch(r){return lu("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function $_(t){const e=cg(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ni&&YN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function YN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lo(this.lastLoginAt),this.creationTime=lo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await ko(t,lA(n,{idToken:i}));Q(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?uA(s.providerUserInfo):[],l=WN(t.providerData,a),u=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=u?h:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Ed(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,g)}async function XN(t){const e=Je(t);await tc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function uA(t){return t.map(e=>{var{providerId:n}=e,i=ag(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e){const n=await aA(t,{},async()=>{const i=$o({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,a=oA(t,r,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",sA.fetch()(a,{method:"POST",headers:l,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function JN(t,e){return ri(t,"POST","/v2/accounts:revokeToken",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=$_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await ZN(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,a=new Rs;return i&&(Q(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(Q(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),s&&(Q(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rs,this.toJSON())}_performRefresh(){return zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=ag(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $N(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ed(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ko(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QN(this,e)}reload(){return XN(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await tc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pt(this.auth.app))return Promise.reject(Gn(this.auth));const e=await this.getIdToken();return await ko(this,KN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,a,l,u,h,d;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,m=(r=n.email)!==null&&r!==void 0?r:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(a=n.photoURL)!==null&&a!==void 0?a:void 0,O=(l=n.tenantId)!==null&&l!==void 0?l:void 0,M=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,A=(h=n.createdAt)!==null&&h!==void 0?h:void 0,E=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:S,emailVerified:x,isAnonymous:L,providerData:j,stsTokenManager:T}=n;Q(S&&T,e,"internal-error");const _=Rs.fromJSON(this.name,T);Q(typeof S=="string",e,"internal-error"),di(g,e.name),di(m,e.name),Q(typeof x=="boolean",e,"internal-error"),Q(typeof L=="boolean",e,"internal-error"),di(v,e.name),di(C,e.name),di(O,e.name),di(M,e.name),di(A,e.name),di(E,e.name);const b=new Bn({uid:S,auth:e,email:m,emailVerified:x,displayName:g,isAnonymous:L,photoURL:C,phoneNumber:v,tenantId:O,stsTokenManager:_,createdAt:A,lastLoginAt:E});return j&&Array.isArray(j)&&(b.providerData=j.map(w=>Object.assign({},w))),M&&(b._redirectEventId=M),b}static async _fromIdTokenResponse(e,n,i=!1){const r=new Rs;r.updateFromServerResponse(n);const s=new Bn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await tc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Q(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?uA(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new Rs;l.updateFromIdToken(i);const u=new Bn({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:a}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ed(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_=new Map;function qn(t){ei(t instanceof Function,"Expected a class definition");let e=X_.get(t);return e?(ei(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,X_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cA.type="NONE";const W_=cA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t,e,n){return`firebase:${t}:${e}:${n}`}class Is{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=uu(this.userKey,r.apiKey,s),this.fullPersistenceKey=uu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Is(qn(W_),e,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||qn(W_);const a=uu(i,e.config.apiKey,e.name);let l=null;for(const h of n)try{const d=await h._get(a);if(d){const g=Bn._fromJSON(e,d);h!==s&&(l=g),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Is(s,e,i):(s=u[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(a)}catch{}})),new Is(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pA(e))return"Blackberry";if(yA(e))return"Webos";if(fA(e))return"Safari";if((e.includes("chrome/")||dA(e))&&!e.includes("edge/"))return"Chrome";if(gA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function hA(t=gt()){return/firefox\//i.test(t)}function fA(t=gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dA(t=gt()){return/crios\//i.test(t)}function mA(t=gt()){return/iemobile/i.test(t)}function gA(t=gt()){return/android/i.test(t)}function pA(t=gt()){return/blackberry/i.test(t)}function yA(t=gt()){return/webos/i.test(t)}function hg(t=gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eD(t=gt()){var e;return hg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tD(){return eI()&&document.documentMode===10}function _A(t=gt()){return hg(t)||gA(t)||yA(t)||pA(t)||/windows phone/i.test(t)||mA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t,e=[]){let n;switch(t){case"Browser":n=Z_(gt());break;case"Worker":n=`${Z_(gt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ea}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((a,l)=>{try{const u=e(s);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(t,e={}){return ri(t,"GET","/v2/passwordPolicy",ii(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=6;class sD{constructor(e){var n,i,r,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:rD,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,a,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new J_(this),this.idTokenSubscription=new J_(this),this.beforeStateQueue=new nD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qn(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Is.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lA(this,{idToken:e}),i=await Bn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Pt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pt(this.app))return Promise.reject(Gn(this));const n=e?Je(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pt(this.app)?Promise.reject(Gn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pt(this.app)?Promise.reject(Gn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iD(this),n=new sD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yo("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await JN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await Is.create(this,[qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,r);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;if(Pt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&VN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function si(t){return Je(t)}class J_{constructor(e){this.auth=e,this.observer=null,this.addObserver=lI(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oD(t){Bc=t}function EA(t){return Bc.loadJS(t)}function lD(){return Bc.recaptchaEnterpriseScript}function uD(){return Bc.gapiScript}function cD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class hD{constructor(){this.enterprise=new fD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class fD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const dD="recaptcha-enterprise",TA="NO_RECAPTCHA";class mD{constructor(e){this.type=dD,this.auth=si(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,l)=>{GN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new FN(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,a(h.siteKey)}}).catch(u=>{l(u)})})}function r(s,a,l){const u=window.grecaptcha;Y_(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(h=>{a(h)}).catch(()=>{a(TA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hD().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{i(this.auth).then(l=>{if(!n&&Y_(window.grecaptcha))r(l,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=lD();u.length!==0&&(u+=l),EA(u).then(()=>{r(l,s,a)}).catch(h=>{a(h)})}}).catch(l=>{a(l)})})}}async function ev(t,e,n,i=!1,r=!1){const s=new mD(t);let a;if(r)a=TA;else try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function nc(t,e,n,i,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await ev(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await ev(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(t,e){const n=bm(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(xr(s,e??{}))return r;tn(r,"already-initialized")}return n.initialize({options:e})}function pD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function yD(t,e,n){const i=si(t);Q(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=bA(e),{host:a,port:l}=_D(e),u=l===null?"":`:${l}`,h={url:`${s}//${a}${u}/`},d=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Q(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Q(xr(h,i.config.emulator)&&xr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,vD()}function bA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _D(t){const e=bA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:tv(i.substr(s.length+1))}}else{const[s,a]=i.split(":");return{host:s,port:tv(a)}}}function tv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zn("not implemented")}_getIdTokenResponse(e){return zn("not implemented")}_linkToIdToken(e,n){return zn("not implemented")}_getReauthenticationResolver(e){return zn("not implemented")}}async function ED(t,e){return ri(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(t,e){return il(t,"POST","/v1/accounts:signInWithPassword",ii(t,e))}async function bD(t,e){return ri(t,"POST","/v1/accounts:sendOobCode",ii(t,e))}async function AD(t,e){return bD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(t,e){return il(t,"POST","/v1/accounts:signInWithEmailLink",ii(t,e))}async function wD(t,e){return il(t,"POST","/v1/accounts:signInWithEmailLink",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends fg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Vo(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Vo(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nc(e,n,"signInWithPassword",TD);case"emailLink":return SD(e,{email:this._email,oobCode:this._password});default:tn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nc(e,i,"signUpPassword",ED);case"emailLink":return wD(e,{idToken:n,email:this._email,oobCode:this._password});default:tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cs(t,e){return il(t,"POST","/v1/accounts:signInWithIdp",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="http://localhost";class Mr extends fg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Mr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=ag(n,["providerId","signInMethod"]);if(!i||!r)return null;const a=new Mr(i,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Cs(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Cs(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Cs(e,n)}buildRequest(){const e={requestUri:RD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$o(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CD(t){const e=Pa(Ua(t)).link,n=e?Pa(Ua(e)).deep_link_id:null,i=Pa(Ua(t)).deep_link_id;return(i?Pa(Ua(i)).link:null)||i||n||e||t}class dg{constructor(e){var n,i,r,s,a,l;const u=Pa(Ua(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(i=u.oobCode)!==null&&i!==void 0?i:null,g=ID((r=u.mode)!==null&&r!==void 0?r:null);Q(h&&d&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=d,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=CD(e);try{return new dg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(){this.providerId=oa.PROVIDER_ID}static credential(e,n){return Vo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=dg.parseLink(n);return Q(i,"argument-error"),Vo._fromEmailAndCode(e,i.code,i.tenantId)}}oa.PROVIDER_ID="password";oa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends mg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends rl{constructor(){super("facebook.com")}static credential(e){return Mr._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";bi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn extends rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Mr._fromParams({providerId:kn.PROVIDER_ID,signInMethod:kn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return kn.credentialFromTaggedObject(e)}static credentialFromError(e){return kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return kn.credential(n,i)}catch{return null}}}kn.GOOGLE_SIGN_IN_METHOD="google.com";kn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends rl{constructor(){super("github.com")}static credential(e){return Mr._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ai.credential(e.oauthAccessToken)}catch{return null}}}Ai.GITHUB_SIGN_IN_METHOD="github.com";Ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends rl{constructor(){super("twitter.com")}static credential(e,n){return Mr._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Si.credential(n,i)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(t,e){return il(t,"POST","/v1/accounts:signUp",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Bn._fromIdTokenResponse(e,i,r),a=nv(i);return new kr({user:s,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=nv(i);return new kr({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function nv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends ni{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,ic.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new ic(e,n,i,r)}}function AA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ic._fromErrorAndOperation(t,s,e,i):s})}async function ND(t,e,n=!1){const i=await ko(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DD(t,e,n=!1){const{auth:i}=t;if(Pt(i.app))return Promise.reject(Gn(i));const r="reauthenticate";try{const s=await ko(t,AA(i,r,e,t),n);Q(s.idToken,i,"internal-error");const a=cg(s.idToken);Q(a,i,"internal-error");const{sub:l}=a;return Q(t.uid===l,i,"user-mismatch"),kr._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&tn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(t,e,n=!1){if(Pt(t.app))return Promise.reject(Gn(t));const i="signIn",r=await AA(t,i,e),s=await kr._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function OD(t,e){return SA(si(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(t){const e=si(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function MD(t,e,n){const i=si(t);await nc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",AD)}async function kD(t,e,n){if(Pt(t.app))return Promise.reject(Gn(t));const i=si(t),a=await nc(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xD).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&wA(t),u}),l=await kr._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function VD(t,e,n){return Pt(t.app)?Promise.reject(Gn(t)):OD(Je(t),oa.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&wA(t),i})}function PD(t,e,n,i){return Je(t).onIdTokenChanged(e,n,i)}function UD(t,e,n){return Je(t).beforeAuthStateChanged(e,n)}function LD(t,e,n,i){return Je(t).onAuthStateChanged(e,n,i)}function jD(t){return Je(t).signOut()}const rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rc,"1"),this.storage.removeItem(rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD=1e3,BD=10;class IA extends RA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_A(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);tD()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,BD):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},zD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}IA.type="LOCAL";const qD=IA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA extends RA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CA.type="SESSION";const xA=CA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new qc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(a).map(async h=>h(n.origin,s)),u=await HD(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,a;return new Promise((l,u)=>{const h=gg("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(g){const m=g;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return window}function GD(t){vn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){return typeof vn().WorkerGlobalScope<"u"&&typeof vn().importScripts=="function"}async function KD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function YD(){return NA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="firebaseLocalStorageDb",$D=1,sc="firebaseLocalStorage",OA="fbase_key";class sl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Hc(t,e){return t.transaction([sc],e?"readwrite":"readonly").objectStore(sc)}function XD(){const t=indexedDB.deleteDatabase(DA);return new sl(t).toPromise()}function Td(){const t=indexedDB.open(DA,$D);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(sc,{keyPath:OA})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(sc)?e(i):(i.close(),await XD(),e(await Td()))})})}async function iv(t,e,n){const i=Hc(t,!0).put({[OA]:e,value:n});return new sl(i).toPromise()}async function WD(t,e){const n=Hc(t,!1).get(e),i=await new sl(n).toPromise();return i===void 0?null:i.value}function rv(t,e){const n=Hc(t,!0).delete(e);return new sl(n).toPromise()}const ZD=800,JD=3;class MA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Td(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>JD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qc._getInstance(YD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await KD(),!this.activeServiceWorker)return;this.sender=new FD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Td();return await iv(e,rc,"1"),await rv(e,rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>iv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>WD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Hc(r,!1).getAll();return new sl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MA.type="LOCAL";const eO=MA;new nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t,e){return e?qn(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg extends fg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Cs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Cs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function tO(t){return SA(t.auth,new pg(t),t.bypassAuthState)}function nO(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),DD(n,new pg(t),t.bypassAuthState)}async function iO(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),ND(n,new pg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tO;case"linkViaPopup":case"linkViaRedirect":return iO;case"reauthViaPopup":case"reauthViaRedirect":return nO;default:tn(this.auth,"internal-error")}}resolve(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=new nl(2e3,1e4);async function sO(t,e,n){if(Pt(t.app))return Promise.reject(ln(t,"operation-not-supported-in-this-environment"));const i=si(t);PN(t,e,mg);const r=kA(i,n);return new gr(i,"signInViaPopup",e,r).executeNotNull()}class gr extends VA{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,gr.currentPopupAction&&gr.currentPopupAction.cancel(),gr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){ei(this.filter.length===1,"Popup operations only handle one event");const e=gg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ln(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ln(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ln(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rO.get())};e()}}gr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO="pendingRedirect",cu=new Map;class oO extends VA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=cu.get(this.auth._key());if(!e){try{const i=await lO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}cu.set(this.auth._key(),e)}return this.bypassAuthState||cu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lO(t,e){const n=hO(e),i=cO(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function uO(t,e){cu.set(t._key(),e)}function cO(t){return qn(t._redirectPersistence)}function hO(t){return uu(aO,t.config.apiKey,t.name)}async function fO(t,e,n=!1){if(Pt(t.app))return Promise.reject(Gn(t));const i=si(t),r=kA(i,e),a=await new oO(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=10*60*1e3;class mO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!PA(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(ln(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dO&&this.cachedEventUids.clear(),this.cachedEventUids.has(sv(e))}saveEventToCache(e){this.cachedEventUids.add(sv(e)),this.lastProcessedEventTime=Date.now()}}function sv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pO(t,e={}){return ri(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_O=/^https?/;async function vO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pO(t);for(const n of e)try{if(EO(n))return}catch{}tn(t,"unauthorized-domain")}function EO(t){const e=vd(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!_O.test(n))return!1;if(yO.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=new nl(3e4,6e4);function av(){const t=vn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bO(t){return new Promise((e,n)=>{var i,r,s;function a(){av(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{av(),n(ln(t,"network-request-failed"))},timeout:TO.get()})}if(!((r=(i=vn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=vn().gapi)===null||s===void 0)&&s.load)a();else{const l=cD("iframefcb");return vn()[l]=()=>{gapi.load?a():n(ln(t,"network-request-failed"))},EA(`${uD()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw hu=null,e})}let hu=null;function AO(t){return hu=hu||bO(t),hu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=new nl(5e3,15e3),wO="__/auth/iframe",RO="emulator/auth/iframe",IO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xO(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ug(e,RO):`https://${t.config.authDomain}/${wO}`,i={apiKey:e.apiKey,appName:t.name,v:ea},r=CO.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${$o(i).slice(1)}`}async function NO(t){const e=await AO(t),n=vn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:xO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IO,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const a=ln(t,"network-request-failed"),l=vn().setTimeout(()=>{s(a)},SO.get());function u(){vn().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OO=500,MO=600,kO="_blank",VO="http://localhost";class ov{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PO(t,e,n,i=OO,r=MO){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},DO),{width:i.toString(),height:r.toString(),top:s,left:a}),h=gt().toLowerCase();n&&(l=dA(h)?kO:n),hA(h)&&(e=e||VO,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[v,C])=>`${m}${v}=${C},`,"");if(eD(h)&&l!=="_self")return UO(e||"",l),new ov(null);const g=window.open(e||"",l,d);Q(g,t,"popup-blocked");try{g.focus()}catch{}return new ov(g)}function UO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO="__/auth/handler",jO="emulator/auth/handler",zO=encodeURIComponent("fac");async function lv(t,e,n,i,r,s){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ea,eventId:r};if(e instanceof mg){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",oI(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,g]of Object.entries({}))a[d]=g}if(e instanceof rl){const d=e.getScopes().filter(g=>g!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await t._getAppCheckToken(),h=u?`#${zO}=${encodeURIComponent(u)}`:"";return`${BO(t)}?${$o(l).slice(1)}${h}`}function BO({config:t}){return t.emulator?ug(t,jO):`https://${t.authDomain}/${LO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf="webStorageSupport";class qO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xA,this._completeRedirectFn=fO,this._overrideRedirectResult=uO}async _openPopup(e,n,i,r){var s;ei((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await lv(e,n,i,vd(),r);return PO(e,a,gg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await lv(e,n,i,vd(),r);return GD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ei(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await NO(e),i=new mO(e);return n.register("authEvent",r=>(Q(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nf,{type:nf},r=>{var s;const a=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[nf];a!==void 0&&n(!!a),tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _A()||fA()||hg()}}const HO=qO;var uv="@firebase/auth",cv="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KO(t){Ls(new Nr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;Q(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vA(t)},h=new aD(i,r,s,u);return pD(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ls(new Nr("auth-internal",e=>{const n=si(e.getProvider("auth").getImmediate());return(i=>new FO(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Li(uv,cv,GO(t)),Li(uv,cv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO=5*60,YO=yT("authIdTokenMaxAge")||QO;let hv=null;const $O=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>YO)return;const r=n==null?void 0:n.token;hv!==r&&(hv=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function XO(t=TT()){const e=bm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gD(t,{popupRedirectResolver:HO,persistence:[eO,qD,xA]}),i=yT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const a=$O(s.toString());UD(n,a,()=>a(n.currentUser)),PD(n,l=>a(l))}}const r=gT("auth");return r&&yD(n,`http://${r}`),n}function WO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}oD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=ln("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",WO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KO("Browser");const gi={apiKey:"AIzaSyAWqY7GcAk8HrraCcz1K0X5BH2nF6J_Np0",authDomain:"bisonsports-3662c.firebaseapp.com",projectId:"bisonsports-3662c",storageBucket:"bisonsports-3662c.firebasestorage.app",messagingSenderId:"911932271804",appId:"1:911932271804:web:8c13b569ba42377828b4b9",measurementId:"G-1EB7YRKGYT"};console.log("Firebase Config:",{apiKey:gi.apiKey?"Present":"Missing",authDomain:gi.authDomain?"Present":"Missing",projectId:gi.projectId?"Present":"Missing",storageBucket:gi.storageBucket?"Present":"Missing",messagingSenderId:gi.messagingSenderId?"Present":"Missing",appId:gi.appId?"Present":"Missing",measurementId:gi.measurementId?"Present":"Missing"});const UA=ET(gi),Zt=gN(UA),Wr=XO(UA),ZO=new kn,LA=G.createContext(),Na={data:{managers:new Map,stadiums:new Map},maxAge:5*60*1e3,set(t,e,n){this.data[t].set(e,{data:n,timestamp:Date.now()})},get(t,e){const n=this.data[t].get(e);return n?Date.now()-n.timestamp>this.maxAge?(this.data[t].delete(e),null):n.data:null},clear(){this.data.managers.clear(),this.data.stadiums.clear()}},Hr=()=>G.useContext(LA),JO=({children:t})=>{const[e,n]=G.useState(null),[i,r]=G.useState(!0),[s,a]=G.useState(""),[l,u]=G.useState(null),[h,d]=G.useState(null),g=async S=>{try{const x=Na.get("stadiums",S);if(x){d(x);return}const L=Gs(Zt,"stadiums",S),j=await K_(L);if(j.exists()){const T=j.data();Na.set("stadiums",S,T),d(T)}else console.error("Stadium not found"),d(null)}catch(x){console.error("Error fetching stadium data:",x),d(null)}},m=async S=>{try{const x=Na.get("managers",S);if(x){u({...x,id:S}),x.stadiumID&&await g(x.stadiumID);return}const L=Gs(Zt,"managers",S),j=await K_(L);if(j.exists()){const T={...j.data(),id:S};Na.set("managers",S,T),u(T),T.stadiumID?await g(T.stadiumID):d(null)}else a("Manager profile not found"),u(null),d(null)}catch(x){console.error("Error fetching manager data:",x),a("Failed to fetch manager data"),u(null),d(null)}},v=async()=>{try{const S=await sO(Wr,ZO);return await m(S.user.uid),S.user}catch(S){throw a(S.message),S}},C=async(S,x)=>{try{const L=await VD(Wr,S,x);return await m(L.user.uid),L.user}catch(L){throw a(L.message),L}},O=async(S,x)=>{try{const L=await kD(Wr,S,x);return await m(L.user.uid),L.user}catch(L){throw a(L.message),L}},M=async S=>{try{await MD(Wr,S)}catch(x){throw a(x.message),x}},A=async()=>{try{await jD(Wr),n(null),u(null),d(null),Na.clear()}catch(S){throw a(S.message),S}};G.useEffect(()=>LD(Wr,async x=>{n(x),x&&await m(x.uid),r(!1)}),[]);const E={user:e,error:s,managerData:l,stadiumData:h,setStadiumData:d,signInWithGoogle:v,signInWithEmail:C,signUpWithEmail:O,resetPassword:M,logOut:A,loading:i};return y.jsx(LA.Provider,{value:E,children:!i&&t})};function eM({isVisible:t,onAnimationComplete:e}){return t?y.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[y.jsxs("div",{className:"bg-white rounded-lg p-8 flex flex-col items-center",children:[y.jsxs("div",{className:"relative w-16 h-16",children:[y.jsx("svg",{className:"absolute inset-0 w-full h-full",children:y.jsx("circle",{className:"stroke-green-500",strokeWidth:"4",fill:"none",r:"30",cx:"32",cy:"32",style:{strokeDasharray:188.5,strokeDashoffset:188.5,animation:"drawCircle 1s ease-in-out forwards"}})}),y.jsx("svg",{className:"absolute inset-0 w-full h-full",style:{animation:"drawTick 0.5s ease-in-out 0.5s forwards",opacity:0},children:y.jsx("path",{className:"stroke-green-500",strokeWidth:"4",fill:"none",d:"M20 32 L28 40 L44 24",style:{strokeDasharray:50,strokeDashoffset:50}})})]}),y.jsx("p",{className:"mt-4 text-xl font-semibold text-green-600",children:"Booked !!!"})]}),y.jsx("style",{jsx:!0,children:`
        @keyframes drawCircle {
          to {
            stroke-dashoffset: 0;
          }
        }
        @keyframes drawTick {
          to {
            stroke-dashoffset: 0;
            opacity: 1;
          }
        }
      `})]}):null}function jA({isOpen:t,onClose:e,onSave:n,court:i}){const{managerData:r}=Hr(),[s,a]=G.useState({courtId:"",date:"",duration:0,coachId:"",status:"confirmed"}),[l,u]=G.useState(!1),[h,d]=G.useState(""),[g,m]=G.useState([]),[v,C]=G.useState(null),[O,M]=G.useState([]),[A,E]=G.useState([]),[S,x]=G.useState(null),[L,j]=G.useState(!1);G.useEffect(()=>{if(t){const q=new Date().toISOString().split("T")[0];a({courtId:"",date:q,duration:0,coachId:"",status:"confirmed"}),d(""),i?(C(i),a(ie=>({...ie,courtId:i.id,date:q,duration:i.minimumBookingDuration||60}))):T()}},[t,i]);const T=async()=>{try{const q=br(Zt,"courts"),ie=Oo(q,Ar("stadiumId","==",r.stadiumID)),Y=(await Mo(ie)).docs.map(_e=>({id:_e.id,..._e.data()}));m(Y)}catch(q){console.error("Error fetching courts:",q),d("Failed to fetch courts. Please try again.")}},_=async()=>{if(!(!s.date||!s.courtId))try{const q=br(Zt,"bookings"),ie=Oo(q,Ar("courtId","==",s.courtId),Ar("date","==",s.date)),Y=(await Mo(ie)).docs.map(_e=>({..._e.data()}));M(Y)}catch(q){console.error("Error fetching booked slots:",q)}};G.useEffect(()=>{s.date&&s.courtId&&_()},[s.date,s.courtId]);const b=q=>{if(!q)return 0;const[ie,oe]=q.split(" ");let[Y,_e]=ie.split(":").map(Number);return Y=Y%12,oe==="PM"&&(Y+=12),Y*60+_e},w=(q,ie)=>{if(!q||!ie)return!1;const oe=b(q),Y=b(ie);return!O.some(_e=>{const qe=b(_e.timeSlot.startTime),tr=b(_e.timeSlot.endTime);return oe<tr&&Y>qe})},I=()=>{const q=new Date,ie={timeZone:"Asia/Kolkata",hour:"2-digit",minute:"2-digit",hour12:!0};return q.toLocaleTimeString("en-US",ie)},D=q=>{if(!q)return!0;const ie=new Date,oe=new Date(ie.toLocaleString("en-US",{timeZone:"Asia/Kolkata"})),[Y,_e]=q.split(" ");let[qe,tr]=Y.split(":").map(Number);qe=qe%12,_e==="PM"&&(qe+=12);const _t=new Date(s.date);if(_t.setHours(qe,tr,0),_t.toDateString()===oe.toDateString()){const la=new Date(oe.getTime()+18e5);return _t<oe&&_t<la}return _t<oe},R=()=>{if(!(v!=null&&v.openingTime)||!(v!=null&&v.closingTime)||!s.date||!s.duration){E([]);return}try{const q=[],[ie,oe]=v.openingTime.split(" ");let[Y,_e]=ie.split(":").map(Number);Y=Y%12,oe==="PM"&&(Y+=12);const[qe,tr]=v.closingTime.split(" ");let[_t,la]=qe.split(":").map(Number);_t=_t%12,tr==="PM"&&(_t+=12);let Sn=new Date(s.date);Sn.setHours(Y,_e,0);const ai=new Date(s.date);for(ai.setHours(_t,la,0);Sn<ai;){const oi=Sn.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Kolkata"}),nr=new Date(Sn);if(nr.setMinutes(Sn.getMinutes()+s.duration),nr<=ai){const Fr=nr.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Kolkata"});w(oi,Fr)&&!D(oi)&&q.push({startTime:oi,endTime:Fr})}Sn.setMinutes(Sn.getMinutes()+30)}E(q)}catch{d("Error generating time slots. Please try again."),E([])}};G.useEffect(()=>{R()},[s.date,s.duration,v,O]);const yt=()=>{if(!v||!s.duration)return 0;const q=s.duration/60;return Math.round(q*v.pricePerHour)},Dt=q=>{const{name:ie,value:oe}=q.target;if(ie==="date"&&!oe){const Y=new Date().toISOString().split("T")[0];a(_e=>({..._e,[ie]:Y}))}else a(Y=>({...Y,[ie]:ie==="duration"?Number(oe):oe}))},B=q=>{const ie=q.target.value,oe=g.find(Y=>Y.id===ie);C(oe),a(Y=>({...Y,courtId:ie,duration:oe.minimumBookingDuration||60}))},W=()=>{a(q=>({...q,duration:q.duration+(v.minimumBookingDuration||60)}))},X=q=>{x(q)},ye=async q=>{q.preventDefault(),u(!0),d("");try{if(!(r!=null&&r.id))throw new Error("Manager data not available");if(!S)throw new Error("Please select a time slot");const ie=s.duration/60,oe=Math.round(ie*v.pricePerHour),Y={userId:r.id,stadiumId:r.stadiumID,courtId:s.courtId,coachId:s.coachId||null,date:s.date,timeSlot:{startTime:S.startTime,endTime:S.endTime},status:s.status,amount:oe},_e=br(Zt,"bookings");await nA(_e,Y),j(!0),setTimeout(()=>{j(!1),n()},2e3)}catch(ie){console.error("Error creating booking:",ie),d(ie.message||"Failed to create booking. Please try again.")}finally{u(!1)}};return t?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[y.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add New Booking"}),h&&y.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:h}),y.jsxs("form",{onSubmit:ye,className:"space-y-6",children:[!i&&y.jsx("div",{children:y.jsxs("select",{name:"courtId",value:s.courtId,onChange:B,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[y.jsx("option",{value:"",children:"Select a court"}),g.map(q=>y.jsxs("option",{value:q.id,children:["Court ",q.courtNumber," - ",q.sport]},q.id))]})}),y.jsx("div",{children:y.jsx("input",{type:"date",name:"date",value:s.date,onChange:Dt,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:new Date().toISOString().split("T")[0]})}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Duration (minutes)"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"number",name:"duration",value:s.duration,onChange:Dt,className:"mt-1 block w-full px-2 py-1 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:(v==null?void 0:v.minimumBookingDuration)||60,step:(v==null?void 0:v.minimumBookingDuration)||60,disabled:!v}),y.jsxs("button",{type:"button",onClick:W,className:"mt-1 px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:!v,children:["Add ",(v==null?void 0:v.minimumBookingDuration)||60," min"]})]}),v&&y.jsxs("div",{className:"mt-1 text-sm text-gray-500",children:[y.jsxs("p",{children:["Minimum duration: ",v.minimumBookingDuration||60," minutes"]}),y.jsxs("p",{children:["Price: ₹",yt()]})]})]}),A.length===0&&s.date&&s.duration&&y.jsxs("div",{className:"text-sm text-gray-500",children:[y.jsx("p",{children:"No available slots found for the selected duration."}),y.jsx("p",{children:"Please check:"}),y.jsxs("ul",{className:"list-disc pl-5",children:[y.jsx("li",{children:"Selected date is valid"}),y.jsx("li",{children:"Duration is within court hours"}),y.jsxs("li",{children:["Duration is a multiple of ",(v==null?void 0:v.minimumBookingDuration)||60," minutes"]}),y.jsx("li",{children:"No overlapping bookings exist"}),y.jsxs("li",{children:["Slots are not in the past (current time: ",I(),")"]})]})]}),A.length>0&&y.jsxs("div",{className:"relative",children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Time Slots"}),y.jsx("div",{className:"h-10 overflow-x-auto border border-gray-300 rounded-md",children:y.jsx("div",{className:"flex flex-nowrap gap-2",children:A.map((q,ie)=>y.jsxs("button",{type:"button",onClick:()=>X(q),className:`p-1 border rounded-md text-xs whitespace-nowrap ${(S==null?void 0:S.startTime)===q.startTime?"bg-blue-100 border-blue-500":"border-gray-300 hover:bg-gray-50"}`,children:[q.startTime," - ",q.endTime]},ie))})}),y.jsxs("div",{className:"flex justify-center mt-2 space-x-2",children:[y.jsx("button",{type:"button",onClick:()=>document.querySelector(".overflow-x-auto").scrollBy({left:-100,behavior:"smooth"}),className:"px-3 py-1 bg-gray-300 rounded-md hover:bg-gray-400 text-xs transition duration-200 ease-in-out transform hover:scale-105",children:"<"}),y.jsx("button",{type:"button",onClick:()=>document.querySelector(".overflow-x-auto").scrollBy({left:100,behavior:"smooth"}),className:"px-3 py-1 bg-gray-300 rounded-md hover:bg-gray-400 text-xs transition duration-200 ease-in-out transform hover:scale-105",children:">"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Coach ID (Optional)"}),y.jsx("input",{type:"text",name:"coachId",value:s.coachId,onChange:Dt,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter coach ID"})]}),y.jsxs("div",{className:"flex justify-end gap-4",children:[y.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:l||!S,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ${l||!S?"opacity-50 cursor-not-allowed":""}`,children:l?"Creating...":"Create Booking"})]})]})]})}),y.jsx(eM,{isVisible:L,onAnimationComplete:()=>{j(!1),n()}})]}):null}const tM=({isOpen:t,toggleSidebar:e})=>{const{managerData:n}=Hr(),[i,r]=G.useState(!1),s=[{title:"Users List",icon:hT},{title:"Payment History",icon:lT},{title:"Coaches",icon:cT},{title:"Court Details",icon:Ac},{title:"Add Booking",icon:vm,onClick:()=>r(!0)},{title:"Revenue",icon:sT}];return y.jsxs("div",{className:`bg-white h-full shadow-lg transition-all duration-300 ${t?"w-64":"w-20"} relative`,children:[y.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[y.jsx("h1",{className:`font-bold text-xl ${!t&&"hidden"}`,children:"SportsDash"}),y.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-gray-200",children:t?y.jsx(aT,{size:20}):y.jsx(oT,{size:20})})]}),y.jsx("nav",{className:"mt-6",children:y.jsx("ul",{children:s.map((a,l)=>y.jsx("li",{children:y.jsxs("button",{onClick:a.onClick,className:"w-full flex items-center p-4 text-gray-700 hover:bg-gray-100 transition-colors",children:[y.jsx(a.icon,{size:20,className:"min-w-[20px]"}),y.jsx("span",{className:`ml-4 ${!t&&"hidden"}`,children:a.title})]})},l))})}),y.jsx(jA,{isOpen:i,onClose:()=>r(!1),onSave:()=>r(!1),court:null})]})},nM=({toggleSidebar:t})=>{const{logOut:e,managerData:n,stadiumData:i}=Hr(),[r,s]=G.useState(!1),[a,l]=G.useState(""),u=async()=>{try{s(!0),l(""),await e()}catch(h){l("Failed to log out. Please try again."),console.error("Failed to log out:",h)}finally{s(!1)}};return y.jsxs("header",{className:"bg-white shadow-sm h-16 flex items-center justify-between px-4",children:[y.jsx("button",{onClick:t,className:"p-2 rounded-md hover:bg-gray-100 lg:hidden",children:y.jsx(xR,{size:20})}),y.jsx("div",{className:"flex-1 lg:ml-4",children:y.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:(i==null?void 0:i.name)||"Loading Stadium..."})}),y.jsxs("div",{className:"flex items-center gap-4",children:[a&&y.jsx("span",{className:"text-sm text-red-600",children:a}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(PR,{size:18,className:"text-gray-600"}),y.jsxs("span",{className:"text-gray-700 font-medium",children:["Welcome, ",(n==null?void 0:n.name)||"Loading..."]})]}),y.jsxs("button",{onClick:u,disabled:r,className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${r?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-red-50 text-red-600 hover:bg-red-100"}`,children:[y.jsx(wR,{size:18}),y.jsx("span",{children:r?"Logging out...":"Logout"})]})]})]})};function iM({isOpen:t,onClose:e}){const{stadiumData:n,managerData:i,setStadiumData:r}=Hr(),[s,a]=G.useState({name:"",address:"",addressLink:"",amenities:[]}),[l,u]=G.useState(""),[h,d]=G.useState(!1),[g,m]=G.useState("");G.useEffect(()=>{n&&a({name:n.name||"",address:n.address||"",addressLink:n.addressLink||"",amenities:n.amenities||[]})},[n]);const v=A=>{const{name:E,value:S}=A.target;a(x=>({...x,[E]:S}))},C=()=>{l.trim()&&(a(A=>({...A,amenities:[...A.amenities,l.trim()]})),u(""))},O=A=>{a(E=>({...E,amenities:E.amenities.filter((S,x)=>x!==A)}))},M=async A=>{A.preventDefault(),d(!0),m("");try{const E=Gs(Zt,"stadiums",i.stadiumID);await tA(E,s),r(s),e()}catch(E){console.error("Error updating stadium:",E),m("Failed to update stadium details. Please try again.")}finally{d(!1)}};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl w-full mx-4",children:[y.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Edit Stadium Details"}),g&&y.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:g}),y.jsxs("form",{onSubmit:M,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Stadium Name"}),y.jsx("input",{type:"text",name:"name",value:s.name,onChange:v,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),y.jsx("input",{type:"text",name:"address",value:s.address,onChange:v,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address Link"}),y.jsx("input",{type:"url",name:"addressLink",value:s.addressLink,onChange:v,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amenities"}),y.jsxs("div",{className:"mt-2 flex gap-2",children:[y.jsx("input",{type:"text",value:l,onChange:A=>u(A.target.value),placeholder:"Add new amenity",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),y.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add"})]}),y.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.amenities.map((A,E)=>y.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[A,y.jsx("button",{type:"button",onClick:()=>O(E),className:"ml-2 text-blue-600 hover:text-blue-800",children:"×"})]},E))})]}),y.jsxs("div",{className:"flex justify-end gap-4",children:[y.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:h,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?"Saving...":"Save Changes"})]})]})]})}):null}function rM({isOpen:t,onClose:e,onSave:n,stadiumId:i,court:r}){const[s,a]=G.useState({courtNumber:"",courtType:"",pricePerHour:"",sport:"",openingTime:"",closingTime:"",minimumBookingDuration:60}),[l,u]=G.useState(!1),[h,d]=G.useState("");G.useEffect(()=>{a(r?{courtNumber:r.courtNumber||"",courtType:r.courtType||"",pricePerHour:r.pricePerHour||"",sport:r.sport||"",openingTime:r.openingTime||"",closingTime:r.closingTime||"",minimumBookingDuration:r.minimumBookingDuration||60}:{courtNumber:"",courtType:"",pricePerHour:"",sport:"",openingTime:"",closingTime:"",minimumBookingDuration:60})},[r]);const g=C=>{const{name:O,value:M}=C.target;a(A=>({...A,[O]:O==="minimumBookingDuration"?Number(M):M}))},m=async C=>{C.preventDefault(),u(!0),d("");try{if(r){const O=Gs(Zt,"courts",r.id);await tA(O,{...s,stadiumId:i})}else{const O=br(Zt,"courts");await nA(O,{...s,stadiumId:i})}n()}catch(O){console.error("Error saving court:",O),d("Failed to save court. Please try again.")}finally{u(!1)}},v=()=>{const C=[];for(let O=0;O<24;O++)for(let M=0;M<60;M+=30){const A=new Date;A.setHours(O,M,0);const E=A.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});C.push(E)}return C};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[y.jsx("h2",{className:"text-2xl font-bold mb-6",children:r?"Edit Court":"Add New Court"}),h&&y.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:h}),y.jsxs("form",{onSubmit:m,className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Court Number"}),y.jsx("input",{type:"text",name:"courtNumber",value:s.courtNumber,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sport"}),y.jsxs("select",{name:"sport",value:s.sport,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[y.jsx("option",{value:"",children:"Select sport"}),y.jsx("option",{value:"Badminton",children:"Badminton"}),y.jsx("option",{value:"Cricket",children:"Cricket"}),y.jsx("option",{value:"Basketball",children:"Basketball"}),y.jsx("option",{value:"Tennis",children:"Tennis"}),y.jsx("option",{value:"Football",children:"Football"}),y.jsx("option",{value:"Volleyball",children:"Volleyball"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Court Type"}),y.jsxs("select",{name:"courtType",value:s.courtType,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[y.jsx("option",{value:"",children:"Select court type"}),y.jsx("option",{value:"Turf",children:"Turf"}),y.jsx("option",{value:"Clay",children:"Clay"}),y.jsx("option",{value:"Grass",children:"Grass"}),y.jsx("option",{value:"Hard",children:"Hard"}),y.jsx("option",{value:"Synthetic",children:"Synthetic"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price per Hour (₹)"}),y.jsx("input",{type:"number",name:"pricePerHour",value:s.pricePerHour,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Opening Time"}),y.jsxs("select",{name:"openingTime",value:s.openingTime,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[y.jsx("option",{value:"",children:"Select opening time"}),v().map((C,O)=>y.jsx("option",{value:C,children:C},O))]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Closing Time"}),y.jsxs("select",{name:"closingTime",value:s.closingTime,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[y.jsx("option",{value:"",children:"Select closing time"}),v().map((C,O)=>y.jsx("option",{value:C,children:C},O))]})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Booking Duration"}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("label",{className:"flex items-center",children:[y.jsx("input",{type:"radio",name:"minimumBookingDuration",value:"30",checked:s.minimumBookingDuration===30,onChange:g,className:"mr-2"}),"30 minutes"]}),y.jsxs("label",{className:"flex items-center",children:[y.jsx("input",{type:"radio",name:"minimumBookingDuration",value:"60",checked:s.minimumBookingDuration===60,onChange:g,className:"mr-2"}),"1 hour"]})]})]}),y.jsxs("div",{className:"flex justify-end gap-4",children:[y.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:l,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ${l?"opacity-50 cursor-not-allowed":""}`,children:l?"Saving...":"Save"})]})]})]})}):null}function sM({isOpen:t,onClose:e,court:n}){const[i,r]=G.useState(new Date),[s,a]=G.useState([]),[l,u]=G.useState(!0),[h,d]=G.useState(""),[g,m]=G.useState(!1);G.useEffect(()=>{t&&n&&v()},[t,n,i]);const v=async()=>{try{u(!0);const M=i.toISOString().split("T")[0],A=br(Zt,"bookings"),E=Oo(A,Ar("courtId","==",n.id),Ar("date","==",M)),x=(await Mo(E)).docs.map(L=>({id:L.id,...L.data()}));a(x),d("")}catch(M){console.error("Error fetching bookings:",M),d("Failed to fetch bookings. Please try again.")}finally{u(!1)}},C=M=>{const A=new Date(i);A.setDate(A.getDate()+M),r(A)},O=M=>M;return t?y.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[y.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("h2",{className:"text-2xl font-bold",children:"Court Bookings"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:()=>C(-1),className:"p-1 hover:bg-gray-100 rounded-full",children:y.jsx(aT,{size:24})}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Ac,{size:20}),y.jsx("span",{className:"font-medium",children:i.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),y.jsx("button",{onClick:()=>C(1),className:"p-1 hover:bg-gray-100 rounded-full",children:y.jsx(oT,{size:24})})]})]}),y.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Close"})]}),h&&y.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:h}),l?y.jsx("div",{className:"text-center py-8",children:"Loading bookings..."}):s.length===0?y.jsx("div",{className:"text-center py-8 text-gray-500",children:"No bookings for this date"}):y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[y.jsx("thead",{className:"bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Slot"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coach"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),y.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(M=>y.jsxs("tr",{children:[y.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[O(M.timeSlot.startTime)," - ",O(M.timeSlot.endTime)]}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:M.coachId||"No coach assigned"}),y.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",M.amount]}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:y.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${M.status==="confirmed"?"bg-green-100 text-green-800":M.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:M.status.charAt(0).toUpperCase()+M.status.slice(1)})})]},M.id))})]})})]}),y.jsx("button",{onClick:()=>m(!0),className:"fixed bottom-8 right-8 flex items-center justify-center w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-colors duration-200 z-50",children:y.jsx(vm,{size:24})}),y.jsx(jA,{isOpen:g,onClose:()=>m(!1),onSave:()=>{m(!1),v()},court:n})]}):null}function aM({isOpen:t,onClose:e,stadiumId:n}){const[i,r]=G.useState([]),[s,a]=G.useState(!0),[l,u]=G.useState(""),[h,d]=G.useState(!1),[g,m]=G.useState(!1),[v,C]=G.useState(null),[O,M]=G.useState(null);G.useEffect(()=>{t&&n&&A()},[t,n]);const A=async()=>{try{a(!0);const j=br(Zt,"courts"),T=Oo(j,Ar("stadiumId","==",n)),b=(await Mo(T)).docs.map(w=>({id:w.id,...w.data()}));r(b),u("")}catch(j){console.error("Error fetching courts:",j),u("Failed to fetch courts. Please try again.")}finally{a(!1)}},E=j=>{C(j),d(!0)},S=j=>{C(j),m(!0)},x=()=>{C(null),d(!0)},L=async j=>{try{a(!0);const T=Gs(Zt,"courts",j.id);await ON(T),r(_=>_.filter(b=>b.id!==j.id)),M(null),u("")}catch(T){console.error("Error deleting court:",T),u("Failed to delete court. Please try again.")}finally{a(!1)}};return t?y.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[y.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold",children:"Court Management"}),y.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[y.jsx(vm,{size:20}),"Add New Court"]})]}),l&&y.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:l}),s?y.jsx("div",{className:"text-center py-8",children:"Loading courts..."}):i.length===0?y.jsx("div",{className:"text-center py-8 text-gray-500",children:"No courts found"}):y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[y.jsx("thead",{className:"bg-gray-50",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Court Number"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sport"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Court Type"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price/Hour"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timing"}),y.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),y.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(j=>y.jsxs("tr",{children:[y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.courtNumber}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.sport}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:j.courtType}),y.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",j.pricePerHour]}),y.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[j.openingTime," - ",j.closingTime]}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:()=>S(j),className:"text-blue-600 hover:text-blue-900",title:"View Bookings",children:y.jsx(Ac,{size:18})}),y.jsx("button",{onClick:()=>E(j),className:"text-blue-600 hover:text-blue-900",title:"Edit Court",children:y.jsx(uT,{size:18})}),y.jsx("button",{onClick:()=>M(j),className:"text-red-600 hover:text-red-900",title:"Delete Court",children:y.jsx(MR,{size:18})})]})})]},j.id))})]})}),y.jsx("div",{className:"mt-6 flex justify-end",children:y.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Close"})})]}),O&&y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[y.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Delete Court"}),y.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete Court ",O.courtNumber,"? This action cannot be undone."]}),y.jsxs("div",{className:"flex justify-end gap-4",children:[y.jsx("button",{onClick:()=>M(null),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Cancel"}),y.jsx("button",{onClick:()=>L(O),disabled:s,className:`px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 ${s?"opacity-50 cursor-not-allowed":""}`,children:s?"Deleting...":"Delete"})]})]})}),y.jsx(rM,{isOpen:h,onClose:()=>{d(!1),C(null)},onSave:()=>{d(!1),C(null),A()},stadiumId:n,court:v}),y.jsx(sM,{isOpen:g,onClose:()=>{m(!1),C(null)},court:v})]}):null}const oM=()=>{const{stadiumData:t,managerData:e}=Hr(),[n,i]=G.useState(!1),[r,s]=G.useState(!1),[a,l]=G.useState(0);G.useEffect(()=>{e!=null&&e.stadiumID&&u()},[e==null?void 0:e.stadiumID]);const u=async()=>{try{const d=br(Zt,"courts"),g=Oo(d,Ar("stadiumId","==",e.stadiumID)),m=await Mo(g);l(m.size)}catch(d){console.error("Error fetching court count:",d)}},h=[{title:"Profile",icon:uT,color:"bg-blue-500",customContent:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(IR,{className:"text-gray-600",size:18}),y.jsx("span",{className:"text-sm text-gray-600",children:(t==null?void 0:t.address)||"No address"})]}),(t==null?void 0:t.addressLink)&&y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(TR,{className:"text-gray-600",size:18}),y.jsx("a",{href:t.addressLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"View on Map"})]}),(t==null?void 0:t.amenities)&&t.amenities.length>0&&y.jsxs("div",{className:"flex items-start gap-2",children:[y.jsx(AR,{className:"text-gray-600 mt-1",size:18}),y.jsx("div",{className:"flex flex-wrap gap-2",children:t.amenities.map((d,g)=>y.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-800",children:d},g))})]})]})},{title:"Users List",icon:hT,count:"1,234",description:"Total registered users",color:"bg-blue-500"},{title:"Payment History",icon:lT,count:"$12,345",description:"Total transactions",color:"bg-green-500"},{title:"Coaches",icon:cT,count:"42",description:"Active coaches",color:"bg-purple-500"},{title:"Court Details",icon:Ac,count:a.toString(),description:"Available courts",color:"bg-yellow-500",onClick:()=>s(!0)},{title:"Revenue",icon:sT,count:"$45,678",description:"Total revenue",color:"bg-red-500"}];return y.jsxs("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:[y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map((d,g)=>y.jsxs("div",{className:`bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow ${d.onClick?"cursor-pointer":""}`,onClick:d.onClick,children:[y.jsxs("div",{className:"p-6",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:d.title}),y.jsx("div",{className:`p-3 rounded-full ${d.color} text-white ${d.onClick?"cursor-pointer hover:opacity-90 transition-opacity":""}`,onClick:m=>{m.stopPropagation(),d.title==="Profile"&&i(!0)},children:y.jsx(d.icon,{size:24})})]}),d.customContent?d.customContent:y.jsxs("div",{children:[y.jsx("p",{className:"text-2xl font-bold",children:d.count}),y.jsx("p",{className:"text-gray-500 text-sm",children:d.description})]})]}),y.jsx("div",{className:`h-1 ${d.color}`})]},g))}),y.jsx(iM,{isOpen:n,onClose:()=>i(!1)}),y.jsx(aM,{isOpen:r,onClose:()=>s(!1),stadiumId:e==null?void 0:e.stadiumID})]})};function lM(){const{signInWithGoogle:t,signInWithEmail:e,signUpWithEmail:n,resetPassword:i,error:r}=Hr(),[s,a]=G.useState(""),[l,u]=G.useState(""),[h,d]=G.useState(!1),[g,m]=G.useState(!1),[v,C]=G.useState(""),O=async()=>{try{await t()}catch(E){C(E.message)}},M=async E=>{E.preventDefault();try{h?await n(s,l):await e(s,l)}catch(S){C(S.message)}},A=async E=>{E.preventDefault();try{await i(s),C("Password reset email sent! Check your inbox."),m(!1)}catch(S){C(S.message)}};return y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[y.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:g?"Reset Password":h?"Create Account":"Welcome Back"}),v&&y.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:v}),g?y.jsxs("form",{onSubmit:A,className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),y.jsx("input",{type:"email",value:s,onChange:E=>a(E.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),y.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200",children:"Send Reset Link"}),y.jsx("button",{type:"button",onClick:()=>m(!1),className:"w-full text-gray-600 py-2 px-4 rounded-lg hover:bg-gray-100 transition duration-200",children:"Back to Login"})]}):y.jsxs(y.Fragment,{children:[y.jsxs("form",{onSubmit:M,className:"space-y-4 mb-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),y.jsx("input",{type:"email",value:s,onChange:E=>a(E.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),y.jsx("input",{type:"password",value:l,onChange:E=>u(E.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),!h&&y.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-sm text-blue-600 hover:text-blue-800",children:"Forgot Password?"}),y.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200",children:h?"Sign Up":"Sign In"})]}),y.jsxs("div",{className:"relative my-6",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-gray-300"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),y.jsxs("button",{onClick:O,className:"w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 transition duration-200 flex items-center justify-center gap-2",children:[y.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:y.jsx("path",{fill:"currentColor",d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1Z"})}),"Continue with Google"]}),y.jsxs("p",{className:"mt-4 text-center text-sm text-gray-600",children:[h?"Already have an account?":"Don't have an account?"," ",y.jsx("button",{onClick:()=>d(!h),className:"text-blue-600 hover:text-blue-800 font-medium",children:h?"Sign In":"Sign Up"})]})]})]})})}function uM(){const[t,e]=G.useState(!0),{user:n}=Hr(),i=()=>{e(!t)};return n?y.jsxs("div",{className:"flex h-screen bg-gray-100",children:[y.jsx(tM,{isOpen:t,toggleSidebar:i}),y.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[y.jsx(nM,{toggleSidebar:i}),y.jsx(oM,{})]})]}):y.jsx(lM,{})}function cM(){return y.jsx(JO,{children:y.jsx(uM,{})})}hR.createRoot(document.getElementById("root")).render(y.jsx(G.StrictMode,{children:y.jsx(cM,{})}));
