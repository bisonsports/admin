(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var __={exports:{}},lc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wS=Symbol.for("react.transitional.element"),SS=Symbol.for("react.fragment");function v_(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:wS,type:t,key:i,ref:e!==void 0?e:null,props:n}}lc.Fragment=SS;lc.jsx=v_;lc.jsxs=v_;__.exports=lc;var d=__.exports,E_={exports:{}},ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Df=Symbol.for("react.transitional.element"),AS=Symbol.for("react.portal"),xS=Symbol.for("react.fragment"),RS=Symbol.for("react.strict_mode"),CS=Symbol.for("react.profiler"),IS=Symbol.for("react.consumer"),NS=Symbol.for("react.context"),DS=Symbol.for("react.forward_ref"),OS=Symbol.for("react.suspense"),kS=Symbol.for("react.memo"),T_=Symbol.for("react.lazy"),wg=Symbol.iterator;function MS(t){return t===null||typeof t!="object"?null:(t=wg&&t[wg]||t["@@iterator"],typeof t=="function"?t:null)}var b_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w_=Object.assign,S_={};function Xr(t,e,n){this.props=t,this.context=e,this.refs=S_,this.updater=n||b_}Xr.prototype.isReactComponent={};Xr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Xr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function A_(){}A_.prototype=Xr.prototype;function Of(t,e,n){this.props=t,this.context=e,this.refs=S_,this.updater=n||b_}var kf=Of.prototype=new A_;kf.constructor=Of;w_(kf,Xr.prototype);kf.isPureReactComponent=!0;var Sg=Array.isArray,De={H:null,A:null,T:null,S:null},x_=Object.prototype.hasOwnProperty;function Mf(t,e,n,i,s,r){return n=r.ref,{$$typeof:Df,type:t,key:e,ref:n!==void 0?n:null,props:r}}function VS(t,e){return Mf(t.type,e,void 0,void 0,void 0,t.props)}function Vf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Df}function jS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ag=/\/+/g;function vh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jS(""+t.key):e.toString(36)}function xg(){}function PS(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(xg,xg):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function nr(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Df:case AS:a=!0;break;case T_:return a=t._init,nr(a(t._payload),e,n,i,s)}}if(a)return s=s(t),a=i===""?"."+vh(t,0):i,Sg(s)?(n="",a!=null&&(n=a.replace(Ag,"$&/")+"/"),nr(s,e,n,"",function(h){return h})):s!=null&&(Vf(s)&&(s=VS(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(Ag,"$&/")+"/")+a)),e.push(s)),1;a=0;var l=i===""?".":i+":";if(Sg(t))for(var u=0;u<t.length;u++)i=t[u],r=l+vh(i,u),a+=nr(i,e,n,r,s);else if(u=MS(t),typeof u=="function")for(t=u.call(t),u=0;!(i=t.next()).done;)i=i.value,r=l+vh(i,u++),a+=nr(i,e,n,r,s);else if(r==="object"){if(typeof t.then=="function")return nr(PS(t),e,n,i,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Sl(t,e,n){if(t==null)return t;var i=[],s=0;return nr(t,i,"","",function(r){return e.call(n,r,s++)}),i}function LS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rg=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function US(){}ie.Children={map:Sl,forEach:function(t,e,n){Sl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sl(t,function(){e++}),e},toArray:function(t){return Sl(t,function(e){return e})||[]},only:function(t){if(!Vf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=Xr;ie.Fragment=xS;ie.Profiler=CS;ie.PureComponent=Of;ie.StrictMode=RS;ie.Suspense=OS;ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=De;ie.act=function(){throw Error("act(...) is not supported in production builds of React.")};ie.cache=function(t){return function(){return t.apply(null,arguments)}};ie.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=w_({},t.props),s=t.key,r=void 0;if(e!=null)for(a in e.ref!==void 0&&(r=void 0),e.key!==void 0&&(s=""+e.key),e)!x_.call(e,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&e.ref===void 0||(i[a]=e[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return Mf(t.type,s,void 0,void 0,r,i)};ie.createContext=function(t){return t={$$typeof:NS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:IS,_context:t},t};ie.createElement=function(t,e,n){var i,s={},r=null;if(e!=null)for(i in e.key!==void 0&&(r=""+e.key),e)x_.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return Mf(t,r,void 0,void 0,null,s)};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:DS,render:t}};ie.isValidElement=Vf;ie.lazy=function(t){return{$$typeof:T_,_payload:{_status:-1,_result:t},_init:LS}};ie.memo=function(t,e){return{$$typeof:kS,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=De.T,n={};De.T=n;try{var i=t(),s=De.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(US,Rg)}catch(r){Rg(r)}finally{De.T=e}};ie.unstable_useCacheRefresh=function(){return De.H.useCacheRefresh()};ie.use=function(t){return De.H.use(t)};ie.useActionState=function(t,e,n){return De.H.useActionState(t,e,n)};ie.useCallback=function(t,e){return De.H.useCallback(t,e)};ie.useContext=function(t){return De.H.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t,e){return De.H.useDeferredValue(t,e)};ie.useEffect=function(t,e){return De.H.useEffect(t,e)};ie.useId=function(){return De.H.useId()};ie.useImperativeHandle=function(t,e,n){return De.H.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return De.H.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return De.H.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return De.H.useMemo(t,e)};ie.useOptimistic=function(t,e){return De.H.useOptimistic(t,e)};ie.useReducer=function(t,e,n){return De.H.useReducer(t,e,n)};ie.useRef=function(t){return De.H.useRef(t)};ie.useState=function(t){return De.H.useState(t)};ie.useSyncExternalStore=function(t,e,n){return De.H.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return De.H.useTransition()};ie.version="19.0.0";E_.exports=ie;var z=E_.exports,R_={exports:{}},uc={},C_={exports:{}},I_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,X){var $=q.length;q.push(X);e:for(;0<$;){var me=$-1>>>1,H=q[me];if(0<s(H,X))q[me]=X,q[$]=H,$=me;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var X=q[0],$=q.pop();if($!==X){q[0]=$;e:for(var me=0,H=q.length,te=H>>>1;me<te;){var F=2*(me+1)-1,Q=q[F],pe=F+1,Me=q[pe];if(0>s(Q,$))pe<H&&0>s(Me,Q)?(q[me]=Me,q[pe]=$,me=pe):(q[me]=Q,q[F]=$,me=F);else if(pe<H&&0>s(Me,$))q[me]=Me,q[pe]=$,me=pe;else break e}}return X}function s(q,X){var $=q.sortIndex-X.sortIndex;return $!==0?$:q.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],h=[],m=1,g=null,y=3,_=!1,C=!1,O=!1,j=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function b(q){for(var X=n(h);X!==null;){if(X.callback===null)i(h);else if(X.startTime<=q)i(h),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(h)}}function I(q){if(O=!1,b(q),!C)if(n(u)!==null)C=!0,ye();else{var X=n(h);X!==null&&Ce(I,X.startTime-q)}}var M=!1,k=-1,w=5,p=-1;function E(){return!(t.unstable_now()-p<w)}function A(){if(M){var q=t.unstable_now();p=q;var X=!0;try{e:{C=!1,O&&(O=!1,S(k),k=-1),_=!0;var $=y;try{t:{for(b(q),g=n(u);g!==null&&!(g.expirationTime>q&&E());){var me=g.callback;if(typeof me=="function"){g.callback=null,y=g.priorityLevel;var H=me(g.expirationTime<=q);if(q=t.unstable_now(),typeof H=="function"){g.callback=H,b(q),X=!0;break t}g===n(u)&&i(u),b(q)}else i(u);g=n(u)}if(g!==null)X=!0;else{var te=n(h);te!==null&&Ce(I,te.startTime-q),X=!1}}break e}finally{g=null,y=$,_=!1}X=void 0}}finally{X?R():M=!1}}}var R;if(typeof T=="function")R=function(){T(A)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,x=N.port2;N.port1.onmessage=A,R=function(){x.postMessage(null)}}else R=function(){j(A,0)};function ye(){M||(M=!0,R())}function Ce(q,X){k=j(function(){q(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){C||_||(C=!0,ye())},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(y){case 1:case 2:case 3:var X=3;break;default:X=y}var $=y;y=X;try{return q()}finally{y=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,X){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var $=y;y=q;try{return X()}finally{y=$}},t.unstable_scheduleCallback=function(q,X,$){var me=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?me+$:me):$=me,q){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=$+H,q={id:m++,callback:X,priorityLevel:q,startTime:$,expirationTime:H,sortIndex:-1},$>me?(q.sortIndex=$,e(h,q),n(u)===null&&q===n(h)&&(O?(S(k),k=-1):O=!0,Ce(I,$-me))):(q.sortIndex=H,e(u,q),C||_||(C=!0,ye())),q},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(q){var X=y;return function(){var $=y;y=X;try{return q.apply(this,arguments)}finally{y=$}}}})(I_);C_.exports=I_;var zS=C_.exports,N_={exports:{}},xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BS=z;function D_(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function pi(){}var St={d:{f:pi,r:function(){throw Error(D_(522))},D:pi,C:pi,L:pi,m:pi,X:pi,S:pi,M:pi},p:0,findDOMNode:null},qS=Symbol.for("react.portal");function HS(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qS,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Fa=BS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function cc(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=St;xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(D_(299));return HS(t,e,null,n)};xt.flushSync=function(t){var e=Fa.T,n=St.p;try{if(Fa.T=null,St.p=2,t)return t()}finally{Fa.T=e,St.p=n,St.d.f()}};xt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,St.d.C(t,e))};xt.prefetchDNS=function(t){typeof t=="string"&&St.d.D(t)};xt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=cc(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?St.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&St.d.X(t,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};xt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=cc(e.as,e.crossOrigin);St.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&St.d.M(t)};xt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=cc(n,e.crossOrigin);St.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};xt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=cc(e.as,e.crossOrigin);St.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else St.d.m(t)};xt.requestFormReset=function(t){St.d.r(t)};xt.unstable_batchedUpdates=function(t,e){return t(e)};xt.useFormState=function(t,e,n){return Fa.H.useFormState(t,e,n)};xt.useFormStatus=function(){return Fa.H.useHostTransitionStatus()};xt.version="19.0.0";function O_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(O_)}catch(t){console.error(t)}}O_(),N_.exports=xt;var FS=N_.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var We=zS,k_=z,GS=FS;function U(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function M_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}var KS=Symbol.for("react.element"),Al=Symbol.for("react.transitional.element"),ka=Symbol.for("react.portal"),cr=Symbol.for("react.fragment"),V_=Symbol.for("react.strict_mode"),dd=Symbol.for("react.profiler"),QS=Symbol.for("react.provider"),j_=Symbol.for("react.consumer"),Un=Symbol.for("react.context"),jf=Symbol.for("react.forward_ref"),fd=Symbol.for("react.suspense"),md=Symbol.for("react.suspense_list"),Pf=Symbol.for("react.memo"),Ei=Symbol.for("react.lazy"),P_=Symbol.for("react.offscreen"),YS=Symbol.for("react.memo_cache_sentinel"),Cg=Symbol.iterator;function Sa(t){return t===null||typeof t!="object"?null:(t=Cg&&t[Cg]||t["@@iterator"],typeof t=="function"?t:null)}var $S=Symbol.for("react.client.reference");function pd(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===$S?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case cr:return"Fragment";case ka:return"Portal";case dd:return"Profiler";case V_:return"StrictMode";case fd:return"Suspense";case md:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Un:return(t.displayName||"Context")+".Provider";case j_:return(t._context.displayName||"Context")+".Consumer";case jf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pf:return e=t.displayName||null,e!==null?e:pd(t.type)||"Memo";case Ei:e=t._payload,t=t._init;try{return pd(t(e))}catch{}}return null}var ne=k_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re=Object.assign,Eh,Ig;function Ma(t){if(Eh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Eh=e&&e[1]||"",Ig=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Eh+t+Ig}var Th=!1;function bh(t,e){if(!t||Th)return"";Th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var g=function(){throw Error()};if(Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(_){var y=_}Reflect.construct(t,[],g)}else{try{g.call()}catch(_){y=_}t.call(g.prototype)}}else{try{throw Error()}catch(_){y=_}(g=t())&&typeof g.catch=="function"&&g.catch(function(){})}}catch(_){if(_&&y&&typeof _.stack=="string")return[_.stack,y.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],l=r[1];if(a&&l){var u=a.split(`
`),h=l.split(`
`);for(s=i=0;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;for(;s<h.length&&!h[s].includes("DetermineComponentFrameRoot");)s++;if(i===u.length||s===h.length)for(i=u.length-1,s=h.length-1;1<=i&&0<=s&&u[i]!==h[s];)s--;for(;1<=i&&0<=s;i--,s--)if(u[i]!==h[s]){if(i!==1||s!==1)do if(i--,s--,0>s||u[i]!==h[s]){var m=`
`+u[i].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=i&&0<=s);break}}}finally{Th=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Ma(n):""}function XS(t){switch(t.tag){case 26:case 27:case 5:return Ma(t.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 15:return t=bh(t.type,!1),t;case 11:return t=bh(t.type.render,!1),t;case 1:return t=bh(t.type,!0),t;default:return""}}function Ng(t){try{var e="";do e+=XS(t),t=t.return;while(t);return e}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Wr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function L_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dg(t){if(Wr(t)!==t)throw Error(U(188))}function WS(t){var e=t.alternate;if(!e){if(e=Wr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return Dg(s),t;if(r===i)return Dg(s),e;r=r.sibling}throw Error(U(188))}if(n.return!==i.return)n=s,i=r;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function U_(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=U_(t),e!==null)return e;t=t.sibling}return null}var Va=Array.isArray,xe=GS.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,bs={pending:!1,data:null,method:null,action:null},gd=[],hr=-1;function xn(t){return{current:t}}function it(t){0>hr||(t.current=gd[hr],gd[hr]=null,hr--)}function Ie(t,e){hr++,gd[hr]=t.current,t.current=e}var pn=xn(null),ho=xn(null),Oi=xn(null),mu=xn(null);function pu(t,e){switch(Ie(Oi,e),Ie(ho,t),Ie(pn,null),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)&&(e=e.namespaceURI)?Oy(e):0;break;default:if(t=t===8?e.parentNode:e,e=t.tagName,t=t.namespaceURI)t=Oy(t),e=WE(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}it(pn),Ie(pn,e)}function kr(){it(pn),it(ho),it(Oi)}function yd(t){t.memoizedState!==null&&Ie(mu,t);var e=pn.current,n=WE(e,t.type);e!==n&&(Ie(ho,t),Ie(pn,n))}function gu(t){ho.current===t&&(it(pn),it(ho)),mu.current===t&&(it(mu),wo._currentValue=bs)}var _d=Object.prototype.hasOwnProperty,Lf=We.unstable_scheduleCallback,wh=We.unstable_cancelCallback,ZS=We.unstable_shouldYield,JS=We.unstable_requestPaint,gn=We.unstable_now,eA=We.unstable_getCurrentPriorityLevel,z_=We.unstable_ImmediatePriority,B_=We.unstable_UserBlockingPriority,yu=We.unstable_NormalPriority,tA=We.unstable_LowPriority,q_=We.unstable_IdlePriority,nA=We.log,iA=We.unstable_setDisableYieldValue,Po=null,zt=null;function sA(t){if(zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Po,t,void 0,(t.current.flags&128)===128)}catch{}}function Ii(t){if(typeof nA=="function"&&iA(t),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(Po,t)}catch{}}var Bt=Math.clz32?Math.clz32:oA,rA=Math.log,aA=Math.LN2;function oA(t){return t>>>=0,t===0?32:31-(rA(t)/aA|0)|0}var xl=128,Rl=4194304;function ms(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function hc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,a=t.warmLanes;t=t.finishedLanes!==0;var l=n&134217727;return l!==0?(n=l&~s,n!==0?i=ms(n):(r&=l,r!==0?i=ms(r):t||(a=l&~a,a!==0&&(i=ms(a))))):(l=n&~s,l!==0?i=ms(l):r!==0?i=ms(r):t||(a=n&~a,a!==0&&(i=ms(a)))),i===0?0:e!==0&&e!==i&&!(e&s)&&(s=i&-i,a=e&-e,s>=a||s===32&&(a&4194176)!==0)?e:i}function Lo(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function lA(t,e){switch(t){case 1:case 2:case 4:case 8:return e+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H_(){var t=xl;return xl<<=1,!(xl&4194176)&&(xl=128),t}function F_(){var t=Rl;return Rl<<=1,!(Rl&62914560)&&(Rl=4194304),t}function Sh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Uo(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function uA(t,e,n,i,s,r){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var l=t.entanglements,u=t.expirationTimes,h=t.hiddenUpdates;for(n=a&~n;0<n;){var m=31-Bt(n),g=1<<m;l[m]=0,u[m]=-1;var y=h[m];if(y!==null)for(h[m]=null,m=0;m<y.length;m++){var _=y[m];_!==null&&(_.lane&=-536870913)}n&=~g}i!==0&&G_(t,i,0),r!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=r&~(a&~e))}function G_(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-Bt(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&4194218}function K_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Bt(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}function Q_(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function Y_(){var t=xe.p;return t!==0?t:(t=window.event,t===void 0?32:oT(t.type))}function cA(t,e){var n=xe.p;try{return xe.p=t,e()}finally{xe.p=n}}var ns=Math.random().toString(36).slice(2),yt="__reactFiber$"+ns,Ot="__reactProps$"+ns,Zr="__reactContainer$"+ns,vd="__reactEvents$"+ns,hA="__reactListeners$"+ns,dA="__reactHandles$"+ns,Og="__reactResources$"+ns,fo="__reactMarker$"+ns;function Uf(t){delete t[yt],delete t[Ot],delete t[vd],delete t[hA],delete t[dA]}function _s(t){var e=t[yt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zr]||n[yt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=My(t);t!==null;){if(n=t[yt])return n;t=My(t)}return e}t=n,n=t.parentNode}return null}function Jr(t){if(t=t[yt]||t[Zr]){var e=t.tag;if(e===5||e===6||e===13||e===26||e===27||e===3)return t}return null}function ja(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(U(33))}function Tr(t){var e=t[Og];return e||(e=t[Og]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function tt(t){t[fo]=!0}var $_=new Set,X_={};function Us(t,e){Mr(t,e),Mr(t+"Capture",e)}function Mr(t,e){for(X_[t]=e,t=0;t<e.length;t++)$_.add(e[t])}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kg={},Mg={};function mA(t){return _d.call(Mg,t)?!0:_d.call(kg,t)?!1:fA.test(t)?Mg[t]=!0:(kg[t]=!0,!1)}function Kl(t,e,n){if(mA(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Cl(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Dn(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function Yt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function W_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pA(t){var e=W_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _u(t){t._valueTracker||(t._valueTracker=pA(t))}function Z_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=W_(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function vu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var gA=/[\n"\\]/g;function Wt(t){return t.replace(gA,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Ed(t,e,n,i,s,r,a,l){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Yt(e)):t.value!==""+Yt(e)&&(t.value=""+Yt(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?Td(t,a,Yt(e)):n!=null?Td(t,a,Yt(n)):i!=null&&t.removeAttribute("value"),s==null&&r!=null&&(t.defaultChecked=!!r),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),l!=null&&typeof l!="function"&&typeof l!="symbol"&&typeof l!="boolean"?t.name=""+Yt(l):t.removeAttribute("name")}function J_(t,e,n,i,s,r,a,l){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null))return;n=n!=null?""+Yt(n):"",e=e!=null?""+Yt(e):n,l||e===t.value||(t.value=e),t.defaultValue=e}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=l?t.checked:!!i,t.defaultChecked=!!i,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a)}function Td(t,e,n){e==="number"&&vu(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function br(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Yt(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ev(t,e,n){if(e!=null&&(e=""+Yt(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Yt(n):""}function tv(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(U(92));if(Va(i)){if(1<i.length)throw Error(U(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=Yt(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i)}function Vr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vg(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||yA.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function nv(t,e,n){if(e!=null&&typeof e!="object")throw Error(U(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var s in e)i=e[s],e.hasOwnProperty(s)&&n[s]!==i&&Vg(t,s,i)}else for(var r in e)e.hasOwnProperty(r)&&Vg(t,r,e[r])}function zf(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _A=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ql(t){return vA.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var bd=null;function Bf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dr=null,wr=null;function jg(t){var e=Jr(t);if(e&&(t=e.stateNode)){var n=t[Ot]||null;e:switch(t=e.stateNode,e.type){case"input":if(Ed(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Wt(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=i[Ot]||null;if(!s)throw Error(U(90));Ed(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&Z_(i)}break e;case"textarea":ev(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&br(t,!!n.multiple,e,!1)}}}var Ah=!1;function iv(t,e,n){if(Ah)return t(e,n);Ah=!0;try{var i=t(e);return i}finally{if(Ah=!1,(dr!==null||wr!==null)&&(Tc(),dr&&(e=dr,t=wr,wr=dr=null,jg(e),t)))for(e=0;e<t.length;e++)jg(t[e])}}function mo(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Ot]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var wd=!1;if(Xn)try{var Aa={};Object.defineProperty(Aa,"passive",{get:function(){wd=!0}}),window.addEventListener("test",Aa,Aa),window.removeEventListener("test",Aa,Aa)}catch{wd=!1}var Ni=null,qf=null,Yl=null;function sv(){if(Yl)return Yl;var t,e=qf,n=e.length,i,s="value"in Ni?Ni.value:Ni.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===s[r-i];i++);return Yl=s.slice(t,1<i?1-i:void 0)}function $l(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Il(){return!0}function Pg(){return!1}function kt(t){function e(n,i,s,r,a){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Il:Pg,this.isPropagationStopped=Pg,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),e}var zs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dc=kt(zs),zo=Re({},zs,{view:0,detail:0}),EA=kt(zo),xh,Rh,xa,fc=Re({},zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xa&&(xa&&t.type==="mousemove"?(xh=t.screenX-xa.screenX,Rh=t.screenY-xa.screenY):Rh=xh=0,xa=t),xh)},movementY:function(t){return"movementY"in t?t.movementY:Rh}}),Lg=kt(fc),TA=Re({},fc,{dataTransfer:0}),bA=kt(TA),wA=Re({},zo,{relatedTarget:0}),Ch=kt(wA),SA=Re({},zs,{animationName:0,elapsedTime:0,pseudoElement:0}),AA=kt(SA),xA=Re({},zs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RA=kt(xA),CA=Re({},zs,{data:0}),Ug=kt(CA),IA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DA[t])?!!e[t]:!1}function Hf(){return OA}var kA=Re({},zo,{key:function(t){if(t.key){var e=IA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hf,charCode:function(t){return t.type==="keypress"?$l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),MA=kt(kA),VA=Re({},fc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zg=kt(VA),jA=Re({},zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hf}),PA=kt(jA),LA=Re({},zs,{propertyName:0,elapsedTime:0,pseudoElement:0}),UA=kt(LA),zA=Re({},fc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BA=kt(zA),qA=Re({},zs,{newState:0,oldState:0}),HA=kt(qA),FA=[9,13,27,32],Ff=Xn&&"CompositionEvent"in window,Ga=null;Xn&&"documentMode"in document&&(Ga=document.documentMode);var GA=Xn&&"TextEvent"in window&&!Ga,rv=Xn&&(!Ff||Ga&&8<Ga&&11>=Ga),Bg=" ",qg=!1;function av(t,e){switch(t){case"keyup":return FA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ov(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fr=!1;function KA(t,e){switch(t){case"compositionend":return ov(e);case"keypress":return e.which!==32?null:(qg=!0,Bg);case"textInput":return t=e.data,t===Bg&&qg?null:t;default:return null}}function QA(t,e){if(fr)return t==="compositionend"||!Ff&&av(t,e)?(t=sv(),Yl=qf=Ni=null,fr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rv&&e.locale!=="ko"?null:e.data;default:return null}}var YA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YA[t.type]:e==="textarea"}function lv(t,e,n,i){dr?wr?wr.push(i):wr=[i]:dr=i,e=Vu(e,"onChange"),0<e.length&&(n=new dc("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ka=null,po=null;function $A(t){YE(t,0)}function mc(t){var e=ja(t);if(Z_(e))return t}function Fg(t,e){if(t==="change")return e}var uv=!1;if(Xn){var Ih;if(Xn){var Nh="oninput"in document;if(!Nh){var Gg=document.createElement("div");Gg.setAttribute("oninput","return;"),Nh=typeof Gg.oninput=="function"}Ih=Nh}else Ih=!1;uv=Ih&&(!document.documentMode||9<document.documentMode)}function Kg(){Ka&&(Ka.detachEvent("onpropertychange",cv),po=Ka=null)}function cv(t){if(t.propertyName==="value"&&mc(po)){var e=[];lv(e,po,t,Bf(t)),iv($A,e)}}function XA(t,e,n){t==="focusin"?(Kg(),Ka=e,po=n,Ka.attachEvent("onpropertychange",cv)):t==="focusout"&&Kg()}function WA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mc(po)}function ZA(t,e){if(t==="click")return mc(e)}function JA(t,e){if(t==="input"||t==="change")return mc(e)}function ex(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ft=typeof Object.is=="function"?Object.is:ex;function go(t,e){if(Ft(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!_d.call(e,s)||!Ft(t[s],e[s]))return!1}return!0}function Qg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Yg(t,e){var n=Qg(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qg(n)}}function hv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dv(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=vu(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vu(t.document)}return e}function Gf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tx(t,e){var n=dv(e);e=t.focusedElem;var i=t.selectionRange;if(n!==e&&e&&e.ownerDocument&&hv(e.ownerDocument.documentElement,e)){if(i!==null&&Gf(e)){if(t=i.start,n=i.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var s=e.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=Yg(e,r);var a=Yg(e,i);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(t),n.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nx=Xn&&"documentMode"in document&&11>=document.documentMode,mr=null,Sd=null,Qa=null,Ad=!1;function $g(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ad||mr==null||mr!==vu(i)||(i=mr,"selectionStart"in i&&Gf(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Qa&&go(Qa,i)||(Qa=i,i=Vu(Sd,"onSelect"),0<i.length&&(e=new dc("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=mr)))}function fs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pr={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},Dh={},fv={};Xn&&(fv=document.createElement("div").style,"AnimationEvent"in window||(delete pr.animationend.animation,delete pr.animationiteration.animation,delete pr.animationstart.animation),"TransitionEvent"in window||delete pr.transitionend.transition);function Bs(t){if(Dh[t])return Dh[t];if(!pr[t])return t;var e=pr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fv)return Dh[t]=e[n];return t}var mv=Bs("animationend"),pv=Bs("animationiteration"),gv=Bs("animationstart"),ix=Bs("transitionrun"),sx=Bs("transitionstart"),rx=Bs("transitioncancel"),yv=Bs("transitionend"),_v=new Map,Xg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function hn(t,e){_v.set(t,e),Us(e,[t])}var Qt=[],gr=0,Kf=0;function pc(){for(var t=gr,e=Kf=gr=0;e<t;){var n=Qt[e];Qt[e++]=null;var i=Qt[e];Qt[e++]=null;var s=Qt[e];Qt[e++]=null;var r=Qt[e];if(Qt[e++]=null,i!==null&&s!==null){var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}r!==0&&vv(n,s,r)}}function gc(t,e,n,i){Qt[gr++]=t,Qt[gr++]=e,Qt[gr++]=n,Qt[gr++]=i,Kf|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function Qf(t,e,n,i){return gc(t,e,n,i),Eu(t)}function Gi(t,e){return gc(t,null,null,e),Eu(t)}function vv(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=t.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(s=!0)),t=r,r=r.return;s&&e!==null&&t.tag===3&&(r=t.stateNode,s=31-Bt(n),r=r.hiddenUpdates,t=r[s],t===null?r[s]=[e]:t.push(e),e.lane=n|536870912)}function Eu(t){if(50<ro)throw ro=0,Qd=null,Error(U(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var yr={},Wg=new WeakMap;function Zt(t,e){if(typeof t=="object"&&t!==null){var n=Wg.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Ng(e)},Wg.set(t,e),e)}return{value:t,source:e,stack:Ng(e)}}var _r=[],vr=0,Tu=null,bu=0,$t=[],Xt=0,ws=null,zn=1,Bn="";function ps(t,e){_r[vr++]=bu,_r[vr++]=Tu,Tu=t,bu=e}function Ev(t,e,n){$t[Xt++]=zn,$t[Xt++]=Bn,$t[Xt++]=ws,ws=t;var i=zn;t=Bn;var s=32-Bt(i)-1;i&=~(1<<s),n+=1;var r=32-Bt(e)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,zn=1<<32-Bt(e)+s|n<<s|i,Bn=r+t}else zn=1<<r|n<<s|i,Bn=t}function Yf(t){t.return!==null&&(ps(t,1),Ev(t,1,0))}function $f(t){for(;t===Tu;)Tu=_r[--vr],_r[vr]=null,bu=_r[--vr],_r[vr]=null;for(;t===ws;)ws=$t[--Xt],$t[Xt]=null,Bn=$t[--Xt],$t[Xt]=null,zn=$t[--Xt],$t[Xt]=null}var wt=null,ot=null,fe=!1,on=null,fn=!1,xd=Error(U(519));function Cs(t){var e=Error(U(418,""));throw yo(Zt(e,t)),xd}function Zg(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[yt]=t,e[Ot]=i,n){case"dialog":le("cancel",e),le("close",e);break;case"iframe":case"object":case"embed":le("load",e);break;case"video":case"audio":for(n=0;n<Eo.length;n++)le(Eo[n],e);break;case"source":le("error",e);break;case"img":case"image":case"link":le("error",e),le("load",e);break;case"details":le("toggle",e);break;case"input":le("invalid",e),J_(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),_u(e);break;case"select":le("invalid",e);break;case"textarea":le("invalid",e),tv(e,i.value,i.defaultValue,i.children),_u(e)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||XE(e.textContent,n)?(i.popover!=null&&(le("beforetoggle",e),le("toggle",e)),i.onScroll!=null&&le("scroll",e),i.onScrollEnd!=null&&le("scrollend",e),i.onClick!=null&&(e.onclick=wc),e=!0):e=!1,e||Cs(t)}function Jg(t){for(wt=t.return;wt;)switch(wt.tag){case 3:case 27:fn=!0;return;case 5:case 13:fn=!1;return;default:wt=wt.return}}function Ra(t){if(t!==wt)return!1;if(!fe)return Jg(t),fe=!0,!1;var e=!1,n;if((n=t.tag!==3&&t.tag!==27)&&((n=t.tag===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||ef(t.type,t.memoizedProps)),n=!n),n&&(e=!0),e&&ot&&Cs(t),Jg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8)if(n=t.data,n==="/$"){if(e===0){ot=ln(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++;t=t.nextSibling}ot=null}}else ot=wt?ln(t.stateNode.nextSibling):null;return!0}function Bo(){ot=wt=null,fe=!1}function yo(t){on===null?on=[t]:on.push(t)}var Ya=Error(U(460)),Tv=Error(U(474)),Rd={then:function(){}};function ey(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Nl(){}function bv(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Nl,Nl),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,t===Ya?Error(U(483)):t;default:if(typeof e.status=="string")e.then(Nl,Nl);else{if(t=we,t!==null&&100<t.shellSuspendCounter)throw Error(U(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=i}},function(i){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,t===Ya?Error(U(483)):t}throw $a=e,Ya}}var $a=null;function ty(){if($a===null)throw Error(U(459));var t=$a;return $a=null,t}var Sr=null,_o=0;function Dl(t){var e=_o;return _o+=1,Sr===null&&(Sr=[]),bv(Sr,t,e)}function Ca(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function Ol(t,e){throw e.$$typeof===KS?Error(U(525)):(t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function ny(t){var e=t._init;return e(t._payload)}function wv(t){function e(S,T){if(t){var b=S.deletions;b===null?(S.deletions=[T],S.flags|=16):b.push(T)}}function n(S,T){if(!t)return null;for(;T!==null;)e(S,T),T=T.sibling;return null}function i(S){for(var T=new Map;S!==null;)S.key!==null?T.set(S.key,S):T.set(S.index,S),S=S.sibling;return T}function s(S,T){return S=Vi(S,T),S.index=0,S.sibling=null,S}function r(S,T,b){return S.index=b,t?(b=S.alternate,b!==null?(b=b.index,b<T?(S.flags|=33554434,T):b):(S.flags|=33554434,T)):(S.flags|=1048576,T)}function a(S){return t&&S.alternate===null&&(S.flags|=33554434),S}function l(S,T,b,I){return T===null||T.tag!==6?(T=Hh(b,S.mode,I),T.return=S,T):(T=s(T,b),T.return=S,T)}function u(S,T,b,I){var M=b.type;return M===cr?m(S,T,b.props.children,I,b.key):T!==null&&(T.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ei&&ny(M)===T.type)?(T=s(T,b.props),Ca(T,b),T.return=S,T):(T=eu(b.type,b.key,b.props,null,S.mode,I),Ca(T,b),T.return=S,T)}function h(S,T,b,I){return T===null||T.tag!==4||T.stateNode.containerInfo!==b.containerInfo||T.stateNode.implementation!==b.implementation?(T=Fh(b,S.mode,I),T.return=S,T):(T=s(T,b.children||[]),T.return=S,T)}function m(S,T,b,I,M){return T===null||T.tag!==7?(T=As(b,S.mode,I,M),T.return=S,T):(T=s(T,b),T.return=S,T)}function g(S,T,b){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Hh(""+T,S.mode,b),T.return=S,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Al:return b=eu(T.type,T.key,T.props,null,S.mode,b),Ca(b,T),b.return=S,b;case ka:return T=Fh(T,S.mode,b),T.return=S,T;case Ei:var I=T._init;return T=I(T._payload),g(S,T,b)}if(Va(T)||Sa(T))return T=As(T,S.mode,b,null),T.return=S,T;if(typeof T.then=="function")return g(S,Dl(T),b);if(T.$$typeof===Un)return g(S,kl(S,T),b);Ol(S,T)}return null}function y(S,T,b,I){var M=T!==null?T.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return M!==null?null:l(S,T,""+b,I);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Al:return b.key===M?u(S,T,b,I):null;case ka:return b.key===M?h(S,T,b,I):null;case Ei:return M=b._init,b=M(b._payload),y(S,T,b,I)}if(Va(b)||Sa(b))return M!==null?null:m(S,T,b,I,null);if(typeof b.then=="function")return y(S,T,Dl(b),I);if(b.$$typeof===Un)return y(S,T,kl(S,b),I);Ol(S,b)}return null}function _(S,T,b,I,M){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return S=S.get(b)||null,l(T,S,""+I,M);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Al:return S=S.get(I.key===null?b:I.key)||null,u(T,S,I,M);case ka:return S=S.get(I.key===null?b:I.key)||null,h(T,S,I,M);case Ei:var k=I._init;return I=k(I._payload),_(S,T,b,I,M)}if(Va(I)||Sa(I))return S=S.get(b)||null,m(T,S,I,M,null);if(typeof I.then=="function")return _(S,T,b,Dl(I),M);if(I.$$typeof===Un)return _(S,T,b,kl(T,I),M);Ol(T,I)}return null}function C(S,T,b,I){for(var M=null,k=null,w=T,p=T=0,E=null;w!==null&&p<b.length;p++){w.index>p?(E=w,w=null):E=w.sibling;var A=y(S,w,b[p],I);if(A===null){w===null&&(w=E);break}t&&w&&A.alternate===null&&e(S,w),T=r(A,T,p),k===null?M=A:k.sibling=A,k=A,w=E}if(p===b.length)return n(S,w),fe&&ps(S,p),M;if(w===null){for(;p<b.length;p++)w=g(S,b[p],I),w!==null&&(T=r(w,T,p),k===null?M=w:k.sibling=w,k=w);return fe&&ps(S,p),M}for(w=i(w);p<b.length;p++)E=_(w,S,p,b[p],I),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?p:E.key),T=r(E,T,p),k===null?M=E:k.sibling=E,k=E);return t&&w.forEach(function(R){return e(S,R)}),fe&&ps(S,p),M}function O(S,T,b,I){if(b==null)throw Error(U(151));for(var M=null,k=null,w=T,p=T=0,E=null,A=b.next();w!==null&&!A.done;p++,A=b.next()){w.index>p?(E=w,w=null):E=w.sibling;var R=y(S,w,A.value,I);if(R===null){w===null&&(w=E);break}t&&w&&R.alternate===null&&e(S,w),T=r(R,T,p),k===null?M=R:k.sibling=R,k=R,w=E}if(A.done)return n(S,w),fe&&ps(S,p),M;if(w===null){for(;!A.done;p++,A=b.next())A=g(S,A.value,I),A!==null&&(T=r(A,T,p),k===null?M=A:k.sibling=A,k=A);return fe&&ps(S,p),M}for(w=i(w);!A.done;p++,A=b.next())A=_(w,S,p,A.value,I),A!==null&&(t&&A.alternate!==null&&w.delete(A.key===null?p:A.key),T=r(A,T,p),k===null?M=A:k.sibling=A,k=A);return t&&w.forEach(function(N){return e(S,N)}),fe&&ps(S,p),M}function j(S,T,b,I){if(typeof b=="object"&&b!==null&&b.type===cr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Al:e:{for(var M=b.key;T!==null;){if(T.key===M){if(M=b.type,M===cr){if(T.tag===7){n(S,T.sibling),I=s(T,b.props.children),I.return=S,S=I;break e}}else if(T.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ei&&ny(M)===T.type){n(S,T.sibling),I=s(T,b.props),Ca(I,b),I.return=S,S=I;break e}n(S,T);break}else e(S,T);T=T.sibling}b.type===cr?(I=As(b.props.children,S.mode,I,b.key),I.return=S,S=I):(I=eu(b.type,b.key,b.props,null,S.mode,I),Ca(I,b),I.return=S,S=I)}return a(S);case ka:e:{for(M=b.key;T!==null;){if(T.key===M)if(T.tag===4&&T.stateNode.containerInfo===b.containerInfo&&T.stateNode.implementation===b.implementation){n(S,T.sibling),I=s(T,b.children||[]),I.return=S,S=I;break e}else{n(S,T);break}else e(S,T);T=T.sibling}I=Fh(b,S.mode,I),I.return=S,S=I}return a(S);case Ei:return M=b._init,b=M(b._payload),j(S,T,b,I)}if(Va(b))return C(S,T,b,I);if(Sa(b)){if(M=Sa(b),typeof M!="function")throw Error(U(150));return b=M.call(b),O(S,T,b,I)}if(typeof b.then=="function")return j(S,T,Dl(b),I);if(b.$$typeof===Un)return j(S,T,kl(S,b),I);Ol(S,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,T!==null&&T.tag===6?(n(S,T.sibling),I=s(T,b),I.return=S,S=I):(n(S,T),I=Hh(b,S.mode,I),I.return=S,S=I),a(S)):n(S,T)}return function(S,T,b,I){try{_o=0;var M=j(S,T,b,I);return Sr=null,M}catch(w){if(w===Ya)throw w;var k=Jt(29,w,null,S.mode);return k.lanes=I,k.return=S,k}finally{}}}var Is=wv(!0),Sv=wv(!1),jr=xn(null),wu=xn(0);function iy(t,e){t=Jn,Ie(wu,t),Ie(jr,e),Jn=t|e.baseLanes}function Cd(){Ie(wu,Jn),Ie(jr,jr.current)}function Xf(){Jn=wu.current,it(jr),it(wu)}var tn=xn(null),yn=null;function bi(t){var e=t.alternate;Ie(Ye,Ye.current&1),Ie(tn,t),yn===null&&(e===null||jr.current!==null||e.memoizedState!==null)&&(yn=t)}function Av(t){if(t.tag===22){if(Ie(Ye,Ye.current),Ie(tn,t),yn===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(yn=t)}}else wi()}function wi(){Ie(Ye,Ye.current),Ie(tn,tn.current)}function qn(t){it(tn),yn===t&&(yn=null),it(Ye)}var Ye=xn(0);function Su(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ax=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},ox=We.unstable_scheduleCallback,lx=We.unstable_NormalPriority,Qe={$$typeof:Un,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wf(){return{controller:new ax,data:new Map,refCount:0}}function qo(t){t.refCount--,t.refCount===0&&ox(lx,function(){t.controller.abort()})}var Xa=null,Id=0,Pr=0,Ar=null;function ux(t,e){if(Xa===null){var n=Xa=[];Id=0,Pr=Em(),Ar={status:"pending",value:void 0,then:function(i){n.push(i)}}}return Id++,e.then(sy,sy),e}function sy(){if(--Id===0&&Xa!==null){Ar!==null&&(Ar.status="fulfilled");var t=Xa;Xa=null,Pr=0,Ar=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function cx(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var ry=ne.S;ne.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&ux(t,e),ry!==null&&ry(t,e)};var Ss=xn(null);function Zf(){var t=Ss.current;return t!==null?t:we.pooledCache}function Xl(t,e){e===null?Ie(Ss,Ss.current):Ie(Ss,e.pool)}function xv(){var t=Zf();return t===null?null:{parent:Qe._currentValue,pool:t}}var Ki=0,se=null,ve=null,He=null,Au=!1,xr=!1,Ns=!1,xu=0,vo=0,Rr=null,hx=0;function Ue(){throw Error(U(321))}function Jf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ft(t[n],e[n]))return!1;return!0}function em(t,e,n,i,s,r){return Ki=r,se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ne.H=t===null||t.memoizedState===null?qs:is,Ns=!1,r=n(i,s),Ns=!1,xr&&(r=Cv(e,n,i,s)),Rv(t),r}function Rv(t){ne.H=bn;var e=ve!==null&&ve.next!==null;if(Ki=0,He=ve=se=null,Au=!1,vo=0,Rr=null,e)throw Error(U(300));t===null||nt||(t=t.dependencies,t!==null&&Iu(t)&&(nt=!0))}function Cv(t,e,n,i){se=t;var s=0;do{if(xr&&(Rr=null),vo=0,xr=!1,25<=s)throw Error(U(301));if(s+=1,He=ve=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}ne.H=Hs,r=e(n,i)}while(xr);return r}function dx(){var t=ne.H,e=t.useState()[0];return e=typeof e.then=="function"?Ho(e):e,t=t.useState()[0],(ve!==null?ve.memoizedState:null)!==t&&(se.flags|=1024),e}function tm(){var t=xu!==0;return xu=0,t}function nm(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function im(t){if(Au){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Au=!1}Ki=0,He=ve=se=null,xr=!1,vo=xu=0,Rr=null}function Rt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?se.memoizedState=He=t:He=He.next=t,He}function Ge(){if(ve===null){var t=se.alternate;t=t!==null?t.memoizedState:null}else t=ve.next;var e=He===null?se.memoizedState:He.next;if(e!==null)He=e,ve=t;else{if(t===null)throw se.alternate===null?Error(U(467)):Error(U(310));ve=t,t={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},He===null?se.memoizedState=He=t:He=He.next=t}return He}var yc;yc=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Ho(t){var e=vo;return vo+=1,Rr===null&&(Rr=[]),t=bv(Rr,t,e),e=se,(He===null?e.memoizedState:He.next)===null&&(e=e.alternate,ne.H=e===null||e.memoizedState===null?qs:is),t}function _c(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ho(t);if(t.$$typeof===Un)return _t(t)}throw Error(U(438,String(t)))}function sm(t){var e=null,n=se.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=se.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=yc(),se.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=YS;return e.index++,n}function Wn(t,e){return typeof e=="function"?e(t):e}function Wl(t){var e=Ge();return rm(e,ve,t)}function rm(t,e,n){var i=t.queue;if(i===null)throw Error(U(311));i.lastRenderedReducer=n;var s=t.baseQueue,r=i.pending;if(r!==null){if(s!==null){var a=s.next;s.next=r.next,r.next=a}e.baseQueue=s=r,i.pending=null}if(r=t.baseState,s===null)t.memoizedState=r;else{e=s.next;var l=a=null,u=null,h=e,m=!1;do{var g=h.lane&-536870913;if(g!==h.lane?(he&g)===g:(Ki&g)===g){var y=h.revertLane;if(y===0)u!==null&&(u=u.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),g===Pr&&(m=!0);else if((Ki&y)===y){h=h.next,y===Pr&&(m=!0);continue}else g={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=g,a=r):u=u.next=g,se.lanes|=y,Yi|=y;g=h.action,Ns&&n(r,g),r=h.hasEagerState?h.eagerState:n(r,g)}else y={lane:g,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},u===null?(l=u=y,a=r):u=u.next=y,se.lanes|=g,Yi|=g;h=h.next}while(h!==null&&h!==e);if(u===null?a=r:u.next=l,!Ft(r,t.memoizedState)&&(nt=!0,m&&(n=Ar,n!==null)))throw n;t.memoizedState=r,t.baseState=a,t.baseQueue=u,i.lastRenderedState=r}return s===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Oh(t){var e=Ge(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do r=t(r,a.action),a=a.next;while(a!==s);Ft(r,e.memoizedState)||(nt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function Iv(t,e,n){var i=se,s=Ge(),r=fe;if(r){if(n===void 0)throw Error(U(407));n=n()}else n=e();var a=!Ft((ve||s).memoizedState,n);if(a&&(s.memoizedState=n,nt=!0),s=s.queue,am(Ov.bind(null,i,s,t),[t]),s.getSnapshot!==e||a||He!==null&&He.memoizedState.tag&1){if(i.flags|=2048,Lr(9,Dv.bind(null,i,s,n,e),{destroy:void 0},null),we===null)throw Error(U(349));r||Ki&60||Nv(i,e,n)}return n}function Nv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=se.updateQueue,e===null?(e=yc(),se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Dv(t,e,n,i){e.value=n,e.getSnapshot=i,kv(e)&&Mv(t)}function Ov(t,e,n){return n(function(){kv(e)&&Mv(t)})}function kv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ft(t,n)}catch{return!0}}function Mv(t){var e=Gi(t,2);e!==null&&At(e,t,2)}function Nd(t){var e=Rt();if(typeof t=="function"){var n=t;if(t=n(),Ns){Ii(!0);try{n()}finally{Ii(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:t},e}function Vv(t,e,n,i){return t.baseState=n,rm(t,ve,typeof i=="function"?i:Wn)}function fx(t,e,n,i,s){if(Ec(t))throw Error(U(485));if(t=e.action,t!==null){var r={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};ne.T!==null?n(!0):r.isTransition=!1,i(r),n=e.pending,n===null?(r.next=e.pending=r,jv(e,r)):(r.next=n.next,e.pending=n.next=r)}}function jv(t,e){var n=e.action,i=e.payload,s=t.state;if(e.isTransition){var r=ne.T,a={};ne.T=a;try{var l=n(s,i),u=ne.S;u!==null&&u(a,l),ay(t,e,l)}catch(h){Dd(t,e,h)}finally{ne.T=r}}else try{r=n(s,i),ay(t,e,r)}catch(h){Dd(t,e,h)}}function ay(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){oy(t,e,i)},function(i){return Dd(t,e,i)}):oy(t,e,n)}function oy(t,e,n){e.status="fulfilled",e.value=n,Pv(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,jv(t,n)))}function Dd(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,Pv(e),e=e.next;while(e!==i)}t.action=null}function Pv(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Lv(t,e){return e}function Uv(t,e){if(fe){var n=we.formState;if(n!==null){e:{var i=se;if(fe){if(ot){t:{for(var s=ot,r=fn;s.nodeType!==8;){if(!r){s=null;break t}if(s=ln(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){ot=ln(s.nextSibling),i=s.data==="F!";break e}}Cs(i)}i=!1}i&&(e=n[0])}}return n=Rt(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lv,lastRenderedState:e},n.queue=i,n=nE.bind(null,se,i),i.dispatch=n,i=Nd(!1),r=cm.bind(null,se,!1,i.queue),i=Rt(),s={state:e,dispatch:null,action:t,pending:null},i.queue=s,n=fx.bind(null,se,s,r,n),s.dispatch=n,i.memoizedState=t,[e,n,!1]}function zv(t){var e=Ge();return Bv(e,ve,t)}function Bv(t,e,n){e=rm(t,e,Lv)[0],t=Wl(Wn)[0],e=typeof e=="object"&&e!==null&&typeof e.then=="function"?Ho(e):e;var i=Ge(),s=i.queue,r=s.dispatch;return n!==i.memoizedState&&(se.flags|=2048,Lr(9,mx.bind(null,s,n),{destroy:void 0},null)),[e,r,t]}function mx(t,e){t.action=e}function qv(t){var e=Ge(),n=ve;if(n!==null)return Bv(e,n,t);Ge(),e=e.memoizedState,n=Ge();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function Lr(t,e,n,i){return t={tag:t,create:e,inst:n,deps:i,next:null},e=se.updateQueue,e===null&&(e=yc(),se.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function Hv(){return Ge().memoizedState}function Zl(t,e,n,i){var s=Rt();se.flags|=t,s.memoizedState=Lr(1|e,n,{destroy:void 0},i===void 0?null:i)}function vc(t,e,n,i){var s=Ge();i=i===void 0?null:i;var r=s.memoizedState.inst;ve!==null&&i!==null&&Jf(i,ve.memoizedState.deps)?s.memoizedState=Lr(e,n,r,i):(se.flags|=t,s.memoizedState=Lr(1|e,n,r,i))}function ly(t,e){Zl(8390656,8,t,e)}function am(t,e){vc(2048,8,t,e)}function Fv(t,e){return vc(4,2,t,e)}function Gv(t,e){return vc(4,4,t,e)}function Kv(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qv(t,e,n){n=n!=null?n.concat([t]):null,vc(4,4,Kv.bind(null,e,t),n)}function om(){}function Yv(t,e){var n=Ge();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Jf(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function $v(t,e){var n=Ge();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Jf(e,i[1]))return i[0];if(i=t(),Ns){Ii(!0);try{t()}finally{Ii(!1)}}return n.memoizedState=[i,e],i}function lm(t,e,n){return n===void 0||Ki&1073741824?t.memoizedState=e:(t.memoizedState=n,t=PE(),se.lanes|=t,Yi|=t,n)}function Xv(t,e,n,i){return Ft(n,e)?n:jr.current!==null?(t=lm(t,n,i),Ft(t,e)||(nt=!0),t):Ki&42?(t=PE(),se.lanes|=t,Yi|=t,e):(nt=!0,t.memoizedState=n)}function Wv(t,e,n,i,s){var r=xe.p;xe.p=r!==0&&8>r?r:8;var a=ne.T,l={};ne.T=l,cm(t,!1,e,n);try{var u=s(),h=ne.S;if(h!==null&&h(l,u),u!==null&&typeof u=="object"&&typeof u.then=="function"){var m=cx(u,i);Wa(t,e,m,qt(t))}else Wa(t,e,i,qt(t))}catch(g){Wa(t,e,{then:function(){},status:"rejected",reason:g},qt())}finally{xe.p=r,ne.T=a}}function px(){}function Od(t,e,n,i){if(t.tag!==5)throw Error(U(476));var s=Zv(t).queue;Wv(t,s,e,bs,n===null?px:function(){return Jv(t),n(i)})}function Zv(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:bs,baseState:bs,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:bs},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wn,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Jv(t){var e=Zv(t).next.queue;Wa(t,e,{},qt())}function um(){return _t(wo)}function eE(){return Ge().memoizedState}function tE(){return Ge().memoizedState}function gx(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=qt();t=ki(n);var i=Mi(e,t,n);i!==null&&(At(i,e,n),Ja(i,e,n)),e={cache:Wf()},t.payload=e;return}e=e.return}}function yx(t,e,n){var i=qt();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ec(t)?iE(e,n):(n=Qf(t,e,n,i),n!==null&&(At(n,t,i),sE(n,e,i)))}function nE(t,e,n){var i=qt();Wa(t,e,n,i)}function Wa(t,e,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ec(t))iE(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,l=r(a,n);if(s.hasEagerState=!0,s.eagerState=l,Ft(l,a))return gc(t,e,s,0),we===null&&pc(),!1}catch{}finally{}if(n=Qf(t,e,s,i),n!==null)return At(n,t,i),sE(n,e,i),!0}return!1}function cm(t,e,n,i){if(i={lane:2,revertLane:Em(),action:i,hasEagerState:!1,eagerState:null,next:null},Ec(t)){if(e)throw Error(U(479))}else e=Qf(t,n,i,2),e!==null&&At(e,t,2)}function Ec(t){var e=t.alternate;return t===se||e!==null&&e===se}function iE(t,e){xr=Au=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sE(t,e,n){if(n&4194176){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,K_(t,n)}}var bn={readContext:_t,use:_c,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useLayoutEffect:Ue,useInsertionEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useSyncExternalStore:Ue,useId:Ue};bn.useCacheRefresh=Ue;bn.useMemoCache=Ue;bn.useHostTransitionStatus=Ue;bn.useFormState=Ue;bn.useActionState=Ue;bn.useOptimistic=Ue;var qs={readContext:_t,use:_c,useCallback:function(t,e){return Rt().memoizedState=[t,e===void 0?null:e],t},useContext:_t,useEffect:ly,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Zl(4194308,4,Kv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zl(4194308,4,t,e)},useInsertionEffect:function(t,e){Zl(4,2,t,e)},useMemo:function(t,e){var n=Rt();e=e===void 0?null:e;var i=t();if(Ns){Ii(!0);try{t()}finally{Ii(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Rt();if(n!==void 0){var s=n(e);if(Ns){Ii(!0);try{n(e)}finally{Ii(!1)}}}else s=e;return i.memoizedState=i.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=yx.bind(null,se,t),[i.memoizedState,t]},useRef:function(t){var e=Rt();return t={current:t},e.memoizedState=t},useState:function(t){t=Nd(t);var e=t.queue,n=nE.bind(null,se,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:om,useDeferredValue:function(t,e){var n=Rt();return lm(n,t,e)},useTransition:function(){var t=Nd(!1);return t=Wv.bind(null,se,t.queue,!0,!1),Rt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=se,s=Rt();if(fe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),we===null)throw Error(U(349));he&60||Nv(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,ly(Ov.bind(null,i,r,t),[t]),i.flags|=2048,Lr(9,Dv.bind(null,i,r,n,e),{destroy:void 0},null),n},useId:function(){var t=Rt(),e=we.identifierPrefix;if(fe){var n=Bn,i=zn;n=(i&~(1<<32-Bt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=xu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},useCacheRefresh:function(){return Rt().memoizedState=gx.bind(null,se)}};qs.useMemoCache=sm;qs.useHostTransitionStatus=um;qs.useFormState=Uv;qs.useActionState=Uv;qs.useOptimistic=function(t){var e=Rt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=cm.bind(null,se,!0,n),n.dispatch=e,[t,e]};var is={readContext:_t,use:_c,useCallback:Yv,useContext:_t,useEffect:am,useImperativeHandle:Qv,useInsertionEffect:Fv,useLayoutEffect:Gv,useMemo:$v,useReducer:Wl,useRef:Hv,useState:function(){return Wl(Wn)},useDebugValue:om,useDeferredValue:function(t,e){var n=Ge();return Xv(n,ve.memoizedState,t,e)},useTransition:function(){var t=Wl(Wn)[0],e=Ge().memoizedState;return[typeof t=="boolean"?t:Ho(t),e]},useSyncExternalStore:Iv,useId:eE};is.useCacheRefresh=tE;is.useMemoCache=sm;is.useHostTransitionStatus=um;is.useFormState=zv;is.useActionState=zv;is.useOptimistic=function(t,e){var n=Ge();return Vv(n,ve,t,e)};var Hs={readContext:_t,use:_c,useCallback:Yv,useContext:_t,useEffect:am,useImperativeHandle:Qv,useInsertionEffect:Fv,useLayoutEffect:Gv,useMemo:$v,useReducer:Oh,useRef:Hv,useState:function(){return Oh(Wn)},useDebugValue:om,useDeferredValue:function(t,e){var n=Ge();return ve===null?lm(n,t,e):Xv(n,ve.memoizedState,t,e)},useTransition:function(){var t=Oh(Wn)[0],e=Ge().memoizedState;return[typeof t=="boolean"?t:Ho(t),e]},useSyncExternalStore:Iv,useId:eE};Hs.useCacheRefresh=tE;Hs.useMemoCache=sm;Hs.useHostTransitionStatus=um;Hs.useFormState=qv;Hs.useActionState=qv;Hs.useOptimistic=function(t,e){var n=Ge();return ve!==null?Vv(n,ve,t,e):(n.baseState=t,[t,n.queue.dispatch])};function kh(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kd={isMounted:function(t){return(t=t._reactInternals)?Wr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=qt(),s=ki(i);s.payload=e,n!=null&&(s.callback=n),e=Mi(t,s,i),e!==null&&(At(e,t,i),Ja(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=qt(),s=ki(i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Mi(t,s,i),e!==null&&(At(e,t,i),Ja(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),i=ki(n);i.tag=2,e!=null&&(i.callback=e),e=Mi(t,i,n),e!==null&&(At(e,t,n),Ja(e,t,n))}};function uy(t,e,n,i,s,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,a):e.prototype&&e.prototype.isPureReactComponent?!go(n,i)||!go(s,r):!0}function cy(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&kd.enqueueReplaceState(e,e.state,null)}function Ds(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=Re({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}var Ru=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function rE(t){Ru(t)}function aE(t){console.error(t)}function oE(t){Ru(t)}function Cu(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function hy(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function Md(t,e,n){return n=ki(n),n.tag=3,n.payload={element:null},n.callback=function(){Cu(t,e)},n}function lE(t){return t=ki(t),t.tag=3,t}function uE(t,e,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;t.payload=function(){return s(r)},t.callback=function(){hy(e,n,i)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){hy(e,n,i),typeof s!="function"&&(ji===null?ji=new Set([this]):ji.add(this));var l=i.stack;this.componentDidCatch(i.value,{componentStack:l!==null?l:""})})}function _x(t,e,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Fo(e,n,s,!0),n=tn.current,n!==null){switch(n.tag){case 13:return yn===null?$d():n.alternate===null&&Pe===0&&(Pe=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===Rd?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),Kh(t,i,s)),!1;case 22:return n.flags|=65536,i===Rd?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),Kh(t,i,s)),!1}throw Error(U(435,n.tag))}return Kh(t,i,s),$d(),!1}if(fe)return e=tn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,i!==xd&&(t=Error(U(422),{cause:i}),yo(Zt(t,n)))):(i!==xd&&(e=Error(U(423),{cause:i}),yo(Zt(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,i=Zt(i,n),s=Md(t.stateNode,i,s),Uh(t,s),Pe!==4&&(Pe=2)),!1;var r=Error(U(520),{cause:i});if(r=Zt(r,n),io===null?io=[r]:io.push(r),Pe!==4&&(Pe=2),e===null)return!0;i=Zt(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=Md(n.stateNode,i,t),Uh(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(ji===null||!ji.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=lE(s),uE(s,t,n,i),Uh(n,s),!1}n=n.return}while(n!==null);return!1}var cE=Error(U(461)),nt=!1;function rt(t,e,n,i){e.child=t===null?Sv(e,null,n,i):Is(e,t.child,n,i)}function dy(t,e,n,i,s){n=n.render;var r=e.ref;if("ref"in i){var a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}else a=i;return Os(e),i=em(t,e,n,a,r,s),l=tm(),t!==null&&!nt?(nm(t,e,s),Zn(t,e,s)):(fe&&l&&Yf(e),e.flags|=1,rt(t,e,i,s),e.child)}function fy(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!pm(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,hE(t,e,r,i,s)):(t=eu(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!hm(t,s)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:go,n(a,i)&&t.ref===e.ref)return Zn(t,e,s)}return e.flags|=1,t=Vi(r,i),t.ref=e.ref,t.return=e,e.child=t}function hE(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(go(r,i)&&t.ref===e.ref)if(nt=!1,e.pendingProps=i=r,hm(t,s))t.flags&131072&&(nt=!0);else return e.lanes=t.lanes,Zn(t,e,s)}return Vd(t,e,n,i,s)}function dE(t,e,n){var i=e.pendingProps,s=i.children,r=(e.stateNode._pendingVisibility&2)!==0,a=t!==null?t.memoizedState:null;if(Za(t,e),i.mode==="hidden"||r){if(e.flags&128){if(i=a!==null?a.baseLanes|n:n,t!==null){for(s=e.child=t.child,r=0;s!==null;)r=r|s.lanes|s.childLanes,s=s.sibling;e.childLanes=r&~i}else e.childLanes=0,e.child=null;return my(t,e,i,n)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Xl(e,a!==null?a.cachePool:null),a!==null?iy(e,a):Cd(),Av(e);else return e.lanes=e.childLanes=536870912,my(t,e,a!==null?a.baseLanes|n:n,n)}else a!==null?(Xl(e,a.cachePool),iy(e,a),wi(),e.memoizedState=null):(t!==null&&Xl(e,null),Cd(),wi());return rt(t,e,s,n),e.child}function my(t,e,n,i){var s=Zf();return s=s===null?null:{parent:Qe._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&Xl(e,null),Cd(),Av(e),t!==null&&Fo(t,e,i,!0),null}function Za(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=2097664);else{if(typeof n!="function"&&typeof n!="object")throw Error(U(284));(t===null||t.ref!==n)&&(e.flags|=2097664)}}function Vd(t,e,n,i,s){return Os(e),n=em(t,e,n,i,void 0,s),i=tm(),t!==null&&!nt?(nm(t,e,s),Zn(t,e,s)):(fe&&i&&Yf(e),e.flags|=1,rt(t,e,n,s),e.child)}function py(t,e,n,i,s,r){return Os(e),e.updateQueue=null,n=Cv(e,i,n,s),Rv(t),i=tm(),t!==null&&!nt?(nm(t,e,r),Zn(t,e,r)):(fe&&i&&Yf(e),e.flags|=1,rt(t,e,n,r),e.child)}function gy(t,e,n,i,s){if(Os(e),e.stateNode===null){var r=yr,a=n.contextType;typeof a=="object"&&a!==null&&(r=_t(a)),r=new n(i,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=kd,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=i,r.state=e.memoizedState,r.refs={},dm(e),a=n.contextType,r.context=typeof a=="object"&&a!==null?_t(a):yr,r.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(kh(e,n,a,i),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&kd.enqueueReplaceState(r,r.state,null),to(e,i,r,s),eo(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){r=e.stateNode;var l=e.memoizedProps,u=Ds(n,l);r.props=u;var h=r.context,m=n.contextType;a=yr,typeof m=="object"&&m!==null&&(a=_t(m));var g=n.getDerivedStateFromProps;m=typeof g=="function"||typeof r.getSnapshotBeforeUpdate=="function",l=e.pendingProps!==l,m||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(l||h!==a)&&cy(e,r,i,a),Ti=!1;var y=e.memoizedState;r.state=y,to(e,i,r,s),eo(),h=e.memoizedState,l||y!==h||Ti?(typeof g=="function"&&(kh(e,n,g,i),h=e.memoizedState),(u=Ti||uy(e,n,u,i,y,h,a))?(m||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),r.props=i,r.state=h,r.context=a,i=u):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,Bd(t,e),a=e.memoizedProps,m=Ds(n,a),r.props=m,g=e.pendingProps,y=r.context,h=n.contextType,u=yr,typeof h=="object"&&h!==null&&(u=_t(h)),l=n.getDerivedStateFromProps,(h=typeof l=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==g||y!==u)&&cy(e,r,i,u),Ti=!1,y=e.memoizedState,r.state=y,to(e,i,r,s),eo();var _=e.memoizedState;a!==g||y!==_||Ti||t!==null&&t.dependencies!==null&&Iu(t.dependencies)?(typeof l=="function"&&(kh(e,n,l,i),_=e.memoizedState),(m=Ti||uy(e,n,m,i,y,_,u)||t!==null&&t.dependencies!==null&&Iu(t.dependencies))?(h||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,_,u),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,_,u)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),r.props=i,r.state=_,r.context=u,i=m):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),i=!1)}return r=i,Za(t,e),i=(e.flags&128)!==0,r||i?(r=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&i?(e.child=Is(e,t.child,null,s),e.child=Is(e,null,n,s)):rt(t,e,n,s),e.memoizedState=r.state,t=e.child):t=Zn(t,e,s),t}function yy(t,e,n,i){return Bo(),e.flags|=256,rt(t,e,n,i),e.child}var Mh={dehydrated:null,treeContext:null,retryLane:0};function Vh(t){return{baseLanes:t,cachePool:xv()}}function jh(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=en),t}function fE(t,e,n){var i=e.pendingProps,s=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=t!==null&&t.memoizedState===null?!1:(Ye.current&2)!==0),a&&(s=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(fe){if(s?bi(e):wi(),fe){var l=ot,u;if(u=l){e:{for(u=l,l=fn;u.nodeType!==8;){if(!l){l=null;break e}if(u=ln(u.nextSibling),u===null){l=null;break e}}l=u}l!==null?(e.memoizedState={dehydrated:l,treeContext:ws!==null?{id:zn,overflow:Bn}:null,retryLane:536870912},u=Jt(18,null,null,0),u.stateNode=l,u.return=e,e.child=u,wt=e,ot=null,u=!0):u=!1}u||Cs(e)}if(l=e.memoizedState,l!==null&&(l=l.dehydrated,l!==null))return l.data==="$!"?e.lanes=16:e.lanes=536870912,null;qn(e)}return l=i.children,i=i.fallback,s?(wi(),s=e.mode,l=Pd({mode:"hidden",children:l},s),i=As(i,s,n,null),l.return=e,i.return=e,l.sibling=i,e.child=l,s=e.child,s.memoizedState=Vh(n),s.childLanes=jh(t,a,n),e.memoizedState=Mh,i):(bi(e),jd(e,l))}if(u=t.memoizedState,u!==null&&(l=u.dehydrated,l!==null)){if(r)e.flags&256?(bi(e),e.flags&=-257,e=Ph(t,e,n)):e.memoizedState!==null?(wi(),e.child=t.child,e.flags|=128,e=null):(wi(),s=i.fallback,l=e.mode,i=Pd({mode:"visible",children:i.children},l),s=As(s,l,n,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,Is(e,t.child,null,n),i=e.child,i.memoizedState=Vh(n),i.childLanes=jh(t,a,n),e.memoizedState=Mh,e=s);else if(bi(e),l.data==="$!"){if(a=l.nextSibling&&l.nextSibling.dataset,a)var h=a.dgst;a=h,i=Error(U(419)),i.stack="",i.digest=a,yo({value:i,source:null,stack:null}),e=Ph(t,e,n)}else if(nt||Fo(t,e,n,!1),a=(n&t.childLanes)!==0,nt||a){if(a=we,a!==null){if(i=n&-n,i&42)i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(i=i&(a.suspendedLanes|n)?0:i,i!==0&&i!==u.retryLane)throw u.retryLane=i,Gi(t,i),At(a,t,i),cE}l.data==="$?"||$d(),e=Ph(t,e,n)}else l.data==="$?"?(e.flags|=128,e.child=t.child,e=kx.bind(null,t),l._reactRetry=e,e=null):(t=u.treeContext,ot=ln(l.nextSibling),wt=e,fe=!0,on=null,fn=!1,t!==null&&($t[Xt++]=zn,$t[Xt++]=Bn,$t[Xt++]=ws,zn=t.id,Bn=t.overflow,ws=e),e=jd(e,i.children),e.flags|=4096);return e}return s?(wi(),s=i.fallback,l=e.mode,u=t.child,h=u.sibling,i=Vi(u,{mode:"hidden",children:i.children}),i.subtreeFlags=u.subtreeFlags&31457280,h!==null?s=Vi(h,s):(s=As(s,l,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,l=t.child.memoizedState,l===null?l=Vh(n):(u=l.cachePool,u!==null?(h=Qe._currentValue,u=u.parent!==h?{parent:h,pool:h}:u):u=xv(),l={baseLanes:l.baseLanes|n,cachePool:u}),s.memoizedState=l,s.childLanes=jh(t,a,n),e.memoizedState=Mh,i):(bi(e),n=t.child,t=n.sibling,n=Vi(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function jd(t,e){return e=Pd({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Pd(t,e){return VE(t,e,0,null)}function Ph(t,e,n){return Is(e,t.child,null,n),t=jd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _y(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Ud(t.return,e,n)}function Lh(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function mE(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(rt(t,e,i.children,n),i=Ye.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_y(t,n,e);else if(t.tag===19)_y(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}switch(Ie(Ye,i),s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Su(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Lh(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Su(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Lh(e,!0,n,null,r);break;case"together":Lh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yi|=e.lanes,!(n&e.childLanes))if(t!==null){if(Fo(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Vi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hm(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Iu(t)))}function vx(t,e,n){switch(e.tag){case 3:pu(e,e.stateNode.containerInfo),Si(e,Qe,t.memoizedState.cache),Bo();break;case 27:case 5:yd(e);break;case 4:pu(e,e.stateNode.containerInfo);break;case 10:Si(e,e.type,e.memoizedProps.value);break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(bi(e),e.flags|=128,null):n&e.child.childLanes?fE(t,e,n):(bi(e),t=Zn(t,e,n),t!==null?t.sibling:null);bi(e);break;case 19:var s=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Fo(t,e,n,!1),i=(n&e.childLanes)!==0),s){if(i)return mE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Ye,Ye.current),i)break;return null;case 22:case 23:return e.lanes=0,dE(t,e,n);case 24:Si(e,Qe,t.memoizedState.cache)}return Zn(t,e,n)}function pE(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)nt=!0;else{if(!hm(t,n)&&!(e.flags&128))return nt=!1,vx(t,e,n);nt=!!(t.flags&131072)}else nt=!1,fe&&e.flags&1048576&&Ev(e,bu,e.index);switch(e.lanes=0,e.tag){case 16:e:{t=e.pendingProps;var i=e.elementType,s=i._init;if(i=s(i._payload),e.type=i,typeof i=="function")pm(i)?(t=Ds(i,t),e.tag=1,e=gy(null,e,i,t,n)):(e.tag=0,e=Vd(null,e,i,t,n));else{if(i!=null){if(s=i.$$typeof,s===jf){e.tag=11,e=dy(null,e,i,t,n);break e}else if(s===Pf){e.tag=14,e=fy(null,e,i,t,n);break e}}throw e=pd(i)||i,Error(U(306,e,""))}}return e;case 0:return Vd(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,s=Ds(i,e.pendingProps),gy(t,e,i,s,n);case 3:e:{if(pu(e,e.stateNode.containerInfo),t===null)throw Error(U(387));var r=e.pendingProps;s=e.memoizedState,i=s.element,Bd(t,e),to(e,r,null,n);var a=e.memoizedState;if(r=a.cache,Si(e,Qe,r),r!==s.cache&&zd(e,[Qe],n,!0),eo(),r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=yy(t,e,r,n);break e}else if(r!==i){i=Zt(Error(U(424)),e),yo(i),e=yy(t,e,r,n);break e}else for(ot=ln(e.stateNode.containerInfo.firstChild),wt=e,fe=!0,on=null,fn=!0,n=Sv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bo(),r===i){e=Zn(t,e,n);break e}rt(t,e,r,n)}e=e.child}return e;case 26:return Za(t,e),t===null?(n=jy(e.type,null,e.pendingProps,null))?e.memoizedState=n:fe||(n=e.type,t=e.pendingProps,i=ju(Oi.current).createElement(n),i[yt]=e,i[Ot]=t,ut(i,n,t),tt(i),e.stateNode=i):e.memoizedState=jy(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return yd(e),t===null&&fe&&(i=e.stateNode=JE(e.type,e.pendingProps,Oi.current),wt=e,fn=!0,ot=ln(i.firstChild)),i=e.pendingProps.children,t!==null||fe?rt(t,e,i,n):e.child=Is(e,null,i,n),Za(t,e),e.child;case 5:return t===null&&fe&&((s=i=ot)&&(i=$x(i,e.type,e.pendingProps,fn),i!==null?(e.stateNode=i,wt=e,ot=ln(i.firstChild),fn=!1,s=!0):s=!1),s||Cs(e)),yd(e),s=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,i=r.children,ef(s,r)?i=null:a!==null&&ef(s,a)&&(e.flags|=32),e.memoizedState!==null&&(s=em(t,e,dx,null,null,n),wo._currentValue=s),Za(t,e),rt(t,e,i,n),e.child;case 6:return t===null&&fe&&((t=n=ot)&&(n=Xx(n,e.pendingProps,fn),n!==null?(e.stateNode=n,wt=e,ot=null,t=!0):t=!1),t||Cs(e)),null;case 13:return fE(t,e,n);case 4:return pu(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Is(e,null,i,n):rt(t,e,i,n),e.child;case 11:return dy(t,e,e.type,e.pendingProps,n);case 7:return rt(t,e,e.pendingProps,n),e.child;case 8:return rt(t,e,e.pendingProps.children,n),e.child;case 12:return rt(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,Si(e,e.type,i.value),rt(t,e,i.children,n),e.child;case 9:return s=e.type._context,i=e.pendingProps.children,Os(e),s=_t(s),i=i(s),e.flags|=1,rt(t,e,i,n),e.child;case 14:return fy(t,e,e.type,e.pendingProps,n);case 15:return hE(t,e,e.type,e.pendingProps,n);case 19:return mE(t,e,n);case 22:return dE(t,e,n);case 24:return Os(e),i=_t(Qe),t===null?(s=Zf(),s===null&&(s=we,r=Wf(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),e.memoizedState={parent:i,cache:s},dm(e),Si(e,Qe,s)):(t.lanes&n&&(Bd(t,e),to(e,null,null,n),eo()),s=t.memoizedState,r=e.memoizedState,s.parent!==i?(s={parent:i,cache:i},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),Si(e,Qe,i)):(i=r.cache,Si(e,Qe,i),i!==s.cache&&zd(e,[Qe],n,!0))),rt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(U(156,e.tag))}var Ld=xn(null),Fs=null,Hn=null;function Si(t,e,n){Ie(Ld,e._currentValue),e._currentValue=n}function Qn(t){t._currentValue=Ld.current,it(Ld)}function Ud(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function zd(t,e,n,i){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var r=s.dependencies;if(r!==null){var a=s.child;r=r.firstContext;e:for(;r!==null;){var l=r;r=s;for(var u=0;u<e.length;u++)if(l.context===e[u]){r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),Ud(r.return,n,t),i||(a=null);break e}r=l.next}}else if(s.tag===18){if(a=s.return,a===null)throw Error(U(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),Ud(a,n,t),a=null}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}}function Fo(t,e,n,i){t=null;for(var s=e,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var a=s.alternate;if(a===null)throw Error(U(387));if(a=a.memoizedProps,a!==null){var l=s.type;Ft(s.pendingProps.value,a.value)||(t!==null?t.push(l):t=[l])}}else if(s===mu.current){if(a=s.alternate,a===null)throw Error(U(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(wo):t=[wo])}s=s.return}t!==null&&zd(e,t,n,i),e.flags|=262144}function Iu(t){for(t=t.firstContext;t!==null;){if(!Ft(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Os(t){Fs=t,Hn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function _t(t){return gE(Fs,t)}function kl(t,e){return Fs===null&&Os(t),gE(t,e)}function gE(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Hn===null){if(t===null)throw Error(U(308));Hn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Hn=Hn.next=e;return n}var Ti=!1;function dm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ki(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Mi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Oe&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,e=Eu(t),vv(t,null,n),e}return gc(t,i,e,n),Eu(t)}function Ja(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194176)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,K_(t,n)}}function Uh(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var qd=!1;function eo(){if(qd){var t=Ar;if(t!==null)throw t}}function to(t,e,n,i){qd=!1;var s=t.updateQueue;Ti=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,a===null?r=h:a.next=h,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=h:l.next=h,m.lastBaseUpdate=u))}if(r!==null){var g=s.baseState;a=0,m=h=u=null,l=r;do{var y=l.lane&-536870913,_=y!==l.lane;if(_?(he&y)===y:(i&y)===y){y!==0&&y===Pr&&(qd=!0),m!==null&&(m=m.next={lane:0,tag:l.tag,payload:l.payload,callback:null,next:null});e:{var C=t,O=l;y=e;var j=n;switch(O.tag){case 1:if(C=O.payload,typeof C=="function"){g=C.call(j,g,y);break e}g=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=O.payload,y=typeof C=="function"?C.call(j,g,y):C,y==null)break e;g=Re({},g,y);break e;case 2:Ti=!0}}y=l.callback,y!==null&&(t.flags|=64,_&&(t.flags|=8192),_=s.callbacks,_===null?s.callbacks=[y]:_.push(y))}else _={lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(h=m=_,u=g):m=m.next=_,a|=y;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);m===null&&(u=g),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=m,r===null&&(s.shared.lanes=0),Yi|=a,t.lanes=a,t.memoizedState=g}}function yE(t,e){if(typeof t!="function")throw Error(U(191,t));t.call(e)}function _E(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)yE(n[t],e)}function Go(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&t)===t){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(l){Te(e,e.return,l)}}function Qi(t,e,n){try{var i=e.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&t)===t){var a=i.inst,l=a.destroy;if(l!==void 0){a.destroy=void 0,s=e;var u=n;try{l()}catch(h){Te(s,u,h)}}}i=i.next}while(i!==r)}}catch(h){Te(e,e.return,h)}}function vE(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{_E(e,n)}catch(i){Te(t,t.return,i)}}}function EE(t,e,n){n.props=Ds(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){Te(t,e,i)}}function vs(t,e){try{var n=t.ref;if(n!==null){var i=t.stateNode;switch(t.tag){case 26:case 27:case 5:var s=i;break;default:s=i}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(r){Te(t,e,r)}}function Pt(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){Te(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){Te(t,e,s)}else n.current=null}function TE(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){Te(t,t.return,s)}}function vy(t,e,n){try{var i=t.stateNode;Fx(i,t.type,n,e),i[Ot]=e}catch(s){Te(t,t.return,s)}}function bE(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27||t.tag===4}function zh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==27&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hd(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wc));else if(i!==4&&i!==27&&(t=t.child,t!==null))for(Hd(t,e,n),t=t.sibling;t!==null;)Hd(t,e,n),t=t.sibling}function Nu(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&i!==27&&(t=t.child,t!==null))for(Nu(t,e,n),t=t.sibling;t!==null;)Nu(t,e,n),t=t.sibling}var Vn=!1,je=!1,Bh=!1,Ey=typeof WeakSet=="function"?WeakSet:Set,et=null,Ty=!1;function Ex(t,e){if(t=t.containerInfo,Zd=zu,t=dv(t),Gf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,h=0,m=0,g=t,y=null;t:for(;;){for(var _;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==r||i!==0&&g.nodeType!==3||(u=a+i),g.nodeType===3&&(a+=g.nodeValue.length),(_=g.firstChild)!==null;)y=g,g=_;for(;;){if(g===t)break t;if(y===n&&++h===s&&(l=a),y===r&&++m===i&&(u=a),(_=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jd={focusedElem:t,selectionRange:n},zu=!1,et=e;et!==null;)if(e=et,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,et=t;else for(;et!==null;){switch(e=et,r=e.alternate,t=e.flags,e.tag){case 0:break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var C=Ds(n.type,s,n.elementType===n.type);t=i.getSnapshotBeforeUpdate(C,r),i.__reactInternalSnapshotBeforeUpdate=t}catch(O){Te(n,n.return,O)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)tf(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":tf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(U(163))}if(t=e.sibling,t!==null){t.return=e.return,et=t;break}et=e.return}return C=Ty,Ty=!1,C}function wE(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:kn(t,n),i&4&&Go(5,n);break;case 1:if(kn(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(l){Te(n,n.return,l)}else{var s=Ds(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(l){Te(n,n.return,l)}}i&64&&vE(n),i&512&&vs(n,n.return);break;case 3:if(kn(t,n),i&64&&(i=n.updateQueue,i!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{_E(i,t)}catch(l){Te(n,n.return,l)}}break;case 26:kn(t,n),i&512&&vs(n,n.return);break;case 27:case 5:kn(t,n),e===null&&i&4&&TE(n),i&512&&vs(n,n.return);break;case 12:kn(t,n);break;case 13:kn(t,n),i&4&&xE(t,n);break;case 22:if(s=n.memoizedState!==null||Vn,!s){e=e!==null&&e.memoizedState!==null||je;var r=Vn,a=je;Vn=s,(je=e)&&!a?_i(t,n,(n.subtreeFlags&8772)!==0):kn(t,n),Vn=r,je=a}i&512&&(n.memoizedProps.mode==="manual"?vs(n,n.return):Pt(n,n.return));break;default:kn(t,n)}}function SE(t){var e=t.alternate;e!==null&&(t.alternate=null,SE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Uf(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var qe=null,Vt=!1;function On(t,e,n){for(n=n.child;n!==null;)AE(t,e,n),n=n.sibling}function AE(t,e,n){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Po,n)}catch{}switch(n.tag){case 26:je||Pt(n,e),On(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:je||Pt(n,e);var i=qe,s=Vt;for(qe=n.stateNode,On(t,e,n),n=n.stateNode,e=n.attributes;e.length;)n.removeAttributeNode(e[0]);Uf(n),qe=i,Vt=s;break;case 5:je||Pt(n,e);case 6:s=qe;var r=Vt;if(qe=null,On(t,e,n),qe=s,Vt=r,qe!==null)if(Vt)try{t=qe,i=n.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)}catch(a){Te(n,e,a)}else try{qe.removeChild(n.stateNode)}catch(a){Te(n,e,a)}break;case 18:qe!==null&&(Vt?(e=qe,n=n.stateNode,e.nodeType===8?Jh(e.parentNode,n):e.nodeType===1&&Jh(e,n),xo(e)):Jh(qe,n.stateNode));break;case 4:i=qe,s=Vt,qe=n.stateNode.containerInfo,Vt=!0,On(t,e,n),qe=i,Vt=s;break;case 0:case 11:case 14:case 15:je||Qi(2,n,e),je||Qi(4,n,e),On(t,e,n);break;case 1:je||(Pt(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&EE(n,e,i)),On(t,e,n);break;case 21:On(t,e,n);break;case 22:je||Pt(n,e),je=(i=je)||n.memoizedState!==null,On(t,e,n),je=i;break;default:On(t,e,n)}}function xE(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{xo(t)}catch(n){Te(e,e.return,n)}}function Tx(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Ey),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Ey),e;default:throw Error(U(435,t.tag))}}function qh(t,e){var n=Tx(t);e.forEach(function(i){var s=Mx.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}function Gt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 27:case 5:qe=l.stateNode,Vt=!1;break e;case 3:qe=l.stateNode.containerInfo,Vt=!0;break e;case 4:qe=l.stateNode.containerInfo,Vt=!0;break e}l=l.return}if(qe===null)throw Error(U(160));AE(r,a,s),qe=null,Vt=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)RE(e,t),e=e.sibling}var an=null;function RE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Gt(e,t),Kt(t),i&4&&(Qi(3,t,t.return),Go(3,t),Qi(5,t,t.return));break;case 1:Gt(e,t),Kt(t),i&512&&(je||n===null||Pt(n,n.return)),i&64&&Vn&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=an;if(Gt(e,t),Kt(t),i&512&&(je||n===null||Pt(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[fo]||r[yt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),ut(r,i,n),r[yt]=t,tt(r),i=r;break e;case"link":var a=Ly("link","href",s).get(i+(n.href||""));if(a){for(var l=0;l<a.length;l++)if(r=a[l],r.getAttribute("href")===(n.href==null?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(l,1);break t}}r=s.createElement(i),ut(r,i,n),s.head.appendChild(r);break;case"meta":if(a=Ly("meta","content",s).get(i+(n.content||""))){for(l=0;l<a.length;l++)if(r=a[l],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(l,1);break t}}r=s.createElement(i),ut(r,i,n),s.head.appendChild(r);break;default:throw Error(U(468,i))}r[yt]=t,tt(r),i=r}t.stateNode=i}else Uy(s,t.type,t.stateNode);else t.stateNode=Py(s,i,t.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?Uy(s,t.type,t.stateNode):Py(s,i,t.memoizedProps)):i===null&&t.stateNode!==null&&vy(t,t.memoizedProps,n.memoizedProps)}break;case 27:if(i&4&&t.alternate===null){s=t.stateNode,r=t.memoizedProps;try{for(var u=s.firstChild;u;){var h=u.nextSibling,m=u.nodeName;u[fo]||m==="HEAD"||m==="BODY"||m==="SCRIPT"||m==="STYLE"||m==="LINK"&&u.rel.toLowerCase()==="stylesheet"||s.removeChild(u),u=h}for(var g=t.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);ut(s,g,r),s[yt]=t,s[Ot]=r}catch(C){Te(t,t.return,C)}}case 5:if(Gt(e,t),Kt(t),i&512&&(je||n===null||Pt(n,n.return)),t.flags&32){s=t.stateNode;try{Vr(s,"")}catch(C){Te(t,t.return,C)}}i&4&&t.stateNode!=null&&(s=t.memoizedProps,vy(t,s,n!==null?n.memoizedProps:s)),i&1024&&(Bh=!0);break;case 6:if(Gt(e,t),Kt(t),i&4){if(t.stateNode===null)throw Error(U(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(C){Te(t,t.return,C)}}break;case 3:if(nu=null,s=an,an=Pu(e.containerInfo),Gt(e,t),an=s,Kt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{xo(e.containerInfo)}catch(C){Te(t,t.return,C)}Bh&&(Bh=!1,CE(t));break;case 4:i=an,an=Pu(t.stateNode.containerInfo),Gt(e,t),Kt(t),an=i;break;case 12:Gt(e,t),Kt(t);break;case 13:Gt(e,t),Kt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(_m=gn()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,qh(t,i)));break;case 22:if(i&512&&(je||n===null||Pt(n,n.return)),u=t.memoizedState!==null,h=n!==null&&n.memoizedState!==null,m=Vn,g=je,Vn=m||u,je=g||h,Gt(e,t),je=g,Vn=m,Kt(t),e=t.stateNode,e._current=t,e._visibility&=-3,e._visibility|=e._pendingVisibility&2,i&8192&&(e._visibility=u?e._visibility&-2:e._visibility|1,u&&(e=Vn||je,n===null||h||e||ir(t)),t.memoizedProps===null||t.memoizedProps.mode!=="manual"))e:for(n=null,e=t;;){if(e.tag===5||e.tag===26||e.tag===27){if(n===null){h=n=e;try{if(s=h.stateNode,u)r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{a=h.stateNode,l=h.memoizedProps.style;var _=l!=null&&l.hasOwnProperty("display")?l.display:null;a.style.display=_==null||typeof _=="boolean"?"":(""+_).trim()}}catch(C){Te(h,h.return,C)}}}else if(e.tag===6){if(n===null){h=e;try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(C){Te(h,h.return,C)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,qh(t,n))));break;case 19:Gt(e,t),Kt(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,qh(t,i)));break;case 21:break;default:Gt(e,t),Kt(t)}}function Kt(t){var e=t.flags;if(e&2){try{if(t.tag!==27){e:{for(var n=t.return;n!==null;){if(bE(n)){var i=n;break e}n=n.return}throw Error(U(160))}switch(i.tag){case 27:var s=i.stateNode,r=zh(t);Nu(t,r,s);break;case 5:var a=i.stateNode;i.flags&32&&(Vr(a,""),i.flags&=-33);var l=zh(t);Nu(t,l,a);break;case 3:case 4:var u=i.stateNode.containerInfo,h=zh(t);Hd(t,h,u);break;default:throw Error(U(161))}}}catch(m){Te(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CE(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;CE(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function kn(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)wE(t,e.alternate,e),e=e.sibling}function ir(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Qi(4,e,e.return),ir(e);break;case 1:Pt(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&EE(e,e.return,n),ir(e);break;case 26:case 27:case 5:Pt(e,e.return),ir(e);break;case 22:Pt(e,e.return),e.memoizedState===null&&ir(e);break;default:ir(e)}t=t.sibling}}function _i(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,s=t,r=e,a=r.flags;switch(r.tag){case 0:case 11:case 15:_i(s,r,n),Go(4,r);break;case 1:if(_i(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(h){Te(i,i.return,h)}if(i=r,s=i.updateQueue,s!==null){var l=i.stateNode;try{var u=s.shared.hiddenCallbacks;if(u!==null)for(s.shared.hiddenCallbacks=null,s=0;s<u.length;s++)yE(u[s],l)}catch(h){Te(i,i.return,h)}}n&&a&64&&vE(r),vs(r,r.return);break;case 26:case 27:case 5:_i(s,r,n),n&&i===null&&a&4&&TE(r),vs(r,r.return);break;case 12:_i(s,r,n);break;case 13:_i(s,r,n),n&&a&4&&xE(s,r);break;case 22:r.memoizedState===null&&_i(s,r,n),vs(r,r.return);break;default:_i(s,r,n)}e=e.sibling}}function fm(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&qo(n))}function mm(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&qo(t))}function gi(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)IE(t,e,n,i),e=e.sibling}function IE(t,e,n,i){var s=e.flags;switch(e.tag){case 0:case 11:case 15:gi(t,e,n,i),s&2048&&Go(9,e);break;case 3:gi(t,e,n,i),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&qo(t)));break;case 12:if(s&2048){gi(t,e,n,i),t=e.stateNode;try{var r=e.memoizedProps,a=r.id,l=r.onPostCommit;typeof l=="function"&&l(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(u){Te(e,e.return,u)}}else gi(t,e,n,i);break;case 23:break;case 22:r=e.stateNode,e.memoizedState!==null?r._visibility&4?gi(t,e,n,i):no(t,e):r._visibility&4?gi(t,e,n,i):(r._visibility|=4,sr(t,e,n,i,(e.subtreeFlags&10256)!==0)),s&2048&&fm(e.alternate,e);break;case 24:gi(t,e,n,i),s&2048&&mm(e.alternate,e);break;default:gi(t,e,n,i)}}function sr(t,e,n,i,s){for(s=s&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var r=t,a=e,l=n,u=i,h=a.flags;switch(a.tag){case 0:case 11:case 15:sr(r,a,l,u,s),Go(8,a);break;case 23:break;case 22:var m=a.stateNode;a.memoizedState!==null?m._visibility&4?sr(r,a,l,u,s):no(r,a):(m._visibility|=4,sr(r,a,l,u,s)),s&&h&2048&&fm(a.alternate,a);break;case 24:sr(r,a,l,u,s),s&&h&2048&&mm(a.alternate,a);break;default:sr(r,a,l,u,s)}e=e.sibling}}function no(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,s=i.flags;switch(i.tag){case 22:no(n,i),s&2048&&fm(i.alternate,i);break;case 24:no(n,i),s&2048&&mm(i.alternate,i);break;default:no(n,i)}e=e.sibling}}var Pa=8192;function Js(t){if(t.subtreeFlags&Pa)for(t=t.child;t!==null;)NE(t),t=t.sibling}function NE(t){switch(t.tag){case 26:Js(t),t.flags&Pa&&t.memoizedState!==null&&u1(an,t.memoizedState,t.memoizedProps);break;case 5:Js(t);break;case 3:case 4:var e=an;an=Pu(t.stateNode.containerInfo),Js(t),an=e;break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=Pa,Pa=16777216,Js(t),Pa=e):Js(t));break;default:Js(t)}}function DE(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Ia(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];et=i,kE(i,t)}DE(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)OE(t),t=t.sibling}function OE(t){switch(t.tag){case 0:case 11:case 15:Ia(t),t.flags&2048&&Qi(9,t,t.return);break;case 3:Ia(t);break;case 12:Ia(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&4&&(t.return===null||t.return.tag!==13)?(e._visibility&=-5,Jl(t)):Ia(t);break;default:Ia(t)}}function Jl(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];et=i,kE(i,t)}DE(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Qi(8,e,e.return),Jl(e);break;case 22:n=e.stateNode,n._visibility&4&&(n._visibility&=-5,Jl(e));break;default:Jl(e)}t=t.sibling}}function kE(t,e){for(;et!==null;){var n=et;switch(n.tag){case 0:case 11:case 15:Qi(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:qo(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,et=i;else e:for(n=t;et!==null;){i=et;var s=i.sibling,r=i.return;if(SE(i),i===n){et=null;break e}if(s!==null){s.return=r,et=s;break e}et=r}}}function bx(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,n,i){return new bx(t,e,n,i)}function pm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vi(t,e){var n=t.alternate;return n===null?(n=Jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&31457280,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function ME(t,e){t.flags&=31457282;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function eu(t,e,n,i,s,r){var a=0;if(i=t,typeof t=="function")pm(t)&&(a=1);else if(typeof t=="string")a=o1(t,n,pn.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case cr:return As(n.children,s,r,e);case V_:a=8,s|=24;break;case dd:return t=Jt(12,n,e,s|2),t.elementType=dd,t.lanes=r,t;case fd:return t=Jt(13,n,e,s),t.elementType=fd,t.lanes=r,t;case md:return t=Jt(19,n,e,s),t.elementType=md,t.lanes=r,t;case P_:return VE(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case QS:case Un:a=10;break e;case j_:a=9;break e;case jf:a=11;break e;case Pf:a=14;break e;case Ei:a=16,i=null;break e}a=29,n=Error(U(130,t===null?"null":typeof t,"")),i=null}return e=Jt(a,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function As(t,e,n,i){return t=Jt(7,t,i,e),t.lanes=n,t}function VE(t,e,n,i){t=Jt(22,t,i,e),t.elementType=P_,t.lanes=n;var s={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var r=s._current;if(r===null)throw Error(U(456));if(!(s._pendingVisibility&2)){var a=Gi(r,2);a!==null&&(s._pendingVisibility|=2,At(a,r,2))}},attach:function(){var r=s._current;if(r===null)throw Error(U(456));if(s._pendingVisibility&2){var a=Gi(r,2);a!==null&&(s._pendingVisibility&=-3,At(a,r,2))}}};return t.stateNode=s,t}function Hh(t,e,n){return t=Jt(6,t,null,e),t.lanes=n,t}function Fh(t,e,n){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Mn(t){t.flags|=4}function by(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!nT(e)){if(e=tn.current,e!==null&&((he&4194176)===he?yn!==null:(he&62914560)!==he&&!(he&536870912)||e!==yn))throw $a=Rd,Tv;t.flags|=8192}}function Ml(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?F_():536870912,t.lanes|=e,Ur|=e)}function Na(t,e){if(!fe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ne(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&31457280,i|=s.flags&31457280,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function wx(t,e,n){var i=e.pendingProps;switch($f(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(e),null;case 1:return Ne(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Qn(Qe),kr(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ra(e)?Mn(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,on!==null&&(Yd(on),on=null))),Ne(e),null;case 26:return n=e.memoizedState,t===null?(Mn(e),n!==null?(Ne(e),by(e,n)):(Ne(e),e.flags&=-16777217)):n?n!==t.memoizedState?(Mn(e),Ne(e),by(e,n)):(Ne(e),e.flags&=-16777217):(t.memoizedProps!==i&&Mn(e),Ne(e),e.flags&=-16777217),null;case 27:gu(e),n=Oi.current;var s=e.type;if(t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Mn(e);else{if(!i){if(e.stateNode===null)throw Error(U(166));return Ne(e),null}t=pn.current,Ra(e)?Zg(e):(t=JE(s,i,n),e.stateNode=t,Mn(e))}return Ne(e),null;case 5:if(gu(e),n=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&Mn(e);else{if(!i){if(e.stateNode===null)throw Error(U(166));return Ne(e),null}if(t=pn.current,Ra(e))Zg(e);else{switch(s=ju(Oi.current),t){case 1:t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":t=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":t=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?t.multiple=!0:i.size&&(t.size=i.size);break;default:t=typeof i.is=="string"?s.createElement(n,{is:i.is}):s.createElement(n)}}t[yt]=e,t[Ot]=i;e:for(s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}e.stateNode=t;e:switch(ut(t,n,i),n){case"button":case"input":case"select":case"textarea":t=!!i.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Mn(e)}}return Ne(e),e.flags&=-16777217,null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&Mn(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(t=Oi.current,Ra(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,s=wt,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}t[yt]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||XE(t.nodeValue,n)),t||Cs(e)}else t=ju(t).createTextNode(i),t[yt]=e,e.stateNode=t}return Ne(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=Ra(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[yt]=e}else Bo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ne(e),s=!1}else on!==null&&(Yd(on),on=null),s=!0;if(!s)return e.flags&256?(qn(e),e):(qn(e),null)}if(qn(e),e.flags&128)return e.lanes=n,e;if(n=i!==null,t=t!==null&&t.memoizedState!==null,n){i=e.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==t&&n&&(e.child.flags|=8192),Ml(e,e.updateQueue),Ne(e),null;case 4:return kr(),t===null&&Tm(e.stateNode.containerInfo),Ne(e),null;case 10:return Qn(e.type),Ne(e),null;case 19:if(it(Ye),s=e.memoizedState,s===null)return Ne(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)Na(s,!1);else{if(Pe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=Su(t),r!==null){for(e.flags|=128,Na(s,!1),t=r.updateQueue,e.updateQueue=t,Ml(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)ME(n,t),n=n.sibling;return Ie(Ye,Ye.current&1|2),e.child}t=t.sibling}s.tail!==null&&gn()>Du&&(e.flags|=128,i=!0,Na(s,!1),e.lanes=4194304)}else{if(!i)if(t=Su(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Ml(e,t),Na(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!fe)return Ne(e),null}else 2*gn()-s.renderingStartTime>Du&&n!==536870912&&(e.flags|=128,i=!0,Na(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=gn(),e.sibling=null,t=Ye.current,Ie(Ye,i?t&1|2:t&1),e):(Ne(e),null);case 22:case 23:return qn(e),Xf(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Ne(e),e.subtreeFlags&6&&(e.flags|=8192)):Ne(e),n=e.updateQueue,n!==null&&Ml(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&it(Ss),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Qn(Qe),Ne(e),null;case 25:return null}throw Error(U(156,e.tag))}function Sx(t,e){switch($f(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qn(Qe),kr(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return gu(e),null;case 13:if(qn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Bo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(Ye),null;case 4:return kr(),null;case 10:return Qn(e.type),null;case 22:case 23:return qn(e),Xf(),t!==null&&it(Ss),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Qn(Qe),null;case 25:return null;default:return null}}function jE(t,e){switch($f(e),e.tag){case 3:Qn(Qe),kr();break;case 26:case 27:case 5:gu(e);break;case 4:kr();break;case 13:qn(e);break;case 19:it(Ye);break;case 10:Qn(e.type);break;case 22:case 23:qn(e),Xf(),t!==null&&it(Ss);break;case 24:Qn(Qe)}}var Ax={getCacheForType:function(t){var e=_t(Qe),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n}},xx=typeof WeakMap=="function"?WeakMap:Map,Oe=0,we=null,re=null,he=0,be=0,jt=null,jn=!1,ea=!1,gm=!1,Jn=0,Pe=0,Yi=0,xs=0,ym=0,en=0,Ur=0,io=null,mn=null,Fd=!1,_m=0,Du=1/0,Ou=null,ji=null,Vl=!1,ys=null,so=0,Gd=0,Kd=null,ro=0,Qd=null;function qt(){if(Oe&2&&he!==0)return he&-he;if(ne.T!==null){var t=Pr;return t!==0?t:Em()}return Y_()}function PE(){en===0&&(en=!(he&536870912)||fe?H_():536870912);var t=tn.current;return t!==null&&(t.flags|=32),en}function At(t,e,n){(t===we&&be===2||t.cancelPendingCommit!==null)&&(zr(t,0),Pn(t,he,en,!1)),Uo(t,n),(!(Oe&2)||t!==we)&&(t===we&&(!(Oe&2)&&(xs|=n),Pe===4&&Pn(t,he,en,!1)),Rn(t))}function LE(t,e,n){if(Oe&6)throw Error(U(327));var i=!n&&(e&60)===0&&(e&t.expiredLanes)===0||Lo(t,e),s=i?Ix(t,e):Gh(t,e,!0),r=i;do{if(s===0){ea&&!i&&Pn(t,e,0,!1);break}else if(s===6)Pn(t,e,0,!jn);else{if(n=t.current.alternate,r&&!Rx(n)){s=Gh(t,e,!1),r=!1;continue}if(s===2){if(r=e,t.errorRecoveryDisabledLanes&r)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var l=t;s=io;var u=l.current.memoizedState.isDehydrated;if(u&&(zr(l,a).flags|=256),a=Gh(l,a,!1),a!==2){if(gm&&!u){l.errorRecoveryDisabledLanes|=r,xs|=r,s=4;break e}r=mn,mn=s,r!==null&&Yd(r)}s=a}if(r=!1,s!==2)continue}}if(s===1){zr(t,0),Pn(t,e,0,!0);break}e:{switch(i=t,s){case 0:case 1:throw Error(U(345));case 4:if((e&4194176)===e){Pn(i,e,en,!jn);break e}break;case 2:mn=null;break;case 3:case 5:break;default:throw Error(U(329))}if(i.finishedWork=n,i.finishedLanes=e,(e&62914560)===e&&(r=_m+300-gn(),10<r)){if(Pn(i,e,en,!jn),hc(i,0)!==0)break e;i.timeoutHandle=ZE(wy.bind(null,i,n,mn,Ou,Fd,e,en,xs,Ur,jn,2,-0,0),r);break e}wy(i,n,mn,Ou,Fd,e,en,xs,Ur,jn,0,-0,0)}}break}while(!0);Rn(t)}function Yd(t){mn===null?mn=t:mn.push.apply(mn,t)}function wy(t,e,n,i,s,r,a,l,u,h,m,g,y){var _=e.subtreeFlags;if((_&8192||(_&16785408)===16785408)&&(bo={stylesheets:null,count:0,unsuspend:l1},NE(e),e=c1(),e!==null)){t.cancelPendingCommit=e(Ay.bind(null,t,n,i,s,a,l,u,1,g,y)),Pn(t,r,a,!h);return}Ay(t,n,i,s,a,l,u,m,g,y)}function Rx(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!Ft(r(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pn(t,e,n,i){e&=~ym,e&=~xs,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var s=e;0<s;){var r=31-Bt(s),a=1<<r;i[r]=-1,s&=~a}n!==0&&G_(t,n,e)}function Tc(){return Oe&6?!0:(Ko(0),!1)}function vm(){if(re!==null){if(be===0)var t=re.return;else t=re,Hn=Fs=null,im(t),Sr=null,_o=0,t=re;for(;t!==null;)jE(t.alternate,t),t=t.return;re=null}}function zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Kx(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),vm(),we=t,re=n=Vi(t.current,null),he=e,be=0,jt=null,jn=!1,ea=Lo(t,e),gm=!1,Ur=en=ym=xs=Yi=Pe=0,mn=io=null,Fd=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var s=31-Bt(i),r=1<<s;e|=t[s],i&=~r}return Jn=e,pc(),n}function UE(t,e){se=null,ne.H=bn,e===Ya?(e=ty(),be=3):e===Tv?(e=ty(),be=4):be=e===cE?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,jt=e,re===null&&(Pe=1,Cu(t,Zt(e,t.current)))}function zE(){var t=ne.H;return ne.H=bn,t===null?bn:t}function BE(){var t=ne.A;return ne.A=Ax,t}function $d(){Pe=4,jn||(he&4194176)!==he&&tn.current!==null||(ea=!0),!(Yi&134217727)&&!(xs&134217727)||we===null||Pn(we,he,en,!1)}function Gh(t,e,n){var i=Oe;Oe|=2;var s=zE(),r=BE();(we!==t||he!==e)&&(Ou=null,zr(t,e)),e=!1;var a=Pe;e:do try{if(be!==0&&re!==null){var l=re,u=jt;switch(be){case 8:vm(),a=6;break e;case 3:case 2:case 6:tn.current===null&&(e=!0);var h=be;if(be=0,jt=null,Er(t,l,u,h),n&&ea){a=0;break e}break;default:h=be,be=0,jt=null,Er(t,l,u,h)}}Cx(),a=Pe;break}catch(m){UE(t,m)}while(!0);return e&&t.shellSuspendCounter++,Hn=Fs=null,Oe=i,ne.H=s,ne.A=r,re===null&&(we=null,he=0,pc()),a}function Cx(){for(;re!==null;)qE(re)}function Ix(t,e){var n=Oe;Oe|=2;var i=zE(),s=BE();we!==t||he!==e?(Ou=null,Du=gn()+500,zr(t,e)):ea=Lo(t,e);e:do try{if(be!==0&&re!==null){e=re;var r=jt;t:switch(be){case 1:be=0,jt=null,Er(t,e,r,1);break;case 2:if(ey(r)){be=0,jt=null,Sy(e);break}e=function(){be===2&&we===t&&(be=7),Rn(t)},r.then(e,e);break e;case 3:be=7;break e;case 4:be=5;break e;case 7:ey(r)?(be=0,jt=null,Sy(e)):(be=0,jt=null,Er(t,e,r,7));break;case 5:var a=null;switch(re.tag){case 26:a=re.memoizedState;case 5:case 27:var l=re;if(!a||nT(a)){be=0,jt=null;var u=l.sibling;if(u!==null)re=u;else{var h=l.return;h!==null?(re=h,bc(h)):re=null}break t}}be=0,jt=null,Er(t,e,r,5);break;case 6:be=0,jt=null,Er(t,e,r,6);break;case 8:vm(),Pe=6;break e;default:throw Error(U(462))}}Nx();break}catch(m){UE(t,m)}while(!0);return Hn=Fs=null,ne.H=i,ne.A=s,Oe=n,re!==null?0:(we=null,he=0,pc(),Pe)}function Nx(){for(;re!==null&&!ZS();)qE(re)}function qE(t){var e=pE(t.alternate,t,Jn);t.memoizedProps=t.pendingProps,e===null?bc(t):re=e}function Sy(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=py(n,e,e.pendingProps,e.type,void 0,he);break;case 11:e=py(n,e,e.pendingProps,e.type.render,e.ref,he);break;case 5:im(e);default:jE(n,e),e=re=ME(e,Jn),e=pE(n,e,Jn)}t.memoizedProps=t.pendingProps,e===null?bc(t):re=e}function Er(t,e,n,i){Hn=Fs=null,im(e),Sr=null,_o=0;var s=e.return;try{if(_x(t,s,e,n,he)){Pe=1,Cu(t,Zt(n,t.current)),re=null;return}}catch(r){if(s!==null)throw re=s,r;Pe=1,Cu(t,Zt(n,t.current)),re=null;return}e.flags&32768?(fe||i===1?t=!0:ea||he&536870912?t=!1:(jn=t=!0,(i===2||i===3||i===6)&&(i=tn.current,i!==null&&i.tag===13&&(i.flags|=16384))),HE(e,t)):bc(e)}function bc(t){var e=t;do{if(e.flags&32768){HE(e,jn);return}t=e.return;var n=wx(e.alternate,e,Jn);if(n!==null){re=n;return}if(e=e.sibling,e!==null){re=e;return}re=e=t}while(e!==null);Pe===0&&(Pe=5)}function HE(t,e){do{var n=Sx(t.alternate,t);if(n!==null){n.flags&=32767,re=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){re=t;return}re=t=n}while(t!==null);Pe=6,re=null}function Ay(t,e,n,i,s,r,a,l,u,h){var m=ne.T,g=xe.p;try{xe.p=2,ne.T=null,Dx(t,e,n,i,g,s,r,a,l,u,h)}finally{ne.T=m,xe.p=g}}function Dx(t,e,n,i,s,r,a,l){do Cr();while(ys!==null);if(Oe&6)throw Error(U(327));var u=t.finishedWork;if(i=t.finishedLanes,u===null)return null;if(t.finishedWork=null,t.finishedLanes=0,u===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0,t.cancelPendingCommit=null;var h=u.lanes|u.childLanes;if(h|=Kf,uA(t,i,h,r,a,l),t===we&&(re=we=null,he=0),!(u.subtreeFlags&10256)&&!(u.flags&10256)||Vl||(Vl=!0,Gd=h,Kd=n,Vx(yu,function(){return Cr(),null})),n=(u.flags&15990)!==0,u.subtreeFlags&15990||n?(n=ne.T,ne.T=null,r=xe.p,xe.p=2,a=Oe,Oe|=4,Ex(t,u),RE(u,t),tx(Jd,t.containerInfo),zu=!!Zd,Jd=Zd=null,t.current=u,wE(t,u.alternate,u),JS(),Oe=a,xe.p=r,ne.T=n):t.current=u,Vl?(Vl=!1,ys=t,so=i):FE(t,h),h=t.pendingLanes,h===0&&(ji=null),sA(u.stateNode),Rn(t),e!==null)for(s=t.onRecoverableError,u=0;u<e.length;u++)h=e[u],s(h.value,{componentStack:h.stack});return so&3&&Cr(),h=t.pendingLanes,i&4194218&&h&42?t===Qd?ro++:(ro=0,Qd=t):ro=0,Ko(0),null}function FE(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,qo(e)))}function Cr(){if(ys!==null){var t=ys,e=Gd;Gd=0;var n=Q_(so),i=ne.T,s=xe.p;try{if(xe.p=32>n?32:n,ne.T=null,ys===null)var r=!1;else{n=Kd,Kd=null;var a=ys,l=so;if(ys=null,so=0,Oe&6)throw Error(U(331));var u=Oe;if(Oe|=4,OE(a.current),IE(a,a.current,l,n),Oe=u,Ko(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Po,a)}catch{}r=!0}return r}finally{xe.p=s,ne.T=i,FE(t,e)}}return!1}function xy(t,e,n){e=Zt(n,e),e=Md(t.stateNode,e,2),t=Mi(t,e,2),t!==null&&(Uo(t,2),Rn(t))}function Te(t,e,n){if(t.tag===3)xy(t,t,n);else for(;e!==null;){if(e.tag===3){xy(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ji===null||!ji.has(i))){t=Zt(n,t),n=lE(2),i=Mi(e,n,2),i!==null&&(uE(n,i,e,t),Uo(i,2),Rn(i));break}}e=e.return}}function Kh(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new xx;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(gm=!0,s.add(n),t=Ox.bind(null,t,e,n),e.then(t,t))}function Ox(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,we===t&&(he&n)===n&&(Pe===4||Pe===3&&(he&62914560)===he&&300>gn()-_m?!(Oe&2)&&zr(t,0):ym|=n,Ur===he&&(Ur=0)),Rn(t)}function GE(t,e){e===0&&(e=F_()),t=Gi(t,e),t!==null&&(Uo(t,e),Rn(t))}function kx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),GE(t,n)}function Mx(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(U(314))}i!==null&&i.delete(e),GE(t,n)}function Vx(t,e){return Lf(t,e)}var ku=null,rr=null,Xd=!1,Mu=!1,Qh=!1,Rs=0;function Rn(t){t!==rr&&t.next===null&&(rr===null?ku=rr=t:rr=rr.next=t),Mu=!0,Xd||(Xd=!0,Px(jx))}function Ko(t,e){if(!Qh&&Mu){Qh=!0;do for(var n=!1,i=ku;i!==null;){if(t!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var a=i.suspendedLanes,l=i.pingedLanes;r=(1<<31-Bt(42|t)+1)-1,r&=s&~(a&~l),r=r&201326677?r&201326677|1:r?r|2:0}r!==0&&(n=!0,Ry(i,r))}else r=he,r=hc(i,i===we?r:0),!(r&3)||Lo(i,r)||(n=!0,Ry(i,r));i=i.next}while(n);Qh=!1}}function jx(){Mu=Xd=!1;var t=0;Rs!==0&&(Gx()&&(t=Rs),Rs=0);for(var e=gn(),n=null,i=ku;i!==null;){var s=i.next,r=KE(i,e);r===0?(i.next=null,n===null?ku=s:n.next=s,s===null&&(rr=n)):(n=i,(t!==0||r&3)&&(Mu=!0)),i=s}Ko(t)}function KE(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var a=31-Bt(r),l=1<<a,u=s[a];u===-1?(!(l&n)||l&i)&&(s[a]=lA(l,e)):u<=e&&(t.expiredLanes|=l),r&=~l}if(e=we,n=he,n=hc(t,t===e?n:0),i=t.callbackNode,n===0||t===e&&be===2||t.cancelPendingCommit!==null)return i!==null&&i!==null&&wh(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Lo(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&wh(i),Q_(n)){case 2:case 8:n=B_;break;case 32:n=yu;break;case 268435456:n=q_;break;default:n=yu}return i=QE.bind(null,t),n=Lf(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&wh(i),t.callbackPriority=2,t.callbackNode=null,2}function QE(t,e){var n=t.callbackNode;if(Cr()&&t.callbackNode!==n)return null;var i=he;return i=hc(t,t===we?i:0),i===0?null:(LE(t,i,e),KE(t,gn()),t.callbackNode!=null&&t.callbackNode===n?QE.bind(null,t):null)}function Ry(t,e){if(Cr())return null;LE(t,e,!0)}function Px(t){Qx(function(){Oe&6?Lf(z_,t):t()})}function Em(){return Rs===0&&(Rs=H_()),Rs}function Cy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ql(""+t)}function Iy(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function Lx(t,e,n,i,s){if(e==="submit"&&n&&n.stateNode===s){var r=Cy((s[Ot]||null).action),a=i.submitter;a&&(e=(e=a[Ot]||null)?Cy(e.formAction):a.getAttribute("formAction"),e!==null&&(r=e,a=null));var l=new dc("action","action",null,i,s);t.push({event:l,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Rs!==0){var u=a?Iy(s,a):new FormData(s);Od(n,{pending:!0,data:u,method:s.method,action:r},null,u)}}else typeof r=="function"&&(l.preventDefault(),u=a?Iy(s,a):new FormData(s),Od(n,{pending:!0,data:u,method:s.method,action:r},r,u))},currentTarget:s}]})}}for(var Yh=0;Yh<Xg.length;Yh++){var $h=Xg[Yh],Ux=$h.toLowerCase(),zx=$h[0].toUpperCase()+$h.slice(1);hn(Ux,"on"+zx)}hn(mv,"onAnimationEnd");hn(pv,"onAnimationIteration");hn(gv,"onAnimationStart");hn("dblclick","onDoubleClick");hn("focusin","onFocus");hn("focusout","onBlur");hn(ix,"onTransitionRun");hn(sx,"onTransitionStart");hn(rx,"onTransitionCancel");hn(yv,"onTransitionEnd");Mr("onMouseEnter",["mouseout","mouseover"]);Mr("onMouseLeave",["mouseout","mouseover"]);Mr("onPointerEnter",["pointerout","pointerover"]);Mr("onPointerLeave",["pointerout","pointerover"]);Us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Us("onBeforeInput",["compositionend","keypress","textInput","paste"]);Us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eo));function YE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=h;try{r(s)}catch(m){Ru(m)}s.currentTarget=null,r=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,h=l.currentTarget,l=l.listener,u!==r&&s.isPropagationStopped())break e;r=l,s.currentTarget=h;try{r(s)}catch(m){Ru(m)}s.currentTarget=null,r=u}}}}function le(t,e){var n=e[vd];n===void 0&&(n=e[vd]=new Set);var i=t+"__bubble";n.has(i)||($E(e,t,2,!1),n.add(i))}function Xh(t,e,n){var i=0;e&&(i|=4),$E(n,t,i,e)}var jl="_reactListening"+Math.random().toString(36).slice(2);function Tm(t){if(!t[jl]){t[jl]=!0,$_.forEach(function(n){n!=="selectionchange"&&(Bx.has(n)||Xh(n,!1,t),Xh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jl]||(e[jl]=!0,Xh("selectionchange",!1,e))}}function $E(t,e,n,i){switch(oT(e)){case 2:var s=f1;break;case 8:s=m1;break;default:s=Am}n=s.bind(null,e,n,t),s=void 0,!wd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wh(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=_s(l),a===null)return;if(u=a.tag,u===5||u===6||u===26||u===27){i=r=a;continue e}l=l.parentNode}}i=i.return}iv(function(){var h=r,m=Bf(n),g=[];e:{var y=_v.get(t);if(y!==void 0){var _=dc,C=t;switch(t){case"keypress":if($l(n)===0)break e;case"keydown":case"keyup":_=MA;break;case"focusin":C="focus",_=Ch;break;case"focusout":C="blur",_=Ch;break;case"beforeblur":case"afterblur":_=Ch;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=bA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=PA;break;case mv:case pv:case gv:_=AA;break;case yv:_=UA;break;case"scroll":case"scrollend":_=EA;break;case"wheel":_=BA;break;case"copy":case"cut":case"paste":_=RA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=zg;break;case"toggle":case"beforetoggle":_=HA}var O=(e&4)!==0,j=!O&&(t==="scroll"||t==="scrollend"),S=O?y!==null?y+"Capture":null:y;O=[];for(var T=h,b;T!==null;){var I=T;if(b=I.stateNode,I=I.tag,I!==5&&I!==26&&I!==27||b===null||S===null||(I=mo(T,S),I!=null&&O.push(To(T,I,b))),j)break;T=T.return}0<O.length&&(y=new _(y,C,null,n,m),g.push({event:y,listeners:O}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",y&&n!==bd&&(C=n.relatedTarget||n.fromElement)&&(_s(C)||C[Zr]))break e;if((_||y)&&(y=m.window===m?m:(y=m.ownerDocument)?y.defaultView||y.parentWindow:window,_?(C=n.relatedTarget||n.toElement,_=h,C=C?_s(C):null,C!==null&&(j=Wr(C),O=C.tag,C!==j||O!==5&&O!==27&&O!==6)&&(C=null)):(_=null,C=h),_!==C)){if(O=Lg,I="onMouseLeave",S="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(O=zg,I="onPointerLeave",S="onPointerEnter",T="pointer"),j=_==null?y:ja(_),b=C==null?y:ja(C),y=new O(I,T+"leave",_,n,m),y.target=j,y.relatedTarget=b,I=null,_s(m)===h&&(O=new O(S,T+"enter",C,n,m),O.target=b,O.relatedTarget=j,I=O),j=I,_&&C)t:{for(O=_,S=C,T=0,b=O;b;b=er(b))T++;for(b=0,I=S;I;I=er(I))b++;for(;0<T-b;)O=er(O),T--;for(;0<b-T;)S=er(S),b--;for(;T--;){if(O===S||S!==null&&O===S.alternate)break t;O=er(O),S=er(S)}O=null}else O=null;_!==null&&Ny(g,y,_,O,!1),C!==null&&j!==null&&Ny(g,j,C,O,!0)}}e:{if(y=h?ja(h):window,_=y.nodeName&&y.nodeName.toLowerCase(),_==="select"||_==="input"&&y.type==="file")var M=Fg;else if(Hg(y))if(uv)M=JA;else{M=WA;var k=XA}else _=y.nodeName,!_||_.toLowerCase()!=="input"||y.type!=="checkbox"&&y.type!=="radio"?h&&zf(h.elementType)&&(M=Fg):M=ZA;if(M&&(M=M(t,h))){lv(g,M,n,m);break e}k&&k(t,y,h),t==="focusout"&&h&&y.type==="number"&&h.memoizedProps.value!=null&&Td(y,"number",y.value)}switch(k=h?ja(h):window,t){case"focusin":(Hg(k)||k.contentEditable==="true")&&(mr=k,Sd=h,Qa=null);break;case"focusout":Qa=Sd=mr=null;break;case"mousedown":Ad=!0;break;case"contextmenu":case"mouseup":case"dragend":Ad=!1,$g(g,n,m);break;case"selectionchange":if(nx)break;case"keydown":case"keyup":$g(g,n,m)}var w;if(Ff)e:{switch(t){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else fr?av(t,n)&&(p="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(p="onCompositionStart");p&&(rv&&n.locale!=="ko"&&(fr||p!=="onCompositionStart"?p==="onCompositionEnd"&&fr&&(w=sv()):(Ni=m,qf="value"in Ni?Ni.value:Ni.textContent,fr=!0)),k=Vu(h,p),0<k.length&&(p=new Ug(p,t,null,n,m),g.push({event:p,listeners:k}),w?p.data=w:(w=ov(n),w!==null&&(p.data=w)))),(w=GA?KA(t,n):QA(t,n))&&(p=Vu(h,"onBeforeInput"),0<p.length&&(k=new Ug("onBeforeInput","beforeinput",null,n,m),g.push({event:k,listeners:p}),k.data=w)),Lx(g,t,h,n,m)}YE(g,e)})}function To(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vu(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=mo(t,n),s!=null&&i.unshift(To(t,s,r)),s=mo(t,e),s!=null&&i.push(To(t,s,r))),t=t.return}return i}function er(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ny(t,e,n,i,s){for(var r=e._reactName,a=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(l=l.tag,u!==null&&u===i)break;l!==5&&l!==26&&l!==27||h===null||(u=h,s?(h=mo(n,r),h!=null&&a.unshift(To(n,h,u))):s||(h=mo(n,r),h!=null&&a.push(To(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var qx=/\r\n?/g,Hx=/\u0000|\uFFFD/g;function Dy(t){return(typeof t=="string"?t:""+t).replace(qx,`
`).replace(Hx,"")}function XE(t,e){return e=Dy(e),Dy(t)===e}function wc(){}function _e(t,e,n,i,s,r){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Vr(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Vr(t,""+i);break;case"className":Cl(t,"class",i);break;case"tabIndex":Cl(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Cl(t,n,i);break;case"style":nv(t,i,r);break;case"data":if(e!=="object"){Cl(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Ql(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&_e(t,e,"name",s.name,s,null),_e(t,e,"formEncType",s.formEncType,s,null),_e(t,e,"formMethod",s.formMethod,s,null),_e(t,e,"formTarget",s.formTarget,s,null)):(_e(t,e,"encType",s.encType,s,null),_e(t,e,"method",s.method,s,null),_e(t,e,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=Ql(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=wc);break;case"onScroll":i!=null&&le("scroll",t);break;case"onScrollEnd":i!=null&&le("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=Ql(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":le("beforetoggle",t),le("toggle",t),Kl(t,"popover",i);break;case"xlinkActuate":Dn(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Dn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Dn(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Dn(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Dn(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Dn(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Dn(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Dn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Dn(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Kl(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=_A.get(n)||n,Kl(t,n,i))}}function Wd(t,e,n,i,s,r){switch(n){case"style":nv(t,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(U(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(U(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Vr(t,i):(typeof i=="number"||typeof i=="bigint")&&Vr(t,""+i);break;case"onScroll":i!=null&&le("scroll",t);break;case"onScrollEnd":i!=null&&le("scrollend",t);break;case"onClick":i!=null&&(t.onclick=wc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!X_.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),r=t[Ot]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,s);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Kl(t,n,i)}}}function ut(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":le("error",t),le("load",t);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(U(137,e));default:_e(t,e,r,a,n,null)}}s&&_e(t,e,"srcSet",n.srcSet,n,null),i&&_e(t,e,"src",n.src,n,null);return;case"input":le("invalid",t);var l=r=a=s=null,u=null,h=null;for(i in n)if(n.hasOwnProperty(i)){var m=n[i];if(m!=null)switch(i){case"name":s=m;break;case"type":a=m;break;case"checked":u=m;break;case"defaultChecked":h=m;break;case"value":r=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(U(137,e));break;default:_e(t,e,i,m,n,null)}}J_(t,r,l,u,h,a,s,!1),_u(t);return;case"select":le("invalid",t),i=a=r=null;for(s in n)if(n.hasOwnProperty(s)&&(l=n[s],l!=null))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:_e(t,e,s,l,n,null)}e=r,n=a,t.multiple=!!i,e!=null?br(t,!!i,e,!1):n!=null&&br(t,!!i,n,!0);return;case"textarea":le("invalid",t),r=s=i=null;for(a in n)if(n.hasOwnProperty(a)&&(l=n[a],l!=null))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(U(91));break;default:_e(t,e,a,l,n,null)}tv(t,i,s,r),_u(t);return;case"option":for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],i!=null))switch(u){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:_e(t,e,u,i,n,null)}return;case"dialog":le("cancel",t),le("close",t);break;case"iframe":case"object":le("load",t);break;case"video":case"audio":for(i=0;i<Eo.length;i++)le(Eo[i],t);break;case"image":le("error",t),le("load",t);break;case"details":le("toggle",t);break;case"embed":case"source":case"link":le("error",t),le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&(i=n[h],i!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(U(137,e));default:_e(t,e,h,i,n,null)}return;default:if(zf(e)){for(m in n)n.hasOwnProperty(m)&&(i=n[m],i!==void 0&&Wd(t,e,m,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(i=n[l],i!=null&&_e(t,e,l,i,n,null))}function Fx(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,u=null,h=null,m=null;for(_ in n){var g=n[_];if(n.hasOwnProperty(_)&&g!=null)switch(_){case"checked":break;case"value":break;case"defaultValue":u=g;default:i.hasOwnProperty(_)||_e(t,e,_,null,i,g)}}for(var y in i){var _=i[y];if(g=n[y],i.hasOwnProperty(y)&&(_!=null||g!=null))switch(y){case"type":r=_;break;case"name":s=_;break;case"checked":h=_;break;case"defaultChecked":m=_;break;case"value":a=_;break;case"defaultValue":l=_;break;case"children":case"dangerouslySetInnerHTML":if(_!=null)throw Error(U(137,e));break;default:_!==g&&_e(t,e,y,_,i,g)}}Ed(t,a,l,u,h,m,r,s);return;case"select":_=a=l=y=null;for(r in n)if(u=n[r],n.hasOwnProperty(r)&&u!=null)switch(r){case"value":break;case"multiple":_=u;default:i.hasOwnProperty(r)||_e(t,e,r,null,i,u)}for(s in i)if(r=i[s],u=n[s],i.hasOwnProperty(s)&&(r!=null||u!=null))switch(s){case"value":y=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==u&&_e(t,e,s,r,i,u)}e=l,n=a,i=_,y!=null?br(t,!!n,y,!1):!!i!=!!n&&(e!=null?br(t,!!n,e,!0):br(t,!!n,n?[]:"",!1));return;case"textarea":_=y=null;for(l in n)if(s=n[l],n.hasOwnProperty(l)&&s!=null&&!i.hasOwnProperty(l))switch(l){case"value":break;case"children":break;default:_e(t,e,l,null,i,s)}for(a in i)if(s=i[a],r=n[a],i.hasOwnProperty(a)&&(s!=null||r!=null))switch(a){case"value":y=s;break;case"defaultValue":_=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(U(91));break;default:s!==r&&_e(t,e,a,s,i,r)}ev(t,y,_);return;case"option":for(var C in n)if(y=n[C],n.hasOwnProperty(C)&&y!=null&&!i.hasOwnProperty(C))switch(C){case"selected":t.selected=!1;break;default:_e(t,e,C,null,i,y)}for(u in i)if(y=i[u],_=n[u],i.hasOwnProperty(u)&&y!==_&&(y!=null||_!=null))switch(u){case"selected":t.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:_e(t,e,u,y,i,_)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var O in n)y=n[O],n.hasOwnProperty(O)&&y!=null&&!i.hasOwnProperty(O)&&_e(t,e,O,null,i,y);for(h in i)if(y=i[h],_=n[h],i.hasOwnProperty(h)&&y!==_&&(y!=null||_!=null))switch(h){case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(U(137,e));break;default:_e(t,e,h,y,i,_)}return;default:if(zf(e)){for(var j in n)y=n[j],n.hasOwnProperty(j)&&y!==void 0&&!i.hasOwnProperty(j)&&Wd(t,e,j,void 0,i,y);for(m in i)y=i[m],_=n[m],!i.hasOwnProperty(m)||y===_||y===void 0&&_===void 0||Wd(t,e,m,y,i,_);return}}for(var S in n)y=n[S],n.hasOwnProperty(S)&&y!=null&&!i.hasOwnProperty(S)&&_e(t,e,S,null,i,y);for(g in i)y=i[g],_=n[g],!i.hasOwnProperty(g)||y===_||y==null&&_==null||_e(t,e,g,y,i,_)}var Zd=null,Jd=null;function ju(t){return t.nodeType===9?t:t.ownerDocument}function Oy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function WE(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function ef(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zh=null;function Gx(){var t=window.event;return t&&t.type==="popstate"?t===Zh?!1:(Zh=t,!0):(Zh=null,!1)}var ZE=typeof setTimeout=="function"?setTimeout:void 0,Kx=typeof clearTimeout=="function"?clearTimeout:void 0,ky=typeof Promise=="function"?Promise:void 0,Qx=typeof queueMicrotask=="function"?queueMicrotask:typeof ky<"u"?function(t){return ky.resolve(null).then(t).catch(Yx)}:ZE;function Yx(t){setTimeout(function(){throw t})}function Jh(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),xo(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);xo(e)}function tf(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":tf(n),Uf(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function $x(t,e,n,i){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[fo])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==s.rel||t.getAttribute("href")!==(s.href==null?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=ln(t.nextSibling),t===null)break}return null}function Xx(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=ln(t.nextSibling),t===null))return null;return t}function ln(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="F!"||e==="F")break;if(e==="/$")return null}}return t}function My(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}function JE(t,e,n){switch(e=ju(n),t){case"html":if(t=e.documentElement,!t)throw Error(U(452));return t;case"head":if(t=e.head,!t)throw Error(U(453));return t;case"body":if(t=e.body,!t)throw Error(U(454));return t;default:throw Error(U(451))}}var nn=new Map,Vy=new Set;function Pu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.ownerDocument}var ri=xe.d;xe.d={f:Wx,r:Zx,D:Jx,C:e1,L:t1,m:n1,X:s1,S:i1,M:r1};function Wx(){var t=ri.f(),e=Tc();return t||e}function Zx(t){var e=Jr(t);e!==null&&e.tag===5&&e.type==="form"?Jv(e):ri.r(t)}var ta=typeof document>"u"?null:document;function eT(t,e,n){var i=ta;if(i&&typeof e=="string"&&e){var s=Wt(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),Vy.has(s)||(Vy.add(s),t={rel:t,crossOrigin:n,href:e},i.querySelector(s)===null&&(e=i.createElement("link"),ut(e,"link",t),tt(e),i.head.appendChild(e)))}}function Jx(t){ri.D(t),eT("dns-prefetch",t,null)}function e1(t,e){ri.C(t,e),eT("preconnect",t,e)}function t1(t,e,n){ri.L(t,e,n);var i=ta;if(i&&t&&e){var s='link[rel="preload"][as="'+Wt(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+Wt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+Wt(n.imageSizes)+'"]')):s+='[href="'+Wt(t)+'"]';var r=s;switch(e){case"style":r=Br(t);break;case"script":r=na(t)}nn.has(r)||(t=Re({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),nn.set(r,t),i.querySelector(s)!==null||e==="style"&&i.querySelector(Qo(r))||e==="script"&&i.querySelector(Yo(r))||(e=i.createElement("link"),ut(e,"link",t),tt(e),i.head.appendChild(e)))}}function n1(t,e){ri.m(t,e);var n=ta;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+Wt(i)+'"][href="'+Wt(t)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=na(t)}if(!nn.has(r)&&(t=Re({rel:"modulepreload",href:t},e),nn.set(r,t),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Yo(r)))return}i=n.createElement("link"),ut(i,"link",t),tt(i),n.head.appendChild(i)}}}function i1(t,e,n){ri.S(t,e,n);var i=ta;if(i&&t){var s=Tr(i).hoistableStyles,r=Br(t);e=e||"default";var a=s.get(r);if(!a){var l={loading:0,preload:null};if(a=i.querySelector(Qo(r)))l.loading=5;else{t=Re({rel:"stylesheet",href:t,"data-precedence":e},n),(n=nn.get(r))&&bm(t,n);var u=a=i.createElement("link");tt(u),ut(u,"link",t),u._p=new Promise(function(h,m){u.onload=h,u.onerror=m}),u.addEventListener("load",function(){l.loading|=1}),u.addEventListener("error",function(){l.loading|=2}),l.loading|=4,tu(a,e,i)}a={type:"stylesheet",instance:a,count:1,state:l},s.set(r,a)}}}function s1(t,e){ri.X(t,e);var n=ta;if(n&&t){var i=Tr(n).hoistableScripts,s=na(t),r=i.get(s);r||(r=n.querySelector(Yo(s)),r||(t=Re({src:t,async:!0},e),(e=nn.get(s))&&wm(t,e),r=n.createElement("script"),tt(r),ut(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function r1(t,e){ri.M(t,e);var n=ta;if(n&&t){var i=Tr(n).hoistableScripts,s=na(t),r=i.get(s);r||(r=n.querySelector(Yo(s)),r||(t=Re({src:t,async:!0,type:"module"},e),(e=nn.get(s))&&wm(t,e),r=n.createElement("script"),tt(r),ut(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function jy(t,e,n,i){var s=(s=Oi.current)?Pu(s):null;if(!s)throw Error(U(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=Br(n.href),n=Tr(s).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Br(n.href);var r=Tr(s).hoistableStyles,a=r.get(t);if(a||(s=s.ownerDocument||s,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,a),(r=s.querySelector(Qo(t)))&&!r._p&&(a.instance=r,a.state.loading=5),nn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},nn.set(t,n),r||a1(s,t,n,a.state))),e&&i===null)throw Error(U(528,""));return a}if(e&&i!==null)throw Error(U(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=na(n),n=Tr(s).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(U(444,t))}}function Br(t){return'href="'+Wt(t)+'"'}function Qo(t){return'link[rel="stylesheet"]['+t+"]"}function tT(t){return Re({},t,{"data-precedence":t.precedence,precedence:null})}function a1(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),ut(e,"link",n),tt(e),t.head.appendChild(e))}function na(t){return'[src="'+Wt(t)+'"]'}function Yo(t){return"script[async]"+t}function Py(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+Wt(n.href)+'"]');if(i)return e.instance=i,tt(i),i;var s=Re({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),tt(i),ut(i,"style",s),tu(i,n.precedence,t),e.instance=i;case"stylesheet":s=Br(n.href);var r=t.querySelector(Qo(s));if(r)return e.state.loading|=4,e.instance=r,tt(r),r;i=tT(n),(s=nn.get(s))&&bm(i,s),r=(t.ownerDocument||t).createElement("link"),tt(r);var a=r;return a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ut(r,"link",i),e.state.loading|=4,tu(r,n.precedence,t),e.instance=r;case"script":return r=na(n.src),(s=t.querySelector(Yo(r)))?(e.instance=s,tt(s),s):(i=n,(s=nn.get(r))&&(i=Re({},n),wm(i,s)),t=t.ownerDocument||t,s=t.createElement("script"),tt(s),ut(s,"link",i),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(U(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,tu(i,n.precedence,t));return e.instance}function tu(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var l=i[a];if(l.dataset.precedence===e)r=l;else if(r!==s)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function bm(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function wm(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var nu=null;function Ly(t,e,n){if(nu===null){var i=new Map,s=nu=new Map;s.set(n,i)}else s=nu,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var r=n[s];if(!(r[fo]||r[yt]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(e)||"";a=t+a;var l=i.get(a);l?l.push(r):i.set(a,[r])}}return i}function Uy(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function o1(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function nT(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}var bo=null;function l1(){}function u1(t,e,n){if(bo===null)throw Error(U(475));var i=bo;if(e.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(e.state.loading&4)){if(e.instance===null){var s=Br(n.href),r=t.querySelector(Qo(s));if(r){t=r._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(i.count++,i=Lu.bind(i),t.then(i,i)),e.state.loading|=4,e.instance=r,tt(r);return}r=t.ownerDocument||t,n=tT(n),(s=nn.get(s))&&bm(n,s),r=r.createElement("link"),tt(r);var a=r;a._p=new Promise(function(l,u){a.onload=l,a.onerror=u}),ut(r,"link",n),e.instance=r}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(e,t),(t=e.state.preload)&&!(e.state.loading&3)&&(i.count++,e=Lu.bind(i),t.addEventListener("load",e),t.addEventListener("error",e))}}function c1(){if(bo===null)throw Error(U(475));var t=bo;return t.stylesheets&&t.count===0&&nf(t,t.stylesheets),0<t.count?function(e){var n=setTimeout(function(){if(t.stylesheets&&nf(t,t.stylesheets),t.unsuspend){var i=t.unsuspend;t.unsuspend=null,i()}},6e4);return t.unsuspend=e,function(){t.unsuspend=null,clearTimeout(n)}}:null}function Lu(){if(this.count--,this.count===0){if(this.stylesheets)nf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Uu=null;function nf(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Uu=new Map,e.forEach(h1,t),Uu=null,Lu.call(t))}function h1(t,e){if(!(e.state.loading&4)){var n=Uu.get(t);if(n)var i=n.get(null);else{n=new Map,Uu.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}s=e.instance,a=s.getAttribute("data-precedence"),r=n.get(a)||i,r===i&&n.set(null,s),n.set(a,s),this.count++,i=Lu.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var wo={$$typeof:Un,Provider:null,Consumer:null,_currentValue:bs,_currentValue2:bs,_threadCount:0};function d1(t,e,n,i,s,r,a,l){this.tag=1,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Sh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sh(0),this.hiddenUpdates=Sh(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function iT(t,e,n,i,s,r,a,l,u,h,m,g){return t=new d1(t,e,n,a,l,u,h,g),e=1,r===!0&&(e|=24),r=Jt(3,null,null,e),t.current=r,r.stateNode=t,e=Wf(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:e},dm(r),t}function sT(t){return t?(t=yr,t):yr}function rT(t,e,n,i,s,r){s=sT(s),i.context===null?i.context=s:i.pendingContext=s,i=ki(e),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=Mi(t,i,e),n!==null&&(At(n,t,e),Ja(n,t,e))}function zy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sm(t,e){zy(t,e),(t=t.alternate)&&zy(t,e)}function aT(t){if(t.tag===13){var e=Gi(t,67108864);e!==null&&At(e,t,67108864),Sm(t,67108864)}}var zu=!0;function f1(t,e,n,i){var s=ne.T;ne.T=null;var r=xe.p;try{xe.p=2,Am(t,e,n,i)}finally{xe.p=r,ne.T=s}}function m1(t,e,n,i){var s=ne.T;ne.T=null;var r=xe.p;try{xe.p=8,Am(t,e,n,i)}finally{xe.p=r,ne.T=s}}function Am(t,e,n,i){if(zu){var s=sf(i);if(s===null)Wh(t,e,i,Bu,n),By(t,i);else if(g1(s,t,e,n,i))i.stopPropagation();else if(By(t,i),e&4&&-1<p1.indexOf(t)){for(;s!==null;){var r=Jr(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=ms(r.pendingLanes);if(a!==0){var l=r;for(l.pendingLanes|=2,l.entangledLanes|=2;a;){var u=1<<31-Bt(a);l.entanglements[1]|=u,a&=~u}Rn(r),!(Oe&6)&&(Du=gn()+500,Ko(0))}}break;case 13:l=Gi(r,2),l!==null&&At(l,r,2),Tc(),Sm(r,2)}if(r=sf(i),r===null&&Wh(t,e,i,Bu,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else Wh(t,e,i,null,n)}}function sf(t){return t=Bf(t),xm(t)}var Bu=null;function xm(t){if(Bu=null,t=_s(t),t!==null){var e=Wr(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=L_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Bu=t,null}function oT(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(eA()){case z_:return 2;case B_:return 8;case yu:case tA:return 32;case q_:return 268435456;default:return 32}default:return 32}}var rf=!1,Pi=null,Li=null,Ui=null,So=new Map,Ao=new Map,Ai=[],p1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function By(t,e){switch(t){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Li=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":So.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ao.delete(e.pointerId)}}function Da(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=Jr(e),e!==null&&aT(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function g1(t,e,n,i,s){switch(e){case"focusin":return Pi=Da(Pi,t,e,n,i,s),!0;case"dragenter":return Li=Da(Li,t,e,n,i,s),!0;case"mouseover":return Ui=Da(Ui,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return So.set(r,Da(So.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,Ao.set(r,Da(Ao.get(r)||null,t,e,n,i,s)),!0}return!1}function lT(t){var e=_s(t.target);if(e!==null){var n=Wr(e);if(n!==null){if(e=n.tag,e===13){if(e=L_(n),e!==null){t.blockedOn=e,cA(t.priority,function(){if(n.tag===13){var i=qt(),s=Gi(n,i);s!==null&&At(s,n,i),Sm(n,i)}});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function iu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sf(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);bd=i,n.target.dispatchEvent(i),bd=null}else return e=Jr(n),e!==null&&aT(e),t.blockedOn=n,!1;e.shift()}return!0}function qy(t,e,n){iu(t)&&n.delete(e)}function y1(){rf=!1,Pi!==null&&iu(Pi)&&(Pi=null),Li!==null&&iu(Li)&&(Li=null),Ui!==null&&iu(Ui)&&(Ui=null),So.forEach(qy),Ao.forEach(qy)}function Pl(t,e){t.blockedOn===e&&(t.blockedOn=null,rf||(rf=!0,We.unstable_scheduleCallback(We.unstable_NormalPriority,y1)))}var Ll=null;function Hy(t){Ll!==t&&(Ll=t,We.unstable_scheduleCallback(We.unstable_NormalPriority,function(){Ll===t&&(Ll=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],s=t[e+2];if(typeof i!="function"){if(xm(i||n)===null)continue;break}var r=Jr(n);r!==null&&(t.splice(e,3),e-=3,Od(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function xo(t){function e(u){return Pl(u,t)}Pi!==null&&Pl(Pi,t),Li!==null&&Pl(Li,t),Ui!==null&&Pl(Ui,t),So.forEach(e),Ao.forEach(e);for(var n=0;n<Ai.length;n++){var i=Ai[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<Ai.length&&(n=Ai[0],n.blockedOn===null);)lT(n),n.blockedOn===null&&Ai.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[Ot]||null;if(typeof r=="function")a||Hy(n);else if(a){var l=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[Ot]||null)l=a.formAction;else if(xm(s)!==null)continue}else l=a.action;typeof l=="function"?n[i+1]=l:(n.splice(i,3),i-=3),Hy(n)}}}function Rm(t){this._internalRoot=t}Sc.prototype.render=Rm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));var n=e.current,i=qt();rT(n,i,t,e,null,null)};Sc.prototype.unmount=Rm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;t.tag===0&&Cr(),rT(t.current,2,null,t,null,null),Tc(),e[Zr]=null}};function Sc(t){this._internalRoot=t}Sc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Y_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ai.length&&e!==0&&e<Ai[n].priority;n++);Ai.splice(n,0,t),n===0&&lT(t)}};var Fy=k_.version;if(Fy!=="19.0.0")throw Error(U(527,Fy,"19.0.0"));xe.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=WS(e),t=t!==null?U_(t):null,t=t===null?null:t.stateNode,t};var _1={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:ne,findFiberByHostInstance:_s,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{Po=Ul.inject(_1),zt=Ul}catch{}}uc.createRoot=function(t,e){if(!M_(t))throw Error(U(299));var n=!1,i="",s=rE,r=aE,a=oE,l=null;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(l=e.unstable_transitionCallbacks)),e=iT(t,1,!1,null,null,n,i,s,r,a,l,null),t[Zr]=e.current,Tm(t.nodeType===8?t.parentNode:t),new Rm(e)};uc.hydrateRoot=function(t,e,n){if(!M_(t))throw Error(U(299));var i=!1,s="",r=rE,a=aE,l=oE,u=null,h=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(l=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(u=n.unstable_transitionCallbacks),n.formState!==void 0&&(h=n.formState)),e=iT(t,1,!0,e,n??null,i,s,r,a,l,u,h),e.context=sT(null),n=e.current,i=qt(),s=ki(i),s.callback=null,Mi(n,s,i),e.current.lanes=i,Uo(e,i),Rn(e),t[Zr]=e.current,Tm(t),new Sc(e)};uc.version="19.0.0";function uT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uT)}catch(t){console.error(t)}}uT(),R_.exports=uc;var v1=R_.exports;/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),cT=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var T1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=z.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:s="",children:r,iconNode:a,...l},u)=>z.createElement("svg",{ref:u,...T1,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:cT("lucide",s),...l},[...a.map(([h,m])=>z.createElement(h,m)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=(t,e)=>{const n=z.forwardRef(({className:i,...s},r)=>z.createElement(b1,{ref:r,iconNode:e,className:cT(`lucide-${E1(t)}`,i),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],S1=Ze("ArrowUpDown",w1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ac=Ze("Calendar",A1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],hT=Ze("ChartColumn",x1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],xc=Ze("ChevronLeft",R1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Rc=Ze("ChevronRight",C1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],dT=Ze("Clock",I1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],fT=Ze("CreditCard",N1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],O1=Ze("Link",D1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],M1=Ze("List",k1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],j1=Ze("LogOut",V1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],L1=Ze("MapPin",P1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],z1=Ze("Menu",U1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],mT=Ze("Pencil",B1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Cc=Ze("Plus",q1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],F1=Ze("Trash2",H1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],pT=Ze("UserCheck",G1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Q1=Ze("User",K1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Cm=Ze("Users",Y1);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X1=Ze("X",$1),W1=()=>{};var Gy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Z1=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(r&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const r=t[n++],a=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|a&63)}}return e.join("")},yT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,m=r>>2,g=(r&3)<<4|l>>4;let y=(l&15)<<2|h>>6,_=h&63;u||(_=64,a||(y=64)),i.push(n[m],n[g],n[y],n[_])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Z1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||l==null||h==null||g==null)throw new J1;const y=r<<2|l>>4;if(i.push(y),h!==64){const _=l<<4&240|h>>2;if(i.push(_),g!==64){const C=h<<6&192|g;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class J1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eR=function(t){const e=gT(t);return yT.encodeByteArray(e,!0)},qu=function(t){return eR(t).replace(/\./g,"")},_T=function(t){try{return yT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=()=>tR().__FIREBASE_DEFAULTS__,iR=()=>{if(typeof process>"u"||typeof Gy>"u")return;const t=Gy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_T(t[1]);return e&&JSON.parse(e)},Ic=()=>{try{return W1()||nR()||iR()||sR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vT=t=>{var e,n;return(n=(e=Ic())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},rR=t=>{const e=vT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ET=()=>{var t;return(t=Ic())===null||t===void 0?void 0:t.config},TT=t=>{var e;return(e=Ic())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[qu(JSON.stringify(n)),qu(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function uR(){var t;const e=(t=Ic())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fR(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mR(){return!uR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pR(){try{return typeof indexedDB=="object"}catch{return!1}}function gR(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="FirebaseError";class ai extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=yR,Object.setPrototypeOf(this,ai.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$o.prototype.create)}}class $o{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],a=r?_R(r,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new ai(s,l,i)}}function _R(t,e){return t.replace(vR,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const vR=/\{\$([^}]+)}/g;function ER(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ks(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],a=e[s];if(Ky(r)&&Ky(a)){if(!ks(r,a))return!1}else if(r!==a)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Ky(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function La(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function Ua(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TR(t,e){const n=new bR(t,e);return n.subscribe.bind(n)}class bR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");wR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=ed),s.error===void 0&&(s.error=ed),s.complete===void 0&&(s.complete=ed);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ed(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t){return t&&t._delegate?t._delegate:t}class Ms{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new aR;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xR(e))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gs){return this.instances.has(e)}getOptions(e=gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(r);i===l&&a.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const a=this.instances.get(s);return a&&e(a,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:AR(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=gs){return this.component?this.component.multipleInstances?e:gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AR(t){return t===gs?void 0:t}function xR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const CR={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},IR=ae.INFO,NR={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},DR=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=NR[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Im{constructor(e){this.name=e,this._logLevel=IR,this._logHandler=DR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const OR=(t,e)=>e.some(n=>t instanceof n);let Qy,Yy;function kR(){return Qy||(Qy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MR(){return Yy||(Yy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bT=new WeakMap,af=new WeakMap,wT=new WeakMap,td=new WeakMap,Nm=new WeakMap;function VR(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",a)},r=()=>{n(zi(t.result)),s()},a=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&bT.set(n,t)}).catch(()=>{}),Nm.set(e,t),e}function jR(t){if(af.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",a),t.removeEventListener("abort",a)},r=()=>{n(),s()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",a),t.addEventListener("abort",a)});af.set(t,e)}let of={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return af.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function PR(t){of=t(of)}function LR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(nd(this),e,...n);return wT.set(i,e.sort?e.sort():[e]),zi(i)}:MR().includes(t)?function(...e){return t.apply(nd(this),e),zi(bT.get(this))}:function(...e){return zi(t.apply(nd(this),e))}}function UR(t){return typeof t=="function"?LR(t):(t instanceof IDBTransaction&&jR(t),OR(t,kR())?new Proxy(t,of):t)}function zi(t){if(t instanceof IDBRequest)return VR(t);if(td.has(t))return td.get(t);const e=UR(t);return e!==t&&(td.set(t,e),Nm.set(e,t)),e}const nd=t=>Nm.get(t);function zR(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const a=indexedDB.open(t,e),l=zi(a);return i&&a.addEventListener("upgradeneeded",u=>{i(zi(a.result),u.oldVersion,u.newVersion,zi(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{r&&u.addEventListener("close",()=>r()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const BR=["get","getKey","getAll","getAllKeys","count"],qR=["put","add","delete","clear"],id=new Map;function $y(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(id.get(e))return id.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=qR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||BR.includes(n)))return;const r=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return id.set(e,r),r}PR(t=>({...t,get:(e,n,i)=>$y(e,n)||t.get(e,n,i),has:(e,n)=>!!$y(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function FR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lf="@firebase/app",Xy="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new Im("@firebase/app"),GR="@firebase/app-compat",KR="@firebase/analytics-compat",QR="@firebase/analytics",YR="@firebase/app-check-compat",$R="@firebase/app-check",XR="@firebase/auth",WR="@firebase/auth-compat",ZR="@firebase/database",JR="@firebase/data-connect",e2="@firebase/database-compat",t2="@firebase/functions",n2="@firebase/functions-compat",i2="@firebase/installations",s2="@firebase/installations-compat",r2="@firebase/messaging",a2="@firebase/messaging-compat",o2="@firebase/performance",l2="@firebase/performance-compat",u2="@firebase/remote-config",c2="@firebase/remote-config-compat",h2="@firebase/storage",d2="@firebase/storage-compat",f2="@firebase/firestore",m2="@firebase/vertexai",p2="@firebase/firestore-compat",g2="firebase",y2="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="[DEFAULT]",_2={[lf]:"fire-core",[GR]:"fire-core-compat",[QR]:"fire-analytics",[KR]:"fire-analytics-compat",[$R]:"fire-app-check",[YR]:"fire-app-check-compat",[XR]:"fire-auth",[WR]:"fire-auth-compat",[ZR]:"fire-rtdb",[JR]:"fire-data-connect",[e2]:"fire-rtdb-compat",[t2]:"fire-fn",[n2]:"fire-fn-compat",[i2]:"fire-iid",[s2]:"fire-iid-compat",[r2]:"fire-fcm",[a2]:"fire-fcm-compat",[o2]:"fire-perf",[l2]:"fire-perf-compat",[u2]:"fire-rc",[c2]:"fire-rc-compat",[h2]:"fire-gcs",[d2]:"fire-gcs-compat",[f2]:"fire-fst",[p2]:"fire-fst-compat",[m2]:"fire-vertex","fire-js":"fire-js",[g2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=new Map,v2=new Map,cf=new Map;function Wy(t,e){try{t.container.addComponent(e)}catch(n){ei.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qr(t){const e=t.name;if(cf.has(e))return ei.debug(`There were multiple attempts to register component ${e}.`),!1;cf.set(e,t);for(const n of Hu.values())Wy(n,t);for(const n of v2.values())Wy(n,t);return!0}function Dm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Lt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bi=new $o("app","Firebase",E2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=y2;function ST(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:uf,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Bi.create("bad-app-name",{appName:String(s)});if(n||(n=ET()),!n)throw Bi.create("no-options");const r=Hu.get(s);if(r){if(ks(n,r.options)&&ks(i,r.config))return r;throw Bi.create("duplicate-app",{appName:s})}const a=new RR(s);for(const u of cf.values())a.addComponent(u);const l=new T2(n,i,a);return Hu.set(s,l),l}function AT(t=uf){const e=Hu.get(t);if(!e&&t===uf&&ET())return ST();if(!e)throw Bi.create("no-app",{appName:t});return e}function qi(t,e,n){var i;let s=(i=_2[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const l=[`Unable to register library "${s}" with version "${e}":`];r&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ei.warn(l.join(" "));return}qr(new Ms(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="firebase-heartbeat-database",w2=1,Ro="firebase-heartbeat-store";let sd=null;function xT(){return sd||(sd=zR(b2,w2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ro)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bi.create("idb-open",{originalErrorMessage:t.message})})),sd}async function S2(t){try{const n=(await xT()).transaction(Ro),i=await n.objectStore(Ro).get(RT(t));return await n.done,i}catch(e){if(e instanceof ai)ei.warn(e.message);else{const n=Bi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ei.warn(n.message)}}}async function Zy(t,e){try{const i=(await xT()).transaction(Ro,"readwrite");await i.objectStore(Ro).put(e,RT(t)),await i.done}catch(n){if(n instanceof ai)ei.warn(n.message);else{const i=Bi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ei.warn(i.message)}}}function RT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=1024,x2=30;class R2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new I2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Jy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(a=>a.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>x2){const a=N2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ei.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jy(),{heartbeatsToSend:i,unsentEntries:s}=C2(this._heartbeatsCache.heartbeats),r=qu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return ei.warn(n),""}}}function Jy(){return new Date().toISOString().substring(0,10)}function C2(t,e=A2){const n=[];let i=t.slice();for(const s of t){const r=n.find(a=>a.agent===s.agent);if(r){if(r.dates.push(s.date),e0(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),e0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class I2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pR()?gR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await S2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Zy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Zy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function e0(t){return qu(JSON.stringify({version:2,heartbeats:t})).length}function N2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D2(t){qr(new Ms("platform-logger",e=>new HR(e),"PRIVATE")),qr(new Ms("heartbeat",e=>new R2(e),"PRIVATE")),qi(lf,Xy,t),qi(lf,Xy,"esm2017"),qi("fire-js","")}D2("");var O2="firebase",k2="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi(O2,k2,"app");var t0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hi,CT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,p){function E(){}E.prototype=p.prototype,w.D=p.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(A,R,N){for(var x=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)x[ye-2]=arguments[ye];return p.prototype[R].apply(A,x)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,p,E){E||(E=0);var A=Array(16);if(typeof p=="string")for(var R=0;16>R;++R)A[R]=p.charCodeAt(E++)|p.charCodeAt(E++)<<8|p.charCodeAt(E++)<<16|p.charCodeAt(E++)<<24;else for(R=0;16>R;++R)A[R]=p[E++]|p[E++]<<8|p[E++]<<16|p[E++]<<24;p=w.g[0],E=w.g[1],R=w.g[2];var N=w.g[3],x=p+(N^E&(R^N))+A[0]+3614090360&4294967295;p=E+(x<<7&4294967295|x>>>25),x=N+(R^p&(E^R))+A[1]+3905402710&4294967295,N=p+(x<<12&4294967295|x>>>20),x=R+(E^N&(p^E))+A[2]+606105819&4294967295,R=N+(x<<17&4294967295|x>>>15),x=E+(p^R&(N^p))+A[3]+3250441966&4294967295,E=R+(x<<22&4294967295|x>>>10),x=p+(N^E&(R^N))+A[4]+4118548399&4294967295,p=E+(x<<7&4294967295|x>>>25),x=N+(R^p&(E^R))+A[5]+1200080426&4294967295,N=p+(x<<12&4294967295|x>>>20),x=R+(E^N&(p^E))+A[6]+2821735955&4294967295,R=N+(x<<17&4294967295|x>>>15),x=E+(p^R&(N^p))+A[7]+4249261313&4294967295,E=R+(x<<22&4294967295|x>>>10),x=p+(N^E&(R^N))+A[8]+1770035416&4294967295,p=E+(x<<7&4294967295|x>>>25),x=N+(R^p&(E^R))+A[9]+2336552879&4294967295,N=p+(x<<12&4294967295|x>>>20),x=R+(E^N&(p^E))+A[10]+4294925233&4294967295,R=N+(x<<17&4294967295|x>>>15),x=E+(p^R&(N^p))+A[11]+2304563134&4294967295,E=R+(x<<22&4294967295|x>>>10),x=p+(N^E&(R^N))+A[12]+1804603682&4294967295,p=E+(x<<7&4294967295|x>>>25),x=N+(R^p&(E^R))+A[13]+4254626195&4294967295,N=p+(x<<12&4294967295|x>>>20),x=R+(E^N&(p^E))+A[14]+2792965006&4294967295,R=N+(x<<17&4294967295|x>>>15),x=E+(p^R&(N^p))+A[15]+1236535329&4294967295,E=R+(x<<22&4294967295|x>>>10),x=p+(R^N&(E^R))+A[1]+4129170786&4294967295,p=E+(x<<5&4294967295|x>>>27),x=N+(E^R&(p^E))+A[6]+3225465664&4294967295,N=p+(x<<9&4294967295|x>>>23),x=R+(p^E&(N^p))+A[11]+643717713&4294967295,R=N+(x<<14&4294967295|x>>>18),x=E+(N^p&(R^N))+A[0]+3921069994&4294967295,E=R+(x<<20&4294967295|x>>>12),x=p+(R^N&(E^R))+A[5]+3593408605&4294967295,p=E+(x<<5&4294967295|x>>>27),x=N+(E^R&(p^E))+A[10]+38016083&4294967295,N=p+(x<<9&4294967295|x>>>23),x=R+(p^E&(N^p))+A[15]+3634488961&4294967295,R=N+(x<<14&4294967295|x>>>18),x=E+(N^p&(R^N))+A[4]+3889429448&4294967295,E=R+(x<<20&4294967295|x>>>12),x=p+(R^N&(E^R))+A[9]+568446438&4294967295,p=E+(x<<5&4294967295|x>>>27),x=N+(E^R&(p^E))+A[14]+3275163606&4294967295,N=p+(x<<9&4294967295|x>>>23),x=R+(p^E&(N^p))+A[3]+4107603335&4294967295,R=N+(x<<14&4294967295|x>>>18),x=E+(N^p&(R^N))+A[8]+1163531501&4294967295,E=R+(x<<20&4294967295|x>>>12),x=p+(R^N&(E^R))+A[13]+2850285829&4294967295,p=E+(x<<5&4294967295|x>>>27),x=N+(E^R&(p^E))+A[2]+4243563512&4294967295,N=p+(x<<9&4294967295|x>>>23),x=R+(p^E&(N^p))+A[7]+1735328473&4294967295,R=N+(x<<14&4294967295|x>>>18),x=E+(N^p&(R^N))+A[12]+2368359562&4294967295,E=R+(x<<20&4294967295|x>>>12),x=p+(E^R^N)+A[5]+4294588738&4294967295,p=E+(x<<4&4294967295|x>>>28),x=N+(p^E^R)+A[8]+2272392833&4294967295,N=p+(x<<11&4294967295|x>>>21),x=R+(N^p^E)+A[11]+1839030562&4294967295,R=N+(x<<16&4294967295|x>>>16),x=E+(R^N^p)+A[14]+4259657740&4294967295,E=R+(x<<23&4294967295|x>>>9),x=p+(E^R^N)+A[1]+2763975236&4294967295,p=E+(x<<4&4294967295|x>>>28),x=N+(p^E^R)+A[4]+1272893353&4294967295,N=p+(x<<11&4294967295|x>>>21),x=R+(N^p^E)+A[7]+4139469664&4294967295,R=N+(x<<16&4294967295|x>>>16),x=E+(R^N^p)+A[10]+3200236656&4294967295,E=R+(x<<23&4294967295|x>>>9),x=p+(E^R^N)+A[13]+681279174&4294967295,p=E+(x<<4&4294967295|x>>>28),x=N+(p^E^R)+A[0]+3936430074&4294967295,N=p+(x<<11&4294967295|x>>>21),x=R+(N^p^E)+A[3]+3572445317&4294967295,R=N+(x<<16&4294967295|x>>>16),x=E+(R^N^p)+A[6]+76029189&4294967295,E=R+(x<<23&4294967295|x>>>9),x=p+(E^R^N)+A[9]+3654602809&4294967295,p=E+(x<<4&4294967295|x>>>28),x=N+(p^E^R)+A[12]+3873151461&4294967295,N=p+(x<<11&4294967295|x>>>21),x=R+(N^p^E)+A[15]+530742520&4294967295,R=N+(x<<16&4294967295|x>>>16),x=E+(R^N^p)+A[2]+3299628645&4294967295,E=R+(x<<23&4294967295|x>>>9),x=p+(R^(E|~N))+A[0]+4096336452&4294967295,p=E+(x<<6&4294967295|x>>>26),x=N+(E^(p|~R))+A[7]+1126891415&4294967295,N=p+(x<<10&4294967295|x>>>22),x=R+(p^(N|~E))+A[14]+2878612391&4294967295,R=N+(x<<15&4294967295|x>>>17),x=E+(N^(R|~p))+A[5]+4237533241&4294967295,E=R+(x<<21&4294967295|x>>>11),x=p+(R^(E|~N))+A[12]+1700485571&4294967295,p=E+(x<<6&4294967295|x>>>26),x=N+(E^(p|~R))+A[3]+2399980690&4294967295,N=p+(x<<10&4294967295|x>>>22),x=R+(p^(N|~E))+A[10]+4293915773&4294967295,R=N+(x<<15&4294967295|x>>>17),x=E+(N^(R|~p))+A[1]+2240044497&4294967295,E=R+(x<<21&4294967295|x>>>11),x=p+(R^(E|~N))+A[8]+1873313359&4294967295,p=E+(x<<6&4294967295|x>>>26),x=N+(E^(p|~R))+A[15]+4264355552&4294967295,N=p+(x<<10&4294967295|x>>>22),x=R+(p^(N|~E))+A[6]+2734768916&4294967295,R=N+(x<<15&4294967295|x>>>17),x=E+(N^(R|~p))+A[13]+1309151649&4294967295,E=R+(x<<21&4294967295|x>>>11),x=p+(R^(E|~N))+A[4]+4149444226&4294967295,p=E+(x<<6&4294967295|x>>>26),x=N+(E^(p|~R))+A[11]+3174756917&4294967295,N=p+(x<<10&4294967295|x>>>22),x=R+(p^(N|~E))+A[2]+718787259&4294967295,R=N+(x<<15&4294967295|x>>>17),x=E+(N^(R|~p))+A[9]+3951481745&4294967295,w.g[0]=w.g[0]+p&4294967295,w.g[1]=w.g[1]+(R+(x<<21&4294967295|x>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+N&4294967295}i.prototype.u=function(w,p){p===void 0&&(p=w.length);for(var E=p-this.blockSize,A=this.B,R=this.h,N=0;N<p;){if(R==0)for(;N<=E;)s(this,w,N),N+=this.blockSize;if(typeof w=="string"){for(;N<p;)if(A[R++]=w.charCodeAt(N++),R==this.blockSize){s(this,A),R=0;break}}else for(;N<p;)if(A[R++]=w[N++],R==this.blockSize){s(this,A),R=0;break}}this.h=R,this.o+=p},i.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var p=1;p<w.length-8;++p)w[p]=0;var E=8*this.o;for(p=w.length-8;p<w.length;++p)w[p]=E&255,E/=256;for(this.u(w),w=Array(16),p=E=0;4>p;++p)for(var A=0;32>A;A+=8)w[E++]=this.g[p]>>>A&255;return w};function r(w,p){var E=l;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=p(w)}function a(w,p){this.h=p;for(var E=[],A=!0,R=w.length-1;0<=R;R--){var N=w[R]|0;A&&N==p||(E[R]=N,A=!1)}this.g=E}var l={};function u(w){return-128<=w&&128>w?r(w,function(p){return new a([p|0],0>p?-1:0)}):new a([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return g;if(0>w)return j(h(-w));for(var p=[],E=1,A=0;w>=E;A++)p[A]=w/E|0,E*=4294967296;return new a(p,0)}function m(w,p){if(w.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(w.charAt(0)=="-")return j(m(w.substring(1),p));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(p,8)),A=g,R=0;R<w.length;R+=8){var N=Math.min(8,w.length-R),x=parseInt(w.substring(R,R+N),p);8>N?(N=h(Math.pow(p,N)),A=A.j(N).add(h(x))):(A=A.j(E),A=A.add(h(x)))}return A}var g=u(0),y=u(1),_=u(16777216);t=a.prototype,t.m=function(){if(O(this))return-j(this).m();for(var w=0,p=1,E=0;E<this.g.length;E++){var A=this.i(E);w+=(0<=A?A:4294967296+A)*p,p*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(C(this))return"0";if(O(this))return"-"+j(this).toString(w);for(var p=h(Math.pow(w,6)),E=this,A="";;){var R=I(E,p).g;E=S(E,R.j(p));var N=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=R,C(E))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function C(w){if(w.h!=0)return!1;for(var p=0;p<w.g.length;p++)if(w.g[p]!=0)return!1;return!0}function O(w){return w.h==-1}t.l=function(w){return w=S(this,w),O(w)?-1:C(w)?0:1};function j(w){for(var p=w.g.length,E=[],A=0;A<p;A++)E[A]=~w.g[A];return new a(E,~w.h).add(y)}t.abs=function(){return O(this)?j(this):this},t.add=function(w){for(var p=Math.max(this.g.length,w.g.length),E=[],A=0,R=0;R<=p;R++){var N=A+(this.i(R)&65535)+(w.i(R)&65535),x=(N>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);A=x>>>16,N&=65535,x&=65535,E[R]=x<<16|N}return new a(E,E[E.length-1]&-2147483648?-1:0)};function S(w,p){return w.add(j(p))}t.j=function(w){if(C(this)||C(w))return g;if(O(this))return O(w)?j(this).j(j(w)):j(j(this).j(w));if(O(w))return j(this.j(j(w)));if(0>this.l(_)&&0>w.l(_))return h(this.m()*w.m());for(var p=this.g.length+w.g.length,E=[],A=0;A<2*p;A++)E[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<w.g.length;R++){var N=this.i(A)>>>16,x=this.i(A)&65535,ye=w.i(R)>>>16,Ce=w.i(R)&65535;E[2*A+2*R]+=x*Ce,T(E,2*A+2*R),E[2*A+2*R+1]+=N*Ce,T(E,2*A+2*R+1),E[2*A+2*R+1]+=x*ye,T(E,2*A+2*R+1),E[2*A+2*R+2]+=N*ye,T(E,2*A+2*R+2)}for(A=0;A<p;A++)E[A]=E[2*A+1]<<16|E[2*A];for(A=p;A<2*p;A++)E[A]=0;return new a(E,0)};function T(w,p){for(;(w[p]&65535)!=w[p];)w[p+1]+=w[p]>>>16,w[p]&=65535,p++}function b(w,p){this.g=w,this.h=p}function I(w,p){if(C(p))throw Error("division by zero");if(C(w))return new b(g,g);if(O(w))return p=I(j(w),p),new b(j(p.g),j(p.h));if(O(p))return p=I(w,j(p)),new b(j(p.g),p.h);if(30<w.g.length){if(O(w)||O(p))throw Error("slowDivide_ only works with positive integers.");for(var E=y,A=p;0>=A.l(w);)E=M(E),A=M(A);var R=k(E,1),N=k(A,1);for(A=k(A,2),E=k(E,2);!C(A);){var x=N.add(A);0>=x.l(w)&&(R=R.add(E),N=x),A=k(A,1),E=k(E,1)}return p=S(w,R.j(p)),new b(R,p)}for(R=g;0<=w.l(p);){for(E=Math.max(1,Math.floor(w.m()/p.m())),A=Math.ceil(Math.log(E)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=h(E),x=N.j(p);O(x)||0<x.l(w);)E-=A,N=h(E),x=N.j(p);C(N)&&(N=y),R=R.add(N),w=S(w,x)}return new b(R,w)}t.A=function(w){return I(this,w).h},t.and=function(w){for(var p=Math.max(this.g.length,w.g.length),E=[],A=0;A<p;A++)E[A]=this.i(A)&w.i(A);return new a(E,this.h&w.h)},t.or=function(w){for(var p=Math.max(this.g.length,w.g.length),E=[],A=0;A<p;A++)E[A]=this.i(A)|w.i(A);return new a(E,this.h|w.h)},t.xor=function(w){for(var p=Math.max(this.g.length,w.g.length),E=[],A=0;A<p;A++)E[A]=this.i(A)^w.i(A);return new a(E,this.h^w.h)};function M(w){for(var p=w.g.length+1,E=[],A=0;A<p;A++)E[A]=w.i(A)<<1|w.i(A-1)>>>31;return new a(E,w.h)}function k(w,p){var E=p>>5;p%=32;for(var A=w.g.length-E,R=[],N=0;N<A;N++)R[N]=0<p?w.i(N+E)>>>p|w.i(N+E+1)<<32-p:w.i(N+E);return new a(R,w.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,CT=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=m,Hi=a}).apply(typeof t0<"u"?t0:typeof self<"u"?self:typeof window<"u"?window:{});var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IT,za,NT,su,hf,DT,OT,kT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,f){return o==Array.prototype||o==Object.prototype||(o[c]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof zl=="object"&&zl];for(var c=0;c<o.length;++c){var f=o[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var i=n(this);function s(o,c){if(c)e:{var f=i;o=o.split(".");for(var v=0;v<o.length-1;v++){var D=o[v];if(!(D in f))break e;f=f[D]}o=o[o.length-1],v=f[o],c=c(v),c!=v&&c!=null&&e(f,o,{configurable:!0,writable:!0,value:c})}}function r(o,c){o instanceof String&&(o+="");var f=0,v=!1,D={next:function(){if(!v&&f<o.length){var V=f++;return{value:c(V,o[V]),done:!1}}return v=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(o){return o||function(){return r(this,function(c,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function h(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function m(o,c,f){return o.call.apply(o.bind,arguments)}function g(o,c,f){if(!o)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,v),o.apply(c,D)}}return function(){return o.apply(c,arguments)}}function y(o,c,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,y.apply(null,arguments)}function _(o,c){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),o.apply(this,v)}}function C(o,c){function f(){}f.prototype=c.prototype,o.aa=c.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(v,D,V){for(var B=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)B[Ee-2]=arguments[Ee];return c.prototype[D].apply(v,B)}}function O(o){const c=o.length;if(0<c){const f=Array(c);for(let v=0;v<c;v++)f[v]=o[v];return f}return[]}function j(o,c){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(u(v)){const D=o.length||0,V=v.length||0;o.length=D+V;for(let B=0;B<V;B++)o[D+B]=v[B]}else o.push(v)}}class S{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function T(o){return/^[\s\xa0]*$/.test(o)}function b(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function I(o){return I[" "](o),o}I[" "]=function(){};var M=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function k(o,c,f){for(const v in o)c.call(f,o[v],v,o)}function w(o,c){for(const f in o)c.call(void 0,o[f],f,o)}function p(o){const c={};for(const f in o)c[f]=o[f];return c}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(o,c){let f,v;for(let D=1;D<arguments.length;D++){v=arguments[D];for(f in v)o[f]=v[f];for(let V=0;V<E.length;V++)f=E[V],Object.prototype.hasOwnProperty.call(v,f)&&(o[f]=v[f])}}function R(o){var c=1;o=o.split(":");const f=[];for(;0<c&&o.length;)f.push(o.shift()),c--;return o.length&&f.push(o.join(":")),f}function N(o){l.setTimeout(()=>{throw o},0)}function x(){var o=me;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class ye{constructor(){this.h=this.g=null}add(c,f){const v=Ce.get();v.set(c,f),this.h?this.h.next=v:this.g=v,this.h=v}}var Ce=new S(()=>new q,o=>o.reset());class q{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let X,$=!1,me=new ye,H=()=>{const o=l.Promise.resolve(void 0);X=()=>{o.then(te)}};var te=()=>{for(var o;o=x();){try{o.h.call(o.g)}catch(f){N(f)}var c=Ce;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}$=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var pe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,c),l.removeEventListener("test",f,c)}catch{}return o}();function Me(o,c){if(Q.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,v=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(M){e:{try{I(c.nodeName);var D=!0;break e}catch{}D=!1}D||(c=null)}}else f=="mouseover"?c=o.fromElement:f=="mouseout"&&(c=o.toElement);this.relatedTarget=c,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:os[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Me.aa.h.call(this)}}C(Me,Q);var os={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),ca=0;function Cn(o,c,f,v,D){this.listener=o,this.proxy=null,this.src=c,this.type=f,this.capture=!!v,this.ha=D,this.key=++ca,this.da=this.fa=!1}function ci(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function hi(o){this.src=o,this.g={},this.h=0}hi.prototype.add=function(o,c,f,v,D){var V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);var B=Ys(o,c,v,D);return-1<B?(c=o[B],f||(c.fa=!1)):(c=new Cn(c,this.src,V,!!v,D),c.fa=f,o.push(c)),c};function ls(o,c){var f=c.type;if(f in o.g){var v=o.g[f],D=Array.prototype.indexOf.call(v,c,void 0),V;(V=0<=D)&&Array.prototype.splice.call(v,D,1),V&&(ci(c),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Ys(o,c,f,v){for(var D=0;D<o.length;++D){var V=o[D];if(!V.da&&V.listener==c&&V.capture==!!f&&V.ha==v)return D}return-1}var Zc="closure_lm_"+(1e6*Math.random()|0),Jc={};function Sp(o,c,f,v,D){if(Array.isArray(c)){for(var V=0;V<c.length;V++)Sp(o,c[V],f,v,D);return null}return f=Rp(f),o&&o[Et]?o.K(c,f,h(v)?!!v.capture:!1,D):Yw(o,c,f,!1,v,D)}function Yw(o,c,f,v,D,V){if(!c)throw Error("Invalid event type");var B=h(D)?!!D.capture:!!D,Ee=th(o);if(Ee||(o[Zc]=Ee=new hi(o)),f=Ee.add(c,f,v,B,V),f.proxy)return f;if(v=$w(),f.proxy=v,v.src=o,v.listener=f,o.addEventListener)pe||(D=B),D===void 0&&(D=!1),o.addEventListener(c.toString(),v,D);else if(o.attachEvent)o.attachEvent(xp(c.toString()),v);else if(o.addListener&&o.removeListener)o.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function $w(){function o(f){return c.call(o.src,o.listener,f)}const c=Xw;return o}function Ap(o,c,f,v,D){if(Array.isArray(c))for(var V=0;V<c.length;V++)Ap(o,c[V],f,v,D);else v=h(v)?!!v.capture:!!v,f=Rp(f),o&&o[Et]?(o=o.i,c=String(c).toString(),c in o.g&&(V=o.g[c],f=Ys(V,f,v,D),-1<f&&(ci(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete o.g[c],o.h--)))):o&&(o=th(o))&&(c=o.g[c.toString()],o=-1,c&&(o=Ys(c,f,v,D)),(f=-1<o?c[o]:null)&&eh(f))}function eh(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Et])ls(c.i,o);else{var f=o.type,v=o.proxy;c.removeEventListener?c.removeEventListener(f,v,o.capture):c.detachEvent?c.detachEvent(xp(f),v):c.addListener&&c.removeListener&&c.removeListener(v),(f=th(c))?(ls(f,o),f.h==0&&(f.src=null,c[Zc]=null)):ci(o)}}}function xp(o){return o in Jc?Jc[o]:Jc[o]="on"+o}function Xw(o,c){if(o.da)o=!0;else{c=new Me(c,this);var f=o.listener,v=o.ha||o.src;o.fa&&eh(o),o=f.call(v,c)}return o}function th(o){return o=o[Zc],o instanceof hi?o:null}var nh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rp(o){return typeof o=="function"?o:(o[nh]||(o[nh]=function(c){return o.handleEvent(c)}),o[nh])}function ht(){F.call(this),this.i=new hi(this),this.M=this,this.F=null}C(ht,F),ht.prototype[Et]=!0,ht.prototype.removeEventListener=function(o,c,f,v){Ap(this,o,c,f,v)};function Tt(o,c){var f,v=o.F;if(v)for(f=[];v;v=v.F)f.push(v);if(o=o.M,v=c.type||c,typeof c=="string")c=new Q(c,o);else if(c instanceof Q)c.target=c.target||o;else{var D=c;c=new Q(v,o),A(c,D)}if(D=!0,f)for(var V=f.length-1;0<=V;V--){var B=c.g=f[V];D=ll(B,v,!0,c)&&D}if(B=c.g=o,D=ll(B,v,!0,c)&&D,D=ll(B,v,!1,c)&&D,f)for(V=0;V<f.length;V++)B=c.g=f[V],D=ll(B,v,!1,c)&&D}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var f=o.g[c],v=0;v<f.length;v++)ci(f[v]);delete o.g[c],o.h--}}this.F=null},ht.prototype.K=function(o,c,f,v){return this.i.add(String(o),c,!1,f,v)},ht.prototype.L=function(o,c,f,v){return this.i.add(String(o),c,!0,f,v)};function ll(o,c,f,v){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var D=!0,V=0;V<c.length;++V){var B=c[V];if(B&&!B.da&&B.capture==f){var Ee=B.listener,st=B.ha||B.src;B.fa&&ls(o.i,B),D=Ee.call(st,v)!==!1&&D}}return D&&!v.defaultPrevented}function Cp(o,c,f){if(typeof o=="function")f&&(o=y(o,f));else if(o&&typeof o.handleEvent=="function")o=y(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Ip(o){o.g=Cp(()=>{o.g=null,o.i&&(o.i=!1,Ip(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class Ww extends F{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Ip(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ha(o){F.call(this),this.h=o,this.g={}}C(ha,F);var Np=[];function Dp(o){k(o.g,function(c,f){this.g.hasOwnProperty(f)&&eh(c)},o),o.g={}}ha.prototype.N=function(){ha.aa.N.call(this),Dp(this)},ha.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ih=l.JSON.stringify,Zw=l.JSON.parse,Jw=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function sh(){}sh.prototype.h=null;function Op(o){return o.h||(o.h=o.i())}function kp(){}var da={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rh(){Q.call(this,"d")}C(rh,Q);function ah(){Q.call(this,"c")}C(ah,Q);var us={},Mp=null;function ul(){return Mp=Mp||new ht}us.La="serverreachability";function Vp(o){Q.call(this,us.La,o)}C(Vp,Q);function fa(o){const c=ul();Tt(c,new Vp(c))}us.STAT_EVENT="statevent";function jp(o,c){Q.call(this,us.STAT_EVENT,o),this.stat=c}C(jp,Q);function bt(o){const c=ul();Tt(c,new jp(c,o))}us.Ma="timingevent";function Pp(o,c){Q.call(this,us.Ma,o),this.size=c}C(Pp,Q);function ma(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function pa(){this.g=!0}pa.prototype.xa=function(){this.g=!1};function eS(o,c,f,v,D,V){o.info(function(){if(o.g)if(V)for(var B="",Ee=V.split("&"),st=0;st<Ee.length;st++){var de=Ee[st].split("=");if(1<de.length){var dt=de[0];de=de[1];var ft=dt.split("_");B=2<=ft.length&&ft[1]=="type"?B+(dt+"="+de+"&"):B+(dt+"=redacted&")}}else B=null;else B=V;return"XMLHTTP REQ ("+v+") [attempt "+D+"]: "+c+`
`+f+`
`+B})}function tS(o,c,f,v,D,V,B){o.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+D+"]: "+c+`
`+f+`
`+V+" "+B})}function $s(o,c,f,v){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+iS(o,f)+(v?" "+v:"")})}function nS(o,c){o.info(function(){return"TIMEOUT: "+c})}pa.prototype.info=function(){};function iS(o,c){if(!o.g)return c;if(!c)return null;try{var f=JSON.parse(c);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var v=f[o];if(!(2>v.length)){var D=v[1];if(Array.isArray(D)&&!(1>D.length)){var V=D[0];if(V!="noop"&&V!="stop"&&V!="close")for(var B=1;B<D.length;B++)D[B]=""}}}}return ih(f)}catch{return c}}var cl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Lp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oh;function hl(){}C(hl,sh),hl.prototype.g=function(){return new XMLHttpRequest},hl.prototype.i=function(){return{}},oh=new hl;function di(o,c,f,v){this.j=o,this.i=c,this.l=f,this.R=v||1,this.U=new ha(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Up}function Up(){this.i=null,this.g="",this.h=!1}var zp={},lh={};function uh(o,c,f){o.L=1,o.v=pl(In(c)),o.m=f,o.P=!0,Bp(o,null)}function Bp(o,c){o.F=Date.now(),dl(o),o.A=In(o.v);var f=o.A,v=o.R;Array.isArray(v)||(v=[String(v)]),tg(f.i,"t",v),o.C=0,f=o.j.J,o.h=new Up,o.g=vg(o.j,f?c:null,!o.m),0<o.O&&(o.M=new Ww(y(o.Y,o,o.g),o.O)),c=o.U,f=o.g,v=o.ca;var D="readystatechange";Array.isArray(D)||(D&&(Np[0]=D.toString()),D=Np);for(var V=0;V<D.length;V++){var B=Sp(f,D[V],v||c.handleEvent,!1,c.h||c);if(!B)break;c.g[B.key]=B}c=o.H?p(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),fa(),eS(o.i,o.u,o.A,o.l,o.R,o.m)}di.prototype.ca=function(o){o=o.target;const c=this.M;c&&Nn(o)==3?c.j():this.Y(o)},di.prototype.Y=function(o){try{if(o==this.g)e:{const ft=Nn(this.g);var c=this.g.Ba();const Zs=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||lg(this.g)))){this.J||ft!=4||c==7||(c==8||0>=Zs?fa(3):fa(2)),ch(this);var f=this.g.Z();this.X=f;t:if(qp(this)){var v=lg(this.g);o="";var D=v.length,V=Nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cs(this),ga(this);var B="";break t}this.h.i=new l.TextDecoder}for(c=0;c<D;c++)this.h.h=!0,o+=this.h.i.decode(v[c],{stream:!(V&&c==D-1)});v.length=0,this.h.g+=o,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=f==200,tS(this.i,this.u,this.A,this.l,this.R,ft,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,st=this.g;if((Ee=st.g?st.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Ee)){var de=Ee;break t}}de=null}if(f=de)$s(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hh(this,f);else{this.o=!1,this.s=3,bt(12),cs(this),ga(this);break e}}if(this.P){f=!0;let rn;for(;!this.J&&this.C<B.length;)if(rn=sS(this,B),rn==lh){ft==4&&(this.s=4,bt(14),f=!1),$s(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==zp){this.s=4,bt(15),$s(this.i,this.l,B,"[Invalid Chunk]"),f=!1;break}else $s(this.i,this.l,rn,null),hh(this,rn);if(qp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||B.length!=0||this.h.h||(this.s=1,bt(16),f=!1),this.o=this.o&&f,!f)$s(this.i,this.l,B,"[Invalid Chunked Response]"),cs(this),ga(this);else if(0<B.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),yh(dt),dt.M=!0,bt(11))}}else $s(this.i,this.l,B,null),hh(this,B);ft==4&&cs(this),this.o&&!this.J&&(ft==4?pg(this.j,this):(this.o=!1,dl(this)))}else TS(this.g),f==400&&0<B.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),cs(this),ga(this)}}}catch{}finally{}};function qp(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function sS(o,c){var f=o.C,v=c.indexOf(`
`,f);return v==-1?lh:(f=Number(c.substring(f,v)),isNaN(f)?zp:(v+=1,v+f>c.length?lh:(c=c.slice(v,v+f),o.C=v+f,c)))}di.prototype.cancel=function(){this.J=!0,cs(this)};function dl(o){o.S=Date.now()+o.I,Hp(o,o.I)}function Hp(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ma(y(o.ba,o),c)}function ch(o){o.B&&(l.clearTimeout(o.B),o.B=null)}di.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(nS(this.i,this.A),this.L!=2&&(fa(),bt(17)),cs(this),this.s=2,ga(this)):Hp(this,this.S-o)};function ga(o){o.j.G==0||o.J||pg(o.j,o)}function cs(o){ch(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,Dp(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function hh(o,c){try{var f=o.j;if(f.G!=0&&(f.g==o||dh(f.h,o))){if(!o.K&&dh(f.h,o)&&f.G==3){try{var v=f.Da.g.parse(c)}catch{v=null}if(Array.isArray(v)&&v.length==3){var D=v;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Tl(f),vl(f);else break e;gh(f),bt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=ma(y(f.Za,f),6e3));if(1>=Kp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ds(f,11)}else if((o.K||f.g==o)&&Tl(f),!T(c))for(D=f.Da.g.parse(c),c=0;c<D.length;c++){let de=D[c];if(f.T=de[0],de=de[1],f.G==2)if(de[0]=="c"){f.K=de[1],f.ia=de[2];const dt=de[3];dt!=null&&(f.la=dt,f.j.info("VER="+f.la));const ft=de[4];ft!=null&&(f.Aa=ft,f.j.info("SVER="+f.Aa));const Zs=de[5];Zs!=null&&typeof Zs=="number"&&0<Zs&&(v=1.5*Zs,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const rn=o.g;if(rn){const wl=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wl){var V=v.h;V.g||wl.indexOf("spdy")==-1&&wl.indexOf("quic")==-1&&wl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(fh(V,V.h),V.h=null))}if(v.D){const _h=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;_h&&(v.ya=_h,Se(v.I,v.D,_h))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var B=o;if(v.qa=_g(v,v.J?v.ia:null,v.W),B.K){Qp(v.h,B);var Ee=B,st=v.L;st&&(Ee.I=st),Ee.B&&(ch(Ee),dl(Ee)),v.g=B}else fg(v);0<f.i.length&&El(f)}else de[0]!="stop"&&de[0]!="close"||ds(f,7);else f.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?ds(f,7):ph(f):de[0]!="noop"&&f.l&&f.l.ta(de),f.v=0)}}fa(4)}catch{}}var rS=class{constructor(o,c){this.g=o,this.map=c}};function Fp(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gp(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Kp(o){return o.h?1:o.g?o.g.size:0}function dh(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function fh(o,c){o.g?o.g.add(c):o.h=c}function Qp(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Fp.prototype.cancel=function(){if(this.i=Yp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Yp(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const f of o.g.values())c=c.concat(f.D);return c}return O(o.i)}function aS(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],f=o.length,v=0;v<f;v++)c.push(o[v]);return c}c=[],f=0;for(v in o)c[f++]=o[v];return c}function oS(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var f=0;f<o;f++)c.push(f);return c}c=[],f=0;for(const v in o)c[f++]=v;return c}}}function $p(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var f=oS(o),v=aS(o),D=v.length,V=0;V<D;V++)c.call(void 0,v[V],f&&f[V],o)}var Xp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lS(o,c){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var v=o[f].indexOf("="),D=null;if(0<=v){var V=o[f].substring(0,v);D=o[f].substring(v+1)}else V=o[f];c(V,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function hs(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof hs){this.h=o.h,fl(this,o.j),this.o=o.o,this.g=o.g,ml(this,o.s),this.l=o.l;var c=o.i,f=new va;f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),Wp(this,f),this.m=o.m}else o&&(c=String(o).match(Xp))?(this.h=!1,fl(this,c[1]||"",!0),this.o=ya(c[2]||""),this.g=ya(c[3]||"",!0),ml(this,c[4]),this.l=ya(c[5]||"",!0),Wp(this,c[6]||"",!0),this.m=ya(c[7]||"")):(this.h=!1,this.i=new va(null,this.h))}hs.prototype.toString=function(){var o=[],c=this.j;c&&o.push(_a(c,Zp,!0),":");var f=this.g;return(f||c=="file")&&(o.push("//"),(c=this.o)&&o.push(_a(c,Zp,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(_a(f,f.charAt(0)=="/"?hS:cS,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",_a(f,fS)),o.join("")};function In(o){return new hs(o)}function fl(o,c,f){o.j=f?ya(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function ml(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Wp(o,c,f){c instanceof va?(o.i=c,mS(o.i,o.h)):(f||(c=_a(c,dS)),o.i=new va(c,o.h))}function Se(o,c,f){o.i.set(c,f)}function pl(o){return Se(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function ya(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function _a(o,c,f){return typeof o=="string"?(o=encodeURI(o).replace(c,uS),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function uS(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Zp=/[#\/\?@]/g,cS=/[#\?:]/g,hS=/[#\?]/g,dS=/[#\?@]/g,fS=/#/g;function va(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function fi(o){o.g||(o.g=new Map,o.h=0,o.i&&lS(o.i,function(c,f){o.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=va.prototype,t.add=function(o,c){fi(this),this.i=null,o=Xs(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(c),this.h+=1,this};function Jp(o,c){fi(o),c=Xs(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function eg(o,c){return fi(o),c=Xs(o,c),o.g.has(c)}t.forEach=function(o,c){fi(this),this.g.forEach(function(f,v){f.forEach(function(D){o.call(c,D,v,this)},this)},this)},t.na=function(){fi(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),f=[];for(let v=0;v<c.length;v++){const D=o[v];for(let V=0;V<D.length;V++)f.push(c[v])}return f},t.V=function(o){fi(this);let c=[];if(typeof o=="string")eg(this,o)&&(c=c.concat(this.g.get(Xs(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)c=c.concat(o[f])}return c},t.set=function(o,c){return fi(this),this.i=null,o=Xs(this,o),eg(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function tg(o,c,f){Jp(o,c),0<f.length&&(o.i=null,o.g.set(Xs(o,c),O(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var f=0;f<c.length;f++){var v=c[f];const V=encodeURIComponent(String(v)),B=this.V(v);for(v=0;v<B.length;v++){var D=V;B[v]!==""&&(D+="="+encodeURIComponent(String(B[v]))),o.push(D)}}return this.i=o.join("&")};function Xs(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function mS(o,c){c&&!o.j&&(fi(o),o.i=null,o.g.forEach(function(f,v){var D=v.toLowerCase();v!=D&&(Jp(this,v),tg(this,D,f))},o)),o.j=c}function pS(o,c){const f=new pa;if(l.Image){const v=new Image;v.onload=_(mi,f,"TestLoadImage: loaded",!0,c,v),v.onerror=_(mi,f,"TestLoadImage: error",!1,c,v),v.onabort=_(mi,f,"TestLoadImage: abort",!1,c,v),v.ontimeout=_(mi,f,"TestLoadImage: timeout",!1,c,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=o}else c(!1)}function gS(o,c){const f=new pa,v=new AbortController,D=setTimeout(()=>{v.abort(),mi(f,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:v.signal}).then(V=>{clearTimeout(D),V.ok?mi(f,"TestPingServer: ok",!0,c):mi(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(D),mi(f,"TestPingServer: error",!1,c)})}function mi(o,c,f,v,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),v(f)}catch{}}function yS(){this.g=new Jw}function _S(o,c,f){const v=f||"";try{$p(o,function(D,V){let B=D;h(D)&&(B=ih(D)),c.push(v+V+"="+encodeURIComponent(B))})}catch(D){throw c.push(v+"type="+encodeURIComponent("_badmap")),D}}function gl(o){this.l=o.Ub||null,this.j=o.eb||!1}C(gl,sh),gl.prototype.g=function(){return new yl(this.l,this.j)},gl.prototype.i=function(o){return function(){return o}}({});function yl(o,c){ht.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(yl,ht),t=yl.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,Ta(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ta(this)),this.g&&(this.readyState=3,Ta(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ng(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function ng(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?Ea(this):Ta(this),this.readyState==3&&ng(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Ea(this))},t.Qa=function(o){this.g&&(this.response=o,Ea(this))},t.ga=function(){this.g&&Ea(this)};function Ea(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ta(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=c.next();return o.join(`\r
`)};function Ta(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(yl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ig(o){let c="";return k(o,function(f,v){c+=v,c+=":",c+=f,c+=`\r
`}),c}function mh(o,c,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=ig(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Se(o,c,f))}function Ve(o){ht.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ve,ht);var vS=/^https?$/i,ES=["POST","PUT"];t=Ve.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oh.g(),this.v=this.o?Op(this.o):Op(oh),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(V){sg(this,V);return}if(o=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var D in v)f.set(D,v[D]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const V of v.keys())f.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),D=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(ES,c,void 0))||v||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,B]of f)this.g.setRequestHeader(V,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{og(this),this.u=!0,this.g.send(o),this.u=!1}catch(V){sg(this,V)}};function sg(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,rg(o),_l(o)}function rg(o){o.A||(o.A=!0,Tt(o,"complete"),Tt(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Tt(this,"complete"),Tt(this,"abort"),_l(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_l(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ag(this):this.bb())},t.bb=function(){ag(this)};function ag(o){if(o.h&&typeof a<"u"&&(!o.v[1]||Nn(o)!=4||o.Z()!=2)){if(o.u&&Nn(o)==4)Cp(o.Ea,0,o);else if(Tt(o,"readystatechange"),Nn(o)==4){o.h=!1;try{const B=o.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var v;if(v=B===0){var D=String(o.D).match(Xp)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),v=!vS.test(D?D.toLowerCase():"")}f=v}if(f)Tt(o,"complete"),Tt(o,"success");else{o.m=6;try{var V=2<Nn(o)?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.Z()+"]",rg(o)}}finally{_l(o)}}}}function _l(o,c){if(o.g){og(o);const f=o.g,v=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||Tt(o,"ready");try{f.onreadystatechange=v}catch{}}}function og(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function Nn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<Nn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Zw(c)}};function lg(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function TS(o){const c={};o=(o.g&&2<=Nn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<o.length;v++){if(T(o[v]))continue;var f=R(o[v]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=c[D]||[];c[D]=V,V.push(f)}w(c,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ba(o,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||c}function ug(o){this.Aa=0,this.i=[],this.j=new pa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ba("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ba("baseRetryDelayMs",5e3,o),this.cb=ba("retryDelaySeedMs",1e4,o),this.Wa=ba("forwardChannelMaxRetries",2,o),this.wa=ba("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Fp(o&&o.concurrentRequestLimit),this.Da=new yS,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ug.prototype,t.la=8,t.G=1,t.connect=function(o,c,f,v){bt(0),this.W=o,this.H=c||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=_g(this,null,this.W),El(this)};function ph(o){if(cg(o),o.G==3){var c=o.U++,f=In(o.I);if(Se(f,"SID",o.K),Se(f,"RID",c),Se(f,"TYPE","terminate"),wa(o,f),c=new di(o,o.j,c),c.L=2,c.v=pl(In(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=c.v,f=!0),f||(c.g=vg(c.j,null),c.g.ea(c.v)),c.F=Date.now(),dl(c)}yg(o)}function vl(o){o.g&&(yh(o),o.g.cancel(),o.g=null)}function cg(o){vl(o),o.u&&(l.clearTimeout(o.u),o.u=null),Tl(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function El(o){if(!Gp(o.h)&&!o.s){o.s=!0;var c=o.Ga;X||H(),$||(X(),$=!0),me.add(c,o),o.B=0}}function bS(o,c){return Kp(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ma(y(o.Ga,o,c),gg(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const D=new di(this,this.j,o);let V=this.o;if(this.S&&(V?(V=p(V),A(V,this.S)):V=this.S),this.m!==null||this.O||(D.H=V,V=null),this.P)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(c+=v,4096<c){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=dg(this,D,c),f=In(this.I),Se(f,"RID",o),Se(f,"CVER",22),this.D&&Se(f,"X-HTTP-Session-Id",this.D),wa(this,f),V&&(this.O?c="headers="+encodeURIComponent(String(ig(V)))+"&"+c:this.m&&mh(f,this.m,V)),fh(this.h,D),this.Ua&&Se(f,"TYPE","init"),this.P?(Se(f,"$req",c),Se(f,"SID","null"),D.T=!0,uh(D,f,null)):uh(D,f,c),this.G=2}}else this.G==3&&(o?hg(this,o):this.i.length==0||Gp(this.h)||hg(this))};function hg(o,c){var f;c?f=c.l:f=o.U++;const v=In(o.I);Se(v,"SID",o.K),Se(v,"RID",f),Se(v,"AID",o.T),wa(o,v),o.m&&o.o&&mh(v,o.m,o.o),f=new di(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),c&&(o.i=c.D.concat(o.i)),c=dg(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),fh(o.h,f),uh(f,v,c)}function wa(o,c){o.H&&k(o.H,function(f,v){Se(c,v,f)}),o.l&&$p({},function(f,v){Se(c,v,f)})}function dg(o,c,f){f=Math.min(o.i.length,f);var v=o.l?y(o.l.Na,o.l,o):null;e:{var D=o.i;let V=-1;for(;;){const B=["count="+f];V==-1?0<f?(V=D[0].g,B.push("ofs="+V)):V=0:B.push("ofs="+V);let Ee=!0;for(let st=0;st<f;st++){let de=D[st].g;const dt=D[st].map;if(de-=V,0>de)V=Math.max(0,D[st].g-100),Ee=!1;else try{_S(dt,B,"req"+de+"_")}catch{v&&v(dt)}}if(Ee){v=B.join("&");break e}}}return o=o.i.splice(0,f),c.D=o,v}function fg(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;X||H(),$||(X(),$=!0),me.add(c,o),o.v=0}}function gh(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ma(y(o.Fa,o),gg(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,mg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ma(y(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),vl(this),mg(this))};function yh(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function mg(o){o.g=new di(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=In(o.qa);Se(c,"RID","rpc"),Se(c,"SID",o.K),Se(c,"AID",o.T),Se(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Se(c,"TO",o.ja),Se(c,"TYPE","xmlhttp"),wa(o,c),o.m&&o.o&&mh(c,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=pl(In(c)),f.m=null,f.P=!0,Bp(f,o)}t.Za=function(){this.C!=null&&(this.C=null,vl(this),gh(this),bt(19))};function Tl(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function pg(o,c){var f=null;if(o.g==c){Tl(o),yh(o),o.g=null;var v=2}else if(dh(o.h,c))f=c.D,Qp(o.h,c),v=1;else return;if(o.G!=0){if(c.o)if(v==1){f=c.m?c.m.length:0,c=Date.now()-c.F;var D=o.B;v=ul(),Tt(v,new Pp(v,f)),El(o)}else fg(o);else if(D=c.s,D==3||D==0&&0<c.X||!(v==1&&bS(o,c)||v==2&&gh(o)))switch(f&&0<f.length&&(c=o.h,c.i=c.i.concat(f)),D){case 1:ds(o,5);break;case 4:ds(o,10);break;case 3:ds(o,6);break;default:ds(o,2)}}}function gg(o,c){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*c}function ds(o,c){if(o.j.info("Error code "+c),c==2){var f=y(o.fb,o),v=o.Xa;const D=!v;v=new hs(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||fl(v,"https"),pl(v),D?pS(v.toString(),f):gS(v.toString(),f)}else bt(2);o.G=0,o.l&&o.l.sa(c),yg(o),cg(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function yg(o){if(o.G=0,o.ka=[],o.l){const c=Yp(o.h);(c.length!=0||o.i.length!=0)&&(j(o.ka,c),j(o.ka,o.i),o.h.i.length=0,O(o.i),o.i.length=0),o.l.ra()}}function _g(o,c,f){var v=f instanceof hs?In(f):new hs(f);if(v.g!="")c&&(v.g=c+"."+v.g),ml(v,v.s);else{var D=l.location;v=D.protocol,c=c?c+"."+D.hostname:D.hostname,D=+D.port;var V=new hs(null);v&&fl(V,v),c&&(V.g=c),D&&ml(V,D),f&&(V.l=f),v=V}return f=o.D,c=o.ya,f&&c&&Se(v,f,c),Se(v,"VER",o.la),wa(o,v),v}function vg(o,c,f){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ve(new gl({eb:f})):new Ve(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eg(){}t=Eg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function bl(){}bl.prototype.g=function(o,c){return new Mt(o,c)};function Mt(o,c){ht.call(this),this.g=new ug(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!T(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!T(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new Ws(this)}C(Mt,ht),Mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mt.prototype.close=function(){ph(this.g)},Mt.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=ih(o),o=f);c.i.push(new rS(c.Ya++,o)),c.G==3&&El(c)},Mt.prototype.N=function(){this.g.l=null,delete this.j,ph(this.g),delete this.g,Mt.aa.N.call(this)};function Tg(o){rh.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const f in c){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}C(Tg,rh);function bg(){ah.call(this),this.status=1}C(bg,ah);function Ws(o){this.g=o}C(Ws,Eg),Ws.prototype.ua=function(){Tt(this.g,"a")},Ws.prototype.ta=function(o){Tt(this.g,new Tg(o))},Ws.prototype.sa=function(o){Tt(this.g,new bg)},Ws.prototype.ra=function(){Tt(this.g,"b")},bl.prototype.createWebChannel=bl.prototype.g,Mt.prototype.send=Mt.prototype.o,Mt.prototype.open=Mt.prototype.m,Mt.prototype.close=Mt.prototype.close,kT=function(){return new bl},OT=function(){return ul()},DT=us,hf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},cl.NO_ERROR=0,cl.TIMEOUT=8,cl.HTTP_ERROR=6,su=cl,Lp.COMPLETE="complete",NT=Lp,kp.EventType=da,da.OPEN="a",da.CLOSE="b",da.ERROR="c",da.MESSAGE="d",ht.prototype.listen=ht.prototype.K,za=kp,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,IT=Ve}).apply(typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{});const n0="@firebase/firestore",i0="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sa="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new Im("@firebase/firestore");function ar(){return Vs.logLevel}function G(t,...e){if(Vs.logLevel<=ae.DEBUG){const n=e.map(Om);Vs.debug(`Firestore (${sa}): ${t}`,...n)}}function ti(t,...e){if(Vs.logLevel<=ae.ERROR){const n=e.map(Om);Vs.error(`Firestore (${sa}): ${t}`,...n)}}function Hr(t,...e){if(Vs.logLevel<=ae.WARN){const n=e.map(Om);Vs.warn(`Firestore (${sa}): ${t}`,...n)}}function Om(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: `+t;throw ti(e),new Error(e)}function ge(t,e){t||Z()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends ai{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class V2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class j2{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0);let i=this.i;const s=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let r=new Yn;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Yn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=r;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Yn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ge(typeof i.accessToken=="string"),new MT(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string"),new pt(e)}}class P2{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class L2{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new P2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class U2{constructor(e,n){this.A=n,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Lt(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0);const i=r=>{r.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.R;return this.R=r.token,G("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?s(r):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new s0(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string"),this.R=n.token,new s0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=z2(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%62))}return i}}function ue(t,e){return t<e?-1:t>e?1:0}function Fr(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=-62135596800,a0=1e6;class $e{static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*a0);return new $e(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<r0)throw new K(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a0}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-r0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{static fromTimestamp(e){return new J(e)}static min(){return new J(new $e(0,0))}static max(){return new J(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="__name__";class dn{constructor(e,n,i){n===void 0?n=0:n>e.length&&Z(),i===void 0?i=e.length-n:i>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return dn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dn?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=dn.compareSegments(e.get(s),n.get(s));if(r!==0)return r}return Math.sign(e.length-n.length)}static compareSegments(e,n){const i=dn.isNumericId(e),s=dn.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?dn.extractNumericId(e).compare(dn.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hi.fromString(e.substring(4,e.length-2))}}class Ae extends dn{construct(e,n,i){return new Ae(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new K(P.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const B2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends dn{construct(e,n,i){return new lt(e,n,i)}static isValidIdentifier(e){return B2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===o0}static keyField(){return new lt([o0])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new K(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new K(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new K(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Ae.fromString(e))}static fromName(e){return new Y(Ae.fromString(e).popFirst(5))}static empty(){return new Y(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Ae(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=-1;function q2(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(i===1e9?new $e(n+1,0):new $e(n,i));return new $i(s,Y.empty(),e)}function H2(t){return new $i(t.readTime,t.key,Co)}class $i{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new $i(J.min(),Y.empty(),Co)}static max(){return new $i(J.max(),Y.empty(),Co)}}function F2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(t){if(t.code!==P.FAILED_PRECONDITION||t.message!==G2)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,i)=>{n(e)})}static reject(e){return new L((n,i)=>{i(e)})}static waitFor(e){return new L((n,i)=>{let s=0,r=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&n()},u=>i(u))}),a=!0,r===s&&n()})}static or(e){let n=L.resolve(!1);for(const i of e)n=n.next(s=>s?L.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new L((i,s)=>{const r=e.length,a=new Array(r);let l=0;for(let u=0;u<r;u++){const h=u;n(e[h]).next(m=>{a[h]=m,++l,l===r&&i(a)},m=>s(m))}})}static doWhile(e,n){return new L((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}function Q2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function aa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.oe(i),this._e=i=>n.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Nc.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km=-1;function Dc(t){return t==null}function Fu(t){return t===0&&1/t==-1/0}function Y2(t){return typeof t=="number"&&Number.isInteger(t)&&!Fu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="";function $2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=l0(e)),e=X2(t.get(n),e);return l0(e)}function X2(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const r=t.charAt(s);switch(r){case"\0":n+="";break;case jT:n+="";break;default:n+=r}}return n}function l0(t){return t+jT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ss(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bl(this.root,e,this.comparator,!0)}}class Bl{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??at.RED,this.left=s??at.EMPTY,this.right=r??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new at(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return at.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,i,s,r){return this}insert(e,n,i){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new c0(this.data.getIterator())}getIteratorFrom(e){return new c0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class c0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new Xe(lt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Fr(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new LT("Invalid base64 string: "+r):r}}(e);return new ct(n)}static fromUint8Array(e){const n=function(s){let r="";for(let a=0;a<s.length;++a)r+=String.fromCharCode(s[a]);return r}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const W2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xi(t){if(ge(!!t),typeof t=="string"){let e=0;const n=W2.exec(t);if(ge(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ze(t.seconds),nanos:ze(t.nanos)}}function ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wi(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT="server_timestamp",zT="__type__",BT="__previous_value__",qT="__local_write_time__";function Mm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[zT])===null||n===void 0?void 0:n.stringValue)===UT}function Oc(t){const e=t.mapValue.fields[BT];return Mm(e)?Oc(e):e}function Io(t){const e=Xi(t.mapValue.fields[qT].timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n,i,s,r,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}const Gu="(default)";class No{constructor(e,n){this.projectId=e,this.database=n||Gu}static empty(){return new No("","")}get isDefaultDatabase(){return this.database===Gu}isEqual(e){return e instanceof No&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="__type__",J2="__max__",ql={mapValue:{}},FT="__vector__",Ku="value";function Zi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mm(t)?4:tC(t)?9007199254740991:eC(t)?10:11:Z()}function wn(t,e){if(t===e)return!0;const n=Zi(t);if(n!==Zi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Io(t).isEqual(Io(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const a=Xi(s.timestampValue),l=Xi(r.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Wi(s.bytesValue).isEqual(Wi(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return ze(s.geoPointValue.latitude)===ze(r.geoPointValue.latitude)&&ze(s.geoPointValue.longitude)===ze(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return ze(s.integerValue)===ze(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const a=ze(s.doubleValue),l=ze(r.doubleValue);return a===l?Fu(a)===Fu(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Fr(t.arrayValue.values||[],e.arrayValue.values||[],wn);case 10:case 11:return function(s,r){const a=s.mapValue.fields||{},l=r.mapValue.fields||{};if(u0(a)!==u0(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!wn(a[u],l[u])))return!1;return!0}(t,e);default:return Z()}}function Do(t,e){return(t.values||[]).find(n=>wn(n,e))!==void 0}function Gr(t,e){if(t===e)return 0;const n=Zi(t),i=Zi(e);if(n!==i)return ue(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(r,a){const l=ze(r.integerValue||r.doubleValue),u=ze(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return h0(t.timestampValue,e.timestampValue);case 4:return h0(Io(t),Io(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(r,a){const l=Wi(r),u=Wi(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(r,a){const l=r.split("/"),u=a.split("/");for(let h=0;h<l.length&&h<u.length;h++){const m=ue(l[h],u[h]);if(m!==0)return m}return ue(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,a){const l=ue(ze(r.latitude),ze(a.latitude));return l!==0?l:ue(ze(r.longitude),ze(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return d0(t.arrayValue,e.arrayValue);case 10:return function(r,a){var l,u,h,m;const g=r.fields||{},y=a.fields||{},_=(l=g[Ku])===null||l===void 0?void 0:l.arrayValue,C=(u=y[Ku])===null||u===void 0?void 0:u.arrayValue,O=ue(((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0,((m=C==null?void 0:C.values)===null||m===void 0?void 0:m.length)||0);return O!==0?O:d0(_,C)}(t.mapValue,e.mapValue);case 11:return function(r,a){if(r===ql.mapValue&&a===ql.mapValue)return 0;if(r===ql.mapValue)return 1;if(a===ql.mapValue)return-1;const l=r.fields||{},u=Object.keys(l),h=a.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let g=0;g<u.length&&g<m.length;++g){const y=ue(u[g],m[g]);if(y!==0)return y;const _=Gr(l[u[g]],h[m[g]]);if(_!==0)return _}return ue(u.length,m.length)}(t.mapValue,e.mapValue);default:throw Z()}}function h0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Xi(t),i=Xi(e),s=ue(n.seconds,i.seconds);return s!==0?s:ue(n.nanos,i.nanos)}function d0(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=Gr(n[s],i[s]);if(r)return r}return ue(n.length,i.length)}function Kr(t){return df(t)}function df(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Xi(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=df(r);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const a of i)r?r=!1:s+=",",s+=`${a}:${df(n.fields[a])}`;return s+"}"}(t.mapValue):Z()}function ru(t){switch(Zi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Oc(t);return e?16+ru(e):16;case 5:return 2*t.stringValue.length;case 6:return Wi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+ru(r),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return ss(i.fields,(r,a)=>{s+=r.length+ru(a)}),s}(t.mapValue);default:throw Z()}}function f0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ff(t){return!!t&&"integerValue"in t}function Vm(t){return!!t&&"arrayValue"in t}function m0(t){return!!t&&"nullValue"in t}function p0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function au(t){return!!t&&"mapValue"in t}function eC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[HT])===null||n===void 0?void 0:n.stringValue)===FT}function ao(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ss(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ao(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ao(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===J2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!au(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ao(n)}setAll(e){let n=lt.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,s),i={},s=[],n=l.popLast()}a?i[l.lastSegment()]=ao(a):s.push(l.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());au(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];au(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){ss(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new It(ao(this.value))}}function GT(t){const e=[];return ss(t.fields,(n,i)=>{const s=new lt([n]);if(au(i)){const r=GT(i.mapValue).fields;if(r.length===0)e.push(s);else for(const a of r)e.push(s.child(a))}else e.push(s)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n,i,s,r,a,l){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=a,this.documentState=l}static newInvalidDocument(e){return new gt(e,0,J.min(),J.min(),J.min(),It.empty(),0)}static newFoundDocument(e,n,i,s){return new gt(e,1,n,J.min(),i,s,0)}static newNoDocument(e,n){return new gt(e,2,n,J.min(),J.min(),It.empty(),0)}static newUnknownDocument(e,n){return new gt(e,3,n,J.min(),J.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n){this.position=e,this.inclusive=n}}function g0(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],a=t.position[s];if(r.field.isKeyField()?i=Y.comparator(Y.fromName(a.referenceValue),n.key):i=Gr(a,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function y0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n="asc"){this.field=e,this.dir=n}}function nC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{}class Fe extends KT{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new sC(e,n,i):n==="array-contains"?new oC(e,i):n==="in"?new lC(e,i):n==="not-in"?new uC(e,i):n==="array-contains-any"?new cC(e,i):new Fe(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new rC(e,i):new aC(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gr(n,this.value)):n!==null&&Zi(this.value)===Zi(n)&&this.matchesComparison(Gr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cn extends KT{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new cn(e,n)}matches(e){return QT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function QT(t){return t.op==="and"}function YT(t){return iC(t)&&QT(t)}function iC(t){for(const e of t.filters)if(e instanceof cn)return!1;return!0}function mf(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+Kr(t.value);if(YT(t))return t.filters.map(e=>mf(e)).join(",");{const e=t.filters.map(n=>mf(n)).join(",");return`${t.op}(${e})`}}function $T(t,e){return t instanceof Fe?function(i,s){return s instanceof Fe&&i.op===s.op&&i.field.isEqual(s.field)&&wn(i.value,s.value)}(t,e):t instanceof cn?function(i,s){return s instanceof cn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,a,l)=>r&&$T(a,s.filters[l]),!0):!1}(t,e):void Z()}function XT(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${Kr(n.value)}`}(t):t instanceof cn?function(n){return n.op.toString()+" {"+n.getFilters().map(XT).join(" ,")+"}"}(t):"Filter"}class sC extends Fe{constructor(e,n,i){super(e,n,i),this.key=Y.fromName(i.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class rC extends Fe{constructor(e,n){super(e,"in",n),this.keys=WT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class aC extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=WT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function WT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Y.fromName(i.referenceValue))}class oC extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vm(n)&&Do(n.arrayValue,this.value)}}class lC extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Do(this.value.arrayValue,n)}}class uC extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Do(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Do(this.value.arrayValue,n)}}class cC extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Do(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n=null,i=[],s=[],r=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.le=null}}function _0(t,e=null,n=[],i=[],s=null,r=null,a=null){return new hC(t,e,n,i,s,r,a)}function jm(t){const e=ee(t);if(e.le===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>mf(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Dc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Kr(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Kr(i)).join(",")),e.le=n}return e.le}function Pm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$T(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!y0(t.startAt,e.startAt)&&y0(t.endAt,e.endAt)}function pf(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n=null,i=[],s=[],r=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function dC(t,e,n,i,s,r,a,l){return new Wo(t,e,n,i,s,r,a,l)}function Lm(t){return new Wo(t)}function v0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ZT(t){return t.collectionGroup!==null}function oo(t){const e=ee(t);if(e.he===null){e.he=[];const n=new Set;for(const r of e.explicitOrderBy)e.he.push(r),n.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Xe(lt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.he.push(new Yu(r,i))}),n.has(lt.keyField().canonicalString())||e.he.push(new Yu(lt.keyField(),i))}return e.he}function _n(t){const e=ee(t);return e.Pe||(e.Pe=fC(e,oo(t))),e.Pe}function fC(t,e){if(t.limitType==="F")return _0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new Yu(s.field,r)});const n=t.endAt?new Qu(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Qu(t.startAt.position,t.startAt.inclusive):null;return _0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function gf(t,e){const n=t.filters.concat([e]);return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yf(t,e,n){return new Wo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kc(t,e){return Pm(_n(t),_n(e))&&t.limitType===e.limitType}function JT(t){return`${jm(_n(t))}|lt:${t.limitType}`}function or(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>XT(s)).join(", ")}]`),Dc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Kr(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Kr(s)).join(",")),`Target(${i})`}(_n(t))}; limitType=${t.limitType})`}function Mc(t,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):Y.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(t,e)&&function(i,s){for(const r of oo(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(a,l,u){const h=g0(a,l,u);return a.inclusive?h<=0:h<0}(i.startAt,oo(i),s)||i.endAt&&!function(a,l,u){const h=g0(a,l,u);return a.inclusive?h>=0:h>0}(i.endAt,oo(i),s))}(t,e)}function mC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eb(t){return(e,n)=>{let i=!1;for(const s of oo(t)){const r=pC(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function pC(t,e,n){const i=t.field.isKeyField()?Y.comparator(e.key,n.key):function(r,a,l){const u=a.data.field(r),h=l.data.field(r);return u!==null&&h!==null?Gr(u,h):Z()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ss(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return PT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new ke(Y.comparator);function ni(){return gC}const tb=new ke(Y.comparator);function Ba(...t){let e=tb;for(const n of t)e=e.insert(n.key,n);return e}function nb(t){let e=tb;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Es(){return lo()}function ib(){return lo()}function lo(){return new Gs(t=>t.toString(),(t,e)=>t.isEqual(e))}const yC=new ke(Y.comparator),_C=new Xe(Y.comparator);function oe(...t){let e=_C;for(const n of t)e=e.add(n);return e}const vC=new Xe(ue);function EC(){return vC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(e)?"-0":e}}function sb(t){return{integerValue:""+t}}function TC(t,e){return Y2(e)?sb(e):Um(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this._=void 0}}function bC(t,e,n){return t instanceof $u?function(s,r){const a={fields:{[zT]:{stringValue:UT},[qT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Mm(r)&&(r=Oc(r)),r&&(a.fields[BT]=r),{mapValue:a}}(n,e):t instanceof Oo?ab(t,e):t instanceof ko?ob(t,e):function(s,r){const a=rb(s,r),l=E0(a)+E0(s.Ie);return ff(a)&&ff(s.Ie)?sb(l):Um(s.serializer,l)}(t,e)}function wC(t,e,n){return t instanceof Oo?ab(t,e):t instanceof ko?ob(t,e):n}function rb(t,e){return t instanceof Xu?function(i){return ff(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class $u extends Vc{}class Oo extends Vc{constructor(e){super(),this.elements=e}}function ab(t,e){const n=lb(e);for(const i of t.elements)n.some(s=>wn(s,i))||n.push(i);return{arrayValue:{values:n}}}class ko extends Vc{constructor(e){super(),this.elements=e}}function ob(t,e){let n=lb(e);for(const i of t.elements)n=n.filter(s=>!wn(s,i));return{arrayValue:{values:n}}}class Xu extends Vc{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function E0(t){return ze(t.integerValue||t.doubleValue)}function lb(t){return Vm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function SC(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Oo&&s instanceof Oo||i instanceof ko&&s instanceof ko?Fr(i.elements,s.elements,wn):i instanceof Xu&&s instanceof Xu?wn(i.Ie,s.Ie):i instanceof $u&&s instanceof $u}(t.transform,e.transform)}class AC{constructor(e,n){this.version=e,this.transformResults=n}}class Nt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nt}static exists(e){return new Nt(void 0,e)}static updateTime(e){return new Nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ou(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class jc{}function ub(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Pc(t.key,Nt.none()):new Zo(t.key,t.data,Nt.none());{const n=t.data,i=It.empty();let s=new Xe(lt.comparator);for(let r of e.fields)if(!s.has(r)){let a=n.field(r);a===null&&r.length>1&&(r=r.popLast(),a=n.field(r)),a===null?i.delete(r):i.set(r,a),s=s.add(r)}return new rs(t.key,i,new Ut(s.toArray()),Nt.none())}}function xC(t,e,n){t instanceof Zo?function(s,r,a){const l=s.value.clone(),u=b0(s.fieldTransforms,r,a.transformResults);l.setAll(u),r.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof rs?function(s,r,a){if(!ou(s.precondition,r))return void r.convertToUnknownDocument(a.version);const l=b0(s.fieldTransforms,r,a.transformResults),u=r.data;u.setAll(cb(s)),u.setAll(l),r.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,r,a){r.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function uo(t,e,n,i){return t instanceof Zo?function(r,a,l,u){if(!ou(r.precondition,a))return l;const h=r.value.clone(),m=w0(r.fieldTransforms,u,a);return h.setAll(m),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof rs?function(r,a,l,u){if(!ou(r.precondition,a))return l;const h=w0(r.fieldTransforms,u,a),m=a.data;return m.setAll(cb(r)),m.setAll(h),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(g=>g.field))}(t,e,n,i):function(r,a,l){return ou(r.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function RC(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=rb(i.transform,s||null);r!=null&&(n===null&&(n=It.empty()),n.set(i.field,r))}return n||null}function T0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Fr(i,s,(r,a)=>SC(r,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zo extends jc{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class rs extends jc{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function cb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function b0(t,e,n){const i=new Map;ge(t.length===n.length);for(let s=0;s<n.length;s++){const r=t[s],a=r.transform,l=e.data.field(r.field);i.set(r.field,wC(a,l,n[s]))}return i}function w0(t,e,n){const i=new Map;for(const s of t){const r=s.transform,a=n.data.field(s.field);i.set(s.field,bC(r,a,e))}return i}class Pc extends jc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CC extends jc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&xC(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=uo(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=uo(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=ib();return this.mutations.forEach(s=>{const r=e.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=n.has(s.key)?null:l;const u=ub(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(J.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Fr(this.mutations,e.mutations,(n,i)=>T0(n,i))&&Fr(this.baseMutations,e.baseMutations,(n,i)=>T0(n,i))}}class zm{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){ge(e.mutations.length===i.length);let s=function(){return yC}();const r=e.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new zm(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be,ce;function OC(t){switch(t){case P.OK:return Z();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return Z()}}function hb(t){if(t===void 0)return ti("GRPC error has no .code"),P.UNKNOWN;switch(t){case Be.OK:return P.OK;case Be.CANCELLED:return P.CANCELLED;case Be.UNKNOWN:return P.UNKNOWN;case Be.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Be.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Be.INTERNAL:return P.INTERNAL;case Be.UNAVAILABLE:return P.UNAVAILABLE;case Be.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Be.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Be.NOT_FOUND:return P.NOT_FOUND;case Be.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Be.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Be.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Be.ABORTED:return P.ABORTED;case Be.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Be.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Be.DATA_LOSS:return P.DATA_LOSS;default:return Z()}}(ce=Be||(Be={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new Hi([4294967295,4294967295],0);function S0(t){const e=kC().encode(t),n=new CT;return n.update(e),new Uint8Array(n.digest())}function A0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Hi([n,i],0),new Hi([s,r],0)]}class Bm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new qa(`Invalid padding: ${n}`);if(i<0)throw new qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new qa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new qa(`Invalid padding when bitmap length is 0: ${n}`);this.Ee=8*e.length-n,this.de=Hi.fromNumber(this.Ee)}Ae(e,n,i){let s=e.add(n.multiply(Hi.fromNumber(i)));return s.compare(MC)===1&&(s=new Hi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const n=S0(e),[i,s]=A0(n);for(let r=0;r<this.hashCount;r++){const a=this.Ae(i,s,r);if(!this.Re(a))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),a=new Bm(r,s,n);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.Ee===0)return;const n=S0(e),[i,s]=A0(n);for(let r=0;r<this.hashCount;r++){const a=this.Ae(i,s,r);this.Ve(a)}}Ve(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Jo.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Lc(J.min(),s,new ke(ue),ni(),oe())}}class Jo{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Jo(i,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n,i,s){this.me=e,this.removedTargetIds=n,this.key=i,this.fe=s}}class db{constructor(e,n){this.targetId=e,this.ge=n}}class fb{constructor(e,n,i=ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class x0{constructor(){this.pe=0,this.ye=R0(),this.we=ct.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=oe(),n=oe(),i=oe();return this.ye.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Z()}}),new Jo(this.we,this.be,e,n,i)}Me(){this.Se=!1,this.ye=R0()}xe(e,n){this.Se=!0,this.ye=this.ye.insert(e,n)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,ge(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class VC{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ni(),this.$e=Hl(),this.Ke=Hl(),this.Ue=new ke(ue)}We(e){for(const n of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(n,e.fe):this.ze(n,e.key,e.fe);for(const n of e.removedTargetIds)this.ze(n,e.key,e.fe)}je(e){this.forEachTarget(e,n=>{const i=this.He(n);switch(e.state){case 0:this.Je(n)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(n);break;case 3:this.Je(n)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(n)&&(this.Ye(n),i.Ce(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qe.forEach((i,s)=>{this.Je(s)&&n(s)})}Ze(e){const n=e.targetId,i=e.ge.count,s=this.Xe(n);if(s){const r=s.target;if(pf(r))if(i===0){const a=new Y(r.path);this.ze(n,a,gt.newNoDocument(a,J.min()))}else ge(i===1);else{const a=this.et(n);if(a!==i){const l=this.tt(e),u=l?this.nt(l,e,a):1;if(u!==0){this.Ye(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(n,h)}}}}}tt(e){const n=e.ge.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let a,l;try{a=Wi(i).toUint8Array()}catch(u){if(u instanceof LT)return Hr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Bm(a,s,r)}catch(u){return Hr(u instanceof qa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(e,n,i){return n.ge.count===i-this.st(e,n.targetId)?0:2}st(e,n){const i=this.ke.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const a=this.ke.it(),l=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(l)||(this.ze(n,r,null),s++)}),s}ot(e){const n=new Map;this.qe.forEach((r,a)=>{const l=this.Xe(a);if(l){if(r.current&&pf(l.target)){const u=new Y(l.target.path);this._t(u).has(a)||this.ut(a,u)||this.ze(a,u,gt.newNoDocument(u,e))}r.ve&&(n.set(a,r.Fe()),r.Me())}});let i=oe();this.Ke.forEach((r,a)=>{let l=!0;a.forEachWhile(u=>{const h=this.Xe(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(r))}),this.Qe.forEach((r,a)=>a.setReadTime(e));const s=new Lc(e,n,this.Ue,this.Qe,i);return this.Qe=ni(),this.$e=Hl(),this.Ke=Hl(),this.Ue=new ke(ue),s}Ge(e,n){if(!this.Je(e))return;const i=this.ut(e,n.key)?2:0;this.He(e).xe(n.key,i),this.Qe=this.Qe.insert(n.key,n),this.$e=this.$e.insert(n.key,this._t(n.key).add(e)),this.Ke=this.Ke.insert(n.key,this.ct(n.key).add(e))}ze(e,n,i){if(!this.Je(e))return;const s=this.He(e);this.ut(e,n)?s.xe(n,1):s.Oe(n),this.Ke=this.Ke.insert(n,this.ct(n).delete(e)),this.Ke=this.Ke.insert(n,this.ct(n).add(e)),i&&(this.Qe=this.Qe.insert(n,i))}removeTarget(e){this.qe.delete(e)}et(e){const n=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let n=this.qe.get(e);return n||(n=new x0,this.qe.set(e,n)),n}ct(e){let n=this.Ke.get(e);return n||(n=new Xe(ue),this.Ke=this.Ke.insert(e,n)),n}_t(e){let n=this.$e.get(e);return n||(n=new Xe(ue),this.$e=this.$e.insert(e,n)),n}Je(e){const n=this.Xe(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Xe(e){const n=this.qe.get(e);return n&&n.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new x0),this.ke.getRemoteKeysForTarget(e).forEach(n=>{this.ze(e,n,null)})}ut(e,n){return this.ke.getRemoteKeysForTarget(e).has(n)}}function Hl(){return new ke(Y.comparator)}function R0(){return new ke(Y.comparator)}const jC={asc:"ASCENDING",desc:"DESCENDING"},PC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LC={and:"AND",or:"OR"};class UC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _f(t,e){return t.useProto3Json||Dc(e)?e:{value:e}}function Wu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zC(t,e){return Wu(t,e.toTimestamp())}function vn(t){return ge(!!t),J.fromTimestamp(function(n){const i=Xi(n);return new $e(i.seconds,i.nanos)}(t))}function qm(t,e){return vf(t,e).canonicalString()}function vf(t,e){const n=function(s){return new Ae(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pb(t){const e=Ae.fromString(t);return ge(Eb(e)),e}function Ef(t,e){return qm(t.databaseId,e.path)}function rd(t,e){const n=pb(e);if(n.get(1)!==t.databaseId.projectId)throw new K(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(yb(n))}function gb(t,e){return qm(t.databaseId,e)}function BC(t){const e=pb(t);return e.length===4?Ae.emptyPath():yb(e)}function Tf(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yb(t){return ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function C0(t,e,n){return{name:Ef(t,e),fields:n.value.mapValue.fields}}function qC(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(h,m){return h.useProto3Json?(ge(m===void 0||typeof m=="string"),ct.fromBase64String(m||"")):(ge(m===void 0||m instanceof Buffer||m instanceof Uint8Array),ct.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(h){const m=h.code===void 0?P.UNKNOWN:hb(h.code);return new K(m,h.message||"")}(a);n=new fb(i,s,r,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=rd(t,i.document.name),r=vn(i.document.updateTime),a=i.document.createTime?vn(i.document.createTime):J.min(),l=new It({mapValue:{fields:i.document.fields}}),u=gt.newFoundDocument(s,r,a,l),h=i.targetIds||[],m=i.removedTargetIds||[];n=new lu(h,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=rd(t,i.document),r=i.readTime?vn(i.readTime):J.min(),a=gt.newNoDocument(s,r),l=i.removedTargetIds||[];n=new lu([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=rd(t,i.document),r=i.removedTargetIds||[];n=new lu([],r,s,null)}else{if(!("filter"in e))return Z();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,a=new DC(s,r),l=i.targetId;n=new db(l,a)}}return n}function HC(t,e){let n;if(e instanceof Zo)n={update:C0(t,e.key,e.value)};else if(e instanceof Pc)n={delete:Ef(t,e.key)};else if(e instanceof rs)n={update:C0(t,e.key,e.data),updateMask:ZC(e.fieldMask)};else{if(!(e instanceof CC))return Z();n={verify:Ef(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,a){const l=a.transform;if(l instanceof $u)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Oo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ko)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Xu)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw Z()}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:zC(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Z()}(t,e.precondition)),n}function FC(t,e){return t&&t.length>0?(ge(e!==void 0),t.map(n=>function(s,r){let a=s.updateTime?vn(s.updateTime):vn(r);return a.isEqual(J.min())&&(a=vn(r)),new AC(a,s.transformResults||[])}(n,e))):[]}function GC(t,e){return{documents:[gb(t,e.path)]}}function KC(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=gb(t,s);const r=function(h){if(h.length!==0)return vb(cn.create(h,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const a=function(h){if(h.length!==0)return h.map(m=>function(y){return{field:lr(y.field),direction:$C(y.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=_f(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ht:n,parent:s}}function QC(t){let e=BC(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){ge(i===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let r=[];n.where&&(r=function(g){const y=_b(g);return y instanceof cn&&YT(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(y=>function(C){return new Yu(ur(C.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(g){let y;return y=typeof g=="object"?g.value:g,Dc(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(g){const y=!!g.before,_=g.values||[];return new Qu(_,y)}(n.startAt));let h=null;return n.endAt&&(h=function(g){const y=!g.before,_=g.values||[];return new Qu(_,y)}(n.endAt)),dC(e,s,a,r,l,"F",u,h)}function YC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _b(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ur(n.unaryFilter.field);return Fe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=ur(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ur(n.unaryFilter.field);return Fe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ur(n.unaryFilter.field);return Fe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(ur(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cn.create(n.compositeFilter.filters.map(i=>_b(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function $C(t){return jC[t]}function XC(t){return PC[t]}function WC(t){return LC[t]}function lr(t){return{fieldPath:t.canonicalString()}}function ur(t){return lt.fromServerFormat(t.fieldPath)}function vb(t){return t instanceof Fe?function(n){if(n.op==="=="){if(p0(n.value))return{unaryFilter:{field:lr(n.field),op:"IS_NAN"}};if(m0(n.value))return{unaryFilter:{field:lr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(p0(n.value))return{unaryFilter:{field:lr(n.field),op:"IS_NOT_NAN"}};if(m0(n.value))return{unaryFilter:{field:lr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lr(n.field),op:XC(n.op),value:n.value}}}(t):t instanceof cn?function(n){const i=n.getFilters().map(s=>vb(s));return i.length===1?i[0]:{compositeFilter:{op:WC(n.op),filters:i}}}(t):Z()}function ZC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Eb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n,i,s,r=J.min(),a=J.min(),l=ct.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.Tt=e}}function eI(t){const e=QC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(){this.Tn=new nI}addToCollectionParentIndex(e,n){return this.Tn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Tn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve($i.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve($i.min())}updateCollectionGroup(e,n,i){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class nI{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new Xe(Ae.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Xe(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tb=41943040;class Ct{static withCacheSize(e){return new Ct(e,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ct.DEFAULT_COLLECTION_PERCENTILE=10,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ct.DEFAULT=new Ct(Tb,Ct.DEFAULT_COLLECTION_PERCENTILE,Ct.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ct.DISABLED=new Ct(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Qr(0)}static Un(){return new Qr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="LruGarbageCollector",iI=1048576;function D0([t,e],[n,i]){const s=ue(t,n);return s===0?ue(e,i):s}class sI{constructor(e){this.Hn=e,this.buffer=new Xe(D0),this.Jn=0}Yn(){return++this.Jn}Zn(e){const n=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();D0(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rI{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){G(N0,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){aa(n)?G(N0,"Ignoring IndexedDB error during garbage collection: ",n):await ra(n)}await this.er(3e5)})}}class aI{constructor(e,n){this.tr=e,this.params=n}calculateTargetCount(e,n){return this.tr.nr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Nc.ae);const i=new sI(n);return this.tr.forEachTarget(e,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.tr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.tr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(I0)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),I0):this.ir(e,n))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,n){let i,s,r,a,l,u,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(e,s))).next(g=>(i=g,l=Date.now(),this.removeTargets(e,i,n))).next(g=>(r=g,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(g=>(h=Date.now(),ar()<=ae.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${r} targets in `+(u-l)+`ms
	Removed ${g} documents in `+(h-u)+`ms
Total Duration: ${h-m}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:g})))}}function oI(t,e){return new aI(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.changes=new Gs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?L.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&uo(i.mutation,s,Ut.empty(),$e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,oe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=oe()){const s=Es();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let a=Ba();return r.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=Es();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,oe()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,i,s){let r=ni();const a=lo(),l=function(){return lo()}();return n.forEach((u,h)=>{const m=i.get(h.key);s.has(h.key)&&(m===void 0||m.mutation instanceof rs)?r=r.insert(h.key,h):m!==void 0?(a.set(h.key,m.mutation.getFieldMask()),uo(m.mutation,h,m.mutation.getFieldMask(),$e.now())):a.set(h.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,r).next(u=>(u.forEach((h,m)=>a.set(h,m)),n.forEach((h,m)=>{var g;return l.set(h,new uI(m,(g=a.get(h))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const i=lo();let s=new ke((a,l)=>a-l),r=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let m=i.get(u)||Ut.empty();m=l.applyToLocalView(h,m),i.set(u,m);const g=(s.get(l.batchId)||oe()).add(u);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,m=u.value,g=ib();m.forEach(y=>{if(!r.has(y)){const _=ub(n.get(y),i.get(y));_!==null&&g.set(y,_),r=r.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,h,g))}return L.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(a){return Y.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ZT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):L.resolve(Es());let l=Co,u=r;return a.next(h=>L.forEach(h,(m,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),r.get(m)?L.resolve():this.remoteDocumentCache.getEntry(e,m).next(y=>{u=u.insert(m,y)}))).next(()=>this.populateOverlays(e,h,r)).next(()=>this.computeViews(e,u,h,oe())).next(m=>({batchId:l,changes:nb(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(i=>{let s=Ba();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const r=n.collectionGroup;let a=Ba();return this.indexManager.getCollectionParents(e,r).next(l=>L.forEach(l,u=>{const h=function(g,y){return new Wo(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(r));return this.getDocumentsMatchingCollectionQuery(e,h,i,s).next(m=>{m.forEach((g,y)=>{a=a.insert(g,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(r=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r,s))).next(a=>{r.forEach((u,h)=>{const m=h.getKey();a.get(m)===null&&(a=a.insert(m,gt.newInvalidDocument(m)))});let l=Ba();return a.forEach((u,h)=>{const m=r.get(u);m!==void 0&&uo(m.mutation,h,Ut.empty(),$e.now()),Mc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,n){return L.resolve(this.dr.get(n))}saveBundleMetadata(e,n){return this.dr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:vn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Ar.get(n))}saveNamedQuery(e,n){return this.Ar.set(n.name,function(s){return{name:s.name,query:eI(s.bundledQuery),readTime:vn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.overlays=new ke(Y.comparator),this.Rr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Es();return L.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.Et(e,n,r)}),L.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Rr.delete(i)),L.resolve()}getOverlaysForCollection(e,n,i){const s=Es(),r=n.length+1,a=new Y(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===r&&u.largestBatchId>i&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new ke((h,m)=>h-m);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let m=r.get(h.largestBatchId);m===null&&(m=Es(),r=r.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const l=Es(),u=r.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,m)=>l.set(h,m)),!(l.size()>=s)););return L.resolve(l)}Et(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new NC(n,i));let r=this.Rr.get(n);r===void 0&&(r=oe(),this.Rr.set(n,r)),this.Rr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.Vr=new Xe(Je.mr),this.gr=new Xe(Je.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,n){const i=new Je(e,n);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.wr(new Je(e,n))}br(e,n){e.forEach(i=>this.removeReference(i,n))}Sr(e){const n=new Y(new Ae([])),i=new Je(n,e),s=new Je(n,e+1),r=[];return this.gr.forEachInRange([i,s],a=>{this.wr(a),r.push(a.key)}),r}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const n=new Y(new Ae([])),i=new Je(n,e),s=new Je(n,e+1);let r=oe();return this.gr.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(e){const n=new Je(e,0),i=this.Vr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Je{constructor(e,n){this.key=e,this.Cr=n}static mr(e,n){return Y.comparator(e.key,n.key)||ue(e.Cr,n.Cr)}static pr(e,n){return ue(e.Cr,n.Cr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Fr=1,this.Mr=new Xe(Je.mr)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new IC(r,n,i,s);this.mutationQueue.push(a);for(const l of s)this.Mr=this.Mr.add(new Je(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(a)}lookupMutationBatch(e,n){return L.resolve(this.Or(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.Nr(i),r=s<0?0:s;return L.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?km:this.Fr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Je(n,0),s=new Je(n,Number.POSITIVE_INFINITY),r=[];return this.Mr.forEachInRange([i,s],a=>{const l=this.Or(a.Cr);r.push(l)}),L.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Xe(ue);return n.forEach(s=>{const r=new Je(s,0),a=new Je(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([r,a],l=>{i=i.add(l.Cr)})}),L.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;Y.isDocumentKey(r)||(r=r.child(""));const a=new Je(new Y(r),0);let l=new Xe(ue);return this.Mr.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.Cr)),!0)},a),L.resolve(this.Br(l))}Br(e){const n=[];return e.forEach(i=>{const s=this.Or(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ge(this.Lr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return L.forEach(n.mutations,s=>{const r=new Je(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,n){const i=new Je(n,0),s=this.Mr.firstAfterOrEqual(i);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Lr(e,n){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const n=this.Nr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.kr=e,this.docs=function(){return new ke(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,a=this.kr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return L.resolve(i?i.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let i=ni();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():gt.newInvalidDocument(s))}),L.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=ni();const a=n.path,l=new Y(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||F2(H2(m),i)<=0||(s.has(m.key)||Mc(n,m))&&(r=r.insert(m.key,m.mutableCopy()))}return L.resolve(r)}getAllFromCollectionGroup(e,n,i,s){Z()}qr(e,n){return L.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new gI(this)}getSize(e){return L.resolve(this.size)}}class gI extends lI{constructor(e){super(),this.Ir=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(i)}),L.waitFor(n)}getFromCache(e,n){return this.Ir.getEntry(e,n)}getAllFromCache(e,n){return this.Ir.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.persistence=e,this.Qr=new Gs(n=>jm(n),Pm),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Hm,this.targetCount=0,this.Ur=Qr.Kn()}forEachTarget(e,n){return this.Qr.forEach((i,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.$r&&(this.$r=n),L.resolve()}zn(e){this.Qr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ur=new Qr(n),this.highestTargetId=n),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,n){return this.zn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.zn(n),L.resolve()}removeTargetData(e,n){return this.Qr.delete(n.target),this.Kr.Sr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.Qr.forEach((a,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.Qr.delete(a),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(r).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const i=this.Qr.get(n)||null;return L.resolve(i)}addMatchingKeys(e,n,i){return this.Kr.yr(n,i),L.resolve()}removeMatchingKeys(e,n,i){this.Kr.br(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(a=>{r.push(s.markPotentiallyOrphaned(e,a))}),L.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.Kr.Sr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Kr.vr(n);return L.resolve(i)}containsKey(e,n){return L.resolve(this.Kr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n){this.Wr={},this.overlays={},this.Gr=new Nc(0),this.zr=!1,this.zr=!0,this.jr=new fI,this.referenceDelegate=e(this),this.Hr=new yI(this),this.indexManager=new tI,this.remoteDocumentCache=function(s){return new pI(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new JC(n),this.Yr=new hI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Wr[e.toKey()];return i||(i=new mI(n,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,n,i){G("MemoryPersistence","Starting transaction:",e);const s=new _I(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(r=>this.referenceDelegate.Xr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}ei(e,n){return L.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,n)))}}class _I extends K2{constructor(e){super(),this.currentSequenceNumber=e}}class Fm{constructor(e){this.persistence=e,this.ti=new Hm,this.ni=null}static ri(e){return new Fm(e)}get ii(){if(this.ni)return this.ni;throw Z()}addReference(e,n,i){return this.ti.addReference(i,n),this.ii.delete(i.toString()),L.resolve()}removeReference(e,n,i){return this.ti.removeReference(i,n),this.ii.add(i.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.ii.add(n.toString()),L.resolve()}removeTarget(e,n){this.ti.Sr(n.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.ii.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}Zr(){this.ni=new Set}Xr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.ii,i=>{const s=Y.fromPath(i);return this.si(e,s).next(r=>{r||n.removeEntry(s,J.min())})}).next(()=>(this.ni=null,n.apply(e)))}updateLimboDocument(e,n){return this.si(e,n).next(i=>{i?this.ii.delete(n.toString()):this.ii.add(n.toString())})}Jr(e){return 0}si(e,n){return L.or([()=>L.resolve(this.ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.ei(e,n)])}}class Zu{constructor(e,n){this.persistence=e,this.oi=new Gs(i=>$2(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=oI(this,n)}static ri(e,n){return new Zu(e,n)}Zr(){}Xr(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}nr(e){const n=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}sr(e){let n=0;return this.rr(e,i=>{n++}).next(()=>n)}rr(e,n){return L.forEach(this.oi,(i,s)=>this.ar(e,i,s).next(r=>r?L.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.qr(e,a=>this.ar(e,a,n).next(l=>{l||(i++,r.removeEntry(a,J.min()))})).next(()=>r.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.oi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.oi.set(i,e.currentSequenceNumber),L.resolve()}removeReference(e,n,i){return this.oi.set(i,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.oi.set(n,e.currentSequenceNumber),L.resolve()}Jr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ru(e.data.value)),n}ar(e,n,i){return L.or([()=>this.persistence.ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.oi.get(n);return L.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Hi=i,this.Ji=s}static Yi(e,n){let i=oe(),s=oe();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Gm(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return mR()?8:Q2(vt())>0?6:4}()}initialize(e,n){this.ns=e,this.indexManager=n,this.Zi=!0}getDocumentsMatchingQuery(e,n,i,s){const r={result:null};return this.rs(e,n).next(a=>{r.result=a}).next(()=>{if(!r.result)return this.ss(e,n,s,i).next(a=>{r.result=a})}).next(()=>{if(r.result)return;const a=new vI;return this._s(e,n,a).next(l=>{if(r.result=l,this.Xi)return this.us(e,n,a,l.size)})}).next(()=>r.result)}us(e,n,i,s){return i.documentReadCount<this.es?(ar()<=ae.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",or(n),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),L.resolve()):(ar()<=ae.DEBUG&&G("QueryEngine","Query:",or(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(ar()<=ae.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",or(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(n))):L.resolve())}rs(e,n){if(v0(n))return L.resolve(null);let i=_n(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=yf(n,null,"F"),i=_n(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const a=oe(...r);return this.ns.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const h=this.cs(n,l);return this.ls(n,h,a,u.readTime)?this.rs(e,yf(n,null,"F")):this.hs(e,h,n,u)}))})))}ss(e,n,i,s){return v0(n)||s.isEqual(J.min())?L.resolve(null):this.ns.getDocuments(e,i).next(r=>{const a=this.cs(n,r);return this.ls(n,a,i,s)?L.resolve(null):(ar()<=ae.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),or(n)),this.hs(e,a,n,q2(s,Co)).next(l=>l))})}cs(e,n){let i=new Xe(eb(e));return n.forEach((s,r)=>{Mc(e,r)&&(i=i.add(r))}),i}ls(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}_s(e,n,i){return ar()<=ae.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",or(n)),this.ns.getDocumentsMatchingQuery(e,n,$i.min(),i)}hs(e,n,i,s){return this.ns.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(a=>{r=r.insert(a.key,a)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="LocalStore",TI=3e8;class bI{constructor(e,n,i,s){this.persistence=e,this.Ps=n,this.serializer=s,this.Ts=new ke(ue),this.Is=new Gs(r=>jm(r),Pm),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cI(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ts))}}function wI(t,e,n,i){return new bI(t,e,n,i)}async function wb(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.As(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let u=oe();for(const h of s){a.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of r){l.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(i,u).next(h=>({Rs:h,removedBatchIds:a,addedBatchIds:l}))})})}function SI(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=n.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,h,m){const g=h.batch,y=g.keys();let _=L.resolve();return y.forEach(C=>{_=_.next(()=>m.getEntry(u,C)).next(O=>{const j=h.docVersions.get(C);ge(j!==null),O.version.compareTo(j)<0&&(g.applyToRemoteDocument(O,h),O.isValidDocument()&&(O.setReadTime(h.commitVersion),m.addEntry(O)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,g))}(n,i,e,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=oe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function Sb(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Hr.getLastRemoteSnapshotVersion(n))}function AI(t,e){const n=ee(t),i=e.snapshotVersion;let s=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=n.ds.newChangeBuffer({trackRemovals:!0});s=n.Ts;const l=[];e.targetChanges.forEach((m,g)=>{const y=s.get(g);if(!y)return;l.push(n.Hr.removeMatchingKeys(r,m.removedDocuments,g).next(()=>n.Hr.addMatchingKeys(r,m.addedDocuments,g)));let _=y.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(g)!==null?_=_.withResumeToken(ct.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):m.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(m.resumeToken,i)),s=s.insert(g,_),function(O,j,S){return O.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=TI?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(y,_,m)&&l.push(n.Hr.updateTargetData(r,_))});let u=ni(),h=oe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(r,m))}),l.push(xI(r,a,e.documentUpdates).next(m=>{u=m.Vs,h=m.fs})),!i.isEqual(J.min())){const m=n.Hr.getLastRemoteSnapshotVersion(r).next(g=>n.Hr.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(m)}return L.waitFor(l).next(()=>a.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,u,h)).next(()=>u)}).then(r=>(n.Ts=s,r))}function xI(t,e,n){let i=oe(),s=oe();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let a=ni();return n.forEach((l,u)=>{const h=r.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):G(Km,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Vs:a,fs:s}})}function RI(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=km),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function CI(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Hr.getTargetData(i,e).next(r=>r?(s=r,L.resolve(s)):n.Hr.allocateTargetId(i).next(a=>(s=new Di(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(i.targetId,i),n.Is.set(e,i.targetId)),i})}async function bf(t,e,n){const i=ee(t),s=i.Ts.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!aa(a))throw a;G(Km,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ts=i.Ts.remove(e),i.Is.delete(s.target)}function O0(t,e,n){const i=ee(t);let s=J.min(),r=oe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,h,m){const g=ee(u),y=g.Is.get(m);return y!==void 0?L.resolve(g.Ts.get(y)):g.Hr.getTargetData(h,m)}(i,a,_n(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(a,l.targetId).next(u=>{r=u})}).next(()=>i.Ps.getDocumentsMatchingQuery(a,e,n?s:J.min(),n?r:oe())).next(l=>(II(i,mC(e),l),{documents:l,gs:r})))}function II(t,e,n){let i=t.Es.get(e)||J.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.Es.set(e,i)}class k0{constructor(){this.activeTargetIds=EC()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NI{constructor(){this.ho=new k0,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,n,i){this.Po[e]=n}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new k0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="ConnectivityMonitor";class V0{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){G(M0,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){G(M0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl=null;function wf(){return Fl===null?Fl=function(){return 268435456+Math.round(2147483648*Math.random())}():Fl++,"0x"+Fl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad="RestConnection",OI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kI{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=n+"://"+e.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===Gu?`project_id=${i}`:`project_id=${i}&database_id=${s}`}bo(e,n,i,s,r){const a=wf(),l=this.So(e,n.toUriEncodedString());G(ad,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,r),this.vo(e,l,u,i).then(h=>(G(ad,`Received RPC '${e}' ${a}: `,h),h),h=>{throw Hr(ad,`RPC '${e}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Co(e,n,i,s,r,a){return this.bo(e,n,i,s,r)}Do(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+sa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}So(e,n){const i=OI[e];return`${this.po}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class VI extends kI{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,n,i,s){const r=wf();return new Promise((a,l)=>{const u=new IT;u.setWithCredentials(!0),u.listenOnce(NT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case su.NO_ERROR:const m=u.getResponseJson();G(mt,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(m)),a(m);break;case su.TIMEOUT:G(mt,`RPC '${e}' ${r} timed out`),l(new K(P.DEADLINE_EXCEEDED,"Request time out"));break;case su.HTTP_ERROR:const g=u.getStatus();if(G(mt,`RPC '${e}' ${r} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y==null?void 0:y.error;if(_&&_.status&&_.message){const C=function(j){const S=j.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(S)>=0?S:P.UNKNOWN}(_.status);l(new K(C,_.message))}else l(new K(P.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new K(P.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{G(mt,`RPC '${e}' ${r} completed.`)}});const h=JSON.stringify(s);G(mt,`RPC '${e}' ${r} sending request:`,s),u.send(n,"POST",h,i,15)})}Wo(e,n,i){const s=wf(),r=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=kT(),l=OT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const m=r.join("");G(mt,`Creating RPC '${e}' stream ${s}: ${m}`,u);const g=a.createWebChannel(m,u);let y=!1,_=!1;const C=new MI({Fo:j=>{_?G(mt,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(y||(G(mt,`Opening RPC '${e}' stream ${s} transport.`),g.open(),y=!0),G(mt,`RPC '${e}' stream ${s} sending:`,j),g.send(j))},Mo:()=>g.close()}),O=(j,S,T)=>{j.listen(S,b=>{try{T(b)}catch(I){setTimeout(()=>{throw I},0)}})};return O(g,za.EventType.OPEN,()=>{_||(G(mt,`RPC '${e}' stream ${s} transport opened.`),C.Qo())}),O(g,za.EventType.CLOSE,()=>{_||(_=!0,G(mt,`RPC '${e}' stream ${s} transport closed`),C.Ko())}),O(g,za.EventType.ERROR,j=>{_||(_=!0,Hr(mt,`RPC '${e}' stream ${s} transport errored:`,j),C.Ko(new K(P.UNAVAILABLE,"The operation could not be completed")))}),O(g,za.EventType.MESSAGE,j=>{var S;if(!_){const T=j.data[0];ge(!!T);const b=T,I=(b==null?void 0:b.error)||((S=b[0])===null||S===void 0?void 0:S.error);if(I){G(mt,`RPC '${e}' stream ${s} received error:`,I);const M=I.status;let k=function(E){const A=Be[E];if(A!==void 0)return hb(A)}(M),w=I.message;k===void 0&&(k=P.INTERNAL,w="Unknown error status: "+M+" with message "+I.message),_=!0,C.Ko(new K(k,w)),g.close()}else G(mt,`RPC '${e}' stream ${s} received:`,T),C.Uo(T)}}),O(l,DT.STAT_EVENT,j=>{j.stat===hf.PROXY?G(mt,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===hf.NOPROXY&&G(mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.$o()},0),C}}function od(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(t){return new UC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,n,i=1e3,s=1.5,r=6e4){this.Ti=e,this.timerId=n,this.Go=i,this.zo=s,this.jo=r,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const n=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,n-i);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="PersistentStream";class xb{constructor(e,n,i,s,r,a,l,u){this.Ti=e,this.n_=i,this.r_=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Ab(e,n)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,n){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(ti(n.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(n)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),n=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===n&&this.V_(i,s)},i=>{e(()=>{const s=new K(P.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(e,n){const i=this.R_(this.i_);this.stream=this.f_(e,n),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return G(j0,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return n=>{this.Ti.enqueueAndForget(()=>this.i_===e?n():(G(j0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jI extends xb{constructor(e,n,i,s,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}f_(e,n){return this.connection.Wo("Listen",e,n)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const n=qC(this.serializer,e),i=function(r){if(!("targetChange"in r))return J.min();const a=r.targetChange;return a.targetIds&&a.targetIds.length?J.min():a.readTime?vn(a.readTime):J.min()}(e);return this.listener.p_(n,i)}y_(e){const n={};n.database=Tf(this.serializer),n.addTarget=function(r,a){let l;const u=a.target;if(l=pf(u)?{documents:GC(r,u)}:{query:KC(r,u).ht},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=mb(r,a.resumeToken);const h=_f(r,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(J.min())>0){l.readTime=Wu(r,a.snapshotVersion.toTimestamp());const h=_f(r,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const i=YC(this.serializer,e);i&&(n.labels=i),this.I_(n)}w_(e){const n={};n.database=Tf(this.serializer),n.removeTarget=e,this.I_(n)}}class PI extends xb{constructor(e,n,i,s,r,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,a),this.serializer=r}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,n){return this.connection.Wo("Write",e,n)}g_(e){return ge(!!e.streamToken),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const n=FC(e.writeResults,e.commitTime),i=vn(e.commitTime);return this.listener.v_(i,n)}C_(){const e={};e.database=Tf(this.serializer),this.I_(e)}S_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>HC(this.serializer,i))};this.I_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{}class UI extends LI{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new K(P.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,n,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection.bo(e,vf(n,i),s,r,a)).catch(r=>{throw r.name==="FirebaseError"?(r.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new K(P.UNKNOWN,r.toString())})}Co(e,n,i,s,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Co(e,vf(n,i),s,a,l,r)).catch(a=>{throw a.name==="FirebaseError"?(a.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(P.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class zI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ti(n),this.N_=!1):G("OnlineStateTracker",n)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="RemoteStore";class BI{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=r,this.z_.To(a=>{i.enqueueAndForget(async()=>{Ks(this)&&(G(js,"Restarting streams for network reachability change."),await async function(u){const h=ee(u);h.W_.add(4),await el(h),h.j_.set("Unknown"),h.W_.delete(4),await zc(h)}(this))})}),this.j_=new zI(i,s)}}async function zc(t){if(Ks(t))for(const e of t.G_)await e(!0)}async function el(t){for(const e of t.G_)await e(!1)}function Rb(t,e){const n=ee(t);n.U_.has(e.targetId)||(n.U_.set(e.targetId,e),Xm(n)?$m(n):oa(n).c_()&&Ym(n,e))}function Qm(t,e){const n=ee(t),i=oa(n);n.U_.delete(e),i.c_()&&Cb(n,e),n.U_.size===0&&(i.c_()?i.P_():Ks(n)&&n.j_.set("Unknown"))}function Ym(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oa(t).y_(e)}function Cb(t,e){t.H_.Ne(e),oa(t).w_(e)}function $m(t){t.H_=new VC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),oa(t).start(),t.j_.B_()}function Xm(t){return Ks(t)&&!oa(t).u_()&&t.U_.size>0}function Ks(t){return ee(t).W_.size===0}function Ib(t){t.H_=void 0}async function qI(t){t.j_.set("Online")}async function HI(t){t.U_.forEach((e,n)=>{Ym(t,e)})}async function FI(t,e){Ib(t),Xm(t)?(t.j_.q_(e),$m(t)):t.j_.set("Unknown")}async function GI(t,e,n){if(t.j_.set("Online"),e instanceof fb&&e.state===2&&e.cause)try{await async function(s,r){const a=r.cause;for(const l of r.targetIds)s.U_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.U_.delete(l),s.H_.removeTarget(l))}(t,e)}catch(i){G(js,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ju(t,i)}else if(e instanceof lu?t.H_.We(e):e instanceof db?t.H_.Ze(e):t.H_.je(e),!n.isEqual(J.min()))try{const i=await Sb(t.localStore);n.compareTo(i)>=0&&await function(r,a){const l=r.H_.ot(a);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=r.U_.get(h);m&&r.U_.set(h,m.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,h)=>{const m=r.U_.get(u);if(!m)return;r.U_.set(u,m.withResumeToken(ct.EMPTY_BYTE_STRING,m.snapshotVersion)),Cb(r,u);const g=new Di(m.target,u,h,m.sequenceNumber);Ym(r,g)}),r.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){G(js,"Failed to raise snapshot:",i),await Ju(t,i)}}async function Ju(t,e,n){if(!aa(e))throw e;t.W_.add(1),await el(t),t.j_.set("Offline"),n||(n=()=>Sb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G(js,"Retrying IndexedDB access"),await n(),t.W_.delete(1),await zc(t)})}function Nb(t,e){return e().catch(n=>Ju(t,n,e))}async function Bc(t){const e=ee(t),n=Ji(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:km;for(;KI(e);)try{const s=await RI(e.localStore,i);if(s===null){e.K_.length===0&&n.P_();break}i=s.batchId,QI(e,s)}catch(s){await Ju(e,s)}Db(e)&&Ob(e)}function KI(t){return Ks(t)&&t.K_.length<10}function QI(t,e){t.K_.push(e);const n=Ji(t);n.c_()&&n.b_&&n.S_(e.mutations)}function Db(t){return Ks(t)&&!Ji(t).u_()&&t.K_.length>0}function Ob(t){Ji(t).start()}async function YI(t){Ji(t).C_()}async function $I(t){const e=Ji(t);for(const n of t.K_)e.S_(n.mutations)}async function XI(t,e,n){const i=t.K_.shift(),s=zm.from(i,e,n);await Nb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Bc(t)}async function WI(t,e){e&&Ji(t).b_&&await async function(i,s){if(function(a){return OC(a)&&a!==P.ABORTED}(s.code)){const r=i.K_.shift();Ji(i).h_(),await Nb(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await Bc(i)}}(t,e),Db(t)&&Ob(t)}async function P0(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),G(js,"RemoteStore received new credentials");const i=Ks(n);n.W_.add(3),await el(n),i&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.W_.delete(3),await zc(n)}async function ZI(t,e){const n=ee(t);e?(n.W_.delete(2),await zc(n)):e||(n.W_.add(2),await el(n),n.j_.set("Unknown"))}function oa(t){return t.J_||(t.J_=function(n,i,s){const r=ee(n);return r.M_(),new jI(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{xo:qI.bind(null,t),No:HI.bind(null,t),Lo:FI.bind(null,t),p_:GI.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),Xm(t)?$m(t):t.j_.set("Unknown")):(await t.J_.stop(),Ib(t))})),t.J_}function Ji(t){return t.Y_||(t.Y_=function(n,i,s){const r=ee(n);return r.M_(),new PI(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:YI.bind(null,t),Lo:WI.bind(null,t),D_:$I.bind(null,t),v_:XI.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Bc(t)):(await t.Y_.stop(),t.K_.length>0&&(G(js,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,r){const a=Date.now()+i,l=new Wm(e,n,a,s,r);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zm(t,e){if(ti("AsyncQueue",`${e}: ${t}`),aa(t))return new K(P.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{static emptySet(e){return new Ir(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Y.comparator(n.key,i.key):(n,i)=>Y.comparator(n.key,i.key),this.keyedMap=Ba(),this.sortedSet=new ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ir)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ir;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.Z_=new ke(Y.comparator)}track(e){const n=e.doc.key,i=this.Z_.get(n);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(n,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(n):e.type===1&&i.type===2?this.Z_=this.Z_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(n,{type:2,doc:e.doc}):Z():this.Z_=this.Z_.insert(n,e)}X_(){const e=[];return this.Z_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Yr{constructor(e,n,i,s,r,a,l,u,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,s,r){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Yr(e,n,Ir.emptySet(n),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class eN{constructor(){this.queries=U0(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(n,i){const s=ee(n),r=s.queries;s.queries=U0(),r.forEach((a,l)=>{for(const u of l.ta)u.onError(i)})})(this,new K(P.ABORTED,"Firestore shutting down"))}}function U0(){return new Gs(t=>JT(t),kc)}async function kb(t,e){const n=ee(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.na()&&e.ra()&&(i=2):(r=new JI,i=e.ra()?0:1);try{switch(i){case 0:r.ea=await n.onListen(s,!0);break;case 1:r.ea=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Zm(a,`Initialization of query '${or(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,r),r.ta.push(e),e.sa(n.onlineState),r.ea&&e.oa(r.ea)&&Jm(n)}async function Mb(t,e){const n=ee(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const a=r.ta.indexOf(e);a>=0&&(r.ta.splice(a,1),r.ta.length===0?s=e.ra()?0:1:!r.na()&&e.ra()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function tN(t,e){const n=ee(t);let i=!1;for(const s of e){const r=s.query,a=n.queries.get(r);if(a){for(const l of a.ta)l.oa(s)&&(i=!0);a.ea=s}}i&&Jm(n)}function nN(t,e,n){const i=ee(t),s=i.queries.get(e);if(s)for(const r of s.ta)r.onError(n);i.queries.delete(e)}function Jm(t){t.ia.forEach(e=>{e.next()})}var Sf,z0;(z0=Sf||(Sf={}))._a="default",z0.Cache="cache";class Vb{constructor(e,n,i){this.query=e,this.aa=n,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Yr(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ua?this.la(e)&&(this.aa.next(e),n=!0):this.ha(e,this.onlineState)&&(this.Pa(e),n=!0),this.ca=e,n}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let n=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),n=!0),n}ha(e,n){if(!e.fromCache||!this.ra())return!0;const i=n!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}la(e){if(e.docChanges.length>0)return!0;const n=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Pa(e){e=Yr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Sf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.key=e}}class Pb{constructor(e){this.key=e}}class iN{constructor(e,n){this.query=e,this.fa=n,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=oe(),this.mutatedKeys=oe(),this.ya=eb(e),this.wa=new Ir(this.ya)}get ba(){return this.fa}Sa(e,n){const i=n?n.Da:new L0,s=n?n.wa:this.wa;let r=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,g)=>{const y=s.get(m),_=Mc(this.query,g)?g:null,C=!!y&&this.mutatedKeys.has(y.key),O=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let j=!1;y&&_?y.data.isEqual(_.data)?C!==O&&(i.track({type:3,doc:_}),j=!0):this.va(y,_)||(i.track({type:2,doc:_}),j=!0,(u&&this.ya(_,u)>0||h&&this.ya(_,h)<0)&&(l=!0)):!y&&_?(i.track({type:0,doc:_}),j=!0):y&&!_&&(i.track({type:1,doc:y}),j=!0,(u||h)&&(l=!0)),j&&(_?(a=a.add(_),r=O?r.add(m):r.delete(m)):(a=a.delete(m),r=r.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),r=r.delete(m.key),i.track({type:1,doc:m})}return{wa:a,Da:i,ls:l,mutatedKeys:r}}va(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const r=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const a=e.Da.X_();a.sort((m,g)=>function(_,C){const O=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return O(_)-O(C)}(m.type,g.type)||this.ya(m.doc,g.doc)),this.Ca(i),s=s!=null&&s;const l=n&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,h=u!==this.ga;return this.ga=u,a.length!==0||h?{snapshot:new Yr(this.query,e.wa,r,a,e.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new L0,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(n=>this.fa=this.fa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.fa=this.fa.delete(n)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=oe(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const n=[];return e.forEach(i=>{this.pa.has(i)||n.push(new Pb(i))}),this.pa.forEach(i=>{e.has(i)||n.push(new jb(i))}),n}Oa(e){this.fa=e.gs,this.pa=oe();const n=this.Sa(e.documents);return this.applyChanges(n,!0)}Na(){return Yr.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const ep="SyncEngine";class sN{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class rN{constructor(e){this.key=e,this.Ba=!1}}class aN{constructor(e,n,i,s,r,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Gs(l=>JT(l),kc),this.qa=new Map,this.Qa=new Set,this.$a=new ke(Y.comparator),this.Ka=new Map,this.Ua=new Hm,this.Wa={},this.Ga=new Map,this.za=Qr.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function oN(t,e,n=!0){const i=Hb(t);let s;const r=i.ka.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.Na()):s=await Lb(i,e,n,!0),s}async function lN(t,e){const n=Hb(t);await Lb(n,e,!0,!1)}async function Lb(t,e,n,i){const s=await CI(t.localStore,_n(e)),r=s.targetId,a=t.sharedClientState.addLocalQueryTarget(r,n);let l;return i&&(l=await uN(t,e,r,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Rb(t.remoteStore,s),l}async function uN(t,e,n,i,s){t.Ha=(g,y,_)=>async function(O,j,S,T){let b=j.view.Sa(S);b.ls&&(b=await O0(O.localStore,j.query,!1).then(({documents:w})=>j.view.Sa(w,b)));const I=T&&T.targetChanges.get(j.targetId),M=T&&T.targetMismatches.get(j.targetId)!=null,k=j.view.applyChanges(b,O.isPrimaryClient,I,M);return q0(O,j.targetId,k.Ma),k.snapshot}(t,g,y,_);const r=await O0(t.localStore,e,!0),a=new iN(e,r.gs),l=a.Sa(r.documents),u=Jo.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),h=a.applyChanges(l,t.isPrimaryClient,u);q0(t,n,h.Ma);const m=new sN(e,n,a);return t.ka.set(e,m),t.qa.has(n)?t.qa.get(n).push(e):t.qa.set(n,[e]),h.snapshot}async function cN(t,e,n){const i=ee(t),s=i.ka.get(e),r=i.qa.get(s.targetId);if(r.length>1)return i.qa.set(s.targetId,r.filter(a=>!kc(a,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await bf(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Qm(i.remoteStore,s.targetId),Af(i,s.targetId)}).catch(ra)):(Af(i,s.targetId),await bf(i.localStore,s.targetId,!0))}async function hN(t,e){const n=ee(t),i=n.ka.get(e),s=n.qa.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Qm(n.remoteStore,i.targetId))}async function dN(t,e,n){const i=vN(t);try{const s=await function(a,l){const u=ee(a),h=$e.now(),m=l.reduce((_,C)=>_.add(C.key),oe());let g,y;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let C=ni(),O=oe();return u.ds.getEntries(_,m).next(j=>{C=j,C.forEach((S,T)=>{T.isValidDocument()||(O=O.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,C)).next(j=>{g=j;const S=[];for(const T of l){const b=RC(T,g.get(T.key).overlayedDocument);b!=null&&S.push(new rs(T.key,b,GT(b.value.mapValue),Nt.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,S,l)}).next(j=>{y=j;const S=j.applyToLocalDocumentSet(g,O);return u.documentOverlayCache.saveOverlays(_,j.batchId,S)})}).then(()=>({batchId:y.batchId,changes:nb(g)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let h=a.Wa[a.currentUser.toKey()];h||(h=new ke(ue)),h=h.insert(l,u),a.Wa[a.currentUser.toKey()]=h}(i,s.batchId,n),await tl(i,s.changes),await Bc(i.remoteStore)}catch(s){const r=Zm(s,"Failed to persist write");n.reject(r)}}async function Ub(t,e){const n=ee(t);try{const i=await AI(n.localStore,e);e.targetChanges.forEach((s,r)=>{const a=n.Ka.get(r);a&&(ge(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.Ba=!0:s.modifiedDocuments.size>0?ge(a.Ba):s.removedDocuments.size>0&&(ge(a.Ba),a.Ba=!1))}),await tl(n,i,e)}catch(i){await ra(i)}}function B0(t,e,n){const i=ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.ka.forEach((r,a)=>{const l=a.view.sa(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=ee(a);u.onlineState=l;let h=!1;u.queries.forEach((m,g)=>{for(const y of g.ta)y.sa(l)&&(h=!0)}),h&&Jm(u)}(i.eventManager,e),s.length&&i.La.p_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function fN(t,e,n){const i=ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Ka.get(e),r=s&&s.key;if(r){let a=new ke(Y.comparator);a=a.insert(r,gt.newNoDocument(r,J.min()));const l=oe().add(r),u=new Lc(J.min(),new Map,new ke(ue),a,l);await Ub(i,u),i.$a=i.$a.remove(r),i.Ka.delete(e),tp(i)}else await bf(i.localStore,e,!1).then(()=>Af(i,e,n)).catch(ra)}async function mN(t,e){const n=ee(t),i=e.batch.batchId;try{const s=await SI(n.localStore,e);Bb(n,i,null),zb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await tl(n,s)}catch(s){await ra(s)}}async function pN(t,e,n){const i=ee(t);try{const s=await function(a,l){const u=ee(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return u.mutationQueue.lookupMutationBatch(h,l).next(g=>(ge(g!==null),m=g.keys(),u.mutationQueue.removeMutationBatch(h,g))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>u.localDocuments.getDocuments(h,m))})}(i.localStore,e);Bb(i,e,n),zb(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await tl(i,s)}catch(s){await ra(s)}}function zb(t,e){(t.Ga.get(e)||[]).forEach(n=>{n.resolve()}),t.Ga.delete(e)}function Bb(t,e,n){const i=ee(t);let s=i.Wa[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Wa[i.currentUser.toKey()]=s}}function Af(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.qa.get(e))t.ka.delete(i),n&&t.La.Ja(i,n);t.qa.delete(e),t.isPrimaryClient&&t.Ua.Sr(e).forEach(i=>{t.Ua.containsKey(i)||qb(t,i)})}function qb(t,e){t.Qa.delete(e.path.canonicalString());const n=t.$a.get(e);n!==null&&(Qm(t.remoteStore,n),t.$a=t.$a.remove(e),t.Ka.delete(n),tp(t))}function q0(t,e,n){for(const i of n)i instanceof jb?(t.Ua.addReference(i.key,e),gN(t,i)):i instanceof Pb?(G(ep,"Document no longer in limbo: "+i.key),t.Ua.removeReference(i.key,e),t.Ua.containsKey(i.key)||qb(t,i.key)):Z()}function gN(t,e){const n=e.key,i=n.path.canonicalString();t.$a.get(n)||t.Qa.has(i)||(G(ep,"New document in limbo: "+n),t.Qa.add(i),tp(t))}function tp(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const n=new Y(Ae.fromString(e)),i=t.za.next();t.Ka.set(i,new rN(n)),t.$a=t.$a.insert(n,i),Rb(t.remoteStore,new Di(_n(Lm(n.path)),i,"TargetPurposeLimboResolution",Nc.ae))}}async function tl(t,e,n){const i=ee(t),s=[],r=[],a=[];i.ka.isEmpty()||(i.ka.forEach((l,u)=>{a.push(i.Ha(u,e,n).then(h=>{var m;if((h||n)&&i.isPrimaryClient){const g=h?!h.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;i.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(h){s.push(h);const g=Gm.Yi(u.targetId,h);r.push(g)}}))}),await Promise.all(a),i.La.p_(s),await async function(u,h){const m=ee(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>L.forEach(h,y=>L.forEach(y.Hi,_=>m.persistence.referenceDelegate.addReference(g,y.targetId,_)).next(()=>L.forEach(y.Ji,_=>m.persistence.referenceDelegate.removeReference(g,y.targetId,_)))))}catch(g){if(!aa(g))throw g;G(Km,"Failed to update sequence numbers: "+g)}for(const g of h){const y=g.targetId;if(!g.fromCache){const _=m.Ts.get(y),C=_.snapshotVersion,O=_.withLastLimboFreeSnapshotVersion(C);m.Ts=m.Ts.insert(y,O)}}}(i.localStore,r))}async function yN(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){G(ep,"User change. New user:",e.toKey());const i=await wb(n.localStore,e);n.currentUser=e,function(r,a){r.Ga.forEach(l=>{l.forEach(u=>{u.reject(new K(P.CANCELLED,a))})}),r.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await tl(n,i.Rs)}}function _N(t,e){const n=ee(t),i=n.Ka.get(e);if(i&&i.Ba)return oe().add(i.key);{let s=oe();const r=n.qa.get(e);if(!r)return s;for(const a of r){const l=n.ka.get(a);s=s.unionWith(l.view.ba)}return s}}function Hb(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ub.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_N.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fN.bind(null,e),e.La.p_=tN.bind(null,e.eventManager),e.La.Ja=nN.bind(null,e.eventManager),e}function vN(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pN.bind(null,e),e}class ec{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uc(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,n){return null}nu(e,n){return null}eu(e){return wI(this.persistence,new EI,e.initialUser,this.serializer)}Xa(e){return new bb(Fm.ri,this.serializer)}Za(e){return new NI}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ec.provider={build:()=>new ec};class EN extends ec{constructor(e){super(),this.cacheSizeBytes=e}tu(e,n){ge(this.persistence.referenceDelegate instanceof Zu);const i=this.persistence.referenceDelegate.garbageCollector;return new rI(i,e.asyncQueue,n)}Xa(e){const n=this.cacheSizeBytes!==void 0?Ct.withCacheSize(this.cacheSizeBytes):Ct.DEFAULT;return new bb(i=>Zu.ri(i,n),this.serializer)}}class xf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>B0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yN.bind(null,this.syncEngine),await ZI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eN}()}createDatastore(e){const n=Uc(e.databaseInfo.databaseId),i=function(r){return new VI(r)}(e.databaseInfo);return function(r,a,l,u){return new UI(r,a,l,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,r,a,l){return new BI(i,s,r,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>B0(this.syncEngine,n,0),function(){return V0.D()?new V0:new DI}())}createSyncEngine(e,n){return function(s,r,a,l,u,h,m){const g=new aN(s,r,a,l,u,h);return m&&(g.ja=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const r=ee(s);G(js,"RemoteStore shutting down."),r.W_.add(5),await el(r),r.z_.shutdown(),r.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}xf.provider={build:()=>new xf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="FirestoreClient";class TN{constructor(e,n,i,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=pt.UNAUTHENTICATED,this.clientId=VT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async a=>{G(es,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(G(es,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Zm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function ld(t,e){t.asyncQueue.verifyOperationInProgress(),G(es,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await wb(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function H0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await bN(t);G(es,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>P0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>P0(e.remoteStore,s)),t._onlineComponents=e}async function bN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G(es,"Using user provided OfflineComponentProvider");try{await ld(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===P.FAILED_PRECONDITION||s.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Hr("Error using user provided cache. Falling back to memory cache: "+n),await ld(t,new ec)}}else G(es,"Using default OfflineComponentProvider"),await ld(t,new EN(void 0));return t._offlineComponents}async function Gb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G(es,"Using user provided OnlineComponentProvider"),await H0(t,t._uninitializedComponentsProvider._online)):(G(es,"Using default OnlineComponentProvider"),await H0(t,new xf))),t._onlineComponents}function wN(t){return Gb(t).then(e=>e.syncEngine)}async function Kb(t){const e=await Gb(t),n=e.eventManager;return n.onListen=oN.bind(null,e.syncEngine),n.onUnlisten=cN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hN.bind(null,e.syncEngine),n}function SN(t,e,n={}){const i=new Yn;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,h){const m=new Fb({next:y=>{m.su(),a.enqueueAndForget(()=>Mb(r,g));const _=y.docs.has(l);!_&&y.fromCache?h.reject(new K(P.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&y.fromCache&&u&&u.source==="server"?h.reject(new K(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new Vb(Lm(l.path),m,{includeMetadataChanges:!0,Ta:!0});return kb(r,g)}(await Kb(t),t.asyncQueue,e,n,i)),i.promise}function AN(t,e,n={}){const i=new Yn;return t.asyncQueue.enqueueAndForget(async()=>function(r,a,l,u,h){const m=new Fb({next:y=>{m.su(),a.enqueueAndForget(()=>Mb(r,g)),y.fromCache&&u.source==="server"?h.reject(new K(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),g=new Vb(l,m,{includeMetadataChanges:!0,Ta:!0});return kb(r,g)}(await Kb(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(t,e,n){if(!n)throw new K(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xN(t,e,n,i){if(e===!0&&i===!0)throw new K(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function G0(t){if(!Y.isDocumentKey(t))throw new K(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function K0(t){if(Y.isDocumentKey(t))throw new K(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Sn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qc(t);throw new K(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="firestore.googleapis.com",Q0=!0;class Y0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new K(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$b,this.ssl=Q0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Q0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Tb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iI)throw new K(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qb((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new K(P.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new K(P.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new K(P.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hc{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new M2;switch(i.type){case"firstParty":return new L2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new K(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=F0.get(n);i&&(G("ComponentProvider","Removing Datastore"),F0.delete(n),i.terminate())}(this),Promise.resolve()}}function RN(t,e,n,i={}){var s;const r=(t=Sn(t,Hc))._getSettings(),a=Object.assign(Object.assign({},r),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;r.host!==$b&&r.host!==l&&Hr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},r),{host:l,ssl:!1,emulatorOptions:i});if(!ks(u,a)&&(t._setSettings(u),i.mockUserToken)){let h,m;if(typeof i.mockUserToken=="string")h=i.mockUserToken,m=pt.MOCK_USER;else{h=oR(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new K(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new pt(g)}t._authCredentials=new V2(new MT(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new la(this.firestore,e,this._query)}}class Dt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}}class Fi extends la{constructor(e,n,i){super(e,n,Lm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new Y(e))}withConverter(e){return new Fi(this.firestore,e,this._path)}}function Ht(t,e,...n){if(t=Ke(t),Yb("collection","path",e),t instanceof Hc){const i=Ae.fromString(e,...n);return K0(i),new Fi(t,null,i)}{if(!(t instanceof Dt||t instanceof Fi))throw new K(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ae.fromString(e,...n));return K0(i),new Fi(t.firestore,null,i)}}function An(t,e,...n){if(t=Ke(t),arguments.length===1&&(e=VT.newId()),Yb("doc","path",e),t instanceof Hc){const i=Ae.fromString(e,...n);return G0(i),new Dt(t,null,new Y(i))}{if(!(t instanceof Dt||t instanceof Fi))throw new K(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ae.fromString(e,...n));return G0(i),new Dt(t.firestore,t instanceof Fi?t.converter:null,new Y(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="AsyncQueue";class X0{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Ab(this,"async_queue_retry"),this.bu=()=>{const i=od();i&&G($0,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.Su=e;const n=od();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const n=od();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const n=new Yn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!aa(e))throw e;G($0,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const n=this.Su.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(i);throw ti("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.Su=n,n}enqueueAfterDelay(e,n,i){this.Du(),this.wu.indexOf(e)>-1&&(n=0);const s=Wm.createAndSchedule(this,e,n,i,r=>this.Fu(r));return this.fu.push(s),s}Du(){this.gu&&Z()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const n of this.fu)if(n.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.fu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const n=this.fu.indexOf(e);this.fu.splice(n,1)}}class Qs extends Hc{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new X0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new X0(e),this._firestoreClient=void 0,await e}}}function CN(t,e){const n=typeof t=="object"?t:AT(),i=typeof t=="string"?t:Gu,s=Dm(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=rR("firestore");r&&RN(s,...r)}return s}function Fc(t){if(t._terminated)throw new K(P.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||IN(t),t._firestoreClient}function IN(t){var e,n,i;const s=t._freezeSettings(),r=function(l,u,h,m){return new Z2(l,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Qb(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new TN(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $r(ct.fromBase64String(e))}catch(n){throw new K(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $r(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=/^__.*__$/;class DN{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zo(e,this.data,n,this.fieldTransforms)}}class Xb{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Wb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class rp{constructor(e,n,i,s,r,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Bu(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new rp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:i,Qu:!1});return s.$u(e),s}Ku(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return tc(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Wb(this.Lu)&&NN.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class ON{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Uc(e)}ju(e,n,i,s=!1){return new rp({Lu:e,methodName:n,zu:i,path:lt.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gc(t){const e=t._freezeSettings(),n=Uc(t._databaseId);return new ON(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Zb(t,e,n,i,s,r={}){const a=t.ju(r.merge||r.mergeFields?2:0,e,n,s);ap("Data must be an object, but it was:",a,i);const l=tw(i,a);let u,h;if(r.merge)u=new Ut(a.fieldMask),h=a.fieldTransforms;else if(r.mergeFields){const m=[];for(const g of r.mergeFields){const y=Rf(e,g,n);if(!a.contains(y))throw new K(P.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);iw(m,y)||m.push(y)}u=new Ut(m),h=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,h=a.fieldTransforms;return new DN(new It(l),u,h)}class Kc extends np{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kc}}function Jb(t,e,n,i){const s=t.ju(1,e,n);ap("Data must be an object, but it was:",s,i);const r=[],a=It.empty();ss(i,(u,h)=>{const m=op(e,u,n);h=Ke(h);const g=s.Ku(m);if(h instanceof Kc)r.push(m);else{const y=il(h,g);y!=null&&(r.push(m),a.set(m,y))}});const l=new Ut(r);return new Xb(a,l,s.fieldTransforms)}function ew(t,e,n,i,s,r){const a=t.ju(1,e,n),l=[Rf(e,i,n)],u=[s];if(r.length%2!=0)throw new K(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<r.length;y+=2)l.push(Rf(e,r[y])),u.push(r[y+1]);const h=[],m=It.empty();for(let y=l.length-1;y>=0;--y)if(!iw(h,l[y])){const _=l[y];let C=u[y];C=Ke(C);const O=a.Ku(_);if(C instanceof Kc)h.push(_);else{const j=il(C,O);j!=null&&(h.push(_),m.set(_,j))}}const g=new Ut(h);return new Xb(m,g,a.fieldTransforms)}function kN(t,e,n,i=!1){return il(n,t.ju(i?4:3,e))}function il(t,e){if(nw(t=Ke(t)))return ap("Unsupported field value:",e,t),tw(t,e);if(t instanceof np)return function(i,s){if(!Wb(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,s){const r=[];let a=0;for(const l of i){let u=il(l,s.Uu(a));u==null&&(u={nullValue:"NULL_VALUE"}),r.push(u),a++}return{arrayValue:{values:r}}}(t,e)}return function(i,s){if((i=Ke(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return TC(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=$e.fromDate(i);return{timestampValue:Wu(s.serializer,r)}}if(i instanceof $e){const r=new $e(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Wu(s.serializer,r)}}if(i instanceof ip)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $r)return{bytesValue:mb(s.serializer,i._byteString)};if(i instanceof Dt){const r=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(r))throw s.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:qm(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof sp)return function(a,l){return{mapValue:{fields:{[HT]:{stringValue:FT},[Ku]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Wu("VectorValues must only contain numeric values.");return Um(l.serializer,h)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${qc(i)}`)}(t,e)}function tw(t,e){const n={};return PT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ss(t,(i,s)=>{const r=il(s,e.qu(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function nw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof ip||t instanceof $r||t instanceof Dt||t instanceof np||t instanceof sp)}function ap(t,e,n){if(!nw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=qc(n);throw i==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}}function Rf(t,e,n){if((e=Ke(e))instanceof nl)return e._internalPath;if(typeof e=="string")return op(t,e);throw tc("Field path arguments must be of type string or ",t,!1,void 0,n)}const MN=new RegExp("[~\\*/\\[\\]]");function op(t,e,n){if(e.search(MN)>=0)throw tc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nl(...e.split("."))._internalPath}catch{throw tc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tc(t,e,n,i,s){const r=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(r||a)&&(u+=" (found",r&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new K(P.INVALID_ARGUMENT,l+t+u)}function iw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VN extends sw{data(){return super.data()}}function lp(t,e){return typeof e=="string"?op(t,e):e instanceof nl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class up{}class PN extends up{}function ts(t,e,...n){let i=[];e instanceof up&&i.push(e),i=i.concat(n),function(r){const a=r.filter(u=>u instanceof cp).length,l=r.filter(u=>u instanceof Qc).length;if(a>1||a>0&&l>0)throw new K(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Qc extends PN{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Qc(e,n,i)}_apply(e){const n=this._parse(e);return rw(e._query,n),new la(e.firestore,e.converter,gf(e._query,n))}_parse(e){const n=Gc(e.firestore);return function(r,a,l,u,h,m,g){let y;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new K(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Z0(g,m);const C=[];for(const O of g)C.push(W0(u,r,O));y={arrayValue:{values:C}}}else y=W0(u,r,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Z0(g,m),y=kN(l,a,g,m==="in"||m==="not-in");return Fe.create(h,m,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function En(t,e,n){const i=e,s=lp("where",t);return Qc._create(s,i,n)}class cp extends up{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cp(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,r){let a=s;const l=r.getFlattenedFilters();for(const u of l)rw(a,u),a=gf(a,u)}(e._query,n),new la(e.firestore,e.converter,gf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function W0(t,e,n){if(typeof(n=Ke(n))=="string"){if(n==="")throw new K(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZT(e)&&n.indexOf("/")!==-1)throw new K(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ae.fromString(n));if(!Y.isDocumentKey(i))throw new K(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return f0(t,new Y(i))}if(n instanceof Dt)return f0(t,n._key);throw new K(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qc(n)}.`)}function Z0(t,e){if(!Array.isArray(t)||t.length===0)throw new K(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rw(t,e){const n=function(s,r){for(const a of s)for(const l of a.getFlattenedFilters())if(r.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class LN{convertValue(e,n="none"){switch(Zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ss(e,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(e){var n,i,s;const r=(s=(i=(n=e.fields)===null||n===void 0?void 0:n[Ku].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(a=>ze(a.doubleValue));return new sp(r)}convertGeoPoint(e){return new ip(ze(e.latitude),ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Oc(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Io(e));default:return null}}convertTimestamp(e){const n=Xi(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ae.fromString(e);ge(Eb(i));const s=new No(i.get(1),i.get(3)),r=new Y(i.popFirst(5));return s.isEqual(n)||ti(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ow extends sw{constructor(e,n,i,s,r,a){super(e,n,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(lp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class uu extends ow{data(e={}){return super.data(e)}}class UN{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ha(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new uu(this._firestore,this._userDataWriter,i.key,i,new Ha(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new uu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ha(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>r||l.type!==3).map(l=>{const u=new uu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ha(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,m=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:zN(l.type),doc:u,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function zN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t){t=Sn(t,Dt);const e=Sn(t.firestore,Qs);return SN(Fc(e),t._key).then(n=>qN(e,t,n))}class lw extends LN{constructor(e){super(),this.firestore=e}convertBytes(e){return new $r(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}}function ii(t){t=Sn(t,la);const e=Sn(t.firestore,Qs),n=Fc(e),i=new lw(e);return jN(t._query),AN(n,t._query).then(s=>new UN(e,i,t,s))}function uw(t,e,n,...i){t=Sn(t,Dt);const s=Sn(t.firestore,Qs),r=Gc(s);let a;return a=typeof(e=Ke(e))=="string"||e instanceof nl?ew(r,"updateDoc",t._key,e,n,i):Jb(r,"updateDoc",t._key,e),Yc(s,[a.toMutation(t._key,Nt.exists(!0))])}function BN(t){return Yc(Sn(t.firestore,Qs),[new Pc(t._key,Nt.none())])}function hp(t,e){const n=Sn(t.firestore,Qs),i=An(t),s=aw(t.converter,e);return Yc(n,[Zb(Gc(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Nt.exists(!1))]).then(()=>i)}function Yc(t,e){return function(i,s){const r=new Yn;return i.asyncQueue.enqueueAndForget(async()=>dN(await wN(i),s,r)),r.promise}(Fc(t),e)}function qN(t,e,n){const i=n.docs.get(e._key),s=new lw(t);return new ow(t,s,e._key,i,new Ha(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gc(e)}set(e,n,i){this._verifyNotCommitted();const s=ud(e,this._firestore),r=aw(s.converter,n,i),a=Zb(this._dataReader,"WriteBatch.set",s._key,r,s.converter!==null,i);return this._mutations.push(a.toMutation(s._key,Nt.none())),this}update(e,n,i,...s){this._verifyNotCommitted();const r=ud(e,this._firestore);let a;return a=typeof(n=Ke(n))=="string"||n instanceof nl?ew(this._dataReader,"WriteBatch.update",r._key,n,i,s):Jb(this._dataReader,"WriteBatch.update",r._key,n),this._mutations.push(a.toMutation(r._key,Nt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ud(e,this._firestore);return this._mutations=this._mutations.concat(new Pc(n._key,Nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ud(t,e){if((t=Ke(t)).firestore!==e)throw new K(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t){return Fc(t=Sn(t,Qs)),new HN(t,e=>Yc(t,e))}(function(e,n=!0){(function(s){sa=s})(ia),qr(new Ms("firestore",(i,{instanceIdentifier:s,options:r})=>{const a=i.getProvider("app").getImmediate(),l=new Qs(new j2(i.getProvider("auth-internal")),new U2(a,i.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new K(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new No(h.options.projectId,m)}(a,s),a);return r=Object.assign({useFetchStreams:n},r),l._setSettings(r),l},"PUBLIC").setMultipleInstances(!0)),qi(n0,i0,e),qi(n0,i0,"esm2017")})();function dp(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function cw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GN=cw,hw=new $o("auth","Firebase",cw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new Im("@firebase/auth");function KN(t,...e){nc.logLevel<=ae.WARN&&nc.warn(`Auth (${ia}): ${t}`,...e)}function cu(t,...e){nc.logLevel<=ae.ERROR&&nc.error(`Auth (${ia}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t,...e){throw mp(t,...e)}function un(t,...e){return mp(t,...e)}function fp(t,e,n){const i=Object.assign(Object.assign({},GN()),{[e]:n});return new $o("auth","Firebase",i).create(e,{appName:t.name})}function $n(t){return fp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function QN(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&sn(t,"argument-error"),fp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mp(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return hw.create(t,...e)}function W(t,e,...n){if(!t)throw mp(e,...n)}function Fn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cu(e),new Error(e)}function si(t,e){t||Fn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function YN(){return J0()==="http:"||J0()==="https:"}function J0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YN()||hR()||"connection"in navigator)?navigator.onLine:!0}function XN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n){this.shortDelay=e,this.longDelay=n,si(n>e,"Short delay should be less than long delay!"),this.isMobile=lR()||dR()}get(){return $N()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t,e){si(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new sl(3e4,6e4);function oi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function li(t,e,n,i,s={}){return fw(t,s,async()=>{let r={},a={};i&&(e==="GET"?a=i:r={body:JSON.stringify(i)});const l=Xo(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},r);return cR()||(h.referrerPolicy="no-referrer"),dw.fetch()(mw(t,t.config.apiHost,n,l),h)})}async function fw(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},WN),e);try{const s=new eD(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await r.json();if("needConfirmation"in a)throw Gl(t,"account-exists-with-different-credential",a);if(r.ok&&!("errorMessage"in a))return a;{const l=r.ok?a.errorMessage:a.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Gl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Gl(t,"user-disabled",a);const m=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw fp(t,m,h);sn(t,m)}}catch(s){if(s instanceof ai)throw s;sn(t,"network-request-failed",{message:String(s)})}}async function rl(t,e,n,i,s={}){const r=await li(t,e,n,i,s);return"mfaPendingCredential"in r&&sn(t,"multi-factor-auth-required",{_serverResponse:r}),r}function mw(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?pp(t.config,s):`${t.config.apiScheme}://${s}`}function JN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(un(this.auth,"network-request-failed")),ZN.get())})}}function Gl(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=un(t,e,i);return s.customData._tokenResponse=n,s}function e_(t){return t!==void 0&&t.enterprise!==void 0}class tD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return JN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nD(t,e){return li(t,"GET","/v2/recaptchaConfig",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iD(t,e){return li(t,"POST","/v1/accounts:delete",e)}async function pw(t,e){return li(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sD(t,e=!1){const n=Ke(t),i=await n.getIdToken(e),s=gp(i);W(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,a=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:co(cd(s.auth_time)),issuedAtTime:co(cd(s.iat)),expirationTime:co(cd(s.exp)),signInProvider:a||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function cd(t){return Number(t)*1e3}function gp(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return cu("JWT malformed, contained fewer than 3 sections"),null;try{const s=_T(n);return s?JSON.parse(s):(cu("Failed to decode base64 JWT payload"),null)}catch(s){return cu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function t_(t){const e=gp(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ai&&rD(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function rD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=co(this.lastLoginAt),this.creationTime=co(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Vo(t,pw(n,{idToken:i}));W(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const a=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?gw(r.providerUserInfo):[],l=lD(t.providerData,a),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(l!=null&&l.length),m=u?h:!1,g={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new If(r.createdAt,r.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function oD(t){const e=Ke(t);await ic(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lD(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function gw(t){return t.map(e=>{var{providerId:n}=e,i=dp(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(t,e){const n=await fw(t,{},async()=>{const i=Xo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,a=mw(t,s,"/v1/token",`key=${r}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",dw.fetch()(a,{method:"POST",headers:l,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cD(t,e){return li(t,"POST","/v2/accounts:revokeToken",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):t_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");const n=t_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await uD(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,a=new Nr;return i&&(W(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(W(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),r&&(W(typeof r=="number","internal-error",{appName:e}),a.expirationTime=r),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nr,this.toJSON())}_performRefresh(){return Fn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gn{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,r=dp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new aD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new If(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Vo(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return sD(this,e)}reload(){return oD(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ic(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lt(this.auth.app))return Promise.reject($n(this.auth));const e=await this.getIdToken();return await Vo(this,iD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,r,a,l,u,h,m;const g=(i=n.displayName)!==null&&i!==void 0?i:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,_=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,C=(a=n.photoURL)!==null&&a!==void 0?a:void 0,O=(l=n.tenantId)!==null&&l!==void 0?l:void 0,j=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,S=(h=n.createdAt)!==null&&h!==void 0?h:void 0,T=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:b,emailVerified:I,isAnonymous:M,providerData:k,stsTokenManager:w}=n;W(b&&w,e,"internal-error");const p=Nr.fromJSON(this.name,w);W(typeof b=="string",e,"internal-error"),yi(g,e.name),yi(y,e.name),W(typeof I=="boolean",e,"internal-error"),W(typeof M=="boolean",e,"internal-error"),yi(_,e.name),yi(C,e.name),yi(O,e.name),yi(j,e.name),yi(S,e.name),yi(T,e.name);const E=new Gn({uid:b,auth:e,email:y,emailVerified:I,displayName:g,isAnonymous:M,photoURL:C,phoneNumber:_,tenantId:O,stsTokenManager:p,createdAt:S,lastLoginAt:T});return k&&Array.isArray(k)&&(E.providerData=k.map(A=>Object.assign({},A))),j&&(E._redirectEventId=j),E}static async _fromIdTokenResponse(e,n,i=!1){const s=new Nr;s.updateFromServerResponse(n);const r=new Gn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await ic(r),r}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];W(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?gw(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),l=new Nr;l.updateFromIdToken(i);const u=new Gn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new If(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=new Map;function Kn(t){si(t instanceof Function,"Expected a class definition");let e=n_.get(t);return e?(si(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,n_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yw.type="NONE";const i_=yw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(t,e,n){return`firebase:${t}:${e}:${n}`}class Dr{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=hu(this.userKey,s.apiKey,r),this.fullPersistenceKey=hu("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Dr(Kn(i_),e,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=s[0]||Kn(i_);const a=hu(i,e.config.apiKey,e.name);let l=null;for(const h of n)try{const m=await h._get(a);if(m){const g=Gn._fromJSON(e,m);h!==r&&(l=g),r=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!u.length?new Dr(r,e,i):(r=u[0],l&&await r._set(a,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==r)try{await h._remove(a)}catch{}})),new Dr(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Tw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_w(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ww(e))return"Blackberry";if(Sw(e))return"Webos";if(vw(e))return"Safari";if((e.includes("chrome/")||Ew(e))&&!e.includes("edge/"))return"Chrome";if(bw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function _w(t=vt()){return/firefox\//i.test(t)}function vw(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ew(t=vt()){return/crios\//i.test(t)}function Tw(t=vt()){return/iemobile/i.test(t)}function bw(t=vt()){return/android/i.test(t)}function ww(t=vt()){return/blackberry/i.test(t)}function Sw(t=vt()){return/webos/i.test(t)}function yp(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hD(t=vt()){var e;return yp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dD(){return fR()&&document.documentMode===10}function Aw(t=vt()){return yp(t)||bw(t)||Sw(t)||ww(t)||/windows phone/i.test(t)||Tw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(t,e=[]){let n;switch(t){case"Browser":n=s_(vt());break;case"Worker":n=`${s_(vt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ia}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((a,l)=>{try{const u=e(r);a(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mD(t,e={}){return li(t,"GET","/v2/passwordPolicy",oi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=6;class gD{constructor(e){var n,i,s,r;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:pD,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,r,a,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.containsUppercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new r_(this),this.idTokenSubscription=new r_(this),this.beforeStateQueue=new fD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Kn(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Dr.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pw(this,{idToken:e}),i=await Gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Lt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(s=u.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ic(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Lt(this.app))return Promise.reject($n(this));const n=e?Ke(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Lt(this.app)?Promise.reject($n(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Lt(this.app)?Promise.reject($n(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mD(this),n=new gD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $o("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await cD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Kn(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=await Dr.create(this,[Kn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(l,this,"internal-error"),l.then(()=>{a||r(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Lt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&KN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ui(t){return Ke(t)}class r_{constructor(e){this.auth=e,this.observer=null,this.addObserver=TR(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _D(t){$c=t}function Rw(t){return $c.loadJS(t)}function vD(){return $c.recaptchaEnterpriseScript}function ED(){return $c.gapiScript}function TD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class bD{constructor(){this.enterprise=new wD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class wD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const SD="recaptcha-enterprise",Cw="NO_RECAPTCHA";class AD{constructor(e){this.type=SD,this.auth=ui(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(a,l)=>{nD(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new tD(u);return r.tenantId==null?r._agentRecaptchaConfig=h:r._tenantRecaptchaConfigs[r.tenantId]=h,a(h.siteKey)}}).catch(u=>{l(u)})})}function s(r,a,l){const u=window.grecaptcha;e_(u)?u.enterprise.ready(()=>{u.enterprise.execute(r,{action:e}).then(h=>{a(h)}).catch(()=>{a(Cw)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bD().execute("siteKey",{action:"verify"}):new Promise((r,a)=>{i(this.auth).then(l=>{if(!n&&e_(window.grecaptcha))s(l,r,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=vD();u.length!==0&&(u+=l),Rw(u).then(()=>{s(l,r,a)}).catch(h=>{a(h)})}}).catch(l=>{a(l)})})}}async function a_(t,e,n,i=!1,s=!1){const r=new AD(t);let a;if(s)a=Cw;else try{a=await r.verify(n)}catch{a=await r.verify(n,!0)}const l=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function sc(t,e,n,i,s){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await a_(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await a_(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xD(t,e){const n=Dm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(ks(r,e??{}))return s;sn(s,"already-initialized")}return n.initialize({options:e})}function RD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Kn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function CD(t,e,n){const i=ui(t);W(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=Iw(e),{host:a,port:l}=ID(e),u=l===null?"":`:${l}`,h={url:`${r}//${a}${u}/`},m=Object.freeze({host:a,port:l,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){W(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),W(ks(h,i.config.emulator)&&ks(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,ND()}function Iw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ID(t){const e=Iw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:o_(i.substr(r.length+1))}}else{const[r,a]=i.split(":");return{host:r,port:o_(a)}}}function o_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ND(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fn("not implemented")}_getIdTokenResponse(e){return Fn("not implemented")}_linkToIdToken(e,n){return Fn("not implemented")}_getReauthenticationResolver(e){return Fn("not implemented")}}async function DD(t,e){return li(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(t,e){return rl(t,"POST","/v1/accounts:signInWithPassword",oi(t,e))}async function kD(t,e){return li(t,"POST","/v1/accounts:sendOobCode",oi(t,e))}async function MD(t,e){return kD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VD(t,e){return rl(t,"POST","/v1/accounts:signInWithEmailLink",oi(t,e))}async function jD(t,e){return rl(t,"POST","/v1/accounts:signInWithEmailLink",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends _p{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new jo(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new jo(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sc(e,n,"signInWithPassword",OD);case"emailLink":return VD(e,{email:this._email,oobCode:this._password});default:sn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sc(e,i,"signUpPassword",DD);case"emailLink":return jD(e,{idToken:n,email:this._email,oobCode:this._password});default:sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Or(t,e){return rl(t,"POST","/v1/accounts:signInWithIdp",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="http://localhost";class Ps extends _p{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,r=dp(n,["providerId","signInMethod"]);if(!i||!s)return null;const a=new Ps(i,s);return a.idToken=r.idToken||void 0,a.accessToken=r.accessToken||void 0,a.secret=r.secret,a.nonce=r.nonce,a.pendingToken=r.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Or(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Or(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Or(e,n)}buildRequest(){const e={requestUri:PD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UD(t){const e=La(Ua(t)).link,n=e?La(Ua(e)).deep_link_id:null,i=La(Ua(t)).deep_link_id;return(i?La(Ua(i)).link:null)||i||n||e||t}class vp{constructor(e){var n,i,s,r,a,l;const u=La(Ua(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,m=(i=u.oobCode)!==null&&i!==void 0?i:null,g=LD((s=u.mode)!==null&&s!==void 0?s:null);W(h&&m&&g,"argument-error"),this.apiKey=h,this.operation=g,this.code=m,this.continueUrl=(r=u.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=UD(e);try{return new vp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.providerId=ua.PROVIDER_ID}static credential(e,n){return jo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=vp.parseLink(n);return W(i,"argument-error"),jo._fromEmailAndCode(e,i.code,i.tenantId)}}ua.PROVIDER_ID="password";ua.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ua.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al extends Ep{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends al{constructor(){super("facebook.com")}static credential(e){return Ps._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xi.credential(e.oauthAccessToken)}catch{return null}}}xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends al{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ps._fromParams({providerId:Ln.PROVIDER_ID,signInMethod:Ln.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ln.credentialFromTaggedObject(e)}static credentialFromError(e){return Ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Ln.credential(n,i)}catch{return null}}}Ln.GOOGLE_SIGN_IN_METHOD="google.com";Ln.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends al{constructor(){super("github.com")}static credential(e){return Ps._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.GITHUB_SIGN_IN_METHOD="github.com";Ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends al{constructor(){super("twitter.com")}static credential(e,n){return Ps._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ci.credential(n,i)}catch{return null}}}Ci.TWITTER_SIGN_IN_METHOD="twitter.com";Ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zD(t,e){return rl(t,"POST","/v1/accounts:signUp",oi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await Gn._fromIdTokenResponse(e,i,s),a=l_(i);return new Ls({user:r,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=l_(i);return new Ls({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function l_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends ai{constructor(e,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,rc.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new rc(e,n,i,s)}}function Nw(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?rc._fromErrorAndOperation(t,r,e,i):r})}async function BD(t,e,n=!1){const i=await Vo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ls._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(t,e,n=!1){const{auth:i}=t;if(Lt(i.app))return Promise.reject($n(i));const s="reauthenticate";try{const r=await Vo(t,Nw(i,s,e,t),n);W(r.idToken,i,"internal-error");const a=gp(r.idToken);W(a,i,"internal-error");const{sub:l}=a;return W(t.uid===l,i,"user-mismatch"),Ls._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&sn(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dw(t,e,n=!1){if(Lt(t.app))return Promise.reject($n(t));const i="signIn",s=await Nw(t,i,e),r=await Ls._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function HD(t,e){return Dw(ui(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ow(t){const e=ui(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function FD(t,e,n){const i=ui(t);await sc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",MD)}async function GD(t,e,n){if(Lt(t.app))return Promise.reject($n(t));const i=ui(t),a=await sc(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zD).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Ow(t),u}),l=await Ls._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(l.user),l}function KD(t,e,n){return Lt(t.app)?Promise.reject($n(t)):HD(Ke(t),ua.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Ow(t),i})}function QD(t,e,n,i){return Ke(t).onIdTokenChanged(e,n,i)}function YD(t,e,n){return Ke(t).beforeAuthStateChanged(e,n)}function $D(t,e,n,i){return Ke(t).onAuthStateChanged(e,n,i)}function XD(t){return Ke(t).signOut()}const ac="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ac,"1"),this.storage.removeItem(ac),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=1e3,ZD=10;class Mw extends kw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Aw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},r=this.storage.getItem(i);dD()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ZD):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},WD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mw.type="LOCAL";const JD=Mw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw extends kw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Vw.type="SESSION";const jw=Vw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Xc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async h=>h(n.origin,r)),u=await eO(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,a;return new Promise((l,u)=>{const h=Tp("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(g){const y=g;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(m),r=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),l(y.data.response);break;default:clearTimeout(m),clearTimeout(r),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return window}function nO(t){Tn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}async function iO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function rO(){return Pw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="firebaseLocalStorageDb",aO=1,oc="firebaseLocalStorage",Uw="fbase_key";class ol{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wc(t,e){return t.transaction([oc],e?"readwrite":"readonly").objectStore(oc)}function oO(){const t=indexedDB.deleteDatabase(Lw);return new ol(t).toPromise()}function Nf(){const t=indexedDB.open(Lw,aO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(oc,{keyPath:Uw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(oc)?e(i):(i.close(),await oO(),e(await Nf()))})})}async function u_(t,e,n){const i=Wc(t,!0).put({[Uw]:e,value:n});return new ol(i).toPromise()}async function lO(t,e){const n=Wc(t,!1).get(e),i=await new ol(n).toPromise();return i===void 0?null:i.value}function c_(t,e){const n=Wc(t,!0).delete(e);return new ol(n).toPromise()}const uO=800,cO=3;class zw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>cO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xc._getInstance(rO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await iO(),!this.activeServiceWorker)return;this.sender=new tO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nf();return await u_(e,ac,"1"),await c_(e,ac),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>u_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>lO(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>c_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Wc(s,!1).getAll();return new ol(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}zw.type="LOCAL";const hO=zw;new sl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t,e){return e?Kn(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp extends _p{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Or(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Or(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Or(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function dO(t){return Dw(t.auth,new bp(t),t.bypassAuthState)}function fO(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),qD(n,new bp(t),t.bypassAuthState)}async function mO(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),BD(n,new bp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return dO;case"linkViaPopup":case"linkViaRedirect":return mO;case"reauthViaPopup":case"reauthViaRedirect":return fO;default:sn(this.auth,"internal-error")}}resolve(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=new sl(2e3,1e4);async function gO(t,e,n){if(Lt(t.app))return Promise.reject(un(t,"operation-not-supported-in-this-environment"));const i=ui(t);QN(t,e,Ep);const s=Bw(i,n);return new Ts(i,"signInViaPopup",e,s).executeNotNull()}class Ts extends qw{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Ts.currentPopupAction&&Ts.currentPopupAction.cancel(),Ts.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return W(e,this.auth,"internal-error"),e}async onExecution(){si(this.filter.length===1,"Popup operations only handle one event");const e=Tp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ts.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pO.get())};e()}}Ts.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO="pendingRedirect",du=new Map;class _O extends qw{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=du.get(this.auth._key());if(!e){try{const i=await vO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}du.set(this.auth._key(),e)}return this.bypassAuthState||du.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vO(t,e){const n=bO(e),i=TO(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function EO(t,e){du.set(t._key(),e)}function TO(t){return Kn(t._redirectPersistence)}function bO(t){return hu(yO,t.config.apiKey,t.name)}async function wO(t,e,n=!1){if(Lt(t.app))return Promise.reject($n(t));const i=ui(t),s=Bw(i,e),a=await new _O(i,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=10*60*1e3;class AO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!Hw(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(un(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SO&&this.cachedEventUids.clear(),this.cachedEventUids.has(h_(e))}saveEventToCache(e){this.cachedEventUids.add(h_(e)),this.lastProcessedEventTime=Date.now()}}function h_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Hw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RO(t,e={}){return li(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IO=/^https?/;async function NO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RO(t);for(const n of e)try{if(DO(n))return}catch{}sn(t,"unauthorized-domain")}function DO(t){const e=Cf(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!IO.test(n))return!1;if(CO.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=new sl(3e4,6e4);function d_(){const t=Tn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function kO(t){return new Promise((e,n)=>{var i,s,r;function a(){d_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{d_(),n(un(t,"network-request-failed"))},timeout:OO.get()})}if(!((s=(i=Tn().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=Tn().gapi)===null||r===void 0)&&r.load)a();else{const l=TD("iframefcb");return Tn()[l]=()=>{gapi.load?a():n(un(t,"network-request-failed"))},Rw(`${ED()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw fu=null,e})}let fu=null;function MO(t){return fu=fu||kO(t),fu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=new sl(5e3,15e3),jO="__/auth/iframe",PO="emulator/auth/iframe",LO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zO(t){const e=t.config;W(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?pp(e,PO):`https://${t.config.authDomain}/${jO}`,i={apiKey:e.apiKey,appName:t.name,v:ia},s=UO.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Xo(i).slice(1)}`}async function BO(t){const e=await MO(t),n=Tn().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:zO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LO,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const a=un(t,"network-request-failed"),l=Tn().setTimeout(()=>{r(a)},VO.get());function u(){Tn().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{r(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HO=500,FO=600,GO="_blank",KO="http://localhost";class f_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QO(t,e,n,i=HO,s=FO){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},qO),{width:i.toString(),height:s.toString(),top:r,left:a}),h=vt().toLowerCase();n&&(l=Ew(h)?GO:n),_w(h)&&(e=e||KO,u.scrollbars="yes");const m=Object.entries(u).reduce((y,[_,C])=>`${y}${_}=${C},`,"");if(hD(h)&&l!=="_self")return YO(e||"",l),new f_(null);const g=window.open(e||"",l,m);W(g,t,"popup-blocked");try{g.focus()}catch{}return new f_(g)}function YO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O="__/auth/handler",XO="emulator/auth/handler",WO=encodeURIComponent("fac");async function m_(t,e,n,i,s,r){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ia,eventId:s};if(e instanceof Ep){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",ER(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))a[m]=g}if(e instanceof al){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const u=await t._getAppCheckToken(),h=u?`#${WO}=${encodeURIComponent(u)}`:"";return`${ZO(t)}?${Xo(l).slice(1)}${h}`}function ZO({config:t}){return t.emulator?pp(t,XO):`https://${t.authDomain}/${$O}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hd="webStorageSupport";class JO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jw,this._completeRedirectFn=wO,this._overrideRedirectResult=EO}async _openPopup(e,n,i,s){var r;si((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const a=await m_(e,n,i,Cf(),s);return QO(e,a,Tp())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await m_(e,n,i,Cf(),s);return nO(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(si(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await BO(e),i=new AO(e);return n.register("authEvent",s=>(W(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hd,{type:hd},s=>{var r;const a=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[hd];a!==void 0&&n(!!a),sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=NO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Aw()||vw()||yp()}}const ek=JO;var p_="@firebase/auth",g_="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ik(t){qr(new Ms("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xw(t)},h=new yD(i,s,r,u);return RD(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),qr(new Ms("auth-internal",e=>{const n=ui(e.getProvider("auth").getImmediate());return(i=>new tk(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qi(p_,g_,nk(t)),qi(p_,g_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=5*60,rk=TT("authIdTokenMaxAge")||sk;let y_=null;const ak=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>rk)return;const s=n==null?void 0:n.token;y_!==s&&(y_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function ok(t=AT()){const e=Dm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xD(t,{popupRedirectResolver:ek,persistence:[hO,JD,jw]}),i=TT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const a=ak(r.toString());YD(n,a,()=>a(n.currentUser)),QD(n,l=>a(l))}}const s=vT("auth");return s&&CD(n,`http://${s}`),n}function lk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_D({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=un("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",lk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ik("Browser");const vi={apiKey:"AIzaSyAWqY7GcAk8HrraCcz1K0X5BH2nF6J_Np0",authDomain:"bisonsports-3662c.firebaseapp.com",projectId:"bisonsports-3662c",storageBucket:"bisonsports-3662c.firebasestorage.app",messagingSenderId:"911932271804",appId:"1:911932271804:web:8c13b569ba42377828b4b9",measurementId:"G-1EB7YRKGYT"};console.log("Firebase Config:",{apiKey:vi.apiKey?"Present":"Missing",authDomain:vi.authDomain?"Present":"Missing",projectId:vi.projectId?"Present":"Missing",storageBucket:vi.storageBucket?"Present":"Missing",messagingSenderId:vi.messagingSenderId?"Present":"Missing",appId:vi.appId?"Present":"Missing",measurementId:vi.measurementId?"Present":"Missing"});const Fw=ST(vi),Le=CN(Fw),tr=ok(Fw),uk=new Ln,Gw=z.createContext(),Oa={data:{managers:new Map,stadiums:new Map},maxAge:5*60*1e3,set(t,e,n){this.data[t].set(e,{data:n,timestamp:Date.now()})},get(t,e){const n=this.data[t].get(e);return n?Date.now()-n.timestamp>this.maxAge?(this.data[t].delete(e),null):n.data:null},clear(){this.data.managers.clear(),this.data.stadiums.clear()}},as=()=>z.useContext(Gw),ck=({children:t})=>{const[e,n]=z.useState(null),[i,s]=z.useState(!0),[r,a]=z.useState(""),[l,u]=z.useState(null),[h,m]=z.useState(null),g=async b=>{try{const I=Oa.get("stadiums",b);if(I){m(I);return}const M=An(Le,"stadiums",b),k=await Mo(M);if(k.exists()){const w=k.data();Oa.set("stadiums",b,w),m(w)}else console.error("Stadium not found"),m(null)}catch(I){console.error("Error fetching stadium data:",I),m(null)}},y=async b=>{try{const I=Oa.get("managers",b);if(I){u({...I,id:b}),I.stadiumID&&await g(I.stadiumID);return}const M=An(Le,"managers",b),k=await Mo(M);if(k.exists()){const w={...k.data(),id:b};Oa.set("managers",b,w),u(w),w.stadiumID?await g(w.stadiumID):m(null)}else a("Manager profile not found"),u(null),m(null)}catch(I){console.error("Error fetching manager data:",I),a("Failed to fetch manager data"),u(null),m(null)}},_=async()=>{try{const b=await gO(tr,uk);return await y(b.user.uid),b.user}catch(b){throw a(b.message),b}},C=async(b,I)=>{try{const M=await KD(tr,b,I);return await y(M.user.uid),M.user}catch(M){throw a(M.message),M}},O=async(b,I)=>{try{const M=await GD(tr,b,I);return await y(M.user.uid),M.user}catch(M){throw a(M.message),M}},j=async b=>{try{await FD(tr,b)}catch(I){throw a(I.message),I}},S=async()=>{try{await XD(tr),n(null),u(null),m(null),Oa.clear()}catch(b){throw a(b.message),b}};z.useEffect(()=>$D(tr,async I=>{n(I),I&&await y(I.uid),s(!1)}),[]);const T={user:e,error:r,managerData:l,stadiumData:h,setStadiumData:m,signInWithGoogle:_,signInWithEmail:C,signUpWithEmail:O,resetPassword:j,logOut:S,loading:i};return d.jsx(Gw.Provider,{value:T,children:!i&&t})};function wp({isVisible:t,onAnimationComplete:e}){return t?d.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[d.jsxs("div",{className:"bg-white rounded-lg p-8 flex flex-col items-center",children:[d.jsxs("div",{className:"relative w-16 h-16",children:[d.jsx("svg",{className:"absolute inset-0 w-full h-full",children:d.jsx("circle",{className:"stroke-green-500",strokeWidth:"4",fill:"none",r:"30",cx:"32",cy:"32",style:{strokeDasharray:188.5,strokeDashoffset:188.5,animation:"drawCircle 1s ease-in-out forwards"}})}),d.jsx("svg",{className:"absolute inset-0 w-full h-full",style:{animation:"drawTick 0.5s ease-in-out 0.5s forwards",opacity:0},children:d.jsx("path",{className:"stroke-green-500",strokeWidth:"4",fill:"none",d:"M20 32 L28 40 L44 24",style:{strokeDasharray:50,strokeDashoffset:50}})})]}),d.jsx("p",{className:"mt-4 text-xl font-semibold text-green-600",children:"Booked !!!"})]}),d.jsx("style",{jsx:!0,children:`
        @keyframes drawCircle {
          to {
            stroke-dashoffset: 0;
          }
        }
        @keyframes drawTick {
          to {
            stroke-dashoffset: 0;
            opacity: 1;
          }
        }
      `})]}):null}function Kw({isOpen:t,onClose:e,onSave:n,court:i}){const{managerData:s}=as(),[r,a]=z.useState({courtId:"",date:"",duration:0,coachId:"",status:"confirmed"}),[l,u]=z.useState(!1),[h,m]=z.useState(""),[g,y]=z.useState([]),[_,C]=z.useState(null),[O,j]=z.useState([]),[S,T]=z.useState([]),[b,I]=z.useState(null),[M,k]=z.useState(!1);z.useEffect(()=>{if(t){const H=new Date().toISOString().split("T")[0];a({courtId:"",date:H,duration:0,coachId:"",status:"confirmed"}),m(""),i?(C(i),a(te=>({...te,courtId:i.id,date:H,duration:i.minimumBookingDuration||60}))):w()}},[t,i]);const w=async()=>{try{const H=Ht(Le,"courts"),te=ts(H,En("stadiumId","==",s.stadiumID)),Q=(await ii(te)).docs.map(pe=>({id:pe.id,...pe.data()}));y(Q)}catch(H){console.error("Error fetching courts:",H),m("Failed to fetch courts. Please try again.")}},p=async()=>{if(!(!r.date||!r.courtId))try{const H=Ht(Le,"bookings"),te=ts(H,En("courtId","==",r.courtId),En("date","==",r.date)),Q=(await ii(te)).docs.map(pe=>({...pe.data()}));j(Q)}catch(H){console.error("Error fetching booked slots:",H)}};z.useEffect(()=>{r.date&&r.courtId&&p()},[r.date,r.courtId]);const E=H=>{if(!H)return 0;const[te,F]=H.split(" ");let[Q,pe]=te.split(":").map(Number);return Q=Q%12,F==="PM"&&(Q+=12),Q*60+pe},A=(H,te)=>{if(!H||!te)return!1;const F=E(H),Q=E(te);return!O.some(pe=>{const Me=E(pe.timeSlot.startTime),os=E(pe.timeSlot.endTime);return F<os&&Q>Me})},R=()=>{const H=new Date,te={timeZone:"Asia/Kolkata",hour:"2-digit",minute:"2-digit",hour12:!0};return H.toLocaleTimeString("en-US",te)},N=H=>{if(!H)return!0;const te=new Date,F=new Date(te.toLocaleString("en-US",{timeZone:"Asia/Kolkata"})),[Q,pe]=H.split(" ");let[Me,os]=Q.split(":").map(Number);Me=Me%12,pe==="PM"&&(Me+=12);const Et=new Date(r.date);if(Et.setHours(Me,os,0),Et.toDateString()===F.toDateString()){const ca=new Date(F.getTime()+18e5);return Et<F&&Et<ca}return Et<F},x=()=>{if(!(_!=null&&_.openingTime)||!(_!=null&&_.closingTime)||!r.date||!r.duration){T([]);return}try{const H=[],[te,F]=_.openingTime.split(" ");let[Q,pe]=te.split(":").map(Number);Q=Q%12,F==="PM"&&(Q+=12);const[Me,os]=_.closingTime.split(" ");let[Et,ca]=Me.split(":").map(Number);Et=Et%12,os==="PM"&&(Et+=12);let Cn=new Date(r.date);Cn.setHours(Q,pe,0);const ci=new Date(r.date);for(ci.setHours(Et,ca,0);Cn<ci;){const hi=Cn.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Kolkata"}),ls=new Date(Cn);if(ls.setMinutes(Cn.getMinutes()+r.duration),ls<=ci){const Ys=ls.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,timeZone:"Asia/Kolkata"});A(hi,Ys)&&!N(hi)&&H.push({startTime:hi,endTime:Ys})}Cn.setMinutes(Cn.getMinutes()+30)}T(H)}catch{m("Error generating time slots. Please try again."),T([])}};z.useEffect(()=>{x()},[r.date,r.duration,_,O]);const ye=()=>{if(!_||!r.duration)return 0;const H=r.duration/60;return Math.round(H*_.pricePerHour)},Ce=H=>{const{name:te,value:F}=H.target;if(te==="date"&&!F){const Q=new Date().toISOString().split("T")[0];a(pe=>({...pe,[te]:Q}))}else a(Q=>({...Q,[te]:te==="duration"?Number(F):F}))},q=H=>{const te=H.target.value,F=g.find(Q=>Q.id===te);C(F),a(Q=>({...Q,courtId:te,duration:F.minimumBookingDuration||60}))},X=()=>{a(H=>({...H,duration:H.duration+(_.minimumBookingDuration||60)}))},$=H=>{I(H)},me=async H=>{H.preventDefault(),u(!0),m("");try{if(!(s!=null&&s.id))throw new Error("Manager data not available");if(!b)throw new Error("Please select a time slot");const te=r.duration/60,F=Math.round(te*_.pricePerHour),Q={userId:s.id,stadiumId:s.stadiumID,courtId:r.courtId,coachId:r.coachId||null,date:r.date,timeSlot:{startTime:b.startTime,endTime:b.endTime},status:r.status,amount:F},pe=Ht(Le,"bookings");await hp(pe,Q),k(!0),setTimeout(()=>{k(!1),n()},2e3)}catch(te){console.error("Error creating booking:",te),m(te.message||"Failed to create booking. Please try again.")}finally{u(!1)}};return t?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[d.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Add New Booking"}),h&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:h}),d.jsxs("form",{onSubmit:me,className:"space-y-6",children:[!i&&d.jsx("div",{children:d.jsxs("select",{name:"courtId",value:r.courtId,onChange:q,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[d.jsx("option",{value:"",children:"Select a court"}),g.map(H=>d.jsxs("option",{value:H.id,children:["Court ",H.courtNumber," - ",H.sport]},H.id))]})}),d.jsx("div",{children:d.jsx("input",{type:"date",name:"date",value:r.date,onChange:Ce,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:new Date().toISOString().split("T")[0]})}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Duration (minutes)"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"number",name:"duration",value:r.duration,onChange:Ce,className:"mt-1 block w-full px-2 py-1 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:(_==null?void 0:_.minimumBookingDuration)||60,step:(_==null?void 0:_.minimumBookingDuration)||60,disabled:!_}),d.jsxs("button",{type:"button",onClick:X,className:"mt-1 px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:!_,children:["Add ",(_==null?void 0:_.minimumBookingDuration)||60," min"]})]}),_&&d.jsxs("div",{className:"mt-1 text-sm text-gray-500",children:[d.jsxs("p",{children:["Minimum duration: ",_.minimumBookingDuration||60," minutes"]}),d.jsxs("p",{children:["Price: ₹",ye()]})]})]}),S.length===0&&r.date&&r.duration&&d.jsxs("div",{className:"text-sm text-gray-500",children:[d.jsx("p",{children:"No available slots found for the selected duration."}),d.jsx("p",{children:"Please check:"}),d.jsxs("ul",{className:"list-disc pl-5",children:[d.jsx("li",{children:"Selected date is valid"}),d.jsx("li",{children:"Duration is within court hours"}),d.jsxs("li",{children:["Duration is a multiple of ",(_==null?void 0:_.minimumBookingDuration)||60," minutes"]}),d.jsx("li",{children:"No overlapping bookings exist"}),d.jsxs("li",{children:["Slots are not in the past (current time: ",R(),")"]})]})]}),S.length>0&&d.jsxs("div",{className:"relative",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Time Slots"}),d.jsx("div",{className:"h-10 overflow-x-auto border border-gray-300 rounded-md",children:d.jsx("div",{className:"flex flex-nowrap gap-2",children:S.map((H,te)=>d.jsxs("button",{type:"button",onClick:()=>$(H),className:`p-1 border rounded-md text-xs whitespace-nowrap ${(b==null?void 0:b.startTime)===H.startTime?"bg-blue-100 border-blue-500":"border-gray-300 hover:bg-gray-50"}`,children:[H.startTime," - ",H.endTime]},te))})}),d.jsxs("div",{className:"flex justify-center mt-2 space-x-2",children:[d.jsx("button",{type:"button",onClick:()=>document.querySelector(".overflow-x-auto").scrollBy({left:-100,behavior:"smooth"}),className:"px-3 py-1 bg-gray-300 rounded-md hover:bg-gray-400 text-xs transition duration-200 ease-in-out transform hover:scale-105",children:"<"}),d.jsx("button",{type:"button",onClick:()=>document.querySelector(".overflow-x-auto").scrollBy({left:100,behavior:"smooth"}),className:"px-3 py-1 bg-gray-300 rounded-md hover:bg-gray-400 text-xs transition duration-200 ease-in-out transform hover:scale-105",children:">"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Coach ID (Optional)"}),d.jsx("input",{type:"text",name:"coachId",value:r.coachId,onChange:Ce,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter coach ID"})]}),d.jsxs("div",{className:"flex justify-end gap-4",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:l||!b,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ${l||!b?"opacity-50 cursor-not-allowed":""}`,children:l?"Creating...":"Create Booking"})]})]})]})}),d.jsx(wp,{isVisible:M,onAnimationComplete:()=>{k(!1),n()}})]}):null}function Qw({isOpen:t,onClose:e,onSave:n,courts:i}){const{managerData:s}=as(),[r,a]=z.useState({courtId:"",date:"",startTime:"",endTime:""}),[l,u]=z.useState(!1),[h,m]=z.useState(""),[g,y]=z.useState(!1),[_,C]=z.useState(!1),[O,j]=z.useState(null);z.useEffect(()=>{if(t){const M=new Date().toISOString().split("T")[0];a({courtId:"",date:M,startTime:"",endTime:""}),m(""),C(!1),j(null)}},[t]);const S=()=>{if(!O)return[];const M=[],[k,w]=O.openingTime.split(" "),[p,E]=O.closingTime.split(" ");let[A,R]=k.split(":").map(Number),[N,x]=p.split(":").map(Number);A=A%12,w==="PM"&&(A+=12),N=N%12,E==="PM"&&(N+=12);const ye=new Date;ye.setHours(A,R,0);const Ce=new Date;for(Ce.setHours(N,x,0);ye<=Ce;){const q=ye.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});M.push(q),ye.setMinutes(ye.getMinutes()+30)}return M},T=M=>{const{name:k,value:w}=M.target;if(k==="courtId"){const p=i.find(E=>E.id===w);j(p),a(E=>({...E,[k]:w,startTime:"",endTime:""}))}else a(p=>({...p,[k]:w}))},b=async M=>{M.preventDefault(),u(!0),m("");try{if(!(s!=null&&s.id))throw new Error("Manager data not available");const k=_?i:[i.find(E=>E.id===r.courtId)],w=FN(Le),p=Ht(Le,"bookings");k.forEach(E=>{const A=An(p),R={amount:null,coachId:null,courtId:E.id,date:r.date,stadiumId:s.stadiumID,status:"inactive",timeSlot:{startTime:r.startTime,endTime:r.endTime},userId:s.id};w.set(A,R)}),await w.commit(),y(!0),setTimeout(()=>{y(!1),n()},2e3)}catch(k){console.error("Error setting inactive hours:",k),m(k.message||"Failed to set inactive hours. Please try again.")}finally{u(!1)}},I=S();return t?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[d.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Set Inactive Hours"}),h&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:h}),d.jsxs("form",{onSubmit:b,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Court Selection"}),d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx("input",{type:"checkbox",id:"selectAllCourts",checked:_,onChange:M=>{C(M.target.checked),M.target.checked?j(i[0]):j(null)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),d.jsx("label",{htmlFor:"selectAllCourts",className:"text-sm text-gray-700",children:"Select All Courts"})]}),!_&&d.jsxs("select",{name:"courtId",value:r.courtId,onChange:T,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!_,children:[d.jsx("option",{value:"",children:"Select a court"}),i.map(M=>d.jsxs("option",{value:M.id,children:["Court ",M.courtNumber," - ",M.sport]},M.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),d.jsx("input",{type:"date",name:"date",value:r.date,onChange:T,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:new Date().toISOString().split("T")[0]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),d.jsxs("select",{name:"startTime",value:r.startTime,onChange:T,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:!O,children:[d.jsx("option",{value:"",children:"Select time"}),I.map((M,k)=>d.jsx("option",{value:M,disabled:M>=r.endTime&&r.endTime!=="",children:M},k))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),d.jsxs("select",{name:"endTime",value:r.endTime,onChange:T,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:!O,children:[d.jsx("option",{value:"",children:"Select time"}),I.map((M,k)=>d.jsx("option",{value:M,disabled:M<=r.startTime,children:M},k))]})]})]}),d.jsxs("div",{className:"flex justify-end gap-4",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:l||!_&&!r.courtId,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ${l||!_&&!r.courtId?"opacity-50 cursor-not-allowed":""}`,children:l?"Submitting...":"Submit Inactive Hours"})]})]})]})}),d.jsx(wp,{isVisible:g,onAnimationComplete:()=>{y(!1),n()}})]}):null}const hk=({isOpen:t,toggleSidebar:e})=>{const{managerData:n}=as(),[i,s]=z.useState(!1),[r,a]=z.useState(!1),[l,u]=z.useState([]),[h,m]=z.useState(!1),g=async()=>{try{m(!0);const _=Ht(Le,"courts"),C=ts(_,En("stadiumId","==",n.stadiumID)),j=(await ii(C)).docs.map(S=>({id:S.id,...S.data()}));u(j)}catch(_){console.error("Error fetching courts:",_)}finally{m(!1)}};z.useEffect(()=>{n!=null&&n.stadiumID&&g()},[n==null?void 0:n.stadiumID]);const y=[{title:"Users List",icon:Cm},{title:"Payment History",icon:fT},{title:"Coaches",icon:pT},{title:"Court Details",icon:Ac},{title:"Add Booking",icon:Cc,onClick:()=>s(!0)},{title:"Inactive Hours",icon:dT,onClick:()=>a(!0)},{title:"Revenue",icon:hT}];return d.jsxs("div",{className:`bg-white h-full shadow-lg transition-all duration-300 ${t?"w-64":"w-20"} relative`,children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[d.jsx("h1",{className:`font-bold text-xl ${!t&&"hidden"}`,children:"SportsDash"}),d.jsx("button",{onClick:e,className:"p-1 rounded-full hover:bg-gray-200",children:t?d.jsx(xc,{size:20}):d.jsx(Rc,{size:20})})]}),d.jsx("nav",{className:"mt-6",children:d.jsx("ul",{children:y.map((_,C)=>d.jsx("li",{children:d.jsxs("button",{onClick:_.onClick,className:"w-full flex items-center p-4 text-gray-700 hover:bg-gray-100 transition-colors",children:[d.jsx(_.icon,{size:20,className:"min-w-[20px]"}),d.jsx("span",{className:`ml-4 ${!t&&"hidden"}`,children:_.title})]})},C))})}),d.jsx(Kw,{isOpen:i,onClose:()=>s(!1),onSave:()=>s(!1),court:null}),d.jsx(Qw,{isOpen:r,onClose:()=>a(!1),onSave:()=>a(!1),courts:l})]})},dk=({toggleSidebar:t})=>{const{logOut:e,managerData:n,stadiumData:i}=as(),[s,r]=z.useState(!1),[a,l]=z.useState(""),u=async()=>{try{r(!0),l(""),await e()}catch(h){l("Failed to log out. Please try again."),console.error("Failed to log out:",h)}finally{r(!1)}};return d.jsxs("header",{className:"bg-white shadow-sm h-16 flex items-center justify-between px-4",children:[d.jsx("button",{onClick:t,className:"p-2 rounded-md hover:bg-gray-100 lg:hidden",children:d.jsx(z1,{size:20})}),d.jsx("div",{className:"flex-1 lg:ml-4",children:d.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:(i==null?void 0:i.name)||"Loading Stadium..."})}),d.jsxs("div",{className:"flex items-center gap-4",children:[a&&d.jsx("span",{className:"text-sm text-red-600",children:a}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Q1,{size:18,className:"text-gray-600"}),d.jsxs("span",{className:"text-gray-700 font-medium",children:["Welcome, ",(n==null?void 0:n.name)||"Loading..."]})]}),d.jsxs("button",{onClick:u,disabled:s,className:`flex items-center gap-2 px-4 py-2 rounded-md transition-colors ${s?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-red-50 text-red-600 hover:bg-red-100"}`,children:[d.jsx(j1,{size:18}),d.jsx("span",{children:s?"Logging out...":"Logout"})]})]})]})};function fk({isOpen:t,onClose:e}){const{stadiumData:n,managerData:i,setStadiumData:s}=as(),[r,a]=z.useState({name:"",address:"",addressLink:"",amenities:[]}),[l,u]=z.useState(""),[h,m]=z.useState(!1),[g,y]=z.useState("");z.useEffect(()=>{n&&a({name:n.name||"",address:n.address||"",addressLink:n.addressLink||"",amenities:n.amenities||[]})},[n]);const _=S=>{const{name:T,value:b}=S.target;a(I=>({...I,[T]:b}))},C=()=>{l.trim()&&(a(S=>({...S,amenities:[...S.amenities,l.trim()]})),u(""))},O=S=>{a(T=>({...T,amenities:T.amenities.filter((b,I)=>I!==S)}))},j=async S=>{S.preventDefault(),m(!0),y("");try{const T=An(Le,"stadiums",i.stadiumID);await uw(T,r),s(r),e()}catch(T){console.error("Error updating stadium:",T),y("Failed to update stadium details. Please try again.")}finally{m(!1)}};return t?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-2xl w-full mx-4",children:[d.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Edit Stadium Details"}),g&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:g}),d.jsxs("form",{onSubmit:j,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Stadium Name"}),d.jsx("input",{type:"text",name:"name",value:r.name,onChange:_,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),d.jsx("input",{type:"text",name:"address",value:r.address,onChange:_,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address Link"}),d.jsx("input",{type:"url",name:"addressLink",value:r.addressLink,onChange:_,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amenities"}),d.jsxs("div",{className:"mt-2 flex gap-2",children:[d.jsx("input",{type:"text",value:l,onChange:S=>u(S.target.value),placeholder:"Add new amenity",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),d.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add"})]}),d.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:r.amenities.map((S,T)=>d.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[S,d.jsx("button",{type:"button",onClick:()=>O(T),className:"ml-2 text-blue-600 hover:text-blue-800",children:"×"})]},T))})]}),d.jsxs("div",{className:"flex justify-end gap-4",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:h,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ${h?"opacity-50 cursor-not-allowed":""}`,children:h?"Saving...":"Save Changes"})]})]})]})}):null}function mk({isOpen:t,onClose:e,onSave:n,stadiumId:i,court:s}){const[r,a]=z.useState({courtNumber:"",courtType:"",pricePerHour:"",sport:"",openingTime:"",closingTime:"",minimumBookingDuration:60}),[l,u]=z.useState(!1),[h,m]=z.useState("");z.useEffect(()=>{a(s?{courtNumber:s.courtNumber||"",courtType:s.courtType||"",pricePerHour:s.pricePerHour||"",sport:s.sport||"",openingTime:s.openingTime||"",closingTime:s.closingTime||"",minimumBookingDuration:s.minimumBookingDuration||60}:{courtNumber:"",courtType:"",pricePerHour:"",sport:"",openingTime:"",closingTime:"",minimumBookingDuration:60})},[s]);const g=C=>{const{name:O,value:j}=C.target;a(S=>({...S,[O]:O==="minimumBookingDuration"?Number(j):j}))},y=async C=>{C.preventDefault(),u(!0),m("");try{if(s){const O=An(Le,"courts",s.id);await uw(O,{...r,stadiumId:i})}else{const O=Ht(Le,"courts");await hp(O,{...r,stadiumId:i})}n()}catch(O){console.error("Error saving court:",O),m("Failed to save court. Please try again.")}finally{u(!1)}},_=()=>{const C=[];for(let O=0;O<24;O++)for(let j=0;j<60;j+=30){const S=new Date;S.setHours(O,j,0);const T=S.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});C.push(T)}return C};return t?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[d.jsx("h2",{className:"text-2xl font-bold mb-6",children:s?"Edit Court":"Add New Court"}),h&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:h}),d.jsxs("form",{onSubmit:y,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Court Number"}),d.jsx("input",{type:"text",name:"courtNumber",value:r.courtNumber,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sport"}),d.jsxs("select",{name:"sport",value:r.sport,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[d.jsx("option",{value:"",children:"Select sport"}),d.jsx("option",{value:"Badminton",children:"Badminton"}),d.jsx("option",{value:"Cricket",children:"Cricket"}),d.jsx("option",{value:"Football",children:"Football"}),d.jsx("option",{value:"Volleyball",children:"Swimming"}),d.jsx("option",{value:"Volleyball",children:"Gymnastics"}),d.jsx("option",{value:"Volleyball",children:"Volleyball"}),d.jsx("option",{value:"Basketball",children:"Basketball"}),d.jsx("option",{value:"Tennis",children:"Tennis"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Court Type"}),d.jsxs("select",{name:"courtType",value:r.courtType,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[d.jsx("option",{value:"",children:"Select sport/court type"}),d.jsx("option",{value:"Turf",children:"Artistc "}),d.jsx("option",{value:"Turf",children:"Trampoline and Tumbling "}),d.jsx("option",{value:"Turf",children:"Turf"}),d.jsx("option",{value:"Clay",children:"Toddlers "}),d.jsx("option",{value:"Grass",children:"Grass"}),d.jsx("option",{value:"Hard",children:"Hard"}),d.jsx("option",{value:"Synthetic",children:"Synthetic"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Price per Hour (₹)"}),d.jsx("input",{type:"number",name:"pricePerHour",value:r.pricePerHour,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,min:"0"})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Opening Time"}),d.jsxs("select",{name:"openingTime",value:r.openingTime,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[d.jsx("option",{value:"",children:"Select opening time"}),_().map((C,O)=>d.jsx("option",{value:C,children:C},O))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Closing Time"}),d.jsxs("select",{name:"closingTime",value:r.closingTime,onChange:g,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[d.jsx("option",{value:"",children:"Select closing time"}),_().map((C,O)=>d.jsx("option",{value:C,children:C},O))]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Booking Duration"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"radio",name:"minimumBookingDuration",value:"30",checked:r.minimumBookingDuration===30,onChange:g,className:"mr-2"}),"30 minutes"]}),d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"radio",name:"minimumBookingDuration",value:"60",checked:r.minimumBookingDuration===60,onChange:g,className:"mr-2"}),"1 hour"]})]})]}),d.jsxs("div",{className:"flex justify-end gap-4",children:[d.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:l,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 ${l?"opacity-50 cursor-not-allowed":""}`,children:l?"Saving...":"Save"})]})]})]})}):null}function pk({isOpen:t,onClose:e,court:n}){const[i,s]=z.useState(new Date),[r,a]=z.useState([]),[l,u]=z.useState(!0),[h,m]=z.useState(""),[g,y]=z.useState(!1),[_,C]=z.useState(!1);z.useEffect(()=>{t&&n&&O()},[t,n,i]);const O=async()=>{try{u(!0);const T=i.toLocaleDateString("en-CA"),b=Ht(Le,"bookings"),I=ts(b,En("courtId","==",n.id),En("date","==",T)),k=(await ii(I)).docs.map(w=>({id:w.id,...w.data()}));a(k),m("")}catch(T){console.error("Error fetching bookings:",T),m("Failed to fetch bookings. Please try again.")}finally{u(!1)}},j=T=>{const b=new Date(i);b.setDate(b.getDate()+T),b.setHours(0,0,0,0),s(b)},S=T=>T;return t?d.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[d.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("h2",{className:"text-2xl font-bold",children:"Court Bookings"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>j(-1),className:"p-1 hover:bg-gray-100 rounded-full",children:d.jsx(xc,{size:24})}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ac,{size:20}),d.jsx("span",{className:"font-medium",children:i.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),d.jsx("button",{onClick:()=>j(1),className:"p-1 hover:bg-gray-100 rounded-full",children:d.jsx(Rc,{size:24})})]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("button",{onClick:()=>C(!0),className:"flex items-center gap-2 px-4 py-2 text-yellow-700 bg-yellow-100 hover:bg-yellow-200 rounded-md transition-colors duration-200",children:[d.jsx(dT,{size:18}),"Inactive Hours"]}),d.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Close"})]})]}),h&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:h}),l?d.jsx("div",{className:"text-center py-8",children:"Loading bookings..."}):r.length===0?d.jsx("div",{className:"text-center py-8 text-gray-500",children:"No bookings for this date"}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Slot"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coach"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(T=>d.jsxs("tr",{children:[d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[S(T.timeSlot.startTime)," - ",S(T.timeSlot.endTime)]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T.coachId||"No coach assigned"}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",T.amount]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:d.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${T.status==="confirmed"?"bg-green-100 text-green-800":T.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:T.status.charAt(0).toUpperCase()+T.status.slice(1)})})]},T.id))})]})})]}),d.jsx("div",{className:"fixed bottom-8 right-8",children:d.jsx("button",{onClick:()=>y(!0),className:"flex items-center justify-center w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-colors duration-200",title:"Add Booking",children:d.jsx(Cc,{size:24})})}),d.jsx(Kw,{isOpen:g,onClose:()=>y(!1),onSave:()=>{y(!1),O()},court:n}),d.jsx(Qw,{isOpen:_,onClose:()=>C(!1),onSave:()=>{C(!1),O()},courts:[n]})]}):null}function gk({isOpen:t,onClose:e,stadiumId:n}){const[i,s]=z.useState([]),[r,a]=z.useState(!0),[l,u]=z.useState(""),[h,m]=z.useState(!1),[g,y]=z.useState(!1),[_,C]=z.useState(null),[O,j]=z.useState(null);z.useEffect(()=>{t&&n&&S()},[t,n]);const S=async()=>{try{a(!0);const k=Ht(Le,"courts"),w=ts(k,En("stadiumId","==",n)),E=(await ii(w)).docs.map(A=>({id:A.id,...A.data()}));s(E),u("")}catch(k){console.error("Error fetching courts:",k),u("Failed to fetch courts. Please try again.")}finally{a(!1)}},T=k=>{C(k),m(!0)},b=k=>{C(k),y(!0)},I=()=>{C(null),m(!0)},M=async k=>{try{a(!0);const w=An(Le,"courts",k.id);await BN(w),s(p=>p.filter(E=>E.id!==k.id)),j(null),u("")}catch(w){console.error("Error deleting court:",w),u("Failed to delete court. Please try again.")}finally{a(!1)}};return t?d.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[d.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold",children:"Court Management"}),d.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[d.jsx(Cc,{size:20}),"Add New Court"]})]}),l&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:l}),r?d.jsx("div",{className:"text-center py-8",children:"Loading courts..."}):i.length===0?d.jsx("div",{className:"text-center py-8 text-gray-500",children:"No courts found"}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Court Number"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sport"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Court Type"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price/Hour"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timing"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(k=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.courtNumber}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.sport}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.courtType}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",k.pricePerHour]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[k.openingTime," - ",k.closingTime]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("button",{onClick:()=>b(k),className:"text-blue-600 hover:text-blue-900",title:"View Bookings",children:d.jsx(Ac,{size:18})}),d.jsx("button",{onClick:()=>T(k),className:"text-blue-600 hover:text-blue-900",title:"Edit Court",children:d.jsx(mT,{size:18})}),d.jsx("button",{onClick:()=>j(k),className:"text-red-600 hover:text-red-900",title:"Delete Court",children:d.jsx(F1,{size:18})})]})})]},k.id))})]})}),d.jsx("div",{className:"mt-6 flex justify-end",children:d.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Close"})})]}),O&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Delete Court"}),d.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to delete Court ",O.courtNumber,"? This action cannot be undone."]}),d.jsxs("div",{className:"flex justify-end gap-4",children:[d.jsx("button",{onClick:()=>j(null),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Cancel"}),d.jsx("button",{onClick:()=>M(O),disabled:r,className:`px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 ${r?"opacity-50 cursor-not-allowed":""}`,children:r?"Deleting...":"Delete"})]})]})}),d.jsx(mk,{isOpen:h,onClose:()=>{m(!1),C(null)},onSave:()=>{m(!1),C(null),S()},stadiumId:n,court:_}),d.jsx(pk,{isOpen:g,onClose:()=>{y(!1),C(null)},court:_})]}):null}function yk({isOpen:t,onClose:e}){const[n,i]=z.useState("trainees"),[s,r]=z.useState(1),a=10,l=[{id:1,name:"John Smith",coach:"Mike Johnson",court:"Court 1",sport:"Badminton",timing:"06:00 AM - 07:00 AM",subscriptionStart:"2024-03-01",subscriptionEnd:"2024-04-01",amountPaid:5e3,isActive:!0},{id:2,name:"Emma Wilson",coach:"Sarah Davis",court:"Court 3",sport:"Tennis",timing:"07:00 AM - 08:00 AM",subscriptionStart:"2024-02-15",subscriptionEnd:"2024-03-15",amountPaid:6e3,isActive:!0},{id:3,name:"Michael Brown",coach:"David Wilson",court:"Court 2",sport:"Badminton",timing:"08:00 AM - 09:00 AM",subscriptionStart:"2024-01-01",subscriptionEnd:"2024-02-01",amountPaid:5500,isActive:!1},{id:4,name:"Michael Brown",coach:"David Wilson",court:"Court 2",sport:"Badminton",timing:"08:00 AM - 09:00 AM",subscriptionStart:"2024-01-01",subscriptionEnd:"2024-02-01",amountPaid:5500,isActive:!1},{id:5,name:"Michael Brown",coach:"David Wilson",court:"Court 2",sport:"Badminton",timing:"08:00 AM - 09:00 AM",subscriptionStart:"2024-01-01",subscriptionEnd:"2024-02-01",amountPaid:5500,isActive:!1},{id:6,name:"Michael Brown",coach:"David Wilson",court:"Court 2",sport:"Badminton",timing:"08:00 AM - 09:00 AM",subscriptionStart:"2024-01-01",subscriptionEnd:"2024-02-01",amountPaid:5500,isActive:!1},{id:7,name:"Michael Brown",coach:"David Wilson",court:"Court 2",sport:"Badminton",timing:"08:00 AM - 09:00 AM",subscriptionStart:"2024-01-01",subscriptionEnd:"2024-02-01",amountPaid:5500,isActive:!1},{id:8,name:"Michael Brown",coach:"David Wilson",court:"Court 2",sport:"Badminton",timing:"08:00 AM - 09:00 AM",subscriptionStart:"2024-01-01",subscriptionEnd:"2024-02-01",amountPaid:5500,isActive:!1},{id:9,name:"Michael Brown",coach:"David Wilson",court:"Court 2",sport:"Badminton",timing:"08:00 AM - 09:00 AM",subscriptionStart:"2024-01-01",subscriptionEnd:"2024-02-01",amountPaid:5500,isActive:!1},{id:10,name:"Michael Brown",coach:"David Wilson",court:"Court 2",sport:"Badminton",timing:"08:00 AM - 09:00 AM",subscriptionStart:"2024-01-01",subscriptionEnd:"2024-02-01",amountPaid:5500,isActive:!1},{id:20,name:"Sophie Turner",coach:"James Miller",court:"Court 4",sport:"Tennis",timing:"05:00 PM - 06:00 PM",subscriptionStart:"2024-03-10",subscriptionEnd:"2024-04-10",amountPaid:5800,isActive:!0}],u=[{id:1,name:"Alex Johnson",court:"Court 1",timing:"09:00 AM - 10:00 AM",date:"2024-03-15",bookingAmount:800,status:"Active"},{id:2,name:"Lisa Chen",court:"Court 2",timing:"10:00 AM - 11:00 AM",date:"2024-03-14",bookingAmount:900,status:"Expired"}],h=Math.ceil((n==="trainees"?l.length:u.length)/a),m=()=>{const g=n==="trainees"?l:u,y=(s-1)*a;return g.slice(y,y+a)};return t?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold",children:"Users List"}),d.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Close"})]}),d.jsxs("div",{className:"flex border-b mb-6",children:[d.jsx("button",{className:`px-6 py-3 text-sm font-medium ${n==="trainees"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>{i("trainees"),r(1)},children:"Trainees"}),d.jsx("button",{className:`px-6 py-3 text-sm font-medium ${n==="bookings"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>{i("bookings"),r(1)},children:"Booking Users"})]}),d.jsx("div",{className:"flex-1 overflow-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsx("tr",{children:n==="trainees"?d.jsxs(d.Fragment,{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coach"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Court & Sport"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timing"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]}):d.jsxs(d.Fragment,{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Court"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m().map(g=>d.jsx("tr",{children:n==="trainees"?d.jsxs(d.Fragment,{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.name}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.coach}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[g.court," - ",g.sport]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.timing}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[new Date(g.subscriptionStart).toLocaleDateString()," -",new Date(g.subscriptionEnd).toLocaleDateString()]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",g.amountPaid]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.isActive?"Active":"Expired"})})]}):d.jsxs(d.Fragment,{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.name}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:g.court}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[new Date(g.date).toLocaleDateString()," ",g.timing]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",g.bookingAmount]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${g.status==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g.status})})]})},g.id))})]})}),d.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 px-4 py-3 sm:px-6 mt-4",children:[d.jsx("div",{className:"flex items-center",children:d.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",s," of ",h]})}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:()=>r(g=>Math.max(g-1,1)),disabled:s===1,className:"p-2 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:d.jsx(xc,{size:20})}),d.jsx("button",{onClick:()=>r(g=>Math.min(g+1,h)),disabled:s===h,className:"p-2 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:d.jsx(Rc,{size:20})})]})]})]})}):null}function _k({isOpen:t,onClose:e}){const[n,i]=z.useState("bookings"),[s,r]=z.useState(1),[a,l]=z.useState([]),[u,h]=z.useState(!0),[m,g]=z.useState(""),[y,_]=z.useState(!0),C=10,O=[{id:1,name:"John Smith",coach:"Mike Johnson",courtNumber:"Court 1",subscriptionStart:"2024-03-01",subscriptionEnd:"2024-03-20",amountPaid:5e3,status:"Expiring Soon"},{id:2,name:"Emma Wilson",coach:"Sarah Davis",courtNumber:"Court 3",subscriptionStart:"2024-02-15",subscriptionEnd:"2024-03-15",amountPaid:6e3,status:"Expired"},{id:3,name:"Michael Brown",coach:"David Wilson",courtNumber:"Court 2",subscriptionStart:"2024-03-10",subscriptionEnd:"2024-04-10",amountPaid:5500,status:"Expiring Soon"},{id:4,name:"Sarah Johnson",coach:"Mike Johnson",courtNumber:"Court 1",subscriptionStart:"2024-02-01",subscriptionEnd:"2024-03-01",amountPaid:4500,status:"Expired"},{id:5,name:"James Williams",coach:"Sarah Davis",courtNumber:"Court 4",subscriptionStart:"2024-03-15",subscriptionEnd:"2024-04-15",amountPaid:5200,status:"Expiring Soon"}];z.useEffect(()=>{t&&n==="bookings"&&b()},[t,n]);const j=k=>{const w=new Date(k.date),p=new Date;w.setHours(0,0,0,0);const E=new Date(p);return E.setHours(0,0,0,0),w<E?"expired":k.status||"pending"},S=k=>{switch(k.toLowerCase()){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-orange-100 text-orange-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},T=()=>{_(!y),l(k=>[...k].reverse())},b=async()=>{try{h(!0),g("");const k=Ht(Le,"bookings"),p=(await ii(k)).docs.map(F=>({id:F.id,...F.data()})),E=new Date,A=new Date(E);A.setDate(E.getDate()-10);const R=new Date(E);R.setDate(E.getDate()+10);const N=A.toISOString().split("T")[0],x=R.toISOString().split("T")[0],ye=p.filter(F=>{if(!F.date)return!1;const Q=new Date(F.date).toISOString().split("T")[0];return Q>=N&&Q<=x});if(ye.length===0){l([]),h(!1);return}const Ce=[...new Set(ye.map(F=>F.userId).filter(Boolean))],q=[...new Set(ye.map(F=>F.courtId).filter(Boolean))],X=Ce.length>0?await Promise.all(Ce.map(F=>Mo(An(Le,"users",F)))):[],$=q.length>0?await Promise.all(q.map(F=>Mo(An(Le,"courts",F)))):[],me=new Map(X.filter(F=>F.exists()).map(F=>[F.id,F.data().name])),H=new Map($.filter(F=>F.exists()).map(F=>[F.id,F.data().courtNumber])),te=ye.map(F=>({...F,userName:F.userId&&me.get(F.userId)||"Manager",courtNumber:F.courtId&&H.get(F.courtId)||"Unknown Court",status:j(F)}));te.sort((F,Q)=>{const pe=new Date(F.date),Me=new Date(Q.date);return y?pe-Me:Me-pe}),l(te)}catch(k){console.error("Error fetching bookings:",k),g("Failed to fetch bookings. Please try again.")}finally{h(!1)}},I=()=>{const k=n==="bookings"?a:O,w=(s-1)*C;return k.slice(w,w+C)},M=Math.ceil((n==="bookings"?a.length:O.length)/C);return t?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold",children:"Expiries & Bookings"}),d.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-md",children:"Close"})]}),d.jsxs("div",{className:"flex border-b mb-6",children:[d.jsx("button",{className:`px-6 py-3 text-sm font-medium ${n==="bookings"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>{i("bookings"),r(1)},children:"Recent Bookings"}),d.jsx("button",{className:`px-6 py-3 text-sm font-medium ${n==="expiring"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"}`,onClick:()=>{i("expiring"),r(1)},children:"Expiring Subscriptions"})]}),m&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:m}),u?d.jsx("div",{className:"flex-1 flex items-center justify-center",children:d.jsx("p",{className:"text-gray-500",children:"Loading..."})}):d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"flex-1 overflow-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsx("tr",{children:n==="bookings"?d.jsxs(d.Fragment,{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Court"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider group",children:d.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:T,children:["Date",d.jsx(S1,{size:14,className:"text-gray-400"})]})}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]}):d.jsxs(d.Fragment,{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coach"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Court"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subscription Period"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I().map(k=>d.jsx("tr",{children:n==="bookings"?d.jsxs(d.Fragment,{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.userName}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["Court ",k.courtNumber]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(k.date).toLocaleDateString()}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[k.timeSlot.startTime," - ",k.timeSlot.endTime]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",k.amount]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S(k.status)}`,children:k.status.charAt(0).toUpperCase()+k.status.slice(1)})})]}):d.jsxs(d.Fragment,{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.name}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.coach}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k.courtNumber}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[new Date(k.subscriptionStart).toLocaleDateString()," -",new Date(k.subscriptionEnd).toLocaleDateString()]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",k.amountPaid]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${k.status==="Expiring Soon"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:k.status})})]})},k.id))})]})}),d.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 px-4 py-3 sm:px-6 mt-4",children:[d.jsx("div",{className:"flex items-center",children:d.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",s," of ",M]})}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:()=>r(k=>Math.max(k-1,1)),disabled:s===1,className:"p-2 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:d.jsx(xc,{size:20})}),d.jsx("button",{onClick:()=>r(k=>Math.min(k+1,M)),disabled:s===M,className:"p-2 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:d.jsx(Rc,{size:20})})]})]})]})]})}):null}function vk({isOpen:t,onClose:e,stadiumId:n}){const[i,s]=z.useState([]),[r,a]=z.useState(!0),[l,u]=z.useState(""),[h,m]=z.useState(!1),[g,y]=z.useState(!1),[_,C]=z.useState({name:"",courtId:"",timings:{start:"",end:""},startDate:"",subscriptionPeriod:"monthly",experience:"",specialization:"",sessionPrice:""}),[O,j]=z.useState([]),S=[{value:"monthly",label:"Monthly",months:1},{value:"quarterly",label:"Quarterly",months:3},{value:"half_year",label:"Half Year",months:6},{value:"annually",label:"Annually",months:12}],T=p=>{const[E,A]=p.split(":"),R=parseInt(E,10),N=R>=12?"PM":"AM";return`${(R===0?12:R>12?R-12:R).toString().padStart(2,"0")}:${A} ${N}`},b=()=>{const p=[];for(let E=0;E<24;E++)for(let A of["00","30"]){const R=`${E.toString().padStart(2,"0")}:${A}`;p.push(T(R))}return p};z.useEffect(()=>{t&&n&&(M(),I())},[t,n]);const I=async()=>{try{const p=Ht(Le,"courts"),E=ts(p,En("stadiumId","==",n)),R=(await ii(E)).docs.map(N=>({id:N.id,...N.data()}));j(R)}catch(p){console.error("Error fetching courts:",p)}},M=async()=>{try{a(!0);const p=Ht(Le,"coaches"),E=ts(p,En("stadiumId","==",n)),A=await ii(E),R=await Promise.all(A.docs.map(async N=>{const x=N.data();let ye={courtNumber:"Unknown Court"};if(x.courtId){const F=An(Le,"courts",x.courtId),Q=await Mo(F);Q.exists()&&(ye=Q.data())}const Ce=new Date(x.startDate||new Date),q=new Date,X=(q.getFullYear()-Ce.getFullYear())*12+q.getMonth()-Ce.getMonth(),$=new Date(Ce);$.setMonth(Ce.getMonth()+(Math.floor(X/3)+1)*3);const me=Math.ceil(($-q)/(1e3*60*60*24)),H=x.timings||{start:"N/A",end:"N/A"},te={start:H.start!=="N/A"?H.start:"N/A",end:H.end!=="N/A"?H.end:"N/A"};return{id:N.id,...x,courtNumber:ye.courtNumber,daysLeftForRenewal:me,timings:te}}));s(R)}catch(p){console.error("Error fetching coaches:",p),u("Failed to fetch coaches")}finally{a(!1)}},k=async p=>{p.preventDefault();try{a(!0);const E=Ht(Le,"coaches"),A=new Date(_.startDate),R=S.find(x=>x.value===_.subscriptionPeriod),N=new Date(A);N.setMonth(A.getMonth()+R.months),await hp(E,{..._,stadiumId:n,startDate:A.toISOString(),endDate:N.toISOString(),createdAt:new Date().toISOString(),members:0,timings:{start:_.timings.start,end:_.timings.end}}),y(!0),setTimeout(()=>{y(!1),m(!1),C({name:"",courtId:"",timings:{start:"",end:""},startDate:"",subscriptionPeriod:"monthly",experience:"",specialization:"",sessionPrice:""})},2e3),M()}catch(E){console.error("Error adding coach:",E),u("Failed to add coach")}finally{a(!1)}};if(!t)return null;const w=b();return d.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:[d.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-6xl w-full mx-4 max-h-[90vh] overflow-hidden flex flex-col",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsx("h2",{className:"text-2xl font-bold",children:"Coaches"}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center gap-2",children:[d.jsx(Cc,{size:20}),"Add Coach"]}),d.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full",children:d.jsx(X1,{size:20})})]})]}),l&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:l}),h?d.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg mb-6",children:[d.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Coach"}),d.jsxs("form",{onSubmit:k,className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),d.jsx("input",{type:"text",required:!0,value:_.name,onChange:p=>C(E=>({...E,name:p.target.value})),className:"w-full p-2 border rounded-md"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Court"}),d.jsxs("select",{required:!0,value:_.courtId,onChange:p=>C(E=>({...E,courtId:p.target.value})),className:"w-full p-2 border rounded-md",children:[d.jsx("option",{value:"",children:"Select Court"}),O.map(p=>d.jsxs("option",{value:p.id,children:[p.sport," - Court ",p.courtNumber]},p.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),d.jsxs("select",{required:!0,value:_.timings.start,onChange:p=>C(E=>({...E,timings:{...E.timings,start:p.target.value}})),className:"w-full p-2 border rounded-md",children:[d.jsx("option",{value:"",children:"Select Start Time"}),w.map(p=>d.jsx("option",{value:p,children:p},p))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),d.jsxs("select",{required:!0,value:_.timings.end,onChange:p=>C(E=>({...E,timings:{...E.timings,end:p.target.value}})),className:"w-full p-2 border rounded-md",children:[d.jsx("option",{value:"",children:"Select End Time"}),w.map(p=>d.jsx("option",{value:p,children:p},p))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),d.jsx("input",{type:"date",required:!0,value:_.startDate,onChange:p=>C(E=>({...E,startDate:p.target.value})),className:"w-full p-2 border rounded-md"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subscription Period"}),d.jsx("select",{required:!0,value:_.subscriptionPeriod,onChange:p=>C(E=>({...E,subscriptionPeriod:p.target.value})),className:"w-full p-2 border rounded-md",children:S.map(p=>d.jsx("option",{value:p.value,children:p.label},p.value))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Experience (years)"}),d.jsx("input",{type:"number",required:!0,min:"0",value:_.experience,onChange:p=>C(E=>({...E,experience:p.target.value})),className:"w-full p-2 border rounded-md"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specialization"}),d.jsx("input",{type:"text",required:!0,value:_.specialization,onChange:p=>C(E=>({...E,specialization:p.target.value})),className:"w-full p-2 border rounded-md"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Per Session Price (₹)"}),d.jsx("input",{type:"number",required:!0,min:"0",value:_.sessionPrice,onChange:p=>C(E=>({...E,sessionPrice:p.target.value})),className:"w-full p-2 border rounded-md"})]}),d.jsxs("div",{className:"col-span-2 flex justify-end gap-4 mt-4",children:[d.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-md",children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Add Coach"})]})]})]}):d.jsx("div",{className:"flex-1 overflow-auto",children:r?d.jsx("div",{className:"flex items-center justify-center h-full",children:d.jsx("p",{className:"text-gray-500",children:"Loading..."})}):d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Court"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timings"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Left"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Members"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Experience"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price/Session"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(p=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.name||"N/A"}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[p.sport?`${p.sport} - `:"","Court ",p.courtNumber]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[p.timings.start," - ",p.timings.end]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(p.startDate||new Date).toLocaleDateString()}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("span",{className:`px-2 py-1 text-xs rounded-full ${p.daysLeftForRenewal<=7?"bg-red-100 text-red-800":p.daysLeftForRenewal<=15?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[p.daysLeftForRenewal," days"]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx(Cm,{size:16,className:"text-gray-400"}),p.members||0]})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[p.experience||0," years"]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",p.sessionPrice||0]})]},p.id))})]})})]}),d.jsx(wp,{isVisible:g,onAnimationComplete:()=>y(!1)})]})}const Ek=()=>{const{stadiumData:t,managerData:e}=as(),[n,i]=z.useState(!1),[s,r]=z.useState(!1),[a,l]=z.useState(!1),[u,h]=z.useState(!1),[m,g]=z.useState(!1),[y,_]=z.useState(0),[C,O]=z.useState(""),j=["Flair Gymnastics Club","Infinito Arena","Siddhant's Badminton Academy","MPP Sports Park","Dwarkadhish Gymnastics Club"];z.useEffect(()=>{e!=null&&e.stadiumID&&S()},[e==null?void 0:e.stadiumID]);const S=async()=>{try{const b=Ht(Le,"courts"),I=ts(b,En("stadiumId","==",e.stadiumID)),M=await ii(I);_(M.size)}catch(b){console.error("Error fetching court count:",b)}},T=[{title:"Profile",icon:mT,color:"bg-blue-500",customContent:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(L1,{className:"text-gray-600",size:18}),d.jsx("span",{className:"text-sm text-gray-600",children:(t==null?void 0:t.address)||"No address"})]}),(t==null?void 0:t.addressLink)&&d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(O1,{className:"text-gray-600",size:18}),d.jsx("a",{href:t.addressLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline",children:"View on Map"})]}),(t==null?void 0:t.amenities)&&t.amenities.length>0&&d.jsxs("div",{className:"flex items-start gap-2",children:[d.jsx(M1,{className:"text-gray-600 mt-1",size:18}),d.jsx("div",{className:"flex flex-wrap gap-2",children:t.amenities.map((b,I)=>d.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-800",children:b},I))})]})]})},{title:"Users List",icon:Cm,count:"1,234",description:"Total registered users",color:"bg-blue-500",onClick:()=>l(!0)},{title:"Expiries/Bookings",icon:fT,count:"Recent",description:"View expiring & recent bookings",color:"bg-green-500",onClick:()=>h(!0)},{title:"Coaches",icon:pT,count:"42",description:"Active coaches",color:"bg-purple-500",onClick:()=>g(!0)},{title:"Court Details",icon:Ac,count:y.toString(),description:"Available courts",color:"bg-yellow-500",onClick:()=>r(!0)},{title:"Revenue",icon:hT,count:"$45,678",description:"Total revenue",color:"bg-red-500"}];return d.jsxs("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:[d.jsx("div",{className:"flex justify-end mb-6",children:d.jsx("div",{className:"relative w-64",children:d.jsxs("select",{value:C,onChange:b=>O(b.target.value),className:"block w-full px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[d.jsx("option",{value:"",children:"Select Venue"}),j.map((b,I)=>d.jsx("option",{value:b,children:b},I))]})})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map((b,I)=>d.jsxs("div",{className:`bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow ${b.onClick?"cursor-pointer":""}`,onClick:b.onClick,children:[d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:b.title}),d.jsx("div",{className:`p-3 rounded-full ${b.color} text-white ${b.onClick?"cursor-pointer hover:opacity-90 transition-opacity":""}`,onClick:M=>{M.stopPropagation(),b.title==="Profile"&&i(!0)},children:d.jsx(b.icon,{size:24})})]}),b.customContent?b.customContent:d.jsxs("div",{children:[d.jsx("p",{className:"text-2xl font-bold",children:b.count}),d.jsx("p",{className:"text-gray-500 text-sm",children:b.description})]})]}),d.jsx("div",{className:`h-1 ${b.color}`})]},I))}),d.jsx(fk,{isOpen:n,onClose:()=>i(!1)}),d.jsx(gk,{isOpen:s,onClose:()=>r(!1),stadiumId:e==null?void 0:e.stadiumID}),d.jsx(yk,{isOpen:a,onClose:()=>l(!1)}),d.jsx(_k,{isOpen:u,onClose:()=>h(!1)}),d.jsx(vk,{isOpen:m,onClose:()=>g(!1),stadiumId:e==null?void 0:e.stadiumID})]})};function Tk(){const{signInWithGoogle:t,signInWithEmail:e,signUpWithEmail:n,resetPassword:i,error:s}=as(),[r,a]=z.useState(""),[l,u]=z.useState(""),[h,m]=z.useState(!1),[g,y]=z.useState(!1),[_,C]=z.useState(""),O=async()=>{try{await t()}catch(T){C(T.message)}},j=async T=>{T.preventDefault();try{h?await n(r,l):await e(r,l)}catch(b){C(b.message)}},S=async T=>{T.preventDefault();try{await i(r),C("Password reset email sent! Check your inbox."),y(!1)}catch(b){C(b.message)}};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:[d.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:g?"Reset Password":h?"Create Account":"Welcome Back"}),_&&d.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-lg",children:_}),g?d.jsxs("form",{onSubmit:S,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{type:"email",value:r,onChange:T=>a(T.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),d.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200",children:"Send Reset Link"}),d.jsx("button",{type:"button",onClick:()=>y(!1),className:"w-full text-gray-600 py-2 px-4 rounded-lg hover:bg-gray-100 transition duration-200",children:"Back to Login"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("form",{onSubmit:j,className:"space-y-4 mb-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{type:"email",value:r,onChange:T=>a(T.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),d.jsx("input",{type:"password",value:l,onChange:T=>u(T.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),!h&&d.jsx("button",{type:"button",onClick:()=>y(!0),className:"text-sm text-blue-600 hover:text-blue-800",children:"Forgot Password?"}),d.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200",children:h?"Sign Up":"Sign In"})]}),d.jsxs("div",{className:"relative my-6",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-300"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),d.jsxs("button",{onClick:O,className:"w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 transition duration-200 flex items-center justify-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:d.jsx("path",{fill:"currentColor",d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1Z"})}),"Continue with Google"]}),d.jsxs("p",{className:"mt-4 text-center text-sm text-gray-600",children:[h?"Already have an account?":"Don't have an account?"," ",d.jsx("button",{onClick:()=>m(!h),className:"text-blue-600 hover:text-blue-800 font-medium",children:h?"Sign In":"Sign Up"})]})]})]})})}function bk(){const[t,e]=z.useState(!0),{user:n}=as(),i=()=>{e(!t)};return n?d.jsxs("div",{className:"flex h-screen bg-gray-100",children:[d.jsx(hk,{isOpen:t,toggleSidebar:i}),d.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[d.jsx(dk,{toggleSidebar:i}),d.jsx(Ek,{})]})]}):d.jsx(Tk,{})}function wk(){return d.jsx(ck,{children:d.jsx(bk,{})})}v1.createRoot(document.getElementById("root")).render(d.jsx(z.StrictMode,{children:d.jsx(wk,{})}));
